<div class="print-container max-w-3xl mx-auto bg-white shadow-lg rounded-lg overflow-hidden my-8 print:shadow-none print:max-w-none print:w-full print:m-0 print:rounded-none text-gray-800">
    @if (loading()) {
    <div class="p-8 text-center">Cargando...</div>
    } @else if (invoice()) {
    <div class="p-8">
        <!-- Header -->
        <div class="flex justify-between items-start mb-8">
            <div>
                <h1 class="text-3xl font-bold text-gray-800">Factura</h1>
                <p class="text-gray-500 mt-1">#{{ invoice().invoice_number || 'Borrador' }}</p>
            </div>
            <div class="text-right">
                @if (company()?.logo_url) {
                <img [src]="company().logo_url" alt="Logo" class="h-16 mb-2 ml-auto object-contain">
                }
                <div class="font-bold text-xl text-indigo-600">{{ company()?.name || 'Arecofix' }}</div>
                <p class="text-sm text-gray-500">{{ company()?.location || 'Servicios Integrales' }}</p>
                <p class="text-sm text-gray-500">{{ company()?.address }}</p>
                <p class="text-sm text-gray-500">{{ company()?.phone }}</p>
                <p class="text-sm text-gray-500">{{ company()?.email }}</p>
                @if (company()?.ruc) {
                <p class="text-sm text-gray-500">CUIT: {{ company()?.ruc }}</p>
                }
            </div>
        </div>

        <!-- Info -->
        <div class="grid grid-cols-2 gap-8 mb-8">
            <div>
                <h3 class="font-bold text-gray-700 mb-2">Facturar a:</h3>
                <p>{{ invoice().customer_name || 'Consumidor Final' }}</p>
                <p class="text-sm text-gray-500">{{ invoice().customer_address }}</p>
                <p class="text-sm text-gray-500">{{ invoice().customer_dni_cuit }}</p>
            </div>
            <div class="text-right">
                <h3 class="font-bold text-gray-700 mb-2">Detalles:</h3>
                <p>Fecha: {{ invoice().issued_at | date:'shortDate' }}</p>
                <p>Tipo: {{ invoice().type }}</p>
            </div>
        </div>

        <!-- Items -->
        <table class="w-full mb-8">
            <thead>
                <tr class="border-b-2 border-gray-200 text-gray-800">
                    <th class="text-left py-3">Descripci√≥n</th>
                    <th class="text-center py-3">Cant.</th>
                    <th class="text-right py-3">Precio Unit.</th>
                    <th class="text-right py-3">Subtotal</th>
                </tr>
            </thead>
            <tbody>
                @for (item of items(); track item.id) {
                <tr class="border-b border-gray-100">
                    <td class="py-3">{{ item.products?.name || 'Producto eliminado' }}</td>
                    <td class="text-center py-3">{{ item.quantity }}</td>
                    <td class="text-right py-3">${{ item.unit_price }}</td>
                    <td class="text-right py-3">${{ item.subtotal }}</td>
                </tr>
                }
            </tbody>
            <tfoot>
                <tr>
                    <td colspan="3" class="text-right py-4 font-bold">Total</td>
                    <td class="text-right py-4 font-bold text-xl">${{ invoice().total_amount }}</td>
                </tr>
            </tfoot>
        </table>

        <!-- Actions -->
        <div class="flex justify-end gap-4 print:hidden">
            <a routerLink="/admin/invoices" class="btn btn-ghost">Volver</a>
            <button (click)="print()" class="btn btn-primary">
                <i class="fas fa-print mr-2"></i> Imprimir
            </button>
        </div>
    </div>
    } @else {
    <div class="p-8 text-center">Factura no encontrada</div>
    }
</div>