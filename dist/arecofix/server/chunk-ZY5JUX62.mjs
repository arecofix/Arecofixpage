import './polyfills.server.mjs';
import{b as u}from"./chunk-755PCX5U.mjs";import{R as o,W as n}from"./chunk-IUHZUWYM.mjs";import{a as i,b as a}from"./chunk-N7QBYMCK.mjs";var l=class r{auth=n(u);supabase=this.auth.getSupabaseClient();async getPostBySlug(t){let{data:e,error:s}=await this.supabase.from("blog_posts").select("*").eq("slug",t).maybeSingle();if(s)throw console.error("PostService Error:",s),s;return e?this.mapToEntity(e):null}async getRecentPosts(t=5){let{data:e,error:s}=await this.supabase.from("blog_posts").select("*").order("created_at",{ascending:!1}).limit(t);if(s)throw s;return(e||[]).map(c=>this.mapToEntity(c))}mapToEntity(t){let e=t.featured_image||t.image||t.image_url;return a(i({},t),{image:this.getImageUrl(e)})}getImageUrl(t){return t?t.startsWith("http")||t.startsWith("assets/")?t:t.includes("public-assets/")?this.supabase.storage.from("public-assets").getPublicUrl(t.split("public-assets/")[1]).data.publicUrl:this.supabase.storage.from("public-assets").getPublicUrl(t).data.publicUrl:null}static \u0275fac=function(e){return new(e||r)};static \u0275prov=o({token:r,factory:r.\u0275fac,providedIn:"root"})};export{l as a};
