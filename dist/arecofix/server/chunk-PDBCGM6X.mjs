import './polyfills.server.mjs';
import{a as d}from"./chunk-QIQJ6T5Y.mjs";import{a as n}from"./chunk-NDIXGXKX.mjs";import{w as s}from"./chunk-VF3MFHMJ.mjs";import{R as a,W as r,ma as f,oa as v,xa as c}from"./chunk-PUXVFRR7.mjs";var m=class o{logger=r(n);toastService=r(d);platformId=r(c);favorites=f([]);constructor(){if(s(this.platformId)){let t=localStorage.getItem("favorites");if(t)try{this.favorites.set(JSON.parse(t))}catch(e){console.error("Error parsing favorites",e),this.favorites.set([])}}v(()=>{let t=this.favorites();s(this.platformId)&&localStorage.setItem("favorites",JSON.stringify(t))})}toggleFavorite(t){this.isFavorite(t.id)?this.removeFavorite(t.id):this.addFavorite(t)}addFavorite(t){this.favorites.update(e=>e.some(i=>i.id===t.id)?e:[...e,t]),this.logger.debug("Product added to favorites",{productName:t.name}),this.toastService.show("Agregado a favoritos","success")}removeFavorite(t){this.favorites.update(e=>e.filter(i=>i.id!==t)),this.logger.debug("Product removed from favorites",{productId:t}),this.toastService.show("Eliminado de favoritos","info")}isFavorite(t){return this.favorites().some(e=>e.id===t)}static \u0275fac=function(e){return new(e||o)};static \u0275prov=a({token:o,factory:o.\u0275fac,providedIn:"root"})};export{m as a};
