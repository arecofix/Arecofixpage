{
  "version": 3,
  "sources": ["src/app/admin/repairs/admin-repairs-page.ts", "src/app/admin/repairs/admin-repairs-page.html"],
  "sourcesContent": ["import { Component, inject, OnInit, signal } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { RouterLink } from '@angular/router';\r\nimport { AuthService } from '@app/core/services/auth.service';\r\nimport { Repair } from '@app/features/repairs/domain/entities/repair.entity';\r\n\r\n@Component({\r\n  selector: 'app-admin-repairs-page',\r\n  standalone: true,\r\n  imports: [CommonModule, RouterLink],\r\n  templateUrl: './admin-repairs-page.html',\r\n})\r\nexport class AdminRepairsPage implements OnInit {\r\n  private auth = inject(AuthService);\r\n  repairs = signal<Repair[]>([]);\r\n  loading = signal(true);\r\n\r\n  async ngOnInit() {\r\n    await this.loadRepairs();\r\n  }\r\n\r\n  async loadRepairs() {\r\n    this.loading.set(true);\r\n    const supabase = this.auth.getSupabaseClient();\r\n    const { data, error } = await supabase\r\n      .from('repairs')\r\n      .select('*')\r\n      .order('received_at', { ascending: false });\r\n\r\n    if (data) {\r\n      this.repairs.set(data);\r\n    }\r\n    this.loading.set(false);\r\n  }\r\n\r\n  async deleteRepair(id: string) {\r\n    if (!confirm('¿Estás seguro de eliminar este registro de reparación?')) return;\r\n\r\n    const supabase = this.auth.getSupabaseClient();\r\n    const { error } = await supabase.from('repairs').delete().eq('id', id);\r\n\r\n    if (!error) {\r\n      await this.loadRepairs();\r\n    } else {\r\n      alert('Error al eliminar la reparación');\r\n    }\r\n  }\r\n\r\n  getStatusColor(status: string): string {\r\n    switch (status) {\r\n      case 'pending': return 'badge-warning';\r\n      case 'in_progress': return 'badge-info';\r\n      case 'completed': return 'badge-success';\r\n      case 'delivered': return 'badge-primary';\r\n      case 'cancelled': return 'badge-error';\r\n      default: return 'badge-ghost';\r\n    }\r\n  }\r\n\r\n  getStatusLabel(status: string): string {\r\n    switch (status) {\r\n      case 'pending': return 'Pendiente';\r\n      case 'in_progress': return 'En Progreso';\r\n      case 'completed': return 'Completado';\r\n      case 'delivered': return 'Entregado';\r\n      case 'cancelled': return 'Cancelado';\r\n      default: return status;\r\n    }\r\n  }\r\n}\r\n", "<div class=\"flex justify-between items-center mb-6\">\r\n    <h1 class=\"text-2xl font-bold text-gray-800 dark:text-green-400\">Taller / Reparaciones</h1>\r\n    <a routerLink=\"/admin/repairs/new\" class=\"btn btn-primary\">\r\n        <i class=\"fas fa-plus mr-2\"></i> Nueva Reparación\r\n    </a>\r\n</div>\r\n\r\n<div class=\"bg-white rounded-lg shadow overflow-hidden text-gray-800\">\r\n    <div class=\"overflow-x-auto\">\r\n        <table class=\"table w-full\">\r\n            <thead>\r\n                <tr class=\"text-gray-800\">\r\n                    <th>Fecha</th>\r\n                    <th>Cliente</th>\r\n                    <th>Dispositivo</th>\r\n                    <th>Estado</th>\r\n                    <th>Costo Est.</th>\r\n                    <th>Acciones</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                @if (loading()) {\r\n                <tr>\r\n                    <td colspan=\"6\" class=\"text-center py-4\">Cargando...</td>\r\n                </tr>\r\n                } @else if (repairs().length === 0) {\r\n                <tr>\r\n                    <td colspan=\"6\" class=\"text-center py-4\">No hay reparaciones registradas.</td>\r\n                </tr>\r\n                } @else {\r\n                @for (repair of repairs(); track repair.id) {\r\n                <tr class=\"text-gray-800\">\r\n                    <td>{{ repair.received_at | date:'shortDate' }}</td>\r\n                    <td>\r\n                        <div class=\"font-bold\">{{ repair.customer_name }}</div>\r\n                        <div class=\"text-sm opacity-50\">{{ repair.customer_phone }}</div>\r\n                    </td>\r\n                    <td>{{ repair.device_model }}</td>\r\n                    <td>\r\n                        <div class=\"badge\" [ngClass]=\"getStatusColor(repair.status)\">\r\n                            {{ getStatusLabel(repair.status) }}\r\n                        </div>\r\n                    </td>\r\n                    <td>{{ repair.estimated_cost | currency }}</td>\r\n                    <td>\r\n                        <div class=\"flex gap-2\">\r\n                            <a [routerLink]=\"['/admin/repairs', repair.id]\" class=\"btn btn-sm btn-ghost\">\r\n                                <i class=\"fas fa-edit\"></i>\r\n                            </a>\r\n                            <button class=\"btn btn-sm btn-ghost text-error\" (click)=\"deleteRepair(repair.id)\">\r\n                                <i class=\"fas fa-trash\"></i>\r\n                            </button>\r\n                        </div>\r\n                    </td>\r\n                </tr>\r\n                }\r\n                }\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n</div>"],
  "mappings": "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",
  "names": []
}
