import './polyfills.server.mjs';
import{w as r}from"./chunk-R44Y3TM4.mjs";import{R as a,W as d,ma as s,oa as m,xa as n,zc as o}from"./chunk-CUO5BU3F.mjs";var h="arecofix-theme-mode",l=class i{platformId=d(n);mediaQuery=null;mediaListener=null;mode=s(this.loadInitialMode());osDark=s(this.detectOsDark());resolvedTheme=o(()=>{let e=this.mode();return e==="system"?this.osDark()?"dark":"light":e});isDark=o(()=>this.resolvedTheme()==="dark");constructor(){r(this.platformId)&&(this.mediaQuery=window.matchMedia("(prefers-color-scheme: dark)"),this.mediaListener=e=>this.osDark.set(e.matches),this.mediaQuery.addEventListener("change",this.mediaListener)),m(()=>{let e=this.resolvedTheme(),t=this.mode();this.applyTheme(e),this.persistMode(t)})}setMode(e){this.mode.set(e)}toggle(){this.mode.set(this.isDark()?"light":"dark")}cycle(){let e=this.mode(),t=e==="system"?"light":e==="light"?"dark":"system";this.mode.set(t)}loadInitialMode(){if(!r(this.platformId))return"dark";let e=localStorage.getItem(h);return e&&["light","dark","system"].includes(e)?e:"system"}detectOsDark(){return r(this.platformId)?window.matchMedia("(prefers-color-scheme: dark)").matches:!0}applyTheme(e){if(!r(this.platformId))return;let t=document.documentElement;e==="dark"?(t.classList.add("dark"),t.setAttribute("data-theme","dark")):(t.classList.remove("dark"),t.setAttribute("data-theme","light"))}persistMode(e){r(this.platformId)&&localStorage.setItem(h,e)}ngOnDestroy(){this.mediaQuery&&this.mediaListener&&(this.mediaQuery.removeEventListener("change",this.mediaListener),this.mediaQuery=null,this.mediaListener=null)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=a({token:i,factory:i.\u0275fac,providedIn:"root"})};export{l as a};
