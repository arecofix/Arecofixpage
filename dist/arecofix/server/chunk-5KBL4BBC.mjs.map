{
  "version": 3,
  "sources": ["src/app/shared/services/preferences.service.ts"],
  "sourcesContent": ["import { Injectable, inject, PLATFORM_ID } from '@angular/core';\r\nimport { BehaviorSubject } from 'rxjs';\r\nimport { isPlatformBrowser } from '@angular/common';\r\n\r\nexport type Language = 'en' | 'es';\r\nexport type Theme = 'gradient-1' | 'gradient-5'; // Add more as needed\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class PreferencesService {\r\n  private platformId = inject(PLATFORM_ID);\r\n  \r\n  private languageSubject = new BehaviorSubject<Language>('es');\r\n  language$ = this.languageSubject.asObservable();\r\n\r\n  private themeSubject = new BehaviorSubject<string>('gradient-5');\r\n  theme$ = this.themeSubject.asObservable();\r\n\r\n  private fontSizeSubject = new BehaviorSubject<number>(16);\r\n  fontSize$ = this.fontSizeSubject.asObservable();\r\n\r\n  private highContrastSubject = new BehaviorSubject<boolean>(false);\r\n  highContrast$ = this.highContrastSubject.asObservable();\r\n\r\n  private sidebarOpenSubject = new BehaviorSubject<boolean>(false);\r\n  sidebarOpen$ = this.sidebarOpenSubject.asObservable();\r\n\r\n  readonly backgroundOptions = [\r\n    { id: 'gradient-5', name: 'Dark Gray', class: 'bg-gradient-to-br from-gray-900 via-gray-800 to-black', isDark: true },\r\n    { id: 'gradient-1', name: 'Blue Gradient', class: 'bg-gradient-to-br from-blue-900 via-blue-800 to-indigo-900', isDark: true },\r\n    { id: 'light', name: 'Light Mode', class: 'bg-gray-50', isDark: false }\r\n  ];\r\n\r\n  constructor() {\r\n    this.loadPreferences();\r\n  }\r\n\r\n  getBackgroundClass(themeId: string): string {\r\n    const selected = this.backgroundOptions.find(bg => bg.id === themeId);\r\n    return selected?.class || this.backgroundOptions[0].class;\r\n  }\r\n\r\n  toggleSidebar(): void {\r\n    this.sidebarOpenSubject.next(!this.sidebarOpenSubject.value);\r\n  }\r\n\r\n  closeSidebar(): void {\r\n    this.sidebarOpenSubject.next(false);\r\n  }\r\n\r\n  setLanguage(lang: Language): void {\r\n    this.languageSubject.next(lang);\r\n    this.savePreference('portfolio-language', lang);\r\n  }\r\n\r\n  setTheme(themeId: string): void {\r\n    this.themeSubject.next(themeId);\r\n    this.savePreference('portfolio-background', themeId);\r\n    this.applyTheme(themeId);\r\n  }\r\n\r\n  increaseFontSize(): void {\r\n    const current = this.fontSizeSubject.value;\r\n    if (current < 24) {\r\n      const newSize = current + 2;\r\n      this.fontSizeSubject.next(newSize);\r\n      this.savePreference('portfolio-font-size', newSize.toString());\r\n    }\r\n  }\r\n\r\n  decreaseFontSize(): void {\r\n    const current = this.fontSizeSubject.value;\r\n    if (current > 12) {\r\n      const newSize = current - 2;\r\n      this.fontSizeSubject.next(newSize);\r\n      this.savePreference('portfolio-font-size', newSize.toString());\r\n    }\r\n  }\r\n\r\n  toggleHighContrast(): void {\r\n    const newValue = !this.highContrastSubject.value;\r\n    this.highContrastSubject.next(newValue);\r\n    this.savePreference('portfolio-high-contrast', newValue.toString());\r\n    this.applyHighContrast(newValue);\r\n  }\r\n\r\n  getCurrentLanguage(): Language {\r\n    return this.languageSubject.value;\r\n  }\r\n\r\n  getCurrentTheme(): string {\r\n    return this.themeSubject.value;\r\n  }\r\n\r\n  private savePreference(key: string, value: string): void {\r\n    if (isPlatformBrowser(this.platformId)) {\r\n      localStorage.setItem(key, value);\r\n    }\r\n  }\r\n\r\n  private loadPreferences(): void {\r\n    if (!isPlatformBrowser(this.platformId)) {\r\n      return;\r\n    }\r\n\r\n    const savedLanguage = localStorage.getItem('portfolio-language') as Language | null;\r\n    const savedBackground = localStorage.getItem('portfolio-background');\r\n    const savedFontSize = localStorage.getItem('portfolio-font-size');\r\n    const savedContrast = localStorage.getItem('portfolio-high-contrast');\r\n\r\n    if (savedLanguage) {\r\n      this.languageSubject.next(savedLanguage);\r\n    }\r\n    if (savedBackground) {\r\n      this.themeSubject.next(savedBackground);\r\n      this.applyTheme(savedBackground);\r\n    } else {\r\n      // Default to first theme (Dark Gray)\r\n      this.applyTheme(this.backgroundOptions[0].id);\r\n    }\r\n    if (savedFontSize) {\r\n      this.fontSizeSubject.next(parseInt(savedFontSize, 10));\r\n    }\r\n    if (savedContrast) {\r\n      const isHighContrast = savedContrast === 'true';\r\n      this.highContrastSubject.next(isHighContrast);\r\n      this.applyHighContrast(isHighContrast);\r\n    }\r\n  }\r\n\r\n  private applyTheme(themeId: string): void {\r\n    if (!isPlatformBrowser(this.platformId)) {\r\n      return;\r\n    }\r\n\r\n    const theme = this.backgroundOptions.find(t => t.id === themeId) || this.backgroundOptions[0];\r\n    \r\n    // Toggle .dark class for Tailwind @custom-variant\r\n    if (theme.isDark) {\r\n      document.documentElement.classList.add('dark');\r\n    } else {\r\n      document.documentElement.classList.remove('dark');\r\n    }\r\n\r\n    // Set data-theme for DaisyUI (and semantic colors)\r\n    const daisyTheme = theme.isDark ? 'dark' : 'light';\r\n    document.documentElement.setAttribute('data-theme', daisyTheme);\r\n  }\r\n\r\n  private applyHighContrast(isHighContrast: boolean): void {\r\n    if (!isPlatformBrowser(this.platformId)) {\r\n      return;\r\n    }\r\n    \r\n    if (isHighContrast) {\r\n      document.documentElement.classList.add('high-contrast');\r\n    } else {\r\n      document.documentElement.classList.remove('high-contrast');\r\n    }\r\n  }\r\n}\r\n"],
  "mappings": "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",
  "names": []
}
