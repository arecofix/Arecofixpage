{
  "version": 3,
  "sources": ["src/app/admin/users/admin-users-page.ts", "src/app/admin/users/admin-users-page.html"],
  "sourcesContent": ["import { Component, inject, OnInit, signal } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { AuthService } from '@app/core/services/auth.service';\r\nimport { UserProfile } from '@app/features/authentication/domain/entities/user.entity';\r\n\r\n@Component({\r\n    selector: 'app-admin-users-page',\r\n    standalone: true,\r\n    imports: [CommonModule],\r\n    templateUrl: './admin-users-page.html',\r\n})\r\nexport class AdminUsersPage implements OnInit {\r\n    private auth = inject(AuthService);\r\n    users = signal<UserProfile[]>([]);\r\n    loading = signal(true);\r\n\r\n    async ngOnInit() {\r\n        await this.loadUsers();\r\n    }\r\n\r\n    async loadUsers() {\r\n        this.loading.set(true);\r\n        const supabase = this.auth.getSupabaseClient();\r\n        const { data, error } = await supabase\r\n            .from('profiles')\r\n            .select('*')\r\n            .order('created_at', { ascending: false });\r\n\r\n        if (data) {\r\n            this.users.set(data);\r\n        }\r\n        this.loading.set(false);\r\n    }\r\n\r\n    async toggleRole(user: any) {\r\n        // Simple toggle for demo purposes, ideally a modal or select\r\n        const newRole = user.role === 'admin' ? 'user' : 'admin';\r\n        const supabase = this.auth.getSupabaseClient();\r\n        const { error } = await supabase\r\n            .from('profiles')\r\n            .update({ role: newRole })\r\n            .eq('id', user.id);\r\n\r\n        if (!error) {\r\n            await this.loadUsers();\r\n        }\r\n    }\r\n}\r\n", "<div class=\"flex justify-between items-center mb-6\">\r\n    <h1 class=\"text-2xl font-bold text-green-600\">Usuarios</h1>\r\n</div>\r\n\r\n<div class=\"bg-base-100 rounded-lg shadow overflow-hidden text-base-content\">\r\n    <div class=\"overflow-x-auto\">\r\n        <table class=\"table w-full\">\r\n            <thead>\r\n                <tr class=\"text-base-content\">\r\n                    <th>Usuario</th>\r\n                    <th>Rol</th>\r\n                    <th>Fecha Registro</th>\r\n                    <th>Acciones</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                @if (loading()) {\r\n                <tr>\r\n                    <td colspan=\"4\" class=\"text-center py-4\">Cargando...</td>\r\n                </tr>\r\n                } @else if (users().length === 0) {\r\n                <tr>\r\n                    <td colspan=\"4\" class=\"text-center py-4\">No hay usuarios registrados.</td>\r\n                </tr>\r\n                } @else {\r\n                @for (user of users(); track user.id) {\r\n                <tr>\r\n                    <td>\r\n                        <div class=\"flex items-center gap-3\">\r\n                            <div class=\"avatar\">\r\n                                <div class=\"mask mask-squircle w-12 h-12\">\r\n                                    <img [src]=\"user.avatar_url || 'https://ui-avatars.com/api/?name=' + user.first_name + '+' + user.last_name\"\r\n                                        alt=\"Avatar\" />\r\n                                </div>\r\n                            </div>\r\n                            <div>\r\n                                <div class=\"font-bold\">{{ user.first_name }} {{ user.last_name }}</div>\r\n                                <div class=\"text-sm opacity-50\">{{ user.email }}</div>\r\n                            </div>\r\n                        </div>\r\n                    </td>\r\n                    <td>\r\n                        <div class=\"badge\" [class.badge-primary]=\"user.role === 'admin'\"\r\n                            [class.badge-secondary]=\"user.role === 'staff'\" [class.badge-ghost]=\"user.role === 'user'\">\r\n                            {{ user.role | uppercase }}\r\n                        </div>\r\n                    </td>\r\n                    <td>{{ user.created_at | date:'short' }}</td>\r\n                    <td>\r\n                        <!-- <button class=\"btn btn-sm btn-ghost\" (click)=\"toggleRole(user)\">\r\n                  Cambiar Rol\r\n                </button> -->\r\n                    </td>\r\n                </tr>\r\n                }\r\n                }\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n</div>"],
  "mappings": "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",
  "names": []
}
