{
  "version": 3,
  "sources": ["src/app/admin/services/admin-service-form-page.ts", "src/app/admin/services/admin-service-form-page.html"],
  "sourcesContent": ["import { Component, inject, OnInit, signal } from '@angular/core';\r\n\r\nimport { FormsModule } from '@angular/forms';\r\nimport { ActivatedRoute, Router, RouterLink } from '@angular/router';\r\nimport { AuthService } from '@app/core/services/auth.service';\r\nimport { TenantService } from '@app/core/services/tenant.service';\r\n\r\n@Component({\r\n    selector: 'app-admin-service-form-page',\r\n    standalone: true,\r\n    imports: [FormsModule, RouterLink],\r\n    templateUrl: './admin-service-form-page.html',\r\n})\r\nexport class AdminServiceFormPage implements OnInit {\r\n    private route = inject(ActivatedRoute);\r\n    private router = inject(Router);\r\n    private auth = inject(AuthService);\r\n    private tenantService = inject(TenantService);\r\n\r\n    id: string | null = null;\r\n    form = signal({\r\n        name: '',\r\n        description: '',\r\n        price: 0,\r\n        duration_minutes: 60,\r\n        is_active: true\r\n    });\r\n\r\n    loading = signal(true);\r\n    saving = signal(false);\r\n    error = signal<string | null>(null);\r\n\r\n    async ngOnInit() {\r\n        this.id = this.route.snapshot.paramMap.get('id');\r\n        if (this.id) {\r\n            const supabase = this.auth.getSupabaseClient();\r\n            const { data, error } = await supabase.from('services')\r\n                .select('*')\r\n                .eq('tenant_id', this.tenantService.getTenantId())\r\n                .eq('id', this.id)\r\n                .single();\r\n            if (data) {\r\n                this.form.set({\r\n                    name: data.name,\r\n                    description: data.description || '',\r\n                    price: data.price || 0,\r\n                    duration_minutes: data.duration_minutes || 60,\r\n                    is_active: data.is_active\r\n                });\r\n            }\r\n        }\r\n        this.loading.set(false);\r\n    }\r\n\r\n    async save() {\r\n        this.saving.set(true);\r\n        this.error.set(null);\r\n        const supabase = this.auth.getSupabaseClient();\r\n\r\n        const rawForm = this.form();\r\n        const payload = {\r\n            name: rawForm.name,\r\n            description: rawForm.description,\r\n            price: Number(rawForm.price),\r\n            duration_minutes: Number(rawForm.duration_minutes),\r\n            is_active: rawForm.is_active\r\n        };\r\n\r\n        try {\r\n            if (this.id) {\r\n                const { error } = await supabase.from('services')\r\n                    .update(payload)\r\n                    .eq('id', this.id)\r\n                    .eq('tenant_id', this.tenantService.getTenantId());\r\n                if (error) throw error;\r\n            } else {\r\n                const { error } = await supabase.from('services').insert({\r\n                    ...payload,\r\n                    tenant_id: this.tenantService.getTenantId()\r\n                });\r\n                if (error) throw error;\r\n            }\r\n            this.router.navigate(['/admin/services']);\r\n        } catch (e: any) {\r\n            console.error('Error saving service:', e);\r\n            this.error.set(e.message || 'Error al guardar el servicio. Verifica los datos.');\r\n        } finally {\r\n            this.saving.set(false);\r\n        }\r\n    }\r\n}\r\n", "<div class=\"max-w-2xl mx-auto\">\r\n    <div class=\"flex justify-between items-center mb-6\">\r\n        <h1 class=\"text-2xl font-bold text-green-600\">{{ id ? 'Editar' : 'Nuevo' }} Servicio</h1>\r\n        <a routerLink=\"/admin/services\" class=\"btn btn-ghost\">\r\n            <i class=\"fas fa-arrow-left mr-2\"></i> Volver\r\n        </a>\r\n    </div>\r\n\r\n    <div class=\"card bg-base-100 shadow-lg\">\r\n        <div class=\"card-body p-6\">\r\n            @if (loading()) {\r\n            <div class=\"flex justify-center py-12\">\r\n                <span class=\"loading loading-spinner loading-lg text-primary\"></span>\r\n            </div>\r\n            } @else {\r\n            <form (ngSubmit)=\"save()\" class=\"space-y-6\">\r\n                <!-- Name -->\r\n                <div class=\"form-control\">\r\n                    <label class=\"label\">\r\n                        <span class=\"label-text font-medium\">Nombre del Servicio</span>\r\n                    </label>\r\n                    <label class=\"input input-bordered flex items-center gap-2\">\r\n                        <i class=\"fas fa-tag text-gray-400\"></i>\r\n                        <input type=\"text\" [(ngModel)]=\"form().name\" name=\"name\" class=\"grow\" required />\r\n                    </label>\r\n                </div>\r\n\r\n                <!-- Description -->\r\n                <div class=\"form-control\">\r\n                    <label class=\"label\">\r\n                        <span class=\"label-text font-medium\">Descripción</span>\r\n                    </label>\r\n                    <textarea [(ngModel)]=\"form().description\" name=\"description\"\r\n                        class=\"textarea textarea-bordered h-32 leading-relaxed\" \r\n                        placeholder=\"Describe los detalles del servicio...\"></textarea>\r\n                </div>\r\n\r\n                <div class=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                    <!-- Price -->\r\n                    <div class=\"form-control\">\r\n                        <label class=\"label\">\r\n                            <span class=\"label-text font-medium\">Precio</span>\r\n                        </label>\r\n                        <label class=\"input input-bordered flex items-center gap-2\">\r\n                            <i class=\"fas fa-dollar-sign text-gray-400\"></i>\r\n                            <input type=\"number\" [(ngModel)]=\"form().price\" name=\"price\" class=\"grow\" min=\"0\" step=\"0.01\" />\r\n                        </label>\r\n                    </div>\r\n\r\n                    <!-- Duration -->\r\n                    <div class=\"form-control\">\r\n                        <label class=\"label\">\r\n                            <span class=\"label-text font-medium\">Duración (minutos)</span>\r\n                        </label>\r\n                        <label class=\"input input-bordered flex items-center gap-2\">\r\n                            <i class=\"fas fa-clock text-gray-400\"></i>\r\n                            <input type=\"number\" [(ngModel)]=\"form().duration_minutes\" name=\"duration_minutes\" class=\"grow\" min=\"0\" />\r\n                        </label>\r\n                    </div>\r\n                </div>\r\n\r\n                <!-- Is Active -->\r\n                <div class=\"form-control\">\r\n                    <label class=\"label cursor-pointer justify-start gap-4 p-0\">\r\n                        <span class=\"label-text font-medium\">Activo</span>\r\n                        <input type=\"checkbox\" [(ngModel)]=\"form().is_active\" name=\"is_active\"\r\n                            class=\"toggle toggle-primary\" />\r\n                    </label>\r\n                </div>\r\n\r\n                <!-- Error Message -->\r\n                @if (error()) {\r\n                <div class=\"alert alert-error mb-6 shadow-sm\">\r\n                    <i class=\"fas fa-exclamation-circle\"></i>\r\n                    <span>{{ error() }}</span>\r\n                </div>\r\n                }\r\n\r\n                <!-- Actions -->\r\n                <div class=\"flex justify-end gap-4 pt-6 border-t border-base-200\">\r\n                    <a routerLink=\"/admin/services\" class=\"btn btn-ghost\">Cancelar</a>\r\n                    <button type=\"submit\" class=\"btn btn-primary px-8\" [disabled]=\"saving() || !form().name\">\r\n                        @if (saving()) {\r\n                        <span class=\"loading loading-spinner loading-xs\"></span>\r\n                        }\r\n                        Guardar\r\n                    </button>\r\n                </div>\r\n            </form>\r\n            }\r\n        </div>\r\n    </div>\r\n</div>"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACWY,IAAA,yBAAA,GAAA,OAAA,CAAA;AACI,IAAA,oBAAA,GAAA,QAAA,CAAA;AACJ,IAAA,uBAAA;;;;;AA2DI,IAAA,yBAAA,GAAA,OAAA,EAAA;AACI,IAAA,oBAAA,GAAA,KAAA,EAAA;AACA,IAAA,yBAAA,GAAA,MAAA;AAAM,IAAA,iBAAA,CAAA;AAAa,IAAA,uBAAA,EAAO;;;;AAApB,IAAA,oBAAA,CAAA;AAAA,IAAA,4BAAA,OAAA,MAAA,CAAA;;;;;AASF,IAAA,oBAAA,GAAA,QAAA,EAAA;;;;;;AApEZ,IAAA,yBAAA,GAAA,QAAA,EAAA;AAAM,IAAA,qBAAA,YAAA,SAAA,wEAAA;AAAA,MAAA,wBAAA,GAAA;AAAA,YAAA,SAAA,wBAAA;AAAA,aAAA,sBAAY,OAAA,KAAA,CAAM;IAAA,CAAA;AAEpB,IAAA,yBAAA,GAAA,OAAA,EAAA,EAA0B,GAAA,SAAA,EAAA,EACD,GAAA,QAAA,EAAA;AACoB,IAAA,iBAAA,GAAA,qBAAA;AAAmB,IAAA,uBAAA,EAAO;AAEnE,IAAA,yBAAA,GAAA,SAAA,EAAA;AACI,IAAA,oBAAA,GAAA,KAAA,EAAA;AACA,IAAA,yBAAA,GAAA,SAAA,EAAA;AAAmB,IAAA,2BAAA,iBAAA,SAAA,4EAAA,QAAA;AAAA,MAAA,wBAAA,GAAA;AAAA,YAAA,SAAA,wBAAA;AAAA,MAAA,6BAAa,OAAA,KAAA,EAAM,MAAA,MAAA,MAAN,OAAA,KAAA,EAAM,OAAA;AAAA,aAAA,sBAAA,MAAA;IAAA,CAAA;AAAtC,IAAA,uBAAA,EAAiF,EAC7E;AAIZ,IAAA,yBAAA,GAAA,OAAA,EAAA,EAA0B,GAAA,SAAA,EAAA,EACD,IAAA,QAAA,EAAA;AACoB,IAAA,iBAAA,IAAA,gBAAA;AAAW,IAAA,uBAAA,EAAO;AAE3D,IAAA,yBAAA,IAAA,YAAA,EAAA;AAAU,IAAA,2BAAA,iBAAA,SAAA,gFAAA,QAAA;AAAA,MAAA,wBAAA,GAAA;AAAA,YAAA,SAAA,wBAAA;AAAA,MAAA,6BAAa,OAAA,KAAA,EAAM,aAAA,MAAA,MAAN,OAAA,KAAA,EAAM,cAAA;AAAA,aAAA,sBAAA,MAAA;IAAA,CAAA;AAE2B,IAAA,uBAAA,EAAW;AAGvE,IAAA,yBAAA,IAAA,OAAA,EAAA,EAAmD,IAAA,OAAA,EAAA,EAErB,IAAA,SAAA,EAAA,EACD,IAAA,QAAA,EAAA;AACoB,IAAA,iBAAA,IAAA,QAAA;AAAM,IAAA,uBAAA,EAAO;AAEtD,IAAA,yBAAA,IAAA,SAAA,EAAA;AACI,IAAA,oBAAA,IAAA,KAAA,EAAA;AACA,IAAA,yBAAA,IAAA,SAAA,EAAA;AAAqB,IAAA,2BAAA,iBAAA,SAAA,6EAAA,QAAA;AAAA,MAAA,wBAAA,GAAA;AAAA,YAAA,SAAA,wBAAA;AAAA,MAAA,6BAAa,OAAA,KAAA,EAAM,OAAA,MAAA,MAAN,OAAA,KAAA,EAAM,QAAA;AAAA,aAAA,sBAAA,MAAA;IAAA,CAAA;AAAxC,IAAA,uBAAA,EAAgG,EAC5F;AAIZ,IAAA,yBAAA,IAAA,OAAA,EAAA,EAA0B,IAAA,SAAA,EAAA,EACD,IAAA,QAAA,EAAA;AACoB,IAAA,iBAAA,IAAA,uBAAA;AAAkB,IAAA,uBAAA,EAAO;AAElE,IAAA,yBAAA,IAAA,SAAA,EAAA;AACI,IAAA,oBAAA,IAAA,KAAA,EAAA;AACA,IAAA,yBAAA,IAAA,SAAA,EAAA;AAAqB,IAAA,2BAAA,iBAAA,SAAA,6EAAA,QAAA;AAAA,MAAA,wBAAA,GAAA;AAAA,YAAA,SAAA,wBAAA;AAAA,MAAA,6BAAa,OAAA,KAAA,EAAM,kBAAA,MAAA,MAAN,OAAA,KAAA,EAAM,mBAAA;AAAA,aAAA,sBAAA,MAAA;IAAA,CAAA;AAAxC,IAAA,uBAAA,EAA0G,EACtG,EACN;AAIV,IAAA,yBAAA,IAAA,OAAA,EAAA,EAA0B,IAAA,SAAA,EAAA,EACsC,IAAA,QAAA,EAAA;AACnB,IAAA,iBAAA,IAAA,QAAA;AAAM,IAAA,uBAAA;AAC3C,IAAA,yBAAA,IAAA,SAAA,EAAA;AAAuB,IAAA,2BAAA,iBAAA,SAAA,6EAAA,QAAA;AAAA,MAAA,wBAAA,GAAA;AAAA,YAAA,SAAA,wBAAA;AAAA,MAAA,6BAAa,OAAA,KAAA,EAAM,WAAA,MAAA,MAAN,OAAA,KAAA,EAAM,YAAA;AAAA,aAAA,sBAAA,MAAA;IAAA,CAAA;AAA1C,IAAA,uBAAA,EACoC,EAChC;AAIZ,IAAA,8BAAA,IAAA,6DAAA,GAAA,GAAA,OAAA,EAAA;AAQA,IAAA,yBAAA,IAAA,OAAA,EAAA,EAAkE,IAAA,KAAA,CAAA;AACR,IAAA,iBAAA,IAAA,UAAA;AAAQ,IAAA,uBAAA;AAC9D,IAAA,yBAAA,IAAA,UAAA,EAAA;AACI,IAAA,8BAAA,IAAA,6DAAA,GAAA,GAAA,QAAA,EAAA;AAGA,IAAA,iBAAA,IAAA,WAAA;AACJ,IAAA,uBAAA,EAAS,EACP;;;;AAhEqB,IAAA,oBAAA,CAAA;AAAA,IAAA,2BAAA,WAAA,OAAA,KAAA,EAAA,IAAA;AASb,IAAA,oBAAA,CAAA;AAAA,IAAA,2BAAA,WAAA,OAAA,KAAA,EAAA,WAAA;AAamB,IAAA,oBAAA,CAAA;AAAA,IAAA,2BAAA,WAAA,OAAA,KAAA,EAAA,KAAA;AAWA,IAAA,oBAAA,CAAA;AAAA,IAAA,2BAAA,WAAA,OAAA,KAAA,EAAA,gBAAA;AASF,IAAA,oBAAA,CAAA;AAAA,IAAA,2BAAA,WAAA,OAAA,KAAA,EAAA,SAAA;AAM/B,IAAA,oBAAA;AAAA,IAAA,wBAAA,OAAA,MAAA,IAAA,KAAA,EAAA;AAUuD,IAAA,oBAAA,CAAA;AAAA,IAAA,qBAAA,YAAA,OAAA,OAAA,KAAA,CAAA,OAAA,KAAA,EAAA,IAAA;AAC/C,IAAA,oBAAA;AAAA,IAAA,wBAAA,OAAA,OAAA,IAAA,KAAA,EAAA;;;ADrElB,IAAO,uBAAP,MAAO,sBAAoB;EACrB,QAAQ,OAAO,cAAc;EAC7B,SAAS,OAAO,MAAM;EACtB,OAAO,OAAO,WAAW;EACzB,gBAAgB,OAAO,aAAa;EAE5C,KAAoB;EACpB,OAAO,OAAO;IACV,MAAM;IACN,aAAa;IACb,OAAO;IACP,kBAAkB;IAClB,WAAW;KACd,GAAA,YAAA,CAAA,EAAA,WAAA,OAAA,CAAA,IAAA,CAAA,CAAA;EAED,UAAU,OAAO,MAAI,GAAA,YAAA,CAAA,EAAA,WAAA,UAAA,CAAA,IAAA,CAAA,CAAA;EACrB,SAAS,OAAO,OAAK,GAAA,YAAA,CAAA,EAAA,WAAA,SAAA,CAAA,IAAA,CAAA,CAAA;EACrB,QAAQ,OAAsB,MAAI,GAAA,YAAA,CAAA,EAAA,WAAA,QAAA,CAAA,IAAA,CAAA,CAAA;EAElC,MAAM,WAAQ;AACV,SAAK,KAAK,KAAK,MAAM,SAAS,SAAS,IAAI,IAAI;AAC/C,QAAI,KAAK,IAAI;AACT,YAAM,WAAW,KAAK,KAAK,kBAAiB;AAC5C,YAAM,EAAE,MAAM,MAAK,IAAK,MAAM,SAAS,KAAK,UAAU,EACjD,OAAO,GAAG,EACV,GAAG,aAAa,KAAK,cAAc,YAAW,CAAE,EAChD,GAAG,MAAM,KAAK,EAAE,EAChB,OAAM;AACX,UAAI,MAAM;AACN,aAAK,KAAK,IAAI;UACV,MAAM,KAAK;UACX,aAAa,KAAK,eAAe;UACjC,OAAO,KAAK,SAAS;UACrB,kBAAkB,KAAK,oBAAoB;UAC3C,WAAW,KAAK;SACnB;MACL;IACJ;AACA,SAAK,QAAQ,IAAI,KAAK;EAC1B;EAEA,MAAM,OAAI;AACN,SAAK,OAAO,IAAI,IAAI;AACpB,SAAK,MAAM,IAAI,IAAI;AACnB,UAAM,WAAW,KAAK,KAAK,kBAAiB;AAE5C,UAAM,UAAU,KAAK,KAAI;AACzB,UAAM,UAAU;MACZ,MAAM,QAAQ;MACd,aAAa,QAAQ;MACrB,OAAO,OAAO,QAAQ,KAAK;MAC3B,kBAAkB,OAAO,QAAQ,gBAAgB;MACjD,WAAW,QAAQ;;AAGvB,QAAI;AACA,UAAI,KAAK,IAAI;AACT,cAAM,EAAE,MAAK,IAAK,MAAM,SAAS,KAAK,UAAU,EAC3C,OAAO,OAAO,EACd,GAAG,MAAM,KAAK,EAAE,EAChB,GAAG,aAAa,KAAK,cAAc,YAAW,CAAE;AACrD,YAAI;AAAO,gBAAM;MACrB,OAAO;AACH,cAAM,EAAE,MAAK,IAAK,MAAM,SAAS,KAAK,UAAU,EAAE,OAAO,iCAClD,UADkD;UAErD,WAAW,KAAK,cAAc,YAAW;UAC5C;AACD,YAAI;AAAO,gBAAM;MACrB;AACA,WAAK,OAAO,SAAS,CAAC,iBAAiB,CAAC;IAC5C,SAAS,GAAQ;AACb,cAAQ,MAAM,yBAAyB,CAAC;AACxC,WAAK,MAAM,IAAI,EAAE,WAAW,mDAAmD;IACnF;AACI,WAAK,OAAO,IAAI,KAAK;IACzB;EACJ;;qCA5ES,uBAAoB;EAAA;yEAApB,uBAAoB,WAAA,CAAA,CAAA,6BAAA,CAAA,GAAA,OAAA,IAAA,MAAA,GAAA,QAAA,CAAA,CAAA,GAAA,aAAA,SAAA,GAAA,CAAA,GAAA,QAAA,mBAAA,gBAAA,MAAA,GAAA,CAAA,GAAA,YAAA,aAAA,gBAAA,GAAA,CAAA,cAAA,mBAAA,GAAA,OAAA,WAAA,GAAA,CAAA,GAAA,OAAA,iBAAA,MAAA,GAAA,CAAA,GAAA,QAAA,eAAA,WAAA,GAAA,CAAA,GAAA,aAAA,KAAA,GAAA,CAAA,GAAA,QAAA,kBAAA,OAAA,GAAA,CAAA,GAAA,WAAA,GAAA,CAAA,GAAA,WAAA,mBAAA,cAAA,cAAA,GAAA,CAAA,GAAA,aAAA,GAAA,UAAA,GAAA,CAAA,GAAA,cAAA,GAAA,CAAA,GAAA,OAAA,GAAA,CAAA,GAAA,cAAA,aAAA,GAAA,CAAA,GAAA,SAAA,kBAAA,QAAA,gBAAA,OAAA,GAAA,CAAA,GAAA,OAAA,UAAA,eAAA,GAAA,CAAA,QAAA,QAAA,QAAA,QAAA,YAAA,IAAA,GAAA,QAAA,GAAA,iBAAA,SAAA,GAAA,CAAA,QAAA,eAAA,eAAA,yCAAA,GAAA,YAAA,qBAAA,QAAA,mBAAA,GAAA,iBAAA,SAAA,GAAA,CAAA,GAAA,QAAA,eAAA,kBAAA,OAAA,GAAA,CAAA,GAAA,OAAA,kBAAA,eAAA,GAAA,CAAA,QAAA,UAAA,QAAA,SAAA,OAAA,KAAA,QAAA,QAAA,GAAA,QAAA,GAAA,iBAAA,SAAA,GAAA,CAAA,GAAA,OAAA,YAAA,eAAA,GAAA,CAAA,QAAA,UAAA,QAAA,oBAAA,OAAA,KAAA,GAAA,QAAA,GAAA,iBAAA,SAAA,GAAA,CAAA,GAAA,SAAA,kBAAA,iBAAA,SAAA,KAAA,GAAA,CAAA,QAAA,YAAA,QAAA,aAAA,GAAA,UAAA,kBAAA,GAAA,iBAAA,SAAA,GAAA,CAAA,GAAA,SAAA,eAAA,QAAA,WAAA,GAAA,CAAA,GAAA,QAAA,eAAA,SAAA,QAAA,YAAA,iBAAA,GAAA,CAAA,QAAA,UAAA,GAAA,OAAA,eAAA,QAAA,GAAA,UAAA,GAAA,CAAA,GAAA,WAAA,mBAAA,YAAA,GAAA,CAAA,GAAA,OAAA,uBAAA,CAAA,GAAA,UAAA,SAAA,8BAAA,IAAA,KAAA;AAAA,QAAA,KAAA,GAAA;ACbjC,MAAA,yBAAA,GAAA,OAAA,CAAA,EAA+B,GAAA,OAAA,CAAA,EACyB,GAAA,MAAA,CAAA;AACF,MAAA,iBAAA,CAAA;AAAsC,MAAA,uBAAA;AACpF,MAAA,yBAAA,GAAA,KAAA,CAAA;AACI,MAAA,oBAAA,GAAA,KAAA,CAAA;AAAuC,MAAA,iBAAA,GAAA,UAAA;AAC3C,MAAA,uBAAA,EAAI;AAGR,MAAA,yBAAA,GAAA,OAAA,CAAA,EAAwC,GAAA,OAAA,CAAA;AAEhC,MAAA,8BAAA,GAAA,6CAAA,GAAA,GAAA,OAAA,CAAA,EAAiB,IAAA,8CAAA,IAAA,GAAA,QAAA,CAAA;AAgFrB,MAAA,uBAAA,EAAM,EACJ;;;AAzF4C,MAAA,oBAAA,CAAA;AAAA,MAAA,6BAAA,IAAA,IAAA,KAAA,WAAA,SAAA,WAAA;AAQ1C,MAAA,oBAAA,CAAA;AAAA,MAAA,wBAAA,IAAA,QAAA,IAAA,IAAA,EAAA;;oBDAE,aAAW,oBAAA,sBAAA,qBAAA,8BAAA,iBAAA,sBAAA,mBAAA,cAAA,SAAA,QAAE,UAAU,GAAA,eAAA,EAAA,CAAA;;;sEAGxB,sBAAoB,CAAA;UANhC;uBACa,+BAA6B,YAC3B,MAAI,SACP,CAAC,aAAa,UAAU,GAAC,UAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QAAA,CAAA;;;;6EAGzB,sBAAoB,EAAA,WAAA,wBAAA,UAAA,qDAAA,YAAA,GAAA,CAAA;AAAA,GAAA;",
  "names": []
}
