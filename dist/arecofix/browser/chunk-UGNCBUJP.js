import{a as j}from"./chunk-Y45LKXIO.js";import"./chunk-EZQXAHE6.js";import{d as F}from"./chunk-VU7SKD6P.js";import"./chunk-FR6EAD4C.js";import"./chunk-X77PN5FN.js";import{k as I}from"./chunk-GLDAN37X.js";import{$ as g,Aa as b,Bb as a,Cb as m,Da as o,Db as y,Pb as C,Qa as w,Sb as k,Ub as A,V as p,_ as x,ab as f,bb as u,eb as P,ec as T,fb as E,gb as v,hb as t,ib as i,jb as l,nb as _,rb as h,tb as s,zb as S}from"./chunk-VQO264VU.js";import"./chunk-VOSPIT4N.js";var L=n=>[n],N=(n,r)=>r.id;function $(n,r){n&1&&(t(0,"div",7),l(1,"div",11),t(2,"p",12),a(3,"Cargando entradas..."),i()())}function O(n,r){if(n&1){let e=_();t(0,"div",8)(1,"div",13),l(2,"i",14),i(),t(3,"h3",15),a(4,"Error al cargar"),i(),t(5,"p",16),a(6),i(),t(7,"button",17),h("click",function(){x(e);let c=s();return g(c.loadPosts())}),a(8," Intentar nuevamente "),i()()}if(n&2){let e=s();o(6),m(e.error)}}function z(n,r){n&1&&(t(0,"div",9)(1,"div",18),l(2,"i",19),i(),t(3,"h3",15),a(4,"No hay entradas a\xFAn"),i(),t(5,"p",20),a(6,"Comienza a escribir en tu blog para compartir novedades y tutoriales con tus clientes."),i(),t(7,"a",21),a(8," Crear primera entrada "),i()())}function B(n,r){if(n&1&&l(0,"img",32),n&2){let e=s().$implicit;v("src",e.image,b)("alt",e.title)}}function M(n,r){n&1&&(t(0,"div",33),l(1,"i",45),i())}function R(n,r){if(n&1){let e=_();t(0,"tr",28)(1,"td",29)(2,"div",30)(3,"div",31),f(4,B,1,2,"img",32)(5,M,2,0,"div",33),i(),t(6,"div",34)(7,"div",35),a(8),i(),t(9,"div",36),a(10),i()()()(),t(11,"td",29)(12,"span",37),a(13),i()(),t(14,"td",38),a(15),k(16,"date"),i(),t(17,"td",39)(18,"div",40)(19,"a",41),l(20,"i",42),i(),t(21,"button",43),h("click",function(){let c=x(e).$implicit,V=s(2);return g(V.deletePost(c.id))}),l(22,"i",44),i()()()()}if(n&2){let e=r.$implicit;o(4),u(e.image?4:5),o(4),m(e.title),o(2),m(e.slug),o(2),S("bg-green-100",e.published)("text-green-800",e.published)("bg-yellow-100",!e.published)("text-yellow-800",!e.published),o(),y(" ",e.published?"Publicado":"Borrador"," "),o(2),y(" ",A(16,14,e.created_at,"mediumDate")," "),o(4),v("routerLink",C(17,L,e.id))}}function G(n,r){if(n&1&&(t(0,"div",10)(1,"table",22)(2,"thead",23)(3,"tr")(4,"th",24),a(5," Entrada"),i(),t(6,"th",24),a(7," Estado"),i(),t(8,"th",24),a(9,"Fecha "),i(),t(10,"th",25)(11,"span",26),a(12,"Acciones"),i()()()(),t(13,"tbody",27),P(14,R,23,19,"tr",28,N),i()()()),n&2){let e=s();o(14),E(e.posts)}}var D=class n{postService=p(j);cdr=p(T);posts=[];loading=!0;error=null;async ngOnInit(){this.loadPosts()}async loadPosts(){try{this.loading=!0,this.posts=await this.postService.getPosts()}catch(r){this.error=r.message||"Error al cargar entradas"}finally{this.loading=!1,this.cdr.markForCheck()}}async deletePost(r){if(confirm("\xBFEst\xE1s seguro de eliminar esta entrada?"))try{await this.postService.deletePost(r),await this.loadPosts()}catch(e){alert("Error al eliminar: "+e.message)}}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=w({type:n,selectors:[["app-admin-posts-page"]],decls:15,vars:1,consts:[[1,"space-y-6"],[1,"flex","flex-col","sm:flex-row","justify-between","items-start","sm:items-center","gap-4"],[1,"text-2xl","font-bold","text-gray-900"],[1,"text-gray-500","mt-1"],["routerLink","new",1,"inline-flex","items-center","px-4","py-2","bg-indigo-600","hover:bg-indigo-700","text-white","text-sm","font-medium","rounded-lg","transition-colors","shadow-sm"],[1,"fas","fa-plus","mr-2"],[1,"bg-white","rounded-xl","shadow-sm","border","border-gray-200","overflow-hidden"],[1,"flex","flex-col","items-center","justify-center","p-12"],[1,"flex","flex-col","items-center","justify-center","p-12","text-center"],[1,"flex","flex-col","items-center","justify-center","p-16","text-center"],[1,"overflow-x-auto"],[1,"animate-spin","rounded-full","h-10","w-10","border-b-2","border-indigo-600","mb-4"],[1,"text-gray-500"],[1,"bg-red-50","p-4","rounded-full","mb-4"],[1,"fas","fa-exclamation-circle","text-red-500","text-xl"],[1,"text-lg","font-medium","text-gray-900","mb-2"],[1,"text-gray-500","mb-4"],[1,"text-indigo-600","hover:text-indigo-700","font-medium",3,"click"],[1,"bg-gray-50","p-6","rounded-full","mb-6"],[1,"fas","fa-newspaper","text-gray-400","text-3xl"],[1,"text-gray-500","max-w-sm","mb-6"],["routerLink","new",1,"inline-flex","items-center","px-4","py-2","bg-indigo-600","hover:bg-indigo-700","text-white","text-sm","font-medium","rounded-lg","transition-colors"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gray-50"],["scope","col",1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],["scope","col",1,"relative","px-6","py-3"],[1,"sr-only"],[1,"bg-white","divide-y","divide-gray-200"],[1,"hover:bg-gray-50","transition-colors"],[1,"px-6","py-4","whitespace-nowrap"],[1,"flex","items-center"],[1,"h-10","w-10","flex-shrink-0"],[1,"h-10","w-10","rounded-lg","object-cover",3,"src","alt"],[1,"h-10","w-10","rounded-lg","bg-gray-100","flex","items-center","justify-center"],[1,"ml-4"],[1,"text-sm","font-medium","text-gray-900"],[1,"text-sm","text-gray-500","truncate","max-w-xs"],[1,"px-2","inline-flex","text-xs","leading-5","font-semibold","rounded-full"],[1,"px-6","py-4","whitespace-nowrap","text-sm","text-gray-500"],[1,"px-6","py-4","whitespace-nowrap","text-right","text-sm","font-medium"],[1,"flex","justify-end","gap-3"],["title","Editar",1,"text-indigo-600","hover:text-indigo-900","transition-colors",3,"routerLink"],[1,"fas","fa-edit"],["title","Eliminar",1,"text-red-600","hover:text-red-900","transition-colors",3,"click"],[1,"fas","fa-trash"],[1,"fas","fa-image","text-gray-400"]],template:function(e,d){e&1&&(t(0,"div",0)(1,"div",1)(2,"div")(3,"h1",2),a(4,"Entradas"),i(),t(5,"p",3),a(6,"Gestiona las publicaciones de tu blog"),i()(),t(7,"a",4),l(8,"i",5),a(9," Nueva Entrada "),i()(),t(10,"div",6),f(11,$,4,0,"div",7)(12,O,9,1,"div",8)(13,z,9,0,"div",9)(14,G,16,0,"div",10),i()()),e&2&&(o(11),u(d.loading?11:d.error?12:d.posts.length===0?13:14))},dependencies:[F,I],encapsulation:2,changeDetection:0})};export{D as AdminPostsPage};
