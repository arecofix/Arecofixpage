import{a as $}from"./chunk-WOPAPDZY.js";import"./chunk-AWQLWEOW.js";import"./chunk-6KLMDNRR.js";import{a as U}from"./chunk-A7HSRCHR.js";import"./chunk-GBGIQ7VE.js";import"./chunk-MQUL3GSM.js";import{b as L,d as F,g as B,m as Q,n as V,o as q,t as R}from"./chunk-63CMMPDH.js";import"./chunk-IP3FEPB3.js";import"./chunk-SFLZ64DJ.js";import"./chunk-FEKWCP2W.js";import{l as j,o as O}from"./chunk-YNFFGNY6.js";import{o as N,p as D,q as T}from"./chunk-Q44XB7TV.js";import{Ab as t,Bb as i,Cb as s,Kb as p,Mb as w,Pa as S,Tb as v,Ua as a,Vb as r,W as b,Wb as m,Xb as k,gb as I,hc as E,lc as C,ma as u,oc as M,pc as A,tb as x,ub as f,uc as _,xb as h,yb as P,zb as c}from"./chunk-DX2LKEMG.js";import"./chunk-C6Q5SG76.js";var H=l=>["/admin/products",l],z=(l,n)=>n.id;function K(l,n){l&1&&(t(0,"div",40),s(1,"span",41),i())}function Z(l,n){l&1&&(t(0,"span",62),r(1,"Agotado"),i())}function J(l,n){l&1&&(t(0,"span",63),r(1,"Bajo"),i())}function W(l,n){if(l&1&&(t(0,"tr",48)(1,"td")(2,"div",53)(3,"div",54)(4,"div",55),s(5,"img",56),i()(),t(6,"div")(7,"div",57),r(8),i()()()(),t(9,"td")(10,"div",58),r(11),i(),t(12,"div",59),r(13),C(14,"slice"),i()(),t(15,"td",46)(16,"div",60)(17,"span",61),r(18),i(),x(19,Z,2,0,"span",62)(20,J,2,0,"span",63),i()(),t(21,"td")(22,"div",64),r(23),i()(),t(24,"td",47)(25,"a",65),s(26,"i",66),i()()()),l&2){let e=n.$implicit;a(5),c("src",e.image_url||"assets/img/no-image.png",S),a(3),m(e.name),a(3),m(e.sku||"---"),a(2),k("Marca ID: ",e.brand_id?M(14,18,e.brand_id,0,5):"Gen\xE9rica"),a(4),v("text-error",e.stock===0)("text-warning",e.stock>0&&e.stock<=(e.min_stock_alert||5))("text-success",e.stock>(e.min_stock_alert||5)),a(),k(" ",e.stock," "),a(),f(e.stock===0?19:e.stock<=(e.min_stock_alert||5)?20:-1),a(3),v("badge-success",e.is_active)("badge-ghost",!e.is_active),a(),k(" ",e.is_active?"Activo":"Inactivo"," "),a(2),c("routerLink",E(22,H,e.id))}}function X(l,n){if(l&1&&(t(0,"div",50)(1,"div",67)(2,"div",54)(3,"div",68),s(4,"img",56),i()(),t(5,"div",69)(6,"h3",70),r(7),i(),t(8,"div",71),r(9),i(),t(10,"div",72)(11,"div")(12,"span",73),r(13,"Stock"),i(),t(14,"span",74),r(15),i()(),t(16,"a",75),s(17,"i",76),i()()()()()),l&2){let e=n.$implicit;a(4),c("src",e.image_url||"assets/img/no-image.png",S),a(3),m(e.name),a(2),m(e.sku),a(2),v("text-error",e.stock===0)("text-warning",e.stock>0&&e.stock<=5)("text-success",!e.stock||e.stock>5),a(4),m(e.stock),a(),c("routerLink",E(11,H,e.id))}}function Y(l,n){if(l&1&&(t(0,"div",51),s(1,"pagination",77),i()),l&2){let e=w(2);a(),c("pages",e.totalPages())("currentPage",e.currentPage())}}function ee(l,n){l&1&&(t(0,"div",52),s(1,"i",78),t(2,"p"),r(3,"No se encontraron productos con estos filtros."),i()())}function te(l,n){if(l&1&&(t(0,"div",42)(1,"table",43)(2,"thead",44)(3,"tr",45)(4,"th"),r(5,"Producto"),i(),t(6,"th"),r(7,"SKU / Marca"),i(),t(8,"th",46),r(9,"Stock"),i(),t(10,"th"),r(11,"Estado"),i(),t(12,"th",47),r(13,"Acciones"),i()()(),t(14,"tbody"),h(15,W,27,24,"tr",48,z),i()()(),t(17,"div",49),h(18,X,18,13,"div",50,z),i(),x(20,Y,2,2,"div",51),x(21,ee,4,0,"div",52)),l&2){let e=w();a(15),P(e.paginatedProducts()),a(3),P(e.paginatedProducts()),a(2),f(e.filteredProducts().length>0?20:-1),a(),f(e.filteredProducts().length===0?21:-1)}}var G=class l{productService=b($);route=b(j);products=u([]);loading=u(!0);error=u(null);searchQuery=u("");sortOrder=u("stock_asc");filterStatus=u("all");currentPage=u(1);itemsPerPage=u(15);filteredProducts=_(()=>{let n=this.products(),e=this.searchQuery().toLowerCase(),o=this.filterStatus();o==="low_stock"?n=n.filter(d=>d.stock>0&&d.stock<=(d.min_stock_alert||5)):o==="out_of_stock"&&(n=n.filter(d=>d.stock===0)),e&&(n=n.filter(d=>d.name.toLowerCase().includes(e)||d.sku?.toLowerCase().includes(e)||d.barcode?.toLowerCase().includes(e)));let g=this.sortOrder();return n.sort((d,y)=>{switch(g){case"stock_asc":return d.stock-y.stock;case"stock_desc":return y.stock-d.stock;case"price_asc":return d.price-y.price;default:return d.name.localeCompare(y.name)}})});paginatedProducts=_(()=>{let n=this.filteredProducts(),e=this.currentPage(),o=this.itemsPerPage(),g=(e-1)*o;return n.slice(g,g+o)});totalPages=_(()=>Math.ceil(this.filteredProducts().length/this.itemsPerPage()));stats=_(()=>{let n=this.products();return{total:n.length,lowStock:n.filter(e=>e.stock>0&&e.stock<=(e.min_stock_alert||5)).length,outOfStock:n.filter(e=>e.stock===0).length,totalValue:n.reduce((e,o)=>e+o.price*o.stock,0)}});async ngOnInit(){this.route.queryParams.subscribe(n=>{n._page&&this.currentPage.set(Number(n._page))}),await this.loadInventory()}async loadInventory(){this.loading.set(!0);try{let n=await this.productService.getProducts();this.products.set(n)}catch(n){this.error.set(n.message||"Error al cargar inventario")}finally{this.loading.set(!1)}}updateSort(n){this.sortOrder.set(n.target.value)}static \u0275fac=function(e){return new(e||l)};static \u0275cmp=I({type:l,selectors:[["app-admin-inventory-page"]],decls:66,vars:19,consts:[[1,"max-w-7xl","mx-auto","pb-20","p-4"],[1,"flex","flex-col","md:flex-row","justify-between","items-start","md:items-center","py-6","gap-4","border-b","border-gray-200","dark:border-gray-800","mb-6"],[1,"text-3xl","font-bold","text-gray-800","dark:text-white","flex","items-center","gap-3"],[1,"fas","fa-boxes","text-primary"],[1,"text-sm","text-gray-500","dark:text-gray-400"],[1,"flex","gap-2","w-full","md:w-auto"],["routerLink","/admin/purchases/new",1,"btn","btn-primary","w-full","md:w-auto","shadow-lg","shadow-primary/20"],[1,"fas","fa-cart-plus","mr-2"],[1,"grid","grid-cols-2","lg:grid-cols-4","gap-4","mb-8"],[1,"stats","shadow","bg-white","dark:bg-gray-800","border","border-gray-100","dark:border-gray-700"],[1,"stat"],[1,"stat-figure","text-primary"],[1,"fas","fa-cube","text-3xl","opacity-50"],[1,"stat-title","text-xs","uppercase","tracking-wider"],[1,"stat-value","text-primary"],[1,"stat-figure","text-error"],[1,"fas","fa-exclamation-circle","text-3xl","opacity-50"],[1,"stat-title","text-xs","uppercase","tracking-wider","text-error"],[1,"stat-value","text-error"],[1,"stat-figure","text-warning"],[1,"fas","fa-thermometer-quarter","text-3xl","opacity-50"],[1,"stat-title","text-xs","uppercase","tracking-wider","text-warning"],[1,"stat-value","text-warning"],[1,"stat-figure","text-success"],[1,"fas","fa-dollar-sign","text-3xl","opacity-50"],[1,"stat-value","text-success","text-2xl"],[1,"stat-desc"],[1,"flex","flex-col","lg:flex-row","gap-4","mb-6","bg-white","dark:bg-gray-800","p-4","rounded-xl","shadow-sm","border","border-gray-100","dark:border-gray-700"],[1,"flex-1"],[1,"relative"],[1,"fas","fa-search","absolute","left-4","top-1/2","-translate-y-1/2","text-gray-400"],["type","text","placeholder","Buscar producto...",1,"input","input-bordered","w-full","pl-10",3,"ngModelChange","ngModel"],[1,"join","w-full","lg:w-auto"],["type","radio","name","options","aria-label","Todos",1,"join-item","btn",3,"click","checked"],["type","radio","name","options","aria-label","Stock Bajo",1,"join-item","btn",3,"click","checked"],["type","radio","name","options","aria-label","Agotados",1,"join-item","btn",3,"click","checked"],[1,"select","select-bordered","w-full","lg:w-auto",3,"change","ngModel"],["value","stock_asc"],["value","stock_desc"],["value","name_asc"],[1,"flex","justify-center","p-12"],[1,"loading","loading-spinner","loading-lg","text-primary"],[1,"hidden","md:block","bg-white","dark:bg-gray-800","rounded-xl","shadow-lg","overflow-hidden","border","border-gray-100","dark:border-gray-700"],[1,"table","w-full"],[1,"bg-gray-50","dark:bg-gray-700/50"],[1,"text-gray-600","dark:text-gray-300","font-bold","uppercase","text-xs","tracking-wider"],[1,"text-center"],[1,"text-right"],[1,"hover:bg-gray-50","dark:hover:bg-gray-700/30","transition-colors"],[1,"md:hidden","grid","grid-cols-1","gap-4"],[1,"card","bg-white","dark:bg-gray-800","shadow-sm","border","border-gray-100","dark:border-gray-700"],[1,"mt-8","flex","justify-center","pb-8"],[1,"text-center","py-20","opacity-50"],[1,"flex","items-center","gap-4"],[1,"avatar"],[1,"mask","mask-squircle","w-12","h-12","bg-gray-100","dark:bg-gray-700"],[1,"object-cover",3,"src"],[1,"font-bold","text-gray-900","dark:text-white","line-clamp-1"],[1,"font-mono","text-xs"],[1,"text-xs","text-gray-500"],[1,"flex","flex-col","items-center"],[1,"font-bold","text-lg"],[1,"badge","badge-error","badge-xs"],[1,"badge","badge-warning","badge-xs"],[1,"badge","badge-sm"],[1,"btn","btn-sm","btn-ghost","text-indigo-500",3,"routerLink"],[1,"fas","fa-edit"],[1,"card-body","p-4","flex-row","gap-4"],[1,"w-16","h-16","rounded-xl","bg-gray-100"],[1,"flex-1","min-w-0"],[1,"font-bold","text-gray-900","dark:text-white","truncate"],[1,"text-xs","text-gray-500","font-mono","mb-2"],[1,"flex","justify-between","items-end"],[1,"text-xs","block","text-gray-400"],[1,"text-xl","font-bold"],[1,"btn","btn-circle","btn-sm","btn-ghost",3,"routerLink"],[1,"fas","fa-edit","text-indigo-500"],[3,"pages","currentPage"],[1,"fas","fa-search","text-4xl","mb-3"]],template:function(e,o){e&1&&(t(0,"div",0)(1,"div",1)(2,"div")(3,"h1",2),s(4,"i",3),r(5," Control de Stock "),i(),t(6,"p",4),r(7,"Monitorea niveles de stock y valor de inventario."),i()(),t(8,"div",5)(9,"a",6),s(10,"i",7),r(11," Registrar Compra "),i()()(),t(12,"div",8)(13,"div",9)(14,"div",10)(15,"div",11),s(16,"i",12),i(),t(17,"div",13),r(18,"Total Items"),i(),t(19,"div",14),r(20),i()()(),t(21,"div",9)(22,"div",10)(23,"div",15),s(24,"i",16),i(),t(25,"div",17),r(26,"Agotados"),i(),t(27,"div",18),r(28),i()()(),t(29,"div",9)(30,"div",10)(31,"div",19),s(32,"i",20),i(),t(33,"div",21),r(34,"Stock Bajo"),i(),t(35,"div",22),r(36),i()()(),t(37,"div",9)(38,"div",10)(39,"div",23),s(40,"i",24),i(),t(41,"div",13),r(42,"Valor Total"),i(),t(43,"div",25),r(44),C(45,"currency"),i(),t(46,"div",26),r(47,"Estimado en precio venta"),i()()()(),t(48,"div",27)(49,"div",28)(50,"div",29),s(51,"i",30),t(52,"input",31),p("ngModelChange",function(d){return o.searchQuery.set(d)}),i()()(),t(53,"div",32)(54,"input",33),p("click",function(){return o.filterStatus.set("all")}),i(),t(55,"input",34),p("click",function(){return o.filterStatus.set("low_stock")}),i(),t(56,"input",35),p("click",function(){return o.filterStatus.set("out_of_stock")}),i()(),t(57,"select",36),p("change",function(d){return o.updateSort(d)}),t(58,"option",37),r(59,"Menor Stock Primero"),i(),t(60,"option",38),r(61,"Mayor Stock Primero"),i(),t(62,"option",39),r(63,"Nombre (A-Z)"),i()()(),x(64,K,2,0,"div",40)(65,te,22,2),i()),e&2&&(a(20),m(o.stats().total),a(),v("border-error",o.stats().outOfStock>0),a(7),m(o.stats().outOfStock),a(),v("border-warning",o.stats().lowStock>0),a(7),m(o.stats().lowStock),a(8),m(A(45,14,o.stats().totalValue,"ARS","symbol","1.0-0")),a(8),c("ngModel",o.searchQuery()),a(2),c("checked",o.filterStatus()==="all"),a(),c("checked",o.filterStatus()==="low_stock"),a(),c("checked",o.filterStatus()==="out_of_stock"),a(),c("ngModel",o.sortOrder()),a(7),f(o.loading()?64:65))},dependencies:[T,O,R,V,q,L,Q,F,B,U,D,N],encapsulation:2,changeDetection:0})};export{G as AdminInventoryPage};
