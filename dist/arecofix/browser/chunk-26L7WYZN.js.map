{
  "version": 3,
  "sources": ["src/app/core/constants/roles.constants.ts", "src/app/guards/auth.guard.ts", "src/app/admin/admin.routes.ts"],
  "sourcesContent": ["export const ROLES = {\r\n    SUPER_ADMIN: 'super_admin',\r\n    TENANT_OWNER: 'tenant_owner',\r\n    TECHNICIAN: 'technician',\r\n    STAFF: 'staff',\r\n    USER: 'user',\r\n    ADMIN: 'admin' // Deprecated, keeping for compatibility during migration\r\n} as const;\r\n\r\nexport type Role = typeof ROLES[keyof typeof ROLES];\r\n", "/* eslint-disable */\r\nimport { inject } from '@angular/core';\r\nimport { Router, CanActivateFn } from '@angular/router';\r\nimport { AuthService } from '@app/core/services/auth.service';\r\nimport { ROLES } from '@app/core/constants/roles.constants';\r\n\r\nexport const authGuard: CanActivateFn = async (route, state) => {\r\n  const authService = inject(AuthService);\r\n  const router = inject(Router);\r\n\r\n  const session = await authService.getSession();\r\n  if (!session) {\r\n    router.navigate(['/login'], { queryParams: { returnUrl: state.url } });\r\n    return false;\r\n  }\r\n\r\n  const userProfile = await authService.getUserProfile(session.user.id);\r\n\r\n  // Pure role-based access control\r\n  const allowedRoles: string[] = [\r\n    ROLES.ADMIN, \r\n    ROLES.STAFF, \r\n    ROLES.SUPER_ADMIN, \r\n    ROLES.TENANT_OWNER, \r\n    ROLES.TECHNICIAN\r\n  ];\r\n\r\n  if (userProfile?.role && allowedRoles.includes(userProfile.role)) {\r\n    return true;\r\n  }\r\n\r\n  // If not admin or staff, redirect to home\r\n  router.navigate(['/']);\r\n  return false;\r\n};\r\n\r\nexport const noAuthGuard: CanActivateFn = async (route, state) => {\r\n  const authService = inject(AuthService);\r\n  const router = inject(Router);\r\n\r\n  const session = await authService.getSession();\r\n  if (session) {\r\n    router.navigate(['/']);\r\n    return false;\r\n  }\r\n  return true;\r\n};\r\n", "import { Routes } from '@angular/router';\r\nimport { authGuard } from '@app/guards/auth.guard';\r\nimport { provideCharts, withDefaultRegisterables } from 'ng2-charts';\r\n\r\nexport const adminRoutes: Routes = [\r\n  {\r\n    title: 'Admin',\r\n    path: '',\r\n    canActivate: [authGuard],\r\n    loadComponent: () => import('@app/admin/layout/admin-layout').then(m => m.AdminLayout),\r\n    providers: [\r\n      // Charts are only needed in admin â€” keep them out of the public bundle\r\n      provideCharts(withDefaultRegisterables()),\r\n    ],\r\n    children: [\r\n      { path: '', redirectTo: 'dashboard', pathMatch: 'full' },\r\n      {\r\n        title: 'Dashboard',\r\n        path: 'dashboard',\r\n        loadComponent: () => import('@app/admin/dashboard/admin-dashboard-page').then(m => m.AdminDashboardPage)\r\n      },\r\n      {\r\n        path: 'products',\r\n        loadChildren: () => import('@app/admin/products/admin-products.routes').then(m => m.ADMIN_PRODUCTS_ROUTES)\r\n      },\r\n      {\r\n        path: 'categories',\r\n        loadChildren: () => import('@app/admin/categories/admin-categories.routes').then(m => m.ADMIN_CATEGORIES_ROUTES)\r\n      },\r\n      {\r\n        path: 'brands',\r\n        loadChildren: () => import('@app/admin/brands/admin-brands.routes').then(m => m.ADMIN_BRANDS_ROUTES)\r\n      },\r\n      {\r\n        path: 'clients',\r\n        loadChildren: () => import('@app/admin/clients/admin-clients.routes').then(m => m.ADMIN_CLIENTS_ROUTES)\r\n      },\r\n      {\r\n        path: 'suppliers',\r\n        loadChildren: () => import('@app/admin/suppliers/admin-suppliers.routes').then(m => m.ADMIN_SUPPLIERS_ROUTES)\r\n      },\r\n      {\r\n        path: 'company',\r\n        loadChildren: () => import('@app/admin/company/admin-company.routes').then(m => m.ADMIN_COMPANY_ROUTES)\r\n      },\r\n      {\r\n        path: 'employees',\r\n        loadChildren: () => import('@app/admin/employees/admin-employees.routes').then(m => m.ADMIN_EMPLOYEES_ROUTES)\r\n      },\r\n      {\r\n        path: 'sales',\r\n        loadChildren: () => import('@app/admin/sales/admin-sales.routes').then(m => m.ADMIN_SALES_ROUTES)\r\n      },\r\n      {\r\n        path: 'inventory',\r\n        loadChildren: () => import('@app/admin/inventory/admin-inventory.routes').then(m => m.ADMIN_INVENTORY_ROUTES)\r\n      },\r\n      {\r\n        path: 'purchases',\r\n        loadChildren: () => import('@app/admin/purchases/admin-purchases.routes').then(m => m.ADMIN_PURCHASES_ROUTES)\r\n      },\r\n      {\r\n        path: 'users',\r\n        loadChildren: () => import('@app/admin/users/admin-users.routes').then(m => m.ADMIN_USERS_ROUTES)\r\n      },\r\n      {\r\n        path: 'courses',\r\n        loadChildren: () => import('@app/admin/courses/admin-courses.routes').then(m => m.ADMIN_COURSES_ROUTES)\r\n      },\r\n      {\r\n        path: 'orders',\r\n        loadChildren: () => import('@app/admin/orders/admin-orders.routes').then(m => m.ADMIN_ORDERS_ROUTES)\r\n      },\r\n      {\r\n        path: 'services',\r\n        loadChildren: () => import('@app/admin/services/admin-services.routes').then(m => m.ADMIN_SERVICES_ROUTES)\r\n      },\r\n      {\r\n        path: 'repairs',\r\n        loadChildren: () => import('@app/admin/repairs/admin-repairs.routes').then(m => m.ADMIN_REPAIRS_ROUTES)\r\n      },\r\n      {\r\n        path: 'messages',\r\n        loadChildren: () => import('@app/admin/messages/admin-messages.routes').then(m => m.ADMIN_MESSAGES_ROUTES)\r\n      },\r\n      {\r\n        path: 'posts',\r\n        loadChildren: () => import('@app/admin/posts/admin-posts.routes').then(m => m.ADMIN_POSTS_ROUTES)\r\n      }\r\n    ]\r\n  }\r\n];\r\n\r\nexport default adminRoutes;"],
  "mappings": "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",
  "names": []
}
