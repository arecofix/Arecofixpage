import{a}from"./chunk-F4YL3ILH.js";import{A as b,n,u as S,v as y,x as f,y as T}from"./chunk-RVT6AV4G.js";import{A as o,Ba as v,R as h,W as r,ea as u,r as l,t as d,xa as g}from"./chunk-G4WDTWI7.js";var D="SEO_DATA",w=class s{titleService=r(y);metaService=r(S);router=r(b);activatedRoute=r(T);document=r(u);platformId=r(g);transferState=r(v);constructor(){this.init()}init(){if(!n(this.platformId)){let t=this.transferState.get(D,null);t&&this.setPageData(t)}this.router.events.pipe(o(t=>t instanceof f),l(()=>this.rootRoute(this.activatedRoute)),o(t=>t.outlet==="primary"),d(t=>t.data)).subscribe(t=>{if(t.seo){let e=t.seo;this.setPageData(e),n(this.platformId)&&this.transferState.set(D,e)}})}rootRoute(t){for(;t.firstChild;)t=t.firstChild;return t}resetData(){this.metaService.removeTag('property="product:price:amount"'),this.metaService.removeTag('property="product:price:currency"'),this.metaService.removeTag('property="article:published_time"'),this.metaService.removeTag('property="article:author"'),this.metaService.updateTag({property:"og:type",content:"website"}),this.metaService.removeTag('name="keywords"'),this.clearJsonLd()}setPageData(t){let{title:e,description:i,imageUrl:I,type:A="website",keywords:c,schema:p}=t;this.resetData();let m=e.includes("|")||e.includes("Arecofix")?e:`${e} | Arecofix`;this.titleService.setTitle(m),this.metaService.updateTag({name:"description",content:i}),c&&this.metaService.updateTag({name:"keywords",content:c}),this.setSocialMediaTags({title:m,description:i,image:I||`${a.baseUrl}/assets/img/brands/logo/logo-normal1.PNG`,url:this.router.url,type:A}),this.setCanonicalUrl(this.router.url),p&&this.setJsonLd(p)}setSocialMediaTags(t){this.metaService.updateTag({property:"og:title",content:t.title}),this.metaService.updateTag({property:"og:description",content:t.description}),this.metaService.updateTag({property:"og:type",content:t.type}),this.metaService.updateTag({property:"og:url",content:t.url.startsWith("http")?t.url:`${a.baseUrl}${t.url}`});let e=t.image.startsWith("http")?t.image:`${a.baseUrl}${t.image.startsWith("/")?"":"/"}${t.image}`;this.metaService.updateTag({property:"og:image",content:e}),e.startsWith("https")&&this.metaService.updateTag({property:"og:image:secure_url",content:e}),this.metaService.updateTag({name:"twitter:card",content:"summary_large_image"}),this.metaService.updateTag({name:"twitter:title",content:t.title}),this.metaService.updateTag({name:"twitter:description",content:t.description}),this.metaService.updateTag({name:"twitter:image",content:e})}setCanonicalUrl(t){let e=this.document.querySelector('link[rel="canonical"]');e||(e=this.document.createElement("link"),e.setAttribute("rel","canonical"),this.document.head.appendChild(e));let i=t.startsWith("http")?t:`${a.baseUrl}${t}`;e.setAttribute("href",i)}setJsonLd(t){let e="json-ld-schema",i=this.document.getElementById(e);i||(i=this.document.createElement("script"),i.id=e,i.type="application/ld+json",this.document.head.appendChild(i)),i.text=JSON.stringify(t)}clearJsonLd(){let e=this.document.getElementById("json-ld-schema");e&&e.remove()}static \u0275fac=function(e){return new(e||s)};static \u0275prov=h({token:s,factory:s.\u0275fac,providedIn:"root"})};export{w as a};
