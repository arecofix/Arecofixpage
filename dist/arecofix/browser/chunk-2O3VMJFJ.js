import{a as N}from"./chunk-JAELMFVX.js";import"./chunk-MI7WHUK7.js";import"./chunk-XFT2X3PC.js";import{d as D}from"./chunk-CYIQDGHK.js";import"./chunk-BVKNO7TK.js";import"./chunk-RZVF5N6E.js";import"./chunk-T7AXESXA.js";import{o as F,p as T}from"./chunk-BKULT56L.js";import{Cb as I,Eb as x,Ha as h,Kb as P,La as s,Mb as r,Nb as m,Ob as u,Y as p,Za as E,_b as w,ba as _,bc as v,ca as b,cc as C,jb as d,kb as c,nb as S,oa as g,ob as y,pb as f,qb as t,qc as A,rb as i,sb as l,yb as k}from"./chunk-YATSW66L.js";import"./chunk-VOSPIT4N.js";var O=a=>["/admin/courses",a],j=(a,n)=>n.id;function q(a,n){if(a&1&&(t(0,"span",13),r(1),v(2,"currency"),i()),a&2){let e=x().$implicit;s(),u(" Oferta: ",C(2,1,e.sale_price)," ")}}function V(a,n){if(a&1){let e=k();t(0,"tr")(1,"td")(2,"div",8)(3,"div",9),l(4,"img",10),i()()(),t(5,"td")(6,"div",11),r(7),i(),t(8,"div",12),r(9),i()(),t(10,"td"),r(11),v(12,"currency"),l(13,"br"),d(14,q,3,3,"span",13),i(),t(15,"td"),r(16),i(),t(17,"td")(18,"div",14),r(19),i()(),t(20,"td")(21,"div",15)(22,"a",16),l(23,"i",17),i(),t(24,"button",18),I("click",function(){let $=_(e).$implicit,L=x();return b(L.deleteCourse($))}),l(25,"i",19),i()()()()}if(a&2){let e=n.$implicit;s(4),f("src",e.image_url,h)("alt",e.title),s(3),m(e.title),s(2),m(e.slug),s(2),u(" ",C(12,13,e.price)," "),s(3),c(e.sale_price?14:-1),s(2),m(e.level),s(2),P("badge-success",e.is_active)("badge-ghost",!e.is_active),s(),u(" ",e.is_active?"Activo":"Inactivo"," "),s(3),f("routerLink",w(15,O,e.id))}}function B(a,n){a&1&&(t(0,"tr")(1,"td",20),r(2," No hay cursos registrados. "),i()())}function R(a,n){a&1&&(t(0,"div",7),l(1,"span",21),i())}var M=class a{coursesService=p(N);cdr=p(A);courses=g([]);loading=g(!0);ngOnInit(){this.loadCourses()}loadCourses(){this.loading.set(!0),this.coursesService.getCourses().subscribe({next:n=>{this.courses.set(n.data||[]),this.loading.set(!1),this.cdr.markForCheck()},error:n=>{console.error("Error loading courses",n),this.loading.set(!1),this.cdr.markForCheck()}})}async deleteCourse(n){confirm(`\xBFEst\xE1s seguro de eliminar el curso "${n.title}"?`)&&this.coursesService.deleteCourse(n.id).subscribe({next:()=>{this.courses.update(e=>e.filter(o=>o.id!==n.id)),this.cdr.markForCheck()},error:e=>alert("Error al eliminar el curso: "+e.message)})}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=E({type:a,selectors:[["app-admin-courses-page"]],decls:27,vars:2,consts:[[1,"flex","justify-between","items-center","mb-6"],[1,"text-2xl","font-bold","text-gray-800"],["routerLink","/admin/courses/new",1,"btn","btn-primary"],[1,"fas","fa-plus","mr-2"],[1,"overflow-x-auto","bg-white","rounded-lg","shadow","text-gray-800"],[1,"table","w-full"],[1,"text-gray-800"],[1,"flex","justify-center","py-8"],[1,"avatar"],[1,"mask","mask-squircle","w-12","h-12"],[3,"src","alt"],[1,"font-bold"],[1,"text-sm","opacity-50"],[1,"text-xs","text-green-600"],[1,"badge"],[1,"flex","gap-2"],[1,"btn","btn-sm","btn-square","btn-ghost","text-blue-600",3,"routerLink"],[1,"fas","fa-edit"],[1,"btn","btn-sm","btn-square","btn-ghost","text-red-600",3,"click"],[1,"fas","fa-trash"],["colspan","6",1,"text-center","py-8","text-gray-500"],[1,"loading","loading-spinner","loading-lg"]],template:function(e,o){e&1&&(t(0,"div",0)(1,"h2",1),r(2,"Administrar Cursos"),i(),t(3,"a",2),l(4,"i",3),r(5," Nuevo Curso "),i()(),t(6,"div",4)(7,"table",5)(8,"thead")(9,"tr",6)(10,"th"),r(11,"Imagen"),i(),t(12,"th"),r(13,"T\xEDtulo"),i(),t(14,"th"),r(15,"Precio"),i(),t(16,"th"),r(17,"Nivel"),i(),t(18,"th"),r(19,"Estado"),i(),t(20,"th"),r(21,"Acciones"),i()()(),t(22,"tbody"),S(23,V,26,17,"tr",null,j),d(25,B,3,0,"tr"),i()()(),d(26,R,2,0,"div",7)),e&2&&(s(23),y(o.courses()),s(2),c(o.courses().length===0&&!o.loading()?25:-1),s(),c(o.loading()?26:-1))},dependencies:[T,D,F],encapsulation:2})};export{M as AdminCoursesPage};
