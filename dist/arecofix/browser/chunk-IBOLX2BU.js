import{a as V}from"./chunk-WRRL5SCS.js";import"./chunk-MSD3KBTG.js";import"./chunk-HWKWYSDO.js";import{h as M}from"./chunk-YWFIYZRP.js";import"./chunk-HLAW74BB.js";import"./chunk-T7AXESXA.js";import{q as D,r as N}from"./chunk-I5WECENP.js";import{Ab as P,Bb as b,Cb as t,Db as i,Dc as T,Eb as l,Kb as w,Ob as h,Qb as m,Ra as y,Wa as s,Wb as A,Y as f,Yb as r,Zb as u,_b as p,ba as v,ca as _,ib as k,kc as F,oa as C,oc as E,pc as S,vb as d,wb as c,zb as I}from"./chunk-4GKTJ7DD.js";import"./chunk-VOSPIT4N.js";var j=a=>["/admin/courses",a],L=(a,n)=>n.id;function O(a,n){if(a&1&&(t(0,"span",13),r(1),E(2,"currency"),i()),a&2){let e=m().$implicit;s(),p(" Oferta: ",S(2,1,e.sale_price)," ")}}function q(a,n){if(a&1){let e=w();t(0,"tr")(1,"td")(2,"div",8)(3,"div",9)(4,"img",10),h("error",function(g){v(e);let x=m();return _(x.handleImageError(g))}),i()()()(),t(5,"td")(6,"div",11),r(7),i(),t(8,"div",12),r(9),i()(),t(10,"td"),r(11),E(12,"currency"),l(13,"br"),d(14,O,3,3,"span",13),i(),t(15,"td"),r(16),i(),t(17,"td")(18,"div",14),r(19),i()(),t(20,"td")(21,"div",15)(22,"a",16),l(23,"i",17),i(),t(24,"button",18),h("click",function(){let g=v(e).$implicit,x=m();return _(x.deleteCourse(g))}),l(25,"i",19),i()()()()}if(a&2){let e=n.$implicit;s(4),b("src",e.image_url||"assets/placeholder.png",y)("alt",e.title),s(3),u(e.title),s(2),u(e.slug),s(2),p(" ",S(12,13,e.price)," "),s(3),c(e.sale_price?14:-1),s(2),u(e.level),s(2),A("badge-success",e.is_active)("badge-ghost",!e.is_active),s(),p(" ",e.is_active?"Activo":"Inactivo"," "),s(3),b("routerLink",F(15,j,e.id))}}function B(a,n){a&1&&(t(0,"tr")(1,"td",20),r(2," No hay cursos registrados. "),i()())}function R(a,n){a&1&&(t(0,"div",7),l(1,"span",21),i())}var $=class a{coursesService=f(V);cdr=f(T);courses=C([]);loading=C(!0);ngOnInit(){this.loadCourses()}loadCourses(){this.loading.set(!0),this.coursesService.getCourses().subscribe({next:n=>{this.courses.set(n.data||[]),this.loading.set(!1),this.cdr.markForCheck()},error:n=>{console.error("Error loading courses",n),this.loading.set(!1),this.cdr.markForCheck()}})}async deleteCourse(n){confirm(`\xBFEst\xE1s seguro de eliminar el curso "${n.title}"?`)&&this.coursesService.deleteCourse(n.id).subscribe({next:()=>{this.courses.update(e=>e.filter(o=>o.id!==n.id)),this.cdr.markForCheck()},error:e=>alert("Error al eliminar el curso: "+e.message)})}handleImageError(n){n.target.src="assets/img/cursos/1.jpg"}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=k({type:a,selectors:[["app-admin-courses-page"]],decls:27,vars:2,consts:[[1,"flex","justify-between","items-center","mb-6"],[1,"text-2xl","font-bold","text-green-600"],["routerLink","/admin/courses/new",1,"btn","btn-primary"],[1,"fas","fa-plus","mr-2"],[1,"overflow-x-auto","bg-base-100","rounded-lg","shadow","text-base-content"],[1,"table","w-full"],[1,"text-base-content"],[1,"flex","justify-center","py-8"],[1,"avatar"],[1,"mask","mask-squircle","w-12","h-12"],[3,"error","src","alt"],[1,"font-bold"],[1,"text-sm","opacity-50"],[1,"text-xs","text-green-600"],[1,"badge"],[1,"flex","gap-2"],[1,"btn","btn-sm","btn-square","btn-ghost","text-blue-600",3,"routerLink"],[1,"fas","fa-edit"],[1,"btn","btn-sm","btn-square","btn-ghost","text-red-600",3,"click"],[1,"fas","fa-trash"],["colspan","6",1,"text-center","py-8","text-gray-500"],[1,"loading","loading-spinner","loading-lg"]],template:function(e,o){e&1&&(t(0,"div",0)(1,"h2",1),r(2,"Administrar Cursos"),i(),t(3,"a",2),l(4,"i",3),r(5," Nuevo Curso "),i()(),t(6,"div",4)(7,"table",5)(8,"thead")(9,"tr",6)(10,"th"),r(11,"Imagen"),i(),t(12,"th"),r(13,"T\xEDtulo"),i(),t(14,"th"),r(15,"Precio"),i(),t(16,"th"),r(17,"Nivel"),i(),t(18,"th"),r(19,"Estado"),i(),t(20,"th"),r(21,"Acciones"),i()()(),t(22,"tbody"),I(23,q,26,17,"tr",null,L),d(25,B,3,0,"tr"),i()()(),d(26,R,2,0,"div",7)),e&2&&(s(23),P(o.courses()),s(2),c(o.courses().length===0&&!o.loading()?25:-1),s(),c(o.loading()?26:-1))},dependencies:[N,M,D],encapsulation:2})};export{$ as AdminCoursesPage};
