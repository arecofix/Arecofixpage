import{F as Dl,S as Rl,V as Il,cb as $i,e as Al,ia as yr,ja as Fl,jb as $l,sa as Ll,va as Nl}from"./chunk-J6ZEXR2D.js";import{a as zs,b as js}from"./chunk-7CGTOI24.js";var x=typeof window<"u"?window:void 0,vt=typeof globalThis<"u"?globalThis:x;typeof self>"u"&&(vt.self=vt),typeof File>"u"&&(vt.File=function(){});var Ic=Array.prototype,Bl=Ic.forEach,zl=Ic.indexOf,Rt=vt?.navigator,C=vt?.document,Ct=vt?.location,Br=vt?.fetch,zr=vt!=null&&vt.XMLHttpRequest&&"withCredentials"in new vt.XMLHttpRequest?vt.XMLHttpRequest:void 0,jl=vt?.AbortController,Et=Rt?.userAgent,R=x??{},ie={DEBUG:!1,LIB_VERSION:"1.318.2"};function Hl(i,t,e,s,n,r,o){try{var a=i[r](o),l=a.value}catch(c){return void e(c)}a.done?t(l):Promise.resolve(l).then(s,n)}function ni(i){return function(){var t=this,e=arguments;return new Promise(function(s,n){var r=i.apply(t,e);function o(l){Hl(r,s,n,o,a,"next",l)}function a(l){Hl(r,s,n,o,a,"throw",l)}o(void 0)})}}function T(){return T=Object.assign?Object.assign.bind():function(i){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var s in e)({}).hasOwnProperty.call(e,s)&&(i[s]=e[s])}return i},T.apply(null,arguments)}function Fc(i,t){if(i==null)return{};var e={};for(var s in i)if({}.hasOwnProperty.call(i,s)){if(t.indexOf(s)!==-1)continue;e[s]=i[s]}return e}var Ap=["amazonbot","amazonproductbot","app.hypefactors.com","applebot","archive.org_bot","awariobot","backlinksextendedbot","baiduspider","bingbot","bingpreview","chrome-lighthouse","dataforseobot","deepscan","duckduckbot","facebookexternal","facebookcatalog","http://yandex.com/bots","hubspot","ia_archiver","leikibot","linkedinbot","meta-externalagent","mj12bot","msnbot","nessus","petalbot","pinterest","prerender","rogerbot","screaming frog","sebot-wa","sitebulb","slackbot","slurp","trendictionbot","turnitin","twitterbot","vercel-screenshot","vercelbot","yahoo! slurp","yandexbot","zoombot","bot.htm","bot.php","(bot;","bot/","crawler","ahrefsbot","ahrefssiteaudit","semrushbot","siteauditbot","splitsignalbot","gptbot","oai-searchbot","chatgpt-user","perplexitybot","better uptime bot","sentryuptimebot","uptimerobot","headlesschrome","cypress","google-hoteladsverifier","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleother","google-cloudvertexbot","googleweblight","mediapartners-google","storebot-google","google-inspectiontool","bytespider"],Wl=function(i,t){if(t===void 0&&(t=[]),!i)return!1;var e=i.toLowerCase();return Ap.concat(t).some(s=>{var n=s.toLowerCase();return e.indexOf(n)!==-1})},Dp=["$snapshot","$pageview","$pageleave","$set","survey dismissed","survey sent","survey shown","$identify","$groupidentify","$create_alias","$$client_ingestion_warning","$web_experiment_applied","$feature_enrollment_update","$feature_flag_called"];function $(i,t){return i.indexOf(t)!==-1}var bn=function(i){return i.trim()},jr=function(i){return i.replace(/^\$/,"")},Rp=Array.isArray,Lc=Object.prototype,Nc=Lc.hasOwnProperty,xn=Lc.toString,V=Rp||function(i){return xn.call(i)==="[object Array]"},ke=i=>typeof i=="function",mt=i=>i===Object(i)&&!V(i),ri=i=>{if(mt(i)){for(var t in i)if(Nc.call(i,t))return!1;return!0}return!1},P=i=>i===void 0,ft=i=>xn.call(i)=="[object String]",Hr=i=>ft(i)&&i.trim().length===0,Ht=i=>i===null,W=i=>P(i)||Ht(i),le=i=>xn.call(i)=="[object Number]"&&i==i,Ys=i=>le(i)&&i>0,ae=i=>xn.call(i)==="[object Boolean]",Ip=i=>i instanceof FormData,Fp=i=>$(Dp,i);function Wr(i){return i===null||typeof i!="object"}function Ks(i,t){return Object.prototype.toString.call(i)==="[object "+t+"]"}function $c(i){return!P(Event)&&(function(t,e){try{return t instanceof e}catch{return!1}})(i,Event)}var Lp=[!0,"true",1,"1","yes"],wr=i=>$(Lp,i),Np=[!1,"false",0,"0","no"];function qt(i,t,e,s,n){return t>e&&(s.warn("min cannot be greater than max."),t=e),le(i)?i>e?(s.warn(" cannot be  greater than max: "+e+". Using max value instead."),e):i<t?(s.warn(" cannot be less than min: "+t+". Using min value instead."),t):i:(s.warn(" must be a number. using max or fallback. max: "+e+", fallback: "+n),qt(n||e,t,e,s))}var Vr=class{constructor(t){this.t={},this.i=t.i,this.o=qt(t.bucketSize,0,100,t.h),this.m=qt(t.refillRate,0,this.o,t.h),this.$=qt(t.refillInterval,0,864e5,t.h)}S(t,e){var s=e-t.lastAccess,n=Math.floor(s/this.$);if(n>0){var r=n*this.m;t.tokens=Math.min(t.tokens+r,this.o),t.lastAccess=t.lastAccess+n*this.$}}consumeRateLimit(t){var e,s=Date.now(),n=String(t),r=this.t[n];return r?this.S(r,s):(r={tokens:this.o,lastAccess:s},this.t[n]=r),r.tokens===0||(r.tokens--,r.tokens===0&&((e=this.i)==null||e.call(this,t)),r.tokens===0)}stop(){this.t={}}},Ft="Mobile",Zs="iOS",oe="Android",rs="Tablet",Bc=oe+" "+rs,zc="iPad",jc="Apple",Hc=jc+" Watch",os="Safari",ci="BlackBerry",Wc="Samsung",Vc=Wc+"Browser",Uc=Wc+" Internet",Ue="Chrome",$p=Ue+" OS",qc=Ue+" "+Zs,Zo="Internet Explorer",Yc=Zo+" "+Ft,Jo="Opera",Bp=Jo+" Mini",Qo="Edge",Gc="Microsoft "+Qo,ai="Firefox",Xc=ai+" "+Zs,as="Nintendo",ls="PlayStation",li="Xbox",Kc=oe+" "+Ft,Zc=Ft+" "+os,Gi="Windows",Ur=Gi+" Phone",Vl="Nokia",qr="Ouya",Jc="Generic",zp=Jc+" "+Ft.toLowerCase(),Qc=Jc+" "+rs.toLowerCase(),Yr="Konqueror",Mt="(\\d+(\\.\\d+)?)",kr=new RegExp("Version/"+Mt),jp=new RegExp(li,"i"),Hp=new RegExp(ls+" \\w+","i"),Wp=new RegExp(as+" \\w+","i"),ta=new RegExp(ci+"|PlayBook|BB10","i"),Vp={"NT3.51":"NT 3.11","NT4.0":"NT 4.0","5.0":"2000",5.1:"XP",5.2:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1",6.4:"10","10.0":"10"},Hs,Ul,Sr,Up=(i,t)=>t&&$(t,jc)||(function(e){return $(e,os)&&!$(e,Ue)&&!$(e,oe)})(i),th=function(i,t){return t=t||"",$(i," OPR/")&&$(i,"Mini")?Bp:$(i," OPR/")?Jo:ta.test(i)?ci:$(i,"IE"+Ft)||$(i,"WPDesktop")?Yc:$(i,Vc)?Uc:$(i,Qo)||$(i,"Edg/")?Gc:$(i,"FBIOS")?"Facebook "+Ft:$(i,"UCWEB")||$(i,"UCBrowser")?"UC Browser":$(i,"CriOS")?qc:$(i,"CrMo")||$(i,Ue)?Ue:$(i,oe)&&$(i,os)?Kc:$(i,"FxiOS")?Xc:$(i.toLowerCase(),Yr.toLowerCase())?Yr:Up(i,t)?$(i,Ft)?Zc:os:$(i,ai)?ai:$(i,"MSIE")||$(i,"Trident/")?Zo:$(i,"Gecko")?ai:""},qp={[Yc]:[new RegExp("rv:"+Mt)],[Gc]:[new RegExp(Qo+"?\\/"+Mt)],[Ue]:[new RegExp("("+Ue+"|CrMo)\\/"+Mt)],[qc]:[new RegExp("CriOS\\/"+Mt)],"UC Browser":[new RegExp("(UCBrowser|UCWEB)\\/"+Mt)],[os]:[kr],[Zc]:[kr],[Jo]:[new RegExp("(Opera|OPR)\\/"+Mt)],[ai]:[new RegExp(ai+"\\/"+Mt)],[Xc]:[new RegExp("FxiOS\\/"+Mt)],[Yr]:[new RegExp("Konqueror[:/]?"+Mt,"i")],[ci]:[new RegExp(ci+" "+Mt),kr],[Kc]:[new RegExp("android\\s"+Mt,"i")],[Uc]:[new RegExp(Vc+"\\/"+Mt)],[Zo]:[new RegExp("(rv:|MSIE )"+Mt)],Mozilla:[new RegExp("rv:"+Mt)]},Yp=function(i,t){var e=th(i,t),s=qp[e];if(P(s))return null;for(var n=0;n<s.length;n++){var r=s[n],o=i.match(r);if(o)return parseFloat(o[o.length-2])}return null},ql=[[new RegExp(li+"; "+li+" (.*?)[);]","i"),i=>[li,i&&i[1]||""]],[new RegExp(as,"i"),[as,""]],[new RegExp(ls,"i"),[ls,""]],[ta,[ci,""]],[new RegExp(Gi,"i"),(i,t)=>{if(/Phone/.test(t)||/WPDesktop/.test(t))return[Ur,""];if(new RegExp(Ft).test(t)&&!/IEMobile\b/.test(t))return[Gi+" "+Ft,""];var e=/Windows NT ([0-9.]+)/i.exec(t);if(e&&e[1]){var s=e[1],n=Vp[s]||"";return/arm/i.test(t)&&(n="RT"),[Gi,n]}return[Gi,""]}],[/((iPhone|iPad|iPod).*?OS (\d+)_(\d+)_?(\d+)?|iPhone)/,i=>{if(i&&i[3]){var t=[i[3],i[4],i[5]||"0"];return[Zs,t.join(".")]}return[Zs,""]}],[/(watch.*\/(\d+\.\d+\.\d+)|watch os,(\d+\.\d+),)/i,i=>{var t="";return i&&i.length>=3&&(t=P(i[2])?i[3]:i[2]),["watchOS",t]}],[new RegExp("("+oe+" (\\d+)\\.(\\d+)\\.?(\\d+)?|"+oe+")","i"),i=>{if(i&&i[2]){var t=[i[2],i[3],i[4]||"0"];return[oe,t.join(".")]}return[oe,""]}],[/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i,i=>{var t=["Mac OS X",""];if(i&&i[1]){var e=[i[1],i[2],i[3]||"0"];t[1]=e.join(".")}return t}],[/Mac/i,["Mac OS X",""]],[/CrOS/,[$p,""]],[/Linux|debian/i,["Linux",""]]],Yl=function(i){return Wp.test(i)?as:Hp.test(i)?ls:jp.test(i)?li:new RegExp(qr,"i").test(i)?qr:new RegExp("("+Ur+"|WPDesktop)","i").test(i)?Ur:/iPad/.test(i)?zc:/iPod/.test(i)?"iPod Touch":/iPhone/.test(i)?"iPhone":/(watch)(?: ?os[,/]|\d,\d\/)[\d.]+/i.test(i)?Hc:ta.test(i)?ci:/(kobo)\s(ereader|touch)/i.test(i)?"Kobo":new RegExp(Vl,"i").test(i)?Vl:/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i.test(i)||/(kf[a-z]+)( bui|\)).+silk\//i.test(i)?"Kindle Fire":/(Android|ZTE)/i.test(i)?new RegExp(Ft).test(i)&&!/(9138B|TB782B|Nexus [97]|pixel c|HUAWEISHT|BTV|noble nook|smart ultra 6)/i.test(i)||/pixel[\daxl ]{1,6}/i.test(i)&&!/pixel c/i.test(i)||/(huaweimed-al00|tah-|APA|SM-G92|i980|zte|U304AA)/i.test(i)||/lmy47v/i.test(i)&&!/QTAQZ3/i.test(i)?oe:Bc:new RegExp("(pda|"+Ft+")","i").test(i)?zp:new RegExp(rs,"i").test(i)&&!new RegExp(rs+" pc","i").test(i)?Qc:""},Gp=i=>i instanceof Error;function Xp(i){var t=globalThis._posthogChunkIds;if(t){var e=Object.keys(t);return Sr&&e.length===Ul||(Ul=e.length,Sr=e.reduce((s,n)=>{Hs||(Hs={});var r=Hs[n];if(r)s[r[0]]=r[1];else for(var o=i(n),a=o.length-1;a>=0;a--){var l=o[a],c=l?.filename,h=t[n];if(c&&h){s[c]=h,Hs[n]=[c,h];break}}return s},{})),Sr}}var Gr=class{constructor(t,e,s){s===void 0&&(s=[]),this.coercers=t,this.stackParser=e,this.modifiers=s}buildFromUnknown(t,e){e===void 0&&(e={});var s=e&&e.mechanism||{handled:!0,type:"generic"},n=this.buildCoercingContext(s,e,0).apply(t),r=this.buildParsingContext(),o=this.parseStacktrace(n,r);return{$exception_list:this.convertToExceptionList(o,s),$exception_level:"error"}}modifyFrames(t){var e=this;return ni(function*(){for(var s of t)s.stacktrace&&s.stacktrace.frames&&V(s.stacktrace.frames)&&(s.stacktrace.frames=yield e.applyModifiers(s.stacktrace.frames));return t})()}coerceFallback(t){var e;return{type:"Error",value:"Unknown error",stack:(e=t.syntheticException)==null?void 0:e.stack,synthetic:!0}}parseStacktrace(t,e){var s,n;return t.cause!=null&&(s=this.parseStacktrace(t.cause,e)),t.stack!=""&&t.stack!=null&&(n=this.applyChunkIds(this.stackParser(t.stack,t.synthetic?1:0),e.chunkIdMap)),T({},t,{cause:s,stack:n})}applyChunkIds(t,e){return t.map(s=>(s.filename&&e&&(s.chunk_id=e[s.filename]),s))}applyCoercers(t,e){for(var s of this.coercers)if(s.match(t))return s.coerce(t,e);return this.coerceFallback(e)}applyModifiers(t){var e=this;return ni(function*(){var s=t;for(var n of e.modifiers)s=yield n(s);return s})()}convertToExceptionList(t,e){var s,n,r,o={type:t.type,value:t.value,mechanism:{type:(s=e.type)!==null&&s!==void 0?s:"generic",handled:(n=e.handled)===null||n===void 0||n,synthetic:(r=t.synthetic)!==null&&r!==void 0&&r}};t.stack&&(o.stacktrace={type:"raw",frames:t.stack});var a=[o];return t.cause!=null&&a.push(...this.convertToExceptionList(t.cause,T({},e,{handled:!0}))),a}buildParsingContext(){return{chunkIdMap:Xp(this.stackParser)}}buildCoercingContext(t,e,s){s===void 0&&(s=0);var n=(r,o)=>{if(o<=4){var a=this.buildCoercingContext(t,e,o);return this.applyCoercers(r,a)}};return T({},e,{syntheticException:s==0?e.syntheticException:void 0,mechanism:t,apply:r=>n(r,s),next:r=>n(r,s+1)})}},hi="?";function Xr(i,t,e,s,n){var r={platform:i,filename:t,function:e==="<anonymous>"?hi:e,in_app:!0};return P(s)||(r.lineno=s),P(n)||(r.colno=n),r}var eh=(i,t)=>{var e=i.indexOf("safari-extension")!==-1,s=i.indexOf("safari-web-extension")!==-1;return e||s?[i.indexOf("@")!==-1?i.split("@")[0]:hi,e?"safari-extension:"+t:"safari-web-extension:"+t]:[i,t]},Kp=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,Zp=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Jp=/\((\S*)(?::(\d+))(?::(\d+))\)/,Qp=(i,t)=>{var e=Kp.exec(i);if(e){var[,s,n,r]=e;return Xr(t,s,hi,+n,+r)}var o=Zp.exec(i);if(o){if(o[2]&&o[2].indexOf("eval")===0){var a=Jp.exec(o[2]);a&&(o[2]=a[1],o[3]=a[2],o[4]=a[3])}var[l,c]=eh(o[1]||hi,o[2]);return Xr(t,c,l,o[3]?+o[3]:void 0,o[4]?+o[4]:void 0)}},tg=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,eg=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,ig=(i,t)=>{var e=tg.exec(i);if(e){if(e[3]&&e[3].indexOf(" > eval")>-1){var s=eg.exec(e[3]);s&&(e[1]=e[1]||"eval",e[3]=s[1],e[4]=s[2],e[5]="")}var n=e[3],r=e[1]||hi;return[r,n]=eh(r,n),Xr(t,n,r,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}},Gl=/\(error: (.*)\)/,Xl=50;function sg(){return(function(i){for(var t=arguments.length,e=new Array(t>1?t-1:0),s=1;s<t;s++)e[s-1]=arguments[s];return function(n,r){r===void 0&&(r=0);for(var o=[],a=n.split(`
`),l=r;l<a.length;l++){var c=a[l];if(!(c.length>1024)){var h=Gl.test(c)?c.replace(Gl,"$1"):c;if(!h.match(/\S*Error: /)){for(var u of e){var d=u(h,i);if(d){o.push(d);break}}if(o.length>=Xl)break}}}return(function(f){if(!f.length)return[];var p=Array.from(f);return p.reverse(),p.slice(0,Xl).map(g=>{return T({},g,{filename:g.filename||(m=p,m[m.length-1]||{}).filename,function:g.function||hi});var m})})(o)}})("web:javascript",Qp,ig)}var Kr=class{match(t){return this.isDOMException(t)||this.isDOMError(t)}coerce(t,e){var s=ft(t.stack);return{type:this.getType(t),value:this.getValue(t),stack:s?t.stack:void 0,cause:t.cause?e.next(t.cause):void 0,synthetic:!1}}getType(t){return this.isDOMError(t)?"DOMError":"DOMException"}getValue(t){var e=t.name||(this.isDOMError(t)?"DOMError":"DOMException");return t.message?e+": "+t.message:e}isDOMException(t){return Ks(t,"DOMException")}isDOMError(t){return Ks(t,"DOMError")}},Zr=class{match(t){return(e=>e instanceof Error)(t)}coerce(t,e){return{type:this.getType(t),value:this.getMessage(t,e),stack:this.getStack(t),cause:t.cause?e.next(t.cause):void 0,synthetic:!1}}getType(t){return t.name||t.constructor.name}getMessage(t,e){var s=t.message;return s.error&&typeof s.error.message=="string"?String(s.error.message):String(s)}getStack(t){return t.stacktrace||t.stack||void 0}},Jr=class{constructor(){}match(t){return Ks(t,"ErrorEvent")&&t.error!=null}coerce(t,e){var s,n=e.apply(t.error);return n||{type:"ErrorEvent",value:t.message,stack:(s=e.syntheticException)==null?void 0:s.stack,synthetic:!0}}},ng=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i,Qr=class{match(t){return typeof t=="string"}coerce(t,e){var s,[n,r]=this.getInfos(t);return{type:n??"Error",value:r??t,stack:(s=e.syntheticException)==null?void 0:s.stack,synthetic:!0}}getInfos(t){var e="Error",s=t,n=t.match(ng);return n&&(e=n[1],s=n[2]),[e,s]}},rg=["fatal","error","warning","log","info","debug"];function ih(i,t){t===void 0&&(t=40);var e=Object.keys(i);if(e.sort(),!e.length)return"[object has no keys]";for(var s=e.length;s>0;s--){var n=e.slice(0,s).join(", ");if(!(n.length>t))return s===e.length||n.length<=t?n:n.slice(0,t)+"..."}return""}var to=class{match(t){return typeof t=="object"&&t!==null}coerce(t,e){var s,n=this.getErrorPropertyFromObject(t);return n?e.apply(n):{type:this.getType(t),value:this.getValue(t),stack:(s=e.syntheticException)==null?void 0:s.stack,level:this.isSeverityLevel(t.level)?t.level:"error",synthetic:!0}}getType(t){return $c(t)?t.constructor.name:"Error"}getValue(t){if("name"in t&&typeof t.name=="string"){var e="'"+t.name+"' captured as exception";return"message"in t&&typeof t.message=="string"&&(e+=" with message: '"+t.message+"'"),e}if("message"in t&&typeof t.message=="string")return t.message;var s=this.getObjectClassName(t);return(s&&s!=="Object"?"'"+s+"'":"Object")+" captured as exception with keys: "+ih(t)}isSeverityLevel(t){return ft(t)&&!Hr(t)&&rg.indexOf(t)>=0}getErrorPropertyFromObject(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e)){var s=t[e];if(Gp(s))return s}}getObjectClassName(t){try{var e=Object.getPrototypeOf(t);return e?e.constructor.name:void 0}catch{return}}},eo=class{match(t){return $c(t)}coerce(t,e){var s,n=t.constructor.name;return{type:n,value:n+" captured as exception with keys: "+ih(t),stack:(s=e.syntheticException)==null?void 0:s.stack,synthetic:!0}}},io=class{match(t){return Wr(t)}coerce(t,e){var s;return{type:"Error",value:"Primitive value captured as exception: "+String(t),stack:(s=e.syntheticException)==null?void 0:s.stack,synthetic:!0}}},so=class{match(t){return Ks(t,"PromiseRejectionEvent")}coerce(t,e){var s,n=this.getUnhandledRejectionReason(t);return Wr(n)?{type:"UnhandledRejection",value:"Non-Error promise rejection captured with value: "+String(n),stack:(s=e.syntheticException)==null?void 0:s.stack,synthetic:!0}:e.apply(n)}getUnhandledRejectionReason(t){if(Wr(t))return t;try{if("reason"in t)return t.reason;if("detail"in t&&"reason"in t.detail)return t.detail.reason}catch{}return t}},sh=function(i,t){var{debugEnabled:e}=t===void 0?{}:t,s={k:function(n){if(x&&(ie.DEBUG||R.POSTHOG_DEBUG||e)&&!P(x.console)&&x.console){for(var r=("__rrweb_original__"in x.console[n])?x.console[n].__rrweb_original__:x.console[n],o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];r(i,...a)}},info:function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];s.k("log",...r)},warn:function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];s.k("warn",...r)},error:function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];s.k("error",...r)},critical:function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];console.error(i,...r)},uninitializedWarning:n=>{s.error("You must initialize PostHog before calling "+n)},createLogger:(n,r)=>sh(i+" "+n,r)};return s},E=sh("[PostHog.js]"),ct=E.createLogger,og=ct("[ExternalScriptsLoader]"),Kl=(i,t,e)=>{if(i.config.disable_external_dependency_loading)return og.warn(t+" was requested but loading of external scripts is disabled."),e("Loading of external scripts is disabled");var s=C?.querySelectorAll("script");if(s){for(var n,r=function(){if(s[o].src===t){var l=s[o];return l.__posthog_loading_callback_fired?{v:e()}:(l.addEventListener("load",c=>{l.__posthog_loading_callback_fired=!0,e(void 0,c)}),l.onerror=c=>e(c),{v:void 0})}},o=0;o<s.length;o++)if(n=r())return n.v}var a=()=>{if(!C)return e("document not found");var l=C.createElement("script");if(l.type="text/javascript",l.crossOrigin="anonymous",l.src=t,l.onload=u=>{l.__posthog_loading_callback_fired=!0,e(void 0,u)},l.onerror=u=>e(u),i.config.prepare_external_dependency_script&&(l=i.config.prepare_external_dependency_script(l)),!l)return e("prepare_external_dependency_script returned null");var c,h=C.querySelectorAll("body > script");h.length>0?(c=h[0].parentNode)==null||c.insertBefore(l,h[0]):C.body.appendChild(l)};C!=null&&C.body?a():C?.addEventListener("DOMContentLoaded",a)};R.__PosthogExtensions__=R.__PosthogExtensions__||{},R.__PosthogExtensions__.loadExternalDependency=(i,t,e)=>{var s="/static/"+t+".js?v="+i.version;if(t==="remote-config"&&(s="/array/"+i.config.token+"/config.js"),t==="toolbar"){var n=3e5;s=s+"&t="+Math.floor(Date.now()/n)*n}var r=i.requestRouter.endpointFor("assets",s);Kl(i,r,e)},R.__PosthogExtensions__.loadSiteApp=(i,t,e)=>{var s=i.requestRouter.endpointFor("api",t);Kl(i,s,e)};var Js={};function Se(i,t,e){if(V(i)){if(Bl&&i.forEach===Bl)i.forEach(t,e);else if("length"in i&&i.length===+i.length){for(var s=0,n=i.length;s<n;s++)if(s in i&&t.call(e,i[s],s)===Js)return}}}function Z(i,t,e){if(!W(i)){if(V(i))return Se(i,t,e);if(Ip(i)){for(var s of i.entries())if(t.call(e,s[1],s[0])===Js)return}else for(var n in i)if(Nc.call(i,n)&&t.call(e,i[n],n)===Js)return}}var lt=function(i){for(var t=arguments.length,e=new Array(t>1?t-1:0),s=1;s<t;s++)e[s-1]=arguments[s];return Se(e,function(n){for(var r in n)n[r]!==void 0&&(i[r]=n[r])}),i},di=function(i){for(var t=arguments.length,e=new Array(t>1?t-1:0),s=1;s<t;s++)e[s-1]=arguments[s];return Se(e,function(n){Se(n,function(r){i.push(r)})}),i};function Gs(i){for(var t=Object.keys(i),e=t.length,s=new Array(e);e--;)s[e]=[t[e],i[t[e]]];return s}var Zl=function(i){try{return i()}catch{return}},ag=function(i){return function(){try{for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];return i.apply(this,e)}catch(n){E.critical("Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A."),E.critical(n)}}},ea=function(i){var t={};return Z(i,function(e,s){(ft(e)&&e.length>0||le(e))&&(t[s]=e)}),t};function lg(i,t){return e=i,s=r=>ft(r)&&!Ht(t)?r.slice(0,t):r,n=new Set,(function r(o,a){return o!==Object(o)?s?s(o,a):o:n.has(o)?void 0:(n.add(o),V(o)?(l=[],Se(o,c=>{l.push(r(c))})):(l={},Z(o,(c,h)=>{n.has(c)||(l[h]=r(c,h))})),l);var l})(e);var e,s,n}var cg=["herokuapp.com","vercel.app","netlify.app"];function hg(i){var t=i?.hostname;if(!ft(t))return!1;var e=t.split(".").slice(-2).join(".");for(var s of cg)if(e===s)return!1;return!0}function nh(i,t){for(var e=0;e<i.length;e++)if(t(i[e]))return i[e]}function ht(i,t,e,s){var{capture:n=!1,passive:r=!0}=s??{};i?.addEventListener(t,e,{capture:n,passive:r})}var rh="$people_distinct_id",Xi="__alias",Ki="__timers",Jl="$autocapture_disabled_server_side",no="$heatmaps_enabled_server_side",Ql="$exception_capture_enabled_server_side",ro="$error_tracking_suppression_rules",tc="$error_tracking_capture_extension_exceptions",ec="$web_vitals_enabled_server_side",oh="$dead_clicks_enabled_server_side",ic="$product_tours_enabled_server_side",sc="$web_vitals_allowed_metrics",Mr="$session_recording_remote_config",Qs="$sesid",ah="$session_is_sampled",oi="$enabled_feature_flags",Zi="$early_access_features",oo="$feature_flag_details",Ji="$stored_person_properties",Ve="$stored_group_properties",ao="$surveys",tn="$flag_call_reported",se="$user_state",lo="$client_session_props",co="$capture_rate_limit",ho="$initial_campaign_params",uo="$initial_referrer_info",en="$initial_person_info",sn="$epp",lh="__POSTHOG_TOOLBAR__",Bi="$posthog_cookieless",ug=[rh,Xi,"__cmpns",Ki,"$session_recording_enabled_server_side",no,Qs,oi,ro,se,Zi,oo,Ve,Ji,ao,tn,lo,co,ho,uo,sn,en,"$conversations_widget_session_id","$conversations_ticket_id","$conversations_widget_state","$conversations_user_traits"];function nc(i){return i instanceof Element&&(i.id===lh||!(i.closest==null||!i.closest(".toolbar-global-fade-container")))}function yn(i){return!!i&&i.nodeType===1}function Me(i,t){return!!i&&!!i.tagName&&i.tagName.toLowerCase()===t.toLowerCase()}function ch(i){return!!i&&i.nodeType===3}function hh(i){return!!i&&i.nodeType===11}function ia(i){return i?bn(i).split(/\s+/):[]}function rc(i){var t=x?.location.href;return!!(t&&i&&i.some(e=>t.match(e)))}function nn(i){var t="";switch(typeof i.className){case"string":t=i.className;break;case"object":t=(i.className&&"baseVal"in i.className?i.className.baseVal:null)||i.getAttribute("class")||"";break;default:t=""}return ia(t)}function uh(i){return W(i)?null:bn(i).split(/(\s+)/).filter(t=>cs(t)).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)}function us(i){var t="";return fo(i)&&!mh(i)&&i.childNodes&&i.childNodes.length&&Z(i.childNodes,function(e){var s;ch(e)&&e.textContent&&(t+=(s=uh(e.textContent))!==null&&s!==void 0?s:"")}),bn(t)}function dh(i){return P(i.target)?i.srcElement||null:(t=i.target)!=null&&t.shadowRoot?i.composedPath()[0]||null:i.target||null;var t}var sa=["a","button","form","input","select","textarea","label"];function fh(i,t){if(P(t))return!0;var e,s=function(r){if(t.some(o=>r.matches(o)))return{v:!0}};for(var n of i)if(e=s(n))return e.v;return!1}function ph(i){var t=i.parentNode;return!(!t||!yn(t))&&t}var dg=["next","previous","prev",">","<"],oc=10,ac=[".ph-no-rageclick",".ph-no-capture"];function fg(i,t){if(!x||na(i))return!1;var e,s,n;if(ae(t)?(e=!!t&&ac,s=void 0):(e=(n=t?.css_selector_ignorelist)!==null&&n!==void 0?n:ac,s=t?.content_ignorelist),e===!1)return!1;var{targetElementList:r}=gh(i,!1);return!(function(o,a){if(o===!1||P(o))return!1;var l;if(o===!0)l=dg;else{if(!V(o))return!1;if(o.length>oc)return E.error("[PostHog] content_ignorelist array cannot exceed "+oc+" items. Use css_selector_ignorelist for more complex matching."),!1;l=o.map(c=>c.toLowerCase())}return a.some(c=>{var{safeText:h,ariaLabel:u}=c;return l.some(d=>h.includes(d)||u.includes(d))})})(s,r.map(o=>{var a;return{safeText:us(o).toLowerCase(),ariaLabel:((a=o.getAttribute("aria-label"))==null?void 0:a.toLowerCase().trim())||""}}))&&!fh(r,e)}var na=i=>!i||Me(i,"html")||!yn(i),gh=(i,t)=>{if(!x||na(i))return{parentIsUsefulElement:!1,targetElementList:[]};for(var e=!1,s=[i],n=i;n.parentNode&&!Me(n,"body");)if(hh(n.parentNode))s.push(n.parentNode.host),n=n.parentNode.host;else{var r=ph(n);if(!r)break;if(t||sa.indexOf(r.tagName.toLowerCase())>-1)e=!0;else{var o=x.getComputedStyle(r);o&&o.getPropertyValue("cursor")==="pointer"&&(e=!0)}s.push(r),n=r}return{parentIsUsefulElement:e,targetElementList:s}};function pg(i,t,e,s,n){var r,o,a,l;if(e===void 0&&(e=void 0),!x||na(i)||(r=e)!=null&&r.url_allowlist&&!rc(e.url_allowlist)||(o=e)!=null&&o.url_ignorelist&&rc(e.url_ignorelist))return!1;if((a=e)!=null&&a.dom_event_allowlist){var c=e.dom_event_allowlist;if(c&&!c.some(p=>t.type===p))return!1}var{parentIsUsefulElement:h,targetElementList:u}=gh(i,s);if(!(function(p,g){var m=g?.element_allowlist;if(P(m))return!0;var _,v=function(w){if(m.some(b=>w.tagName.toLowerCase()===b))return{v:!0}};for(var y of p)if(_=v(y))return _.v;return!1})(u,e)||!fh(u,(l=e)==null?void 0:l.css_selector_allowlist))return!1;var d=x.getComputedStyle(i);if(d&&d.getPropertyValue("cursor")==="pointer"&&t.type==="click")return!0;var f=i.tagName.toLowerCase();switch(f){case"html":return!1;case"form":return(n||["submit"]).indexOf(t.type)>=0;case"input":case"select":case"textarea":return(n||["change","click"]).indexOf(t.type)>=0;default:return h?(n||["click"]).indexOf(t.type)>=0:(n||["click"]).indexOf(t.type)>=0&&(sa.indexOf(f)>-1||i.getAttribute("contenteditable")==="true")}}function fo(i){for(var t=i;t.parentNode&&!Me(t,"body");t=t.parentNode){var e=nn(t);if($(e,"ph-sensitive")||$(e,"ph-no-capture"))return!1}if($(nn(i),"ph-include"))return!0;var s=i.type||"";if(ft(s))switch(s.toLowerCase()){case"hidden":case"password":return!1}var n=i.name||i.id||"";return!(ft(n)&&/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(n.replace(/[^a-zA-Z0-9]/g,"")))}function mh(i){return!!(Me(i,"input")&&!["button","checkbox","submit","reset"].includes(i.type)||Me(i,"select")||Me(i,"textarea")||i.getAttribute("contenteditable")==="true")}var _h="(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11})",gg=new RegExp("^(?:"+_h+")$"),mg=new RegExp(_h),vh="\\d{3}-?\\d{2}-?\\d{4}",_g=new RegExp("^("+vh+")$"),vg=new RegExp("("+vh+")");function cs(i,t){return t===void 0&&(t=!0),!(W(i)||ft(i)&&(i=bn(i),(t?gg:mg).test((i||"").replace(/[- ]/g,""))||(t?_g:vg).test(i)))}function bh(i){var t=us(i);return cs(t=(t+" "+xh(i)).trim())?t:""}function xh(i){var t="";return i&&i.childNodes&&i.childNodes.length&&Z(i.childNodes,function(e){var s;if(e&&((s=e.tagName)==null?void 0:s.toLowerCase())==="span")try{var n=us(e);t=(t+" "+n).trim(),e.childNodes&&e.childNodes.length&&(t=(t+" "+xh(e)).trim())}catch(r){E.error("[AutoCapture]",r)}}),t}function bg(i){return(function(t){var e=t.map(s=>{var n,r,o="";if(s.tag_name&&(o+=s.tag_name),s.attr_class)for(var a of(s.attr_class.sort(),s.attr_class))o+="."+a.replace(/"/g,"");var l=T({},s.text?{text:s.text}:{},{"nth-child":(n=s.nth_child)!==null&&n!==void 0?n:0,"nth-of-type":(r=s.nth_of_type)!==null&&r!==void 0?r:0},s.href?{href:s.href}:{},s.attr_id?{attr_id:s.attr_id}:{},s.attributes),c={};return Gs(l).sort((h,u)=>{var[d]=h,[f]=u;return d.localeCompare(f)}).forEach(h=>{var[u,d]=h;return c[lc(u.toString())]=lc(d.toString())}),o+=":",o+=Gs(c).map(h=>{var[u,d]=h;return u+'="'+d+'"'}).join("")});return e.join(";")})((function(t){return t.map(e=>{var s,n,r={text:(s=e.$el_text)==null?void 0:s.slice(0,400),tag_name:e.tag_name,href:(n=e.attr__href)==null?void 0:n.slice(0,2048),attr_class:xg(e),attr_id:e.attr__id,nth_child:e.nth_child,nth_of_type:e.nth_of_type,attributes:{}};return Gs(e).filter(o=>{var[a]=o;return a.indexOf("attr__")===0}).forEach(o=>{var[a,l]=o;return r.attributes[a]=l}),r})})(i))}function lc(i){return i.replace(/"|\\"/g,'\\"')}function xg(i){var t=i.attr__class;return t?V(t)?t:ia(t):void 0}var rn=class{constructor(t){this.disabled=t===!1;var e=mt(t)?t:{};this.thresholdPx=e.threshold_px||30,this.timeoutMs=e.timeout_ms||1e3,this.clickCount=e.click_count||3,this.clicks=[]}isRageClick(t,e,s){if(this.disabled)return!1;var n=this.clicks[this.clicks.length-1];if(n&&Math.abs(t-n.x)+Math.abs(e-n.y)<this.thresholdPx&&s-n.timestamp<this.timeoutMs){if(this.clicks.push({x:t,y:e,timestamp:s}),this.clicks.length===this.clickCount)return!0}else this.clicks=[{x:t,y:e,timestamp:s}];return!1}},on=i=>{var t=C?.createElement("a");return P(t)?null:(t.href=i,t)},yg=function(i,t){var e,s;t===void 0&&(t="&");var n=[];return Z(i,function(r,o){P(r)||P(o)||o==="undefined"||(e=encodeURIComponent((a=>a instanceof File)(r)?r.name:r.toString()),s=encodeURIComponent(o),n[n.length]=s+"="+e)}),n.join(t)},an=function(i,t){for(var e,s=((i.split("#")[0]||"").split(/\?(.*)/)[1]||"").replace(/^\?+/g,"").split("&"),n=0;n<s.length;n++){var r=s[n].split("=");if(r[0]===t){e=r;break}}if(!V(e)||e.length<2)return"";var o=e[1];try{o=decodeURIComponent(o)}catch{E.error("Skipping decoding for malformed query param: "+o)}return o.replace(/\+/g," ")},ds=function(i,t,e){if(!i||!t||!t.length)return i;for(var s=i.split("#"),n=s[0]||"",r=s[1],o=n.split("?"),a=o[1],l=o[0],c=(a||"").split("&"),h=[],u=0;u<c.length;u++){var d=c[u].split("=");V(d)&&(t.includes(d[0])?h.push(d[0]+"="+e):h.push(c[u]))}var f=l;return a!=null&&(f+="?"+h.join("&")),r!=null&&(f+="#"+r),f},ln=function(i,t){var e=i.match(new RegExp(t+"=([^&]*)"));return e?e[1]:null},Pr="$copy_autocapture",cc=ct("[AutoCapture]");function Er(i,t){return t.length>i?t.slice(0,i)+"...":t}function wg(i){if(i.previousElementSibling)return i.previousElementSibling;var t=i;do t=t.previousSibling;while(t&&!yn(t));return t}function kg(i,t,e,s){var n=i.tagName.toLowerCase(),r={tag_name:n};sa.indexOf(n)>-1&&!e&&(n.toLowerCase()==="a"||n.toLowerCase()==="button"?r.$el_text=Er(1024,bh(i)):r.$el_text=Er(1024,us(i)));var o=nn(i);o.length>0&&(r.classes=o.filter(function(h){return h!==""})),Z(i.attributes,function(h){var u;if((!mh(i)||["name","id","class","aria-label"].indexOf(h.name)!==-1)&&(s==null||!s.includes(h.name))&&!t&&cs(h.value)&&(u=h.name,!ft(u)||u.substring(0,10)!=="_ngcontent"&&u.substring(0,7)!=="_nghost")){var d=h.value;h.name==="class"&&(d=ia(d).join(" ")),r["attr__"+h.name]=Er(1024,d)}});for(var a=1,l=1,c=i;c=wg(c);)a++,c.tagName===i.tagName&&l++;return r.nth_child=a,r.nth_of_type=l,r}function Sg(i,t){for(var e,s,{e:n,maskAllElementAttributes:r,maskAllText:o,elementAttributeIgnoreList:a,elementsChainAsString:l}=t,c=[i],h=i;h.parentNode&&!Me(h,"body");)hh(h.parentNode)?(c.push(h.parentNode.host),h=h.parentNode.host):(c.push(h.parentNode),h=h.parentNode);var u,d=[],f={},p=!1,g=!1;if(Z(c,w=>{var b=fo(w);w.tagName.toLowerCase()==="a"&&(p=w.getAttribute("href"),p=b&&p&&cs(p)&&p),$(nn(w),"ph-no-capture")&&(g=!0),d.push(kg(w,r,o,a));var S=(function(M){if(!fo(M))return{};var k={};return Z(M.attributes,function(O){if(O.name&&O.name.indexOf("data-ph-capture-attribute")===0){var A=O.name.replace("data-ph-capture-attribute-",""),D=O.value;A&&D&&cs(D)&&(k[A]=D)}}),k})(w);lt(f,S)}),g)return{props:{},explicitNoCapture:g};if(o||(i.tagName.toLowerCase()==="a"||i.tagName.toLowerCase()==="button"?d[0].$el_text=bh(i):d[0].$el_text=us(i)),p){var m,_;d[0].attr__href=p;var v=(m=on(p))==null?void 0:m.host,y=x==null||(_=x.location)==null?void 0:_.host;v&&y&&v!==y&&(u=p)}return{props:lt({$event_type:n.type,$ce_version:1},l?{}:{$elements:d},{$elements_chain:bg(d)},(e=d[0])!=null&&e.$el_text?{$el_text:(s=d[0])==null?void 0:s.$el_text}:{},u&&n.type==="click"?{$external_click_url:u}:{},f)}}var po=class{constructor(t){this.P=!1,this.T=null,this.I=!1,this.instance=t,this.rageclicks=new rn(t.config.rageclick),this.C=null}get R(){var t,e,s=mt(this.instance.config.autocapture)?this.instance.config.autocapture:{};return s.url_allowlist=(t=s.url_allowlist)==null?void 0:t.map(n=>new RegExp(n)),s.url_ignorelist=(e=s.url_ignorelist)==null?void 0:e.map(n=>new RegExp(n)),s}F(){if(this.isBrowserSupported()){if(x&&C){var t=s=>{s=s||x?.event;try{this.M(s)}catch(n){cc.error("Failed to capture event",n)}};if(ht(C,"submit",t,{capture:!0}),ht(C,"change",t,{capture:!0}),ht(C,"click",t,{capture:!0}),this.R.capture_copied_text){var e=s=>{s=s||x?.event,this.M(s,Pr)};ht(C,"copy",e,{capture:!0}),ht(C,"cut",e,{capture:!0})}}}else cc.info("Disabling Automatic Event Collection because this browser is not supported")}startIfEnabled(){this.isEnabled&&!this.P&&(this.F(),this.P=!0)}onRemoteConfig(t){t.elementsChainAsString&&(this.I=t.elementsChainAsString),this.instance.persistence&&this.instance.persistence.register({[Jl]:!!t.autocapture_opt_out}),this.T=!!t.autocapture_opt_out,this.startIfEnabled()}setElementSelectors(t){this.C=t}getElementSelectors(t){var e,s=[];return(e=this.C)==null||e.forEach(n=>{var r=C?.querySelectorAll(n);r?.forEach(o=>{t===o&&s.push(n)})}),s}get isEnabled(){var t,e,s=(t=this.instance.persistence)==null?void 0:t.props[Jl],n=this.T;if(Ht(n)&&!ae(s)&&!this.instance.O())return!1;var r=(e=this.T)!==null&&e!==void 0?e:!!s;return!!this.instance.config.autocapture&&!r}M(t,e){if(e===void 0&&(e="$autocapture"),this.isEnabled){var s,n=dh(t);ch(n)&&(n=n.parentNode||null),e==="$autocapture"&&t.type==="click"&&t instanceof MouseEvent&&this.instance.config.rageclick&&(s=this.rageclicks)!=null&&s.isRageClick(t.clientX,t.clientY,t.timeStamp||new Date().getTime())&&fg(n,this.instance.config.rageclick)&&this.M(t,"$rageclick");var r=e===Pr;if(n&&pg(n,t,this.R,r,r?["copy","cut"]:void 0)){var{props:o,explicitNoCapture:a}=Sg(n,{e:t,maskAllElementAttributes:this.instance.config.mask_all_element_attributes,maskAllText:this.instance.config.mask_all_text,elementAttributeIgnoreList:this.R.element_attribute_ignorelist,elementsChainAsString:this.I});if(a)return!1;var l=this.getElementSelectors(n);if(l&&l.length>0&&(o.$element_selectors=l),e===Pr){var c,h=uh(x==null||(c=x.getSelection())==null?void 0:c.toString()),u=t.type||"clipboard";if(!h)return!1;o.$selected_content=h,o.$copy_type=u}return this.instance.capture(e,o),!0}}}isBrowserSupported(){return ke(C?.querySelectorAll)}};Math.trunc||(Math.trunc=function(i){return i<0?Math.ceil(i):Math.floor(i)}),Number.isInteger||(Number.isInteger=function(i){return le(i)&&isFinite(i)&&Math.floor(i)===i});var hc="0123456789abcdef",go=class i{constructor(t){if(this.bytes=t,t.length!==16)throw new TypeError("not 128-bit length")}static fromFieldsV7(t,e,s,n){if(!Number.isInteger(t)||!Number.isInteger(e)||!Number.isInteger(s)||!Number.isInteger(n)||t<0||e<0||s<0||n<0||t>0xffffffffffff||e>4095||s>1073741823||n>4294967295)throw new RangeError("invalid field value");var r=new Uint8Array(16);return r[0]=t/Math.pow(2,40),r[1]=t/Math.pow(2,32),r[2]=t/Math.pow(2,24),r[3]=t/Math.pow(2,16),r[4]=t/Math.pow(2,8),r[5]=t,r[6]=112|e>>>8,r[7]=e,r[8]=128|s>>>24,r[9]=s>>>16,r[10]=s>>>8,r[11]=s,r[12]=n>>>24,r[13]=n>>>16,r[14]=n>>>8,r[15]=n,new i(r)}toString(){for(var t="",e=0;e<this.bytes.length;e++)t=t+hc.charAt(this.bytes[e]>>>4)+hc.charAt(15&this.bytes[e]),e!==3&&e!==5&&e!==7&&e!==9||(t+="-");if(t.length!==36)throw new Error("Invalid UUIDv7 was generated");return t}clone(){return new i(this.bytes.slice(0))}equals(t){return this.compareTo(t)===0}compareTo(t){for(var e=0;e<16;e++){var s=this.bytes[e]-t.bytes[e];if(s!==0)return Math.sign(s)}return 0}},mo=class{constructor(){this.A=0,this.D=0,this.j=new _o}generate(){var t=this.generateOrAbort();if(P(t)){this.A=0;var e=this.generateOrAbort();if(P(e))throw new Error("Could not generate UUID after timestamp reset");return e}return t}generateOrAbort(){var t=Date.now();if(t>this.A)this.A=t,this.L();else{if(!(t+1e4>this.A))return;this.D++,this.D>4398046511103&&(this.A++,this.L())}return go.fromFieldsV7(this.A,Math.trunc(this.D/Math.pow(2,30)),this.D&Math.pow(2,30)-1,this.j.nextUint32())}L(){this.D=1024*this.j.nextUint32()+(1023&this.j.nextUint32())}},uc,yh=i=>{if(typeof UUIDV7_DENY_WEAK_RNG<"u"&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");for(var t=0;t<i.length;t++)i[t]=65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random());return i};x&&!P(x.crypto)&&crypto.getRandomValues&&(yh=i=>crypto.getRandomValues(i));var _o=class{constructor(){this.N=new Uint32Array(8),this.U=1/0}nextUint32(){return this.U>=this.N.length&&(yh(this.N),this.U=0),this.N[this.U++]}},we=()=>Mg().toString(),Mg=()=>(uc||(uc=new mo)).generate(),zi="",Pg=/[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i;function Eg(i,t){if(t){var e=(function(n,r){if(r===void 0&&(r=C),zi)return zi;if(!r||["localhost","127.0.0.1"].includes(n))return"";for(var o=n.split("."),a=Math.min(o.length,8),l="dmn_chk_"+we();!zi&&a--;){var c=o.slice(a).join("."),h=l+"=1;domain=."+c+";path=/";r.cookie=h+";max-age=3",r.cookie.includes(l)&&(r.cookie=h+";max-age=0",zi=c)}return zi})(i);if(!e){var s=(n=>{var r=n.match(Pg);return r?r[0]:""})(i);s!==e&&E.info("Warning: cookie subdomain discovery mismatch",s,e),e=s}return e?"; domain=."+e:""}return""}var Ut={H:()=>!!C,B:function(i){E.error("cookieStore error: "+i)},q:function(i){if(C){try{for(var t=i+"=",e=C.cookie.split(";").filter(r=>r.length),s=0;s<e.length;s++){for(var n=e[s];n.charAt(0)==" ";)n=n.substring(1,n.length);if(n.indexOf(t)===0)return decodeURIComponent(n.substring(t.length,n.length))}}catch{}return null}},W:function(i){var t;try{t=JSON.parse(Ut.q(i))||{}}catch{}return t},G:function(i,t,e,s,n){if(C)try{var r="",o="",a=Eg(C.location.hostname,s);if(e){var l=new Date;l.setTime(l.getTime()+24*e*60*60*1e3),r="; expires="+l.toUTCString()}n&&(o="; secure");var c=i+"="+encodeURIComponent(JSON.stringify(t))+r+"; SameSite=Lax; path=/"+a+o;return c.length>3686.4&&E.warn("cookieStore warning: large cookie, len="+c.length),C.cookie=c,c}catch{return}},V:function(i,t){if(C!=null&&C.cookie)try{Ut.G(i,"",-1,t)}catch{return}}},Cr=null,st={H:function(){if(!Ht(Cr))return Cr;var i=!0;if(P(x))i=!1;else try{var t="__mplssupport__";st.G(t,"xyz"),st.q(t)!=='"xyz"'&&(i=!1),st.V(t)}catch{i=!1}return i||E.error("localStorage unsupported; falling back to cookie store"),Cr=i,i},B:function(i){E.error("localStorage error: "+i)},q:function(i){try{return x?.localStorage.getItem(i)}catch(t){st.B(t)}return null},W:function(i){try{return JSON.parse(st.q(i))||{}}catch{}return null},G:function(i,t){try{x?.localStorage.setItem(i,JSON.stringify(t))}catch(e){st.B(e)}},V:function(i){try{x?.localStorage.removeItem(i)}catch(t){st.B(t)}}},Cg=["$device_id","distinct_id",Qs,ah,sn,en],Ws={},Og={H:function(){return!0},B:function(i){E.error("memoryStorage error: "+i)},q:function(i){return Ws[i]||null},W:function(i){return Ws[i]||null},G:function(i,t){Ws[i]=t},V:function(i){delete Ws[i]}},He=null,_t={H:function(){if(!Ht(He))return He;if(He=!0,P(x))He=!1;else try{var i="__support__";_t.G(i,"xyz"),_t.q(i)!=='"xyz"'&&(He=!1),_t.V(i)}catch{He=!1}return He},B:function(i){E.error("sessionStorage error: ",i)},q:function(i){try{return x?.sessionStorage.getItem(i)}catch(t){_t.B(t)}return null},W:function(i){try{return JSON.parse(_t.q(i))||null}catch{}return null},G:function(i,t){try{x?.sessionStorage.setItem(i,JSON.stringify(t))}catch(e){_t.B(e)}},V:function(i){try{x?.sessionStorage.removeItem(i)}catch(t){_t.B(t)}}},ne=(function(i){return i[i.PENDING=-1]="PENDING",i[i.DENIED=0]="DENIED",i[i.GRANTED=1]="GRANTED",i})({}),vo=class{constructor(t){this._instance=t}get R(){return this._instance.config}get consent(){return this.J()?ne.DENIED:this.K}isOptedOut(){return this.R.cookieless_mode==="always"||this.consent===ne.DENIED||this.consent===ne.PENDING&&(this.R.opt_out_capturing_by_default||this.R.cookieless_mode==="on_reject")}isOptedIn(){return!this.isOptedOut()}isExplicitlyOptedOut(){return this.consent===ne.DENIED}optInOut(t){this.Y.G(this.X,t?1:0,this.R.cookie_expiration,this.R.cross_subdomain_cookie,this.R.secure_cookie)}reset(){this.Y.V(this.X,this.R.cross_subdomain_cookie)}get X(){var{token:t,opt_out_capturing_cookie_prefix:e,consent_persistence_name:s}=this._instance.config;return s||(e?e+t:"__ph_opt_in_out_"+t)}get K(){var t=this.Y.q(this.X);return wr(t)?ne.GRANTED:$(Np,t)?ne.DENIED:ne.PENDING}get Y(){if(!this.Z){var t=this.R.opt_out_capturing_persistence_type;this.Z=t==="localStorage"?st:Ut;var e=t==="localStorage"?Ut:st;e.q(this.X)&&(this.Z.q(this.X)||this.optInOut(wr(e.q(this.X))),e.V(this.X,this.R.cross_subdomain_cookie))}return this.Z}J(){return!!this.R.respect_dnt&&!!nh([Rt?.doNotTrack,Rt?.msDoNotTrack,R.doNotTrack],t=>wr(t))}},Vs=ct("[Dead Clicks]"),Tg=()=>!0,Ag=i=>{var t,e=!((t=i.instance.persistence)==null||!t.get_property(oh)),s=i.instance.config.capture_dead_clicks;return ae(s)?s:!!mt(s)||e},cn=class{get lazyLoadedDeadClicksAutocapture(){return this.tt}constructor(t,e,s){this.instance=t,this.isEnabled=e,this.onCapture=s,this.startIfEnabled()}onRemoteConfig(t){this.instance.persistence&&this.instance.persistence.register({[oh]:t?.captureDeadClicks}),this.startIfEnabled()}startIfEnabled(){this.isEnabled(this)&&this.it(()=>{this.et()})}it(t){var e,s;(e=R.__PosthogExtensions__)!=null&&e.initDeadClicksAutocapture&&t(),(s=R.__PosthogExtensions__)==null||s.loadExternalDependency==null||s.loadExternalDependency(this.instance,"dead-clicks-autocapture",n=>{n?Vs.error("failed to load script",n):t()})}et(){var t;if(C){if(!this.tt&&(t=R.__PosthogExtensions__)!=null&&t.initDeadClicksAutocapture){var e=mt(this.instance.config.capture_dead_clicks)?this.instance.config.capture_dead_clicks:{};e.__onCapture=this.onCapture,this.tt=R.__PosthogExtensions__.initDeadClicksAutocapture(this.instance,e),this.tt.start(C),Vs.info("starting...")}}else Vs.error("`document` not found. Cannot start.")}stop(){this.tt&&(this.tt.stop(),this.tt=void 0,Vs.info("stopping..."))}},ji=ct("[ExceptionAutocapture]"),bo=class{constructor(t){var e,s,n;this.rt=()=>{var r;if(x&&this.isEnabled&&(r=R.__PosthogExtensions__)!=null&&r.errorWrappingFunctions){var o=R.__PosthogExtensions__.errorWrappingFunctions.wrapOnError,a=R.__PosthogExtensions__.errorWrappingFunctions.wrapUnhandledRejection,l=R.__PosthogExtensions__.errorWrappingFunctions.wrapConsoleError;try{!this.st&&this.R.capture_unhandled_errors&&(this.st=o(this.captureException.bind(this))),!this.nt&&this.R.capture_unhandled_rejections&&(this.nt=a(this.captureException.bind(this))),!this.ot&&this.R.capture_console_errors&&(this.ot=l(this.captureException.bind(this)))}catch(c){ji.error("failed to start",c),this.ut()}}},this._instance=t,this.ht=!((e=this._instance.persistence)==null||!e.props[Ql]),this.dt=new Vr({refillRate:(s=this._instance.config.error_tracking.__exceptionRateLimiterRefillRate)!==null&&s!==void 0?s:1,bucketSize:(n=this._instance.config.error_tracking.__exceptionRateLimiterBucketSize)!==null&&n!==void 0?n:10,refillInterval:1e4,h:ji}),this.R=this.vt(),this.startIfEnabledOrStop()}vt(){var t=this._instance.config.capture_exceptions,e={capture_unhandled_errors:!1,capture_unhandled_rejections:!1,capture_console_errors:!1};return mt(t)?e=T({},e,t):(P(t)?this.ht:t)&&(e=T({},e,{capture_unhandled_errors:!0,capture_unhandled_rejections:!0})),e}get isEnabled(){return this.R.capture_console_errors||this.R.capture_unhandled_errors||this.R.capture_unhandled_rejections}startIfEnabledOrStop(){this.isEnabled?(ji.info("enabled"),this.ut(),this.it(this.rt)):this.ut()}it(t){var e,s;(e=R.__PosthogExtensions__)!=null&&e.errorWrappingFunctions&&t(),(s=R.__PosthogExtensions__)==null||s.loadExternalDependency==null||s.loadExternalDependency(this._instance,"exception-autocapture",n=>{if(n)return ji.error("failed to load script",n);t()})}ut(){var t,e,s;(t=this.st)==null||t.call(this),this.st=void 0,(e=this.nt)==null||e.call(this),this.nt=void 0,(s=this.ot)==null||s.call(this),this.ot=void 0}onRemoteConfig(t){var e=t.autocaptureExceptions;this.ht=!!e||!1,this._instance.persistence&&this._instance.persistence.register({[Ql]:this.ht}),this.R=this.vt(),this.startIfEnabledOrStop()}onConfigChange(){this.R=this.vt()}captureException(t){var e,s,n=(e=t==null||(s=t.$exception_list)==null||(s=s[0])==null?void 0:s.type)!==null&&e!==void 0?e:"Exception";this.dt.consumeRateLimit(n)?ji.info("Skipping exception capture because of client rate limiting.",{exception:n}):this._instance.exceptions.sendExceptionEvent(t)}};function dc(i,t,e){try{if(!(t in i))return()=>{};var s=i[t],n=e(s);return ke(n)&&(n.prototype=n.prototype||{},Object.defineProperties(n,{__posthog_wrapped__:{enumerable:!1,value:!0}})),i[t]=n,()=>{i[t]=s}}catch{return()=>{}}}var xo=class{constructor(t){var e;this._instance=t,this.ct=(x==null||(e=x.location)==null?void 0:e.pathname)||""}get isEnabled(){return this._instance.config.capture_pageview==="history_change"}startIfEnabled(){this.isEnabled&&(E.info("History API monitoring enabled, starting..."),this.monitorHistoryChanges())}stop(){this.ft&&this.ft(),this.ft=void 0,E.info("History API monitoring stopped")}monitorHistoryChanges(){var t,e;if(x&&x.history){var s=this;(t=x.history.pushState)!=null&&t.__posthog_wrapped__||dc(x.history,"pushState",n=>function(r,o,a){n.call(this,r,o,a),s._t("pushState")}),(e=x.history.replaceState)!=null&&e.__posthog_wrapped__||dc(x.history,"replaceState",n=>function(r,o,a){n.call(this,r,o,a),s._t("replaceState")}),this.yt()}}_t(t){try{var e,s=x==null||(e=x.location)==null?void 0:e.pathname;if(!s)return;s!==this.ct&&this.isEnabled&&this._instance.capture("$pageview",{navigation_type:t}),this.ct=s}catch(n){E.error("Error capturing "+t+" pageview",n)}}yt(){if(!this.ft){var t=()=>{this._t("popstate")};ht(x,"popstate",t),this.ft=()=>{x&&x.removeEventListener("popstate",t)}}}},Or=ct("[SegmentIntegration]");function Dg(i,t){var e=i.config.segment;if(!e)return t();(function(s,n){var r=s.config.segment;if(!r)return n();var o=l=>{var c=()=>l.anonymousId()||we();s.config.get_device_id=c,l.id()&&(s.register({distinct_id:l.id(),$device_id:c()}),s.persistence.set_property(se,"identified")),n()},a=r.user();"then"in a&&ke(a.then)?a.then(o):o(a)})(i,()=>{e.register((s=>{Promise&&Promise.resolve||Or.warn("This browser does not have Promise support, and can not use the segment integration");var n=(r,o)=>{if(!o)return r;r.event.userId||r.event.anonymousId===s.get_distinct_id()||(Or.info("No userId set, resetting PostHog"),s.reset()),r.event.userId&&r.event.userId!==s.get_distinct_id()&&(Or.info("UserId set, identifying with PostHog"),s.identify(r.event.userId));var a=s.calculateEventProperties(o,r.event.properties);return r.event.properties=Object.assign({},a,r.event.properties),r};return{name:"PostHog JS",type:"enrichment",version:"1.0.0",isLoaded:()=>!0,load:()=>Promise.resolve(),track:r=>n(r,r.event.event),page:r=>n(r,"$pageview"),identify:r=>n(r,"$identify"),screen:r=>n(r,"$screen")}})(i)).then(()=>{t()})})}var wh="posthog-js";function kh(i,t){var{organization:e,projectId:s,prefix:n,severityAllowList:r=["error"],sendExceptionsToPostHog:o=!0}=t===void 0?{}:t;return a=>{var l,c,h,u,d;if(!(r==="*"||r.includes(a.level))||!i.__loaded)return a;a.tags||(a.tags={});var f=i.requestRouter.endpointFor("ui","/project/"+i.config.token+"/person/"+i.get_distinct_id());a.tags["PostHog Person URL"]=f,i.sessionRecordingStarted()&&(a.tags["PostHog Recording URL"]=i.get_session_replay_url({withTimestamp:!0}));var p=((l=a.exception)==null?void 0:l.values)||[],g=p.map(_=>T({},_,{stacktrace:_.stacktrace?T({},_.stacktrace,{type:"raw",frames:(_.stacktrace.frames||[]).map(v=>T({},v,{platform:"web:javascript"}))}):void 0})),m={$exception_message:((c=p[0])==null?void 0:c.value)||a.message,$exception_type:(h=p[0])==null?void 0:h.type,$exception_level:a.level,$exception_list:g,$sentry_event_id:a.event_id,$sentry_exception:a.exception,$sentry_exception_message:((u=p[0])==null?void 0:u.value)||a.message,$sentry_exception_type:(d=p[0])==null?void 0:d.type,$sentry_tags:a.tags};return e&&s&&(m.$sentry_url=(n||"https://sentry.io/organizations/")+e+"/issues/?project="+s+"&query="+a.event_id),o&&i.exceptions.sendExceptionEvent(m),a}}var yo=class{constructor(t,e,s,n,r,o){this.name=wh,this.setupOnce=function(a){a(kh(t,{organization:e,projectId:s,prefix:n,severityAllowList:r,sendExceptionsToPostHog:o==null||o}))}}},Rg=x!=null&&x.location?ln(x.location.hash,"__posthog")||ln(location.hash,"state"):null,fc="_postHogToolbarParams",pc=ct("[Toolbar]"),ye=(function(i){return i[i.UNINITIALIZED=0]="UNINITIALIZED",i[i.LOADING=1]="LOADING",i[i.LOADED=2]="LOADED",i})(ye||{}),wo=class{constructor(t){this.instance=t}bt(t){R.ph_toolbar_state=t}wt(){var t;return(t=R.ph_toolbar_state)!==null&&t!==void 0?t:ye.UNINITIALIZED}maybeLoadToolbar(t,e,s){if(t===void 0&&(t=void 0),e===void 0&&(e=void 0),s===void 0&&(s=void 0),!x||!C)return!1;t=t??x.location,s=s??x.history;try{if(!e){try{x.localStorage.setItem("test","test"),x.localStorage.removeItem("test")}catch{return!1}e=x?.localStorage}var n,r=Rg||ln(t.hash,"__posthog")||ln(t.hash,"state"),o=r?Zl(()=>JSON.parse(atob(decodeURIComponent(r))))||Zl(()=>JSON.parse(decodeURIComponent(r))):null;return o&&o.action==="ph_authorize"?((n=o).source="url",n&&Object.keys(n).length>0&&(o.desiredHash?t.hash=o.desiredHash:s?s.replaceState(s.state,"",t.pathname+t.search):t.hash="")):((n=JSON.parse(e.getItem(fc)||"{}")).source="localstorage",delete n.userIntent),!(!n.token||this.instance.config.token!==n.token)&&(this.loadToolbar(n),!0)}catch{return!1}}xt(t){var e=R.ph_load_toolbar||R.ph_load_editor;!W(e)&&ke(e)?e(t,this.instance):pc.warn("No toolbar load function found")}loadToolbar(t){var e=!(C==null||!C.getElementById(lh));if(!x||e)return!1;var s=this.instance.requestRouter.region==="custom"&&this.instance.config.advanced_disable_toolbar_metrics,n=T({token:this.instance.config.token},t,{apiURL:this.instance.requestRouter.endpointFor("ui")},s?{instrument:!1}:{});if(x.localStorage.setItem(fc,JSON.stringify(T({},n,{source:void 0}))),this.wt()===ye.LOADED)this.xt(n);else if(this.wt()===ye.UNINITIALIZED){var r;this.bt(ye.LOADING),(r=R.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this.instance,"toolbar",o=>{if(o)return pc.error("[Toolbar] Failed to load",o),void this.bt(ye.UNINITIALIZED);this.bt(ye.LOADED),this.xt(n)}),ht(x,"turbolinks:load",()=>{this.bt(ye.UNINITIALIZED),this.loadToolbar(n)})}return!0}Et(t){return this.loadToolbar(t)}maybeLoadEditor(t,e,s){return t===void 0&&(t=void 0),e===void 0&&(e=void 0),s===void 0&&(s=void 0),this.maybeLoadToolbar(t,e,s)}},Ig=ct("[TracingHeaders]"),ko=class{constructor(t){this.$t=void 0,this.St=void 0,this.rt=()=>{var e,s;P(this.$t)&&((e=R.__PosthogExtensions__)==null||(e=e.tracingHeadersPatchFns)==null||e._patchXHR(this._instance.config.__add_tracing_headers||[],this._instance.get_distinct_id(),this._instance.sessionManager)),P(this.St)&&((s=R.__PosthogExtensions__)==null||(s=s.tracingHeadersPatchFns)==null||s._patchFetch(this._instance.config.__add_tracing_headers||[],this._instance.get_distinct_id(),this._instance.sessionManager))},this._instance=t}it(t){var e,s;(e=R.__PosthogExtensions__)!=null&&e.tracingHeadersPatchFns&&t(),(s=R.__PosthogExtensions__)==null||s.loadExternalDependency==null||s.loadExternalDependency(this._instance,"tracing-headers",n=>{if(n)return Ig.error("failed to load script",n);t()})}startIfEnabledOrStop(){var t,e;this._instance.config.__add_tracing_headers?this.it(this.rt):((t=this.$t)==null||t.call(this),(e=this.St)==null||e.call(this),this.$t=void 0,this.St=void 0)}},Us="https?://(.*)",fi=["gclid","gclsrc","dclid","gbraid","wbraid","fbclid","msclkid","twclid","li_fat_id","igshid","ttclid","rdt_cid","epik","qclid","sccid","irclid","_kx"],Fg=di(["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gad_source","mc_cid"],fi),fs="<masked>",Lg=["li_fat_id"];function Sh(i,t,e){if(!C)return{};var s,n=t?di([],fi,e||[]):[],r=Mh(ds(C.URL,n,fs),i),o=(s={},Z(Lg,function(a){var l=Ut.q(a);s[a]=l||null}),s);return lt(o,r)}function Mh(i,t){var e=Fg.concat(t||[]),s={};return Z(e,function(n){var r=an(i,n);s[n]=r||null}),s}function Ph(i){var t=(function(r){return r?r.search(Us+"google.([^/?]*)")===0?"google":r.search(Us+"bing.com")===0?"bing":r.search(Us+"yahoo.com")===0?"yahoo":r.search(Us+"duckduckgo.com")===0?"duckduckgo":null:null})(i),e=t!="yahoo"?"q":"p",s={};if(!Ht(t)){s.$search_engine=t;var n=C?an(C.referrer,e):"";n.length&&(s.ph_keyword=n)}return s}function gc(){return navigator.language||navigator.userLanguage}function Eh(){return C?.referrer||"$direct"}function Ch(i,t){var e=i?di([],fi,t||[]):[],s=Ct?.href.substring(0,1e3);return{r:Eh().substring(0,1e3),u:s?ds(s,e,fs):void 0}}function Oh(i){var t,{r:e,u:s}=i,n={$referrer:e,$referring_domain:e==null?void 0:e=="$direct"?"$direct":(t=on(e))==null?void 0:t.host};if(s){n.$current_url=s;var r=on(s);n.$host=r?.host,n.$pathname=r?.pathname;var o=Mh(s);lt(n,o)}if(e){var a=Ph(e);lt(n,a)}return n}function Th(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch{return}}function Ng(){try{return new Date().getTimezoneOffset()}catch{return}}function $g(i,t){if(!Et)return{};var e,s,n,r=i?di([],fi,t||[]):[],[o,a]=(function(l){for(var c=0;c<ql.length;c++){var[h,u]=ql[c],d=h.exec(l),f=d&&(ke(u)?u(d,l):u);if(f)return f}return["",""]})(Et);return lt(ea({$os:o,$os_version:a,$browser:th(Et,navigator.vendor),$device:Yl(Et),$device_type:(s=Et,n=Yl(s),n===zc||n===Bc||n==="Kobo"||n==="Kindle Fire"||n===Qc?rs:n===as||n===li||n===ls||n===qr?"Console":n===Hc?"Wearable":n?Ft:"Desktop"),$timezone:Th(),$timezone_offset:Ng()}),{$current_url:ds(Ct?.href,r,fs),$host:Ct?.host,$pathname:Ct?.pathname,$raw_user_agent:Et.length>1e3?Et.substring(0,997)+"...":Et,$browser_version:Yp(Et,navigator.vendor),$browser_language:gc(),$browser_language_prefix:(e=gc(),typeof e=="string"?e.split("-")[0]:void 0),$screen_height:x?.screen.height,$screen_width:x?.screen.width,$viewport_height:x?.innerHeight,$viewport_width:x?.innerWidth,$lib:"web",$lib_version:ie.LIB_VERSION,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:Date.now()/1e3})}var ve=ct("[Web Vitals]"),mc=9e5,So=class{constructor(t){var e;this.kt=!1,this.P=!1,this.N={url:void 0,metrics:[],firstMetricTimestamp:void 0},this.Pt=()=>{clearTimeout(this.Tt),this.N.metrics.length!==0&&(this._instance.capture("$web_vitals",this.N.metrics.reduce((s,n)=>T({},s,{["$web_vitals_"+n.name+"_event"]:T({},n),["$web_vitals_"+n.name+"_value"]:n.value}),{})),this.N={url:void 0,metrics:[],firstMetricTimestamp:void 0})},this.It=s=>{var n,r=(n=this._instance.sessionManager)==null?void 0:n.checkAndGetSessionAndWindowId(!0);if(P(r))ve.error("Could not read session ID. Dropping metrics!");else{this.N=this.N||{url:void 0,metrics:[],firstMetricTimestamp:void 0};var o=this.Ct();P(o)||(W(s?.name)||W(s?.value)?ve.error("Invalid metric received",s):this.Rt&&s.value>=this.Rt?ve.error("Ignoring metric with value >= "+this.Rt,s):(this.N.url!==o&&(this.Pt(),this.Tt=setTimeout(this.Pt,this.flushToCaptureTimeoutMs)),P(this.N.url)&&(this.N.url=o),this.N.firstMetricTimestamp=P(this.N.firstMetricTimestamp)?Date.now():this.N.firstMetricTimestamp,s.attribution&&s.attribution.interactionTargetElement&&(s.attribution.interactionTargetElement=void 0),this.N.metrics.push(T({},s,{$current_url:o,$session_id:r.sessionId,$window_id:r.windowId,timestamp:Date.now()})),this.N.metrics.length===this.allowedMetrics.length&&this.Pt()))}},this.rt=()=>{var s,n,r,o,a=R.__PosthogExtensions__;P(a)||P(a.postHogWebVitalsCallbacks)||({onLCP:s,onCLS:n,onFCP:r,onINP:o}=a.postHogWebVitalsCallbacks),s&&n&&r&&o?(this.allowedMetrics.indexOf("LCP")>-1&&s(this.It.bind(this)),this.allowedMetrics.indexOf("CLS")>-1&&n(this.It.bind(this)),this.allowedMetrics.indexOf("FCP")>-1&&r(this.It.bind(this)),this.allowedMetrics.indexOf("INP")>-1&&o(this.It.bind(this)),this.P=!0):ve.error("web vitals callbacks not loaded - not starting")},this._instance=t,this.kt=!((e=this._instance.persistence)==null||!e.props[ec]),this.startIfEnabled()}get allowedMetrics(){var t,e,s=mt(this._instance.config.capture_performance)?(t=this._instance.config.capture_performance)==null?void 0:t.web_vitals_allowed_metrics:void 0;return P(s)?((e=this._instance.persistence)==null?void 0:e.props[sc])||["CLS","FCP","INP","LCP"]:s}get flushToCaptureTimeoutMs(){return(mt(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals_delayed_flush_ms:void 0)||5e3}get Rt(){var t=mt(this._instance.config.capture_performance)&&le(this._instance.config.capture_performance.__web_vitals_max_value)?this._instance.config.capture_performance.__web_vitals_max_value:mc;return 0<t&&t<=6e4?mc:t}get isEnabled(){var t=Ct?.protocol;if(t!=="http:"&&t!=="https:")return ve.info("Web Vitals are disabled on non-http/https protocols"),!1;var e=mt(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals:ae(this._instance.config.capture_performance)?this._instance.config.capture_performance:void 0;return ae(e)?e:this.kt}startIfEnabled(){this.isEnabled&&!this.P&&(ve.info("enabled, starting..."),this.it(this.rt))}onRemoteConfig(t){var e=mt(t.capturePerformance)&&!!t.capturePerformance.web_vitals,s=mt(t.capturePerformance)?t.capturePerformance.web_vitals_allowed_metrics:void 0;this._instance.persistence&&(this._instance.persistence.register({[ec]:e}),this._instance.persistence.register({[sc]:s})),this.kt=e,this.startIfEnabled()}it(t){var e,s;(e=R.__PosthogExtensions__)!=null&&e.postHogWebVitalsCallbacks&&t(),(s=R.__PosthogExtensions__)==null||s.loadExternalDependency==null||s.loadExternalDependency(this._instance,"web-vitals",n=>{n?ve.error("failed to load script",n):t()})}Ct(){var t=x?x.location.href:void 0;if(t){var e=this._instance.config.mask_personal_data_properties,s=this._instance.config.custom_personal_data_properties,n=e?di([],fi,s||[]):[];return ds(t,n,fs)}ve.error("Could not determine current URL")}},Bg=ct("[Heatmaps]");function _c(i){return mt(i)&&"clientX"in i&&"clientY"in i&&le(i.clientX)&&le(i.clientY)}var Mo=class{constructor(t){var e;this.kt=!1,this.P=!1,this.Ft=null,this.instance=t,this.kt=!((e=this.instance.persistence)==null||!e.props[no]),this.rageclicks=new rn(t.config.rageclick)}get flushIntervalMilliseconds(){var t=5e3;return mt(this.instance.config.capture_heatmaps)&&this.instance.config.capture_heatmaps.flush_interval_milliseconds&&(t=this.instance.config.capture_heatmaps.flush_interval_milliseconds),t}get isEnabled(){return P(this.instance.config.capture_heatmaps)?P(this.instance.config.enable_heatmaps)?this.kt:this.instance.config.enable_heatmaps:this.instance.config.capture_heatmaps!==!1}startIfEnabled(){if(this.isEnabled){if(this.P)return;Bg.info("starting..."),this.Mt(),this.Ot()}else{var t;clearInterval((t=this.Ft)!==null&&t!==void 0?t:void 0),this.At(),this.getAndClearBuffer()}}onRemoteConfig(t){var e=!!t.heatmaps;this.instance.persistence&&this.instance.persistence.register({[no]:e}),this.kt=e,this.startIfEnabled()}getAndClearBuffer(){var t=this.N;return this.N=void 0,t}Dt(t){this.jt(t.originalEvent,"deadclick")}Ot(){this.Ft&&clearInterval(this.Ft),this.Ft=(function(t){return t?.visibilityState==="visible"})(C)?setInterval(this.Lt.bind(this),this.flushIntervalMilliseconds):null}Mt(){x&&C&&(this.Nt=this.Lt.bind(this),ht(x,"beforeunload",this.Nt),this.Ut=t=>this.jt(t||x?.event),ht(C,"click",this.Ut,{capture:!0}),this.zt=t=>this.Ht(t||x?.event),ht(C,"mousemove",this.zt,{capture:!0}),this.Bt=new cn(this.instance,Tg,this.Dt.bind(this)),this.Bt.startIfEnabled(),this.qt=this.Ot.bind(this),ht(C,"visibilitychange",this.qt),this.P=!0)}At(){var t;x&&C&&(this.Nt&&x.removeEventListener("beforeunload",this.Nt),this.Ut&&C.removeEventListener("click",this.Ut,{capture:!0}),this.zt&&C.removeEventListener("mousemove",this.zt,{capture:!0}),this.qt&&C.removeEventListener("visibilitychange",this.qt),clearTimeout(this.Wt),(t=this.Bt)==null||t.stop(),this.P=!1)}Gt(t,e){var s=this.instance.scrollManager.scrollY(),n=this.instance.scrollManager.scrollX(),r=this.instance.scrollManager.scrollElement(),o=(function(a,l,c){for(var h=a;h&&yn(h)&&!Me(h,"body");){if(h===c)return!1;if($(l,x?.getComputedStyle(h).position))return!0;h=ph(h)}return!1})(dh(t),["fixed","sticky"],r);return{x:t.clientX+(o?0:n),y:t.clientY+(o?0:s),target_fixed:o,type:e}}jt(t,e){var s;if(e===void 0&&(e="click"),!nc(t.target)&&_c(t)){var n=this.Gt(t,e);(s=this.rageclicks)!=null&&s.isRageClick(t.clientX,t.clientY,new Date().getTime())&&this.Vt(T({},n,{type:"rageclick"})),this.Vt(n)}}Ht(t){!nc(t.target)&&_c(t)&&(clearTimeout(this.Wt),this.Wt=setTimeout(()=>{this.Vt(this.Gt(t,"mousemove"))},500))}Vt(t){if(x){var e=x.location.href,s=this.instance.config.mask_personal_data_properties,n=this.instance.config.custom_personal_data_properties,r=s?di([],fi,n||[]):[],o=ds(e,r,fs);this.N=this.N||{},this.N[o]||(this.N[o]=[]),this.N[o].push(t)}}Lt(){this.N&&!ri(this.N)&&this.instance.capture("$$heatmap",{$heatmap_data:this.getAndClearBuffer()})}},hn=class{constructor(t){this.Jt=(e,s,n)=>{n&&(n.noSessionId||n.activityTimeout||n.sessionPastMaximumLength)&&(E.info("[PageViewManager] Session rotated, clearing pageview state",{sessionId:e,changeReason:n}),this.Kt=void 0,this._instance.scrollManager.resetContext())},this._instance=t,this.Yt()}Yt(){var t;this.Xt=(t=this._instance.sessionManager)==null?void 0:t.onSessionId(this.Jt)}destroy(){var t;(t=this.Xt)==null||t.call(this),this.Xt=void 0}doPageView(t,e){var s,n=this.Qt(t,e);return this.Kt={pathname:(s=x?.location.pathname)!==null&&s!==void 0?s:"",pageViewId:e,timestamp:t},this._instance.scrollManager.resetContext(),n}doPageLeave(t){var e;return this.Qt(t,(e=this.Kt)==null?void 0:e.pageViewId)}doEvent(){var t;return{$pageview_id:(t=this.Kt)==null?void 0:t.pageViewId}}Qt(t,e){var s=this.Kt;if(!s)return{$pageview_id:e};var n={$pageview_id:e,$prev_pageview_id:s.pageViewId},r=this._instance.scrollManager.getContext();if(r&&!this._instance.config.disable_scroll_properties){var{maxScrollHeight:o,lastScrollY:a,maxScrollY:l,maxContentHeight:c,lastContentY:h,maxContentY:u}=r;if(!(P(o)||P(a)||P(l)||P(c)||P(h)||P(u))){o=Math.ceil(o),a=Math.ceil(a),l=Math.ceil(l),c=Math.ceil(c),h=Math.ceil(h),u=Math.ceil(u);var d=o<=1?1:qt(a/o,0,1,E),f=o<=1?1:qt(l/o,0,1,E),p=c<=1?1:qt(h/c,0,1,E),g=c<=1?1:qt(u/c,0,1,E);n=lt(n,{$prev_pageview_last_scroll:a,$prev_pageview_last_scroll_percentage:d,$prev_pageview_max_scroll:l,$prev_pageview_max_scroll_percentage:f,$prev_pageview_last_content:h,$prev_pageview_last_content_percentage:p,$prev_pageview_max_content:u,$prev_pageview_max_content_percentage:g})}}return s.pathname&&(n.$prev_pageview_pathname=s.pathname),s.timestamp&&(n.$prev_pageview_duration=(t.getTime()-s.timestamp.getTime())/1e3),n}},re=(function(i){return i.GZipJS="gzip-js",i.Base64="base64",i})({});var Lt=Uint8Array,Pt=Uint16Array,ui=Uint32Array,ra=new Lt([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),oa=new Lt([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),vc=new Lt([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ah=function(i,t){for(var e=new Pt(31),s=0;s<31;++s)e[s]=t+=1<<i[s-1];var n=new ui(e[30]);for(s=1;s<30;++s)for(var r=e[s];r<e[s+1];++r)n[r]=r-e[s]<<5|s;return[e,n]},Dh=Ah(ra,2),zg=Dh[0],Po=Dh[1];zg[28]=258,Po[258]=28;for(Eo=Ah(oa,0)[1],un=new Pt(32768),J=0;J<32768;++J)be=(43690&J)>>>1|(21845&J)<<1,be=(61680&(be=(52428&be)>>>2|(13107&be)<<2))>>>4|(3855&be)<<4,un[J]=((65280&be)>>>8|(255&be)<<8)>>>1;var be,Eo,un,J,is=function(i,t,e){for(var s=i.length,n=0,r=new Pt(t);n<s;++n)++r[i[n]-1];var o,a=new Pt(t);for(n=0;n<t;++n)a[n]=a[n-1]+r[n-1]<<1;if(e){o=new Pt(1<<t);var l=15-t;for(n=0;n<s;++n)if(i[n])for(var c=n<<4|i[n],h=t-i[n],u=a[i[n]-1]++<<h,d=u|(1<<h)-1;u<=d;++u)o[un[u]>>>l]=c}else for(o=new Pt(s),n=0;n<s;++n)o[n]=un[a[i[n]-1]++]>>>15-i[n];return o},qe=new Lt(288);for(J=0;J<144;++J)qe[J]=8;for(J=144;J<256;++J)qe[J]=9;for(J=256;J<280;++J)qe[J]=7;for(J=280;J<288;++J)qe[J]=8;var dn=new Lt(32);for(J=0;J<32;++J)dn[J]=5;var jg=is(qe,9,0),Hg=is(dn,5,0),Rh=function(i){return(i/8>>0)+(7&i&&1)},Ih=function(i,t,e){(e==null||e>i.length)&&(e=i.length);var s=new(i instanceof Pt?Pt:i instanceof ui?ui:Lt)(e-t);return s.set(i.subarray(t,e)),s},te=function(i,t,e){e<<=7&t;var s=t/8>>0;i[s]|=e,i[s+1]|=e>>>8},Hi=function(i,t,e){e<<=7&t;var s=t/8>>0;i[s]|=e,i[s+1]|=e>>>8,i[s+2]|=e>>>16},Tr=function(i,t){for(var e=[],s=0;s<i.length;++s)i[s]&&e.push({s,f:i[s]});var n=e.length,r=e.slice();if(!n)return[new Lt(0),0];if(n==1){var o=new Lt(e[0].s+1);return o[e[0].s]=1,[o,1]}e.sort(function(b,S){return b.f-S.f}),e.push({s:-1,f:25001});var a=e[0],l=e[1],c=0,h=1,u=2;for(e[0]={s:-1,f:a.f+l.f,l:a,r:l};h!=n-1;)a=e[e[c].f<e[u].f?c++:u++],l=e[c!=h&&e[c].f<e[u].f?c++:u++],e[h++]={s:-1,f:a.f+l.f,l:a,r:l};var d=r[0].s;for(s=1;s<n;++s)r[s].s>d&&(d=r[s].s);var f=new Pt(d+1),p=Co(e[h-1],f,0);if(p>t){s=0;var g=0,m=p-t,_=1<<m;for(r.sort(function(b,S){return f[S.s]-f[b.s]||b.f-S.f});s<n;++s){var v=r[s].s;if(!(f[v]>t))break;g+=_-(1<<p-f[v]),f[v]=t}for(g>>>=m;g>0;){var y=r[s].s;f[y]<t?g-=1<<t-f[y]++-1:++s}for(;s>=0&&g;--s){var w=r[s].s;f[w]==t&&(--f[w],++g)}p=t}return[new Lt(f),p]},Co=function(i,t,e){return i.s==-1?Math.max(Co(i.l,t,e+1),Co(i.r,t,e+1)):t[i.s]=e},bc=function(i){for(var t=i.length;t&&!i[--t];);for(var e=new Pt(++t),s=0,n=i[0],r=1,o=function(l){e[s++]=l},a=1;a<=t;++a)if(i[a]==n&&a!=t)++r;else{if(!n&&r>2){for(;r>138;r-=138)o(32754);r>2&&(o(r>10?r-11<<5|28690:r-3<<5|12305),r=0)}else if(r>3){for(o(n),--r;r>6;r-=6)o(8304);r>2&&(o(r-3<<5|8208),r=0)}for(;r--;)o(n);r=1,n=i[a]}return[e.subarray(0,s),t]},Wi=function(i,t){for(var e=0,s=0;s<t.length;++s)e+=i[s]*t[s];return e},Oo=function(i,t,e){var s=e.length,n=Rh(t+2);i[n]=255&s,i[n+1]=s>>>8,i[n+2]=255^i[n],i[n+3]=255^i[n+1];for(var r=0;r<s;++r)i[n+r+4]=e[r];return 8*(n+4+s)},xc=function(i,t,e,s,n,r,o,a,l,c,h){te(t,h++,e),++n[256];for(var u=Tr(n,15),d=u[0],f=u[1],p=Tr(r,15),g=p[0],m=p[1],_=bc(d),v=_[0],y=_[1],w=bc(g),b=w[0],S=w[1],M=new Pt(19),k=0;k<v.length;++k)M[31&v[k]]++;for(k=0;k<b.length;++k)M[31&b[k]]++;for(var O=Tr(M,7),A=O[0],D=O[1],I=19;I>4&&!A[vc[I-1]];--I);var q,it,L,j,H=c+5<<3,dt=Wi(n,qe)+Wi(r,dn)+o,Y=Wi(n,d)+Wi(r,g)+o+14+3*I+Wi(M,A)+(2*M[16]+3*M[17]+7*M[18]);if(H<=dt&&H<=Y)return Oo(t,h,i.subarray(l,l+c));if(te(t,h,1+(Y<dt)),h+=2,Y<dt){q=is(d,f,0),it=d,L=is(g,m,0),j=g;var St=is(A,D,0);for(te(t,h,y-257),te(t,h+5,S-1),te(t,h+10,I-4),h+=14,k=0;k<I;++k)te(t,h+3*k,A[vc[k]]);h+=3*I;for(var zt=[v,b],rt=0;rt<2;++rt){var gt=zt[rt];for(k=0;k<gt.length;++k){var at=31&gt[k];te(t,h,St[at]),h+=A[at],at>15&&(te(t,h,gt[k]>>>5&127),h+=gt[k]>>>12)}}}else q=jg,it=qe,L=Hg,j=dn;for(k=0;k<a;++k)if(s[k]>255){at=s[k]>>>18&31,Hi(t,h,q[at+257]),h+=it[at+257],at>7&&(te(t,h,s[k]>>>23&31),h+=ra[at]);var It=31&s[k];Hi(t,h,L[It]),h+=j[It],It>3&&(Hi(t,h,s[k]>>>5&8191),h+=oa[It])}else Hi(t,h,q[s[k]]),h+=it[s[k]];return Hi(t,h,q[256]),h+it[256]},Wg=new ui([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Vg=(function(){for(var i=new ui(256),t=0;t<256;++t){for(var e=t,s=9;--s;)e=(1&e&&3988292384)^e>>>1;i[t]=e}return i})(),Ug=function(i,t,e,s,n){return(function(r,o,a,l,c,h){var u=r.length,d=new Lt(l+u+5*(1+Math.floor(u/7e3))+c),f=d.subarray(l,d.length-c),p=0;if(!o||u<8)for(var g=0;g<=u;g+=65535){var m=g+65535;m<u?p=Oo(f,p,r.subarray(g,m)):(f[g]=h,p=Oo(f,p,r.subarray(g,u)))}else{for(var _=Wg[o-1],v=_>>>13,y=8191&_,w=(1<<a)-1,b=new Pt(32768),S=new Pt(w+1),M=Math.ceil(a/3),k=2*M,O=function(xr){return(r[xr]^r[xr+1]<<M^r[xr+2]<<k)&w},A=new ui(25e3),D=new Pt(288),I=new Pt(32),q=0,it=0,L=(g=0,0),j=0,H=0;g<u;++g){var dt=O(g),Y=32767&g,St=S[dt];if(b[Y]=St,S[dt]=Y,j<=g){var zt=u-g;if((q>7e3||L>24576)&&zt>423){p=xc(r,f,0,A,D,I,it,L,H,g-H,p),L=q=it=0,H=g;for(var rt=0;rt<286;++rt)D[rt]=0;for(rt=0;rt<30;++rt)I[rt]=0}var gt=2,at=0,It=y,wt=Y-St&32767;if(zt>2&&dt==O(g-wt))for(var Ep=Math.min(v,zt)-1,Cp=Math.min(32767,g),Op=Math.min(258,zt);wt<=Cp&&--It&&Y!=St;){if(r[g+gt]==r[g+gt-wt]){for(var _e=0;_e<Op&&r[g+_e]==r[g+_e-wt];++_e);if(_e>gt){if(gt=_e,at=wt,_e>Ep)break;var Tp=Math.min(wt,_e-2),El=0;for(rt=0;rt<Tp;++rt){var br=g-wt+rt+32768&32767,Cl=br-b[br]+32768&32767;Cl>El&&(El=Cl,St=br)}}}wt+=(Y=St)-(St=b[Y])+32768&32767}if(at){A[L++]=268435456|Po[gt]<<18|Eo[at];var Ol=31&Po[gt],Tl=31&Eo[at];it+=ra[Ol]+oa[Tl],++D[257+Ol],++I[Tl],j=g+gt,++q}else A[L++]=r[g],++D[r[g]]}}p=xc(r,f,h,A,D,I,it,L,H,g-H,p)}return Ih(d,0,l+Rh(p)+c)})(i,t.level==null?6:t.level,t.mem==null?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(i.length)))):12+t.mem,e,s,!0)},Ar=function(i,t,e){for(;e;++t)i[t]=e,e>>>=8};function qg(i,t){t===void 0&&(t={});var e=(function(){var a=4294967295;return{p:function(l){for(var c=a,h=0;h<l.length;++h)c=Vg[255&c^l[h]]^c>>>8;a=c},d:function(){return 4294967295^a}}})(),s=i.length;e.p(i);var n,r=Ug(i,t,10+((n=t).filename&&n.filename.length+1||0),8),o=r.length;return(function(a,l){var c=l.filename;if(a[0]=31,a[1]=139,a[2]=8,a[8]=l.level<2?4:l.level==9?2:0,a[9]=3,l.mtime!=0&&Ar(a,4,Math.floor(new Date(l.mtime||Date.now())/1e3)),c){a[3]=8;for(var h=0;h<=c.length;++h)a[h+10]=c.charCodeAt(h)}})(r,t),Ar(r,o-8,e.d()),Ar(r,o-4,s),r}var Yg=function(i){var t,e,s,n,r="";for(t=e=0,s=(i=(i+"").replace(/\r\n/g,`
`).replace(/\r/g,`
`)).length,n=0;n<s;n++){var o=i.charCodeAt(n),a=null;o<128?e++:a=o>127&&o<2048?String.fromCharCode(o>>6|192,63&o|128):String.fromCharCode(o>>12|224,o>>6&63|128,63&o|128),Ht(a)||(e>t&&(r+=i.substring(t,e)),r+=a,t=e=n+1)}return e>t&&(r+=i.substring(t,i.length)),r},Gg=!!zr||!!Br,yc="text/plain",fn=function(i,t,e){var s;e===void 0&&(e=!0);var[n,r]=i.split("?"),o=T({},t),a=(s=r?.split("&").map(c=>{var h,[u,d]=c.split("="),f=e&&(h=o[u])!==null&&h!==void 0?h:d;return delete o[u],u+"="+f}))!==null&&s!==void 0?s:[],l=yg(o);return l&&a.push(l),n+"?"+a.join("&")},Qi=(i,t)=>JSON.stringify(i,(e,s)=>typeof s=="bigint"?s.toString():s,t),Dr=i=>{var{data:t,compression:e}=i;if(t){if(e===re.GZipJS){var s=qg((function(l,c){var h=l.length;if(typeof TextEncoder<"u")return new TextEncoder().encode(l);for(var u=new Lt(l.length+(l.length>>>1)),d=0,f=function(_){u[d++]=_},p=0;p<h;++p){if(d+5>u.length){var g=new Lt(d+8+(h-p<<1));g.set(u),u=g}var m=l.charCodeAt(p);m<128||c?f(m):m<2048?(f(192|m>>>6),f(128|63&m)):m>55295&&m<57344?(f(240|(m=65536+(1047552&m)|1023&l.charCodeAt(++p))>>>18),f(128|m>>>12&63),f(128|m>>>6&63),f(128|63&m)):(f(224|m>>>12),f(128|m>>>6&63),f(128|63&m))}return Ih(u,0,d)})(Qi(t)),{mtime:0}),n=new Blob([s],{type:yc});return{contentType:yc,body:n,estimatedSize:n.size}}if(e===re.Base64){var r=(function(l){var c,h,u,d,f,p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",g=0,m=0,_="",v=[];if(!l)return l;l=Yg(l);do c=(f=l.charCodeAt(g++)<<16|l.charCodeAt(g++)<<8|l.charCodeAt(g++))>>18&63,h=f>>12&63,u=f>>6&63,d=63&f,v[m++]=p.charAt(c)+p.charAt(h)+p.charAt(u)+p.charAt(d);while(g<l.length);switch(_=v.join(""),l.length%3){case 1:_=_.slice(0,-2)+"==";break;case 2:_=_.slice(0,-1)+"="}return _})(Qi(t)),o=(l=>"data="+encodeURIComponent(typeof l=="string"?l:Qi(l)))(r);return{contentType:"application/x-www-form-urlencoded",body:o,estimatedSize:new Blob([o]).size}}var a=Qi(t);return{contentType:"application/json",body:a,estimatedSize:new Blob([a]).size}}},Xs=[];Br&&Xs.push({transport:"fetch",method:i=>{var t,e,{contentType:s,body:n,estimatedSize:r}=(t=Dr(i))!==null&&t!==void 0?t:{},o=new Headers;Z(i.headers,function(h,u){o.append(u,h)}),s&&o.append("Content-Type",s);var a=i.url,l=null;if(jl){var c=new jl;l={signal:c.signal,timeout:setTimeout(()=>c.abort(),i.timeout)}}Br(a,T({method:i?.method||"GET",headers:o,keepalive:i.method==="POST"&&(r||0)<52428.8,body:n,signal:(e=l)==null?void 0:e.signal},i.fetchOptions)).then(h=>h.text().then(u=>{var d={statusCode:h.status,text:u};if(h.status===200)try{d.json=JSON.parse(u)}catch(f){E.error(f)}i.callback==null||i.callback(d)})).catch(h=>{E.error(h),i.callback==null||i.callback({statusCode:0,text:h})}).finally(()=>l?clearTimeout(l.timeout):null)}}),zr&&Xs.push({transport:"XHR",method:i=>{var t,e=new zr;e.open(i.method||"GET",i.url,!0);var{contentType:s,body:n}=(t=Dr(i))!==null&&t!==void 0?t:{};Z(i.headers,function(r,o){e.setRequestHeader(o,r)}),s&&e.setRequestHeader("Content-Type",s),i.timeout&&(e.timeout=i.timeout),i.disableXHRCredentials||(e.withCredentials=!0),e.onreadystatechange=()=>{if(e.readyState===4){var r={statusCode:e.status,text:e.responseText};if(e.status===200)try{r.json=JSON.parse(e.responseText)}catch{}i.callback==null||i.callback(r)}},e.send(n)}}),Rt!=null&&Rt.sendBeacon&&Xs.push({transport:"sendBeacon",method:i=>{var t=fn(i.url,{beacon:"1"});try{var e,{contentType:s,body:n}=(e=Dr(i))!==null&&e!==void 0?e:{},r=typeof n=="string"?new Blob([n],{type:s}):n;Rt.sendBeacon(t,r)}catch{}}});var pn=function(i,t){if(!(function(e){try{new RegExp(e)}catch{return!1}return!0})(t))return!1;try{return new RegExp(t).test(i)}catch{return!1}};function wc(i,t,e){return Qi({distinct_id:i,userPropertiesToSet:t,userPropertiesToSetOnce:e})}var Fh={exact:(i,t)=>t.some(e=>i.some(s=>e===s)),is_not:(i,t)=>t.every(e=>i.every(s=>e!==s)),regex:(i,t)=>t.some(e=>i.some(s=>pn(e,s))),not_regex:(i,t)=>t.every(e=>i.every(s=>!pn(e,s))),icontains:(i,t)=>t.map(qs).some(e=>i.map(qs).some(s=>e.includes(s))),not_icontains:(i,t)=>t.map(qs).every(e=>i.map(qs).every(s=>!e.includes(s))),gt:(i,t)=>t.some(e=>{var s=parseFloat(e);return!isNaN(s)&&i.some(n=>s>parseFloat(n))}),lt:(i,t)=>t.some(e=>{var s=parseFloat(e);return!isNaN(s)&&i.some(n=>s<parseFloat(n))})},qs=i=>i.toLowerCase();function Lh(i,t){return!i||Object.entries(i).every(e=>{var[s,n]=e,r=t?.[s];if(P(r)||Ht(r))return!1;var o=[String(r)],a=Fh[n.operator];return!!a&&a(n.values,o)})}var Rr=ct("[Error tracking]"),To=class{constructor(t){var e,s;this.Zt=[],this.ti=new Gr([new Kr,new so,new Jr,new Zr,new eo,new to,new Qr,new io],sg()),this._instance=t,this.Zt=(e=(s=this._instance.persistence)==null?void 0:s.get_property(ro))!==null&&e!==void 0?e:[]}onRemoteConfig(t){var e,s,n,r=(e=(s=t.errorTracking)==null?void 0:s.suppressionRules)!==null&&e!==void 0?e:[],o=(n=t.errorTracking)==null?void 0:n.captureExtensionExceptions;this.Zt=r,this._instance.persistence&&this._instance.persistence.register({[ro]:this.Zt,[tc]:o})}get ii(){var t,e=!!this._instance.get_property(tc),s=this._instance.config.error_tracking.captureExtensionExceptions;return(t=s??e)!==null&&t!==void 0&&t}buildProperties(t,e){return this.ti.buildFromUnknown(t,{syntheticException:e?.syntheticException,mechanism:{handled:e?.handled}})}sendExceptionEvent(t){var e=t.$exception_list;if(this.ei(e)){if(this.ri(e))return void Rr.info("Skipping exception capture because a suppression rule matched");if(!this.ii&&this.si(e))return void Rr.info("Skipping exception capture because it was thrown by an extension");if(!this._instance.config.error_tracking.__capturePostHogExceptions&&this.ni(e))return void Rr.info("Skipping exception capture because it was thrown by the PostHog SDK")}return this._instance.capture("$exception",t,{_noTruncate:!0,_batchKey:"exceptionEvent"})}ri(t){if(t.length===0)return!1;var e=t.reduce((s,n)=>{var{type:r,value:o}=n;return ft(r)&&r.length>0&&s.$exception_types.push(r),ft(o)&&o.length>0&&s.$exception_values.push(o),s},{$exception_types:[],$exception_values:[]});return this.Zt.some(s=>{var n=s.values.map(r=>{var o,a=Fh[r.operator],l=V(r.value)?r.value:[r.value],c=(o=e[r.key])!==null&&o!==void 0?o:[];return l.length>0&&a(l,c)});return s.type==="OR"?n.some(Boolean):n.every(Boolean)})}si(t){return t.flatMap(e=>{var s,n;return(s=(n=e.stacktrace)==null?void 0:n.frames)!==null&&s!==void 0?s:[]}).some(e=>e.filename&&e.filename.startsWith("chrome-extension://"))}ni(t){if(t.length>0){var e,s,n,r,o=(e=(s=t[0].stacktrace)==null?void 0:s.frames)!==null&&e!==void 0?e:[],a=o[o.length-1];return(n=a==null||(r=a.filename)==null?void 0:r.includes("posthog.com/static"))!==null&&n!==void 0&&n}return!1}ei(t){return!W(t)&&V(t)}},jt=ct("[FeatureFlags]"),Vi=ct("[FeatureFlags]",{debugEnabled:!0}),Ir="$active_feature_flags",ei="$override_feature_flags",kc="$feature_flag_payloads",Ui="$override_feature_flag_payloads",Sc="$feature_flag_request_id",Mc="$feature_flag_evaluated_at",Pc=i=>{var t={};for(var[e,s]of Gs(i||{}))s&&(t[e]=s);return t},Xg=i=>{var t=i.flags;return t?(i.featureFlags=Object.fromEntries(Object.keys(t).map(e=>{var s;return[e,(s=t[e].variant)!==null&&s!==void 0?s:t[e].enabled]})),i.featureFlagPayloads=Object.fromEntries(Object.keys(t).filter(e=>t[e].enabled).filter(e=>{var s;return(s=t[e].metadata)==null?void 0:s.payload}).map(e=>{var s;return[e,(s=t[e].metadata)==null?void 0:s.payload]}))):jt.warn("Using an older version of the feature flags endpoint. Please upgrade your PostHog server to the latest version"),i},Kg=(function(i){return i.FeatureFlags="feature_flags",i.Recordings="recordings",i})({}),Ao=class{constructor(t){this.oi=!1,this.ai=!1,this.li=!1,this.ui=!1,this.hi=!1,this.di=!1,this.vi=!1,this._instance=t,this.featureFlagEventHandlers=[]}ci(){var t=this._instance.config.evaluation_environments;return t!=null&&t.length?t.filter(e=>{var s=e&&typeof e=="string"&&e.trim().length>0;return s||jt.error("Invalid evaluation environment found:",e,"Expected non-empty string"),s}):[]}fi(){return this.ci().length>0}flags(){if(this._instance.config.__preview_remote_config)this.di=!0;else{var t=!this.pi&&(this._instance.config.advanced_disable_feature_flags||this._instance.config.advanced_disable_feature_flags_on_first_load);this.gi({disableFlags:t})}}get hasLoadedFlags(){return this.ai}getFlags(){return Object.keys(this.getFlagVariants())}getFlagsWithDetails(){var t=this._instance.get_property(oo),e=this._instance.get_property(ei),s=this._instance.get_property(Ui);if(!s&&!e)return t||{};var n=lt({},t||{}),r=[...new Set([...Object.keys(s||{}),...Object.keys(e||{})])];for(var o of r){var a,l,c=n[o],h=e?.[o],u=P(h)?(a=c?.enabled)!==null&&a!==void 0&&a:!!h,d=P(h)?c.variant:typeof h=="string"?h:void 0,f=s?.[o],p=T({},c,{enabled:u,variant:u?d??c?.variant:void 0});u!==c?.enabled&&(p.original_enabled=c?.enabled),d!==c?.variant&&(p.original_variant=c?.variant),f&&(p.metadata=T({},c?.metadata,{payload:f,original_payload:c==null||(l=c.metadata)==null?void 0:l.payload})),n[o]=p}return this.oi||(jt.warn(" Overriding feature flag details!",{flagDetails:t,overriddenPayloads:s,finalDetails:n}),this.oi=!0),n}getFlagVariants(){var t=this._instance.get_property(oi),e=this._instance.get_property(ei);if(!e)return t||{};for(var s=lt({},t),n=Object.keys(e),r=0;r<n.length;r++)s[n[r]]=e[n[r]];return this.oi||(jt.warn(" Overriding feature flags!",{enabledFlags:t,overriddenFlags:e,finalFlags:s}),this.oi=!0),s}getFlagPayloads(){var t=this._instance.get_property(kc),e=this._instance.get_property(Ui);if(!e)return t||{};for(var s=lt({},t||{}),n=Object.keys(e),r=0;r<n.length;r++)s[n[r]]=e[n[r]];return this.oi||(jt.warn(" Overriding feature flag payloads!",{flagPayloads:t,overriddenPayloads:e,finalPayloads:s}),this.oi=!0),s}reloadFeatureFlags(){this.ui||this._instance.config.advanced_disable_feature_flags||this.pi||(this.pi=setTimeout(()=>{this.gi()},5))}mi(){clearTimeout(this.pi),this.pi=void 0}ensureFlagsLoaded(){this.ai||this.li||this.pi||this.reloadFeatureFlags()}setAnonymousDistinctId(t){this.$anon_distinct_id=t}setReloadingPaused(t){this.ui=t}gi(t){var e;if(this.mi(),!this._instance.O())if(this.li)this.hi=!0;else{var s=this._instance.config.token,n=this._instance.get_property("$device_id"),r={token:s,distinct_id:this._instance.get_distinct_id(),groups:this._instance.getGroups(),$anon_distinct_id:this.$anon_distinct_id,person_properties:T({},((e=this._instance.persistence)==null?void 0:e.get_initial_props())||{},this._instance.get_property(Ji)||{}),group_properties:this._instance.get_property(Ve)};Ht(n)||P(n)||(r.$device_id=n),(t!=null&&t.disableFlags||this._instance.config.advanced_disable_feature_flags)&&(r.disable_flags=!0),this.fi()&&(r.evaluation_environments=this.ci());var o=this._instance.config.__preview_remote_config,a=o?"/flags/?v=2":"/flags/?v=2&config=true",l=this._instance.config.advanced_only_evaluate_survey_feature_flags?"&only_evaluate_survey_feature_flags=true":"",c=this._instance.requestRouter.endpointFor("flags",a+l);o&&(r.timezone=Th()),this.li=!0,this._instance._send_request({method:"POST",url:c,data:r,compression:this._instance.config.disable_compression?void 0:re.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:h=>{var u,d,f=!0;if(h.statusCode===200&&(this.hi||(this.$anon_distinct_id=void 0),f=!1),this.li=!1,this.di||(this.di=!0,this._instance.yi((d=h.json)!==null&&d!==void 0?d:{})),!r.disable_flags||this.hi)if(this.vi=!f,h.json&&(u=h.json.quotaLimited)!=null&&u.includes(Kg.FeatureFlags))jt.warn("You have hit your feature flags quota limit, and will not be able to load feature flags until the quota is reset.  Please visit https://posthog.com/docs/billing/limits-alerts to learn more.");else{var p;r.disable_flags||this.receivedFeatureFlags((p=h.json)!==null&&p!==void 0?p:{},f),this.hi&&(this.hi=!1,this.gi())}}})}}getFeatureFlag(t,e){if(e===void 0&&(e={}),this.ai||this.getFlags()&&this.getFlags().length>0){var s=this.getFlagVariants()[t],n=""+s,r=this._instance.get_property(Sc)||void 0,o=this._instance.get_property(Mc)||void 0,a=this._instance.get_property(tn)||{};if((e.send_event||!("send_event"in e))&&(!(t in a)||!a[t].includes(n))){var l,c,h,u,d,f,p,g,m;V(a[t])?a[t].push(n):a[t]=[n],(l=this._instance.persistence)==null||l.register({[tn]:a});var _=this.getFeatureFlagDetails(t),v={$feature_flag:t,$feature_flag_response:s,$feature_flag_payload:this.getFeatureFlagPayload(t)||null,$feature_flag_request_id:r,$feature_flag_evaluated_at:o,$feature_flag_bootstrapped_response:((c=this._instance.config.bootstrap)==null||(c=c.featureFlags)==null?void 0:c[t])||null,$feature_flag_bootstrapped_payload:((h=this._instance.config.bootstrap)==null||(h=h.featureFlagPayloads)==null?void 0:h[t])||null,$used_bootstrap_value:!this.vi};P(_==null||(u=_.metadata)==null?void 0:u.version)||(v.$feature_flag_version=_.metadata.version);var y,w=(d=_==null||(f=_.reason)==null?void 0:f.description)!==null&&d!==void 0?d:_==null||(p=_.reason)==null?void 0:p.code;w&&(v.$feature_flag_reason=w),_!=null&&(g=_.metadata)!=null&&g.id&&(v.$feature_flag_id=_.metadata.id),P(_?.original_variant)&&P(_?.original_enabled)||(v.$feature_flag_original_response=P(_.original_variant)?_.original_enabled:_.original_variant),_!=null&&(m=_.metadata)!=null&&m.original_payload&&(v.$feature_flag_original_payload=_==null||(y=_.metadata)==null?void 0:y.original_payload),this._instance.capture("$feature_flag_called",v)}return s}jt.warn('getFeatureFlag for key "'+t+`" failed. Feature flags didn't load in time.`)}getFeatureFlagDetails(t){return this.getFlagsWithDetails()[t]}getFeatureFlagPayload(t){return this.getFlagPayloads()[t]}getRemoteConfigPayload(t,e){var s=this._instance.config.token,n={distinct_id:this._instance.get_distinct_id(),token:s};this.fi()&&(n.evaluation_environments=this.ci()),this._instance._send_request({method:"POST",url:this._instance.requestRouter.endpointFor("flags","/flags/?v=2&config=true"),data:n,compression:this._instance.config.disable_compression?void 0:re.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:r=>{var o,a=(o=r.json)==null?void 0:o.featureFlagPayloads;e(a?.[t]||void 0)}})}isFeatureEnabled(t,e){if(e===void 0&&(e={}),this.ai||this.getFlags()&&this.getFlags().length>0){var s=this.getFeatureFlag(t,e);return P(s)?void 0:!!s}jt.warn('isFeatureEnabled for key "'+t+`" failed. Feature flags didn't load in time.`)}addFeatureFlagsHandler(t){this.featureFlagEventHandlers.push(t)}removeFeatureFlagsHandler(t){this.featureFlagEventHandlers=this.featureFlagEventHandlers.filter(e=>e!==t)}receivedFeatureFlags(t,e){if(this._instance.persistence){this.ai=!0;var s=this.getFlagVariants(),n=this.getFlagPayloads(),r=this.getFlagsWithDetails();(function(o,a,l,c,h){l===void 0&&(l={}),c===void 0&&(c={}),h===void 0&&(h={});var u=Xg(o),d=u.flags,f=u.featureFlags,p=u.featureFlagPayloads;if(f){var g=o.requestId,m=o.evaluatedAt;if(V(f)){jt.warn("v1 of the feature flags endpoint is deprecated. Please use the latest version.");var _={};if(f)for(var v=0;v<f.length;v++)_[f[v]]=!0;a&&a.register({[Ir]:f,[oi]:_})}else{var y=f,w=p,b=d;o.errorsWhileComputingFlags&&(y=T({},l,y),w=T({},c,w),b=T({},h,b)),a&&a.register(T({[Ir]:Object.keys(Pc(y)),[oi]:y||{},[kc]:w||{},[oo]:b||{}},g?{[Sc]:g}:{},m?{[Mc]:m}:{}))}}})(t,this._instance.persistence,s,n,r),this.bi(e)}}override(t,e){e===void 0&&(e=!1),jt.warn("override is deprecated. Please use overrideFeatureFlags instead."),this.overrideFeatureFlags({flags:t,suppressWarning:e})}overrideFeatureFlags(t){if(!this._instance.__loaded||!this._instance.persistence)return jt.uninitializedWarning("posthog.featureFlags.overrideFeatureFlags");if(t===!1)return this._instance.persistence.unregister(ei),this._instance.persistence.unregister(Ui),this.bi(),Vi.info("All overrides cleared");if(t&&typeof t=="object"&&("flags"in t||"payloads"in t)){var e,s=t;if(this.oi=!!((e=s.suppressWarning)!==null&&e!==void 0&&e),"flags"in s){if(s.flags===!1)this._instance.persistence.unregister(ei),Vi.info("Flag overrides cleared");else if(s.flags){if(V(s.flags)){for(var n={},r=0;r<s.flags.length;r++)n[s.flags[r]]=!0;this._instance.persistence.register({[ei]:n})}else this._instance.persistence.register({[ei]:s.flags});Vi.info("Flag overrides set",{flags:s.flags})}}return"payloads"in s&&(s.payloads===!1?(this._instance.persistence.unregister(Ui),Vi.info("Payload overrides cleared")):s.payloads&&(this._instance.persistence.register({[Ui]:s.payloads}),Vi.info("Payload overrides set",{payloads:s.payloads}))),void this.bi()}this.bi()}onFeatureFlags(t){if(this.addFeatureFlagsHandler(t),this.ai){var{flags:e,flagVariants:s}=this.wi();t(e,s)}return()=>this.removeFeatureFlagsHandler(t)}updateEarlyAccessFeatureEnrollment(t,e,s){var n,r=(this._instance.get_property(Zi)||[]).find(c=>c.flagKey===t),o={["$feature_enrollment/"+t]:e},a={$feature_flag:t,$feature_enrollment:e,$set:o};r&&(a.$early_access_feature_name=r.name),s&&(a.$feature_enrollment_stage=s),this._instance.capture("$feature_enrollment_update",a),this.setPersonPropertiesForFlags(o,!1);var l=T({},this.getFlagVariants(),{[t]:e});(n=this._instance.persistence)==null||n.register({[Ir]:Object.keys(Pc(l)),[oi]:l}),this.bi()}getEarlyAccessFeatures(t,e,s){e===void 0&&(e=!1);var n=this._instance.get_property(Zi),r=s?"&"+s.map(o=>"stage="+o).join("&"):"";if(n&&!e)return t(n);this._instance._send_request({url:this._instance.requestRouter.endpointFor("api","/api/early_access_features/?token="+this._instance.config.token+r),method:"GET",callback:o=>{var a,l;if(o.json){var c=o.json.earlyAccessFeatures;return(a=this._instance.persistence)==null||a.unregister(Zi),(l=this._instance.persistence)==null||l.register({[Zi]:c}),t(c)}}})}wi(){var t=this.getFlags(),e=this.getFlagVariants();return{flags:t.filter(s=>e[s]),flagVariants:Object.keys(e).filter(s=>e[s]).reduce((s,n)=>(s[n]=e[n],s),{})}}bi(t){var{flags:e,flagVariants:s}=this.wi();this.featureFlagEventHandlers.forEach(n=>n(e,s,{errorsLoading:t}))}setPersonPropertiesForFlags(t,e){e===void 0&&(e=!0);var s=this._instance.get_property(Ji)||{};this._instance.register({[Ji]:T({},s,t)}),e&&this._instance.reloadFeatureFlags()}resetPersonPropertiesForFlags(){this._instance.unregister(Ji)}setGroupPropertiesForFlags(t,e){e===void 0&&(e=!0);var s=this._instance.get_property(Ve)||{};Object.keys(s).length!==0&&Object.keys(s).forEach(n=>{s[n]=T({},s[n],t[n]),delete t[n]}),this._instance.register({[Ve]:T({},s,t)}),e&&this._instance.reloadFeatureFlags()}resetGroupPropertiesForFlags(t){if(t){var e=this._instance.get_property(Ve)||{};this._instance.register({[Ve]:T({},e,{[t]:{}})})}else this._instance.unregister(Ve)}reset(){this.ai=!1,this.li=!1,this.ui=!1,this.hi=!1,this.di=!1,this.vi=!1,this.$anon_distinct_id=void 0,this.mi(),this.oi=!1}},Zg=["cookie","localstorage","localstorage+cookie","sessionstorage","memory"],ss=class{constructor(t,e){this.R=t,this.props={},this.xi=!1,this.Ei=(s=>{var n="";return s.token&&(n=s.token.replace(/\+/g,"PL").replace(/\//g,"SL").replace(/=/g,"EQ")),s.persistence_name?"ph_"+s.persistence_name:"ph_"+n+"_posthog"})(t),this.Y=this.$i(t),this.load(),t.debug&&E.info("Persistence loaded",t.persistence,T({},this.props)),this.update_config(t,t,e),this.save()}isDisabled(){return!!this.Si}$i(t){Zg.indexOf(t.persistence.toLowerCase())===-1&&(E.critical("Unknown persistence type "+t.persistence+"; falling back to localStorage+cookie"),t.persistence="localStorage+cookie");var e=(function(n){n===void 0&&(n=[]);var r=[...Cg,...n];return T({},st,{W:function(o){try{var a={};try{a=Ut.W(o)||{}}catch{}var l=lt(a,JSON.parse(st.q(o)||"{}"));return st.G(o,l),l}catch{}return null},G:function(o,a,l,c,h,u){try{st.G(o,a,void 0,void 0,u);var d={};r.forEach(f=>{a[f]&&(d[f]=a[f])}),Object.keys(d).length&&Ut.G(o,d,l,c,h,u)}catch(f){st.B(f)}},V:function(o,a){try{x?.localStorage.removeItem(o),Ut.V(o,a)}catch(l){st.B(l)}}})})(t.cookie_persisted_properties||[]),s=t.persistence.toLowerCase();return s==="localstorage"&&st.H()?st:s==="localstorage+cookie"&&e.H()?e:s==="sessionstorage"&&_t.H()?_t:s==="memory"?Og:s==="cookie"?Ut:e.H()?e:Ut}properties(){var t={};return Z(this.props,function(e,s){if(s===oi&&mt(e))for(var n=Object.keys(e),r=0;r<n.length;r++)t["$feature/"+n[r]]=e[n[r]];else a=s,l=!1,(Ht(o=ug)?l:zl&&o.indexOf===zl?o.indexOf(a)!=-1:(Z(o,function(c){if(l||(l=c===a))return Js}),l))||(t[s]=e);var o,a,l}),t}load(){if(!this.Si){var t=this.Y.W(this.Ei);t&&(this.props=lt({},t))}}save(){this.Si||this.Y.G(this.Ei,this.props,this.ki,this.Pi,this.Ti,this.R.debug)}remove(){this.Y.V(this.Ei,!1),this.Y.V(this.Ei,!0)}clear(){this.remove(),this.props={}}register_once(t,e,s){if(mt(t)){P(e)&&(e="None"),this.ki=P(s)?this.Ii:s;var n=!1;if(Z(t,(r,o)=>{this.props.hasOwnProperty(o)&&this.props[o]!==e||(this.props[o]=r,n=!0)}),n)return this.save(),!0}return!1}register(t,e){if(mt(t)){this.ki=P(e)?this.Ii:e;var s=!1;if(Z(t,(n,r)=>{t.hasOwnProperty(r)&&this.props[r]!==n&&(this.props[r]=n,s=!0)}),s)return this.save(),!0}return!1}unregister(t){t in this.props&&(delete this.props[t],this.save())}update_campaign_params(){if(!this.xi){var t=Sh(this.R.custom_campaign_params,this.R.mask_personal_data_properties,this.R.custom_personal_data_properties);ri(ea(t))||this.register(t),this.xi=!0}}update_search_keyword(){var t;this.register((t=C?.referrer)?Ph(t):{})}update_referrer_info(){var t;this.register_once({$referrer:Eh(),$referring_domain:C!=null&&C.referrer&&((t=on(C.referrer))==null?void 0:t.host)||"$direct"},void 0)}set_initial_person_info(){this.props[ho]||this.props[uo]||this.register_once({[en]:Ch(this.R.mask_personal_data_properties,this.R.custom_personal_data_properties)},void 0)}get_initial_props(){var t={};Z([uo,ho],o=>{var a=this.props[o];a&&Z(a,function(l,c){t["$initial_"+jr(c)]=l})});var e,s,n=this.props[en];if(n){var r=(e=Oh(n),s={},Z(e,function(o,a){s["$initial_"+jr(a)]=o}),s);lt(t,r)}return t}safe_merge(t){return Z(this.props,function(e,s){s in t||(t[s]=e)}),t}update_config(t,e,s){if(this.Ii=this.ki=t.cookie_expiration,this.set_disabled(t.disable_persistence||!!s),this.set_cross_subdomain(t.cross_subdomain_cookie),this.set_secure(t.secure_cookie),t.persistence!==e.persistence||!((o,a)=>{if(o.length!==a.length)return!1;var l=[...o].sort(),c=[...a].sort();return l.every((h,u)=>h===c[u])})(t.cookie_persisted_properties||[],e.cookie_persisted_properties||[])){var n=this.$i(t),r=this.props;this.clear(),this.Y=n,this.props=r,this.save()}}set_disabled(t){this.Si=t,this.Si?this.remove():this.save()}set_cross_subdomain(t){t!==this.Pi&&(this.Pi=t,this.remove(),this.save())}set_secure(t){t!==this.Ti&&(this.Ti=t,this.remove(),this.save())}set_event_timer(t,e){var s=this.props[Ki]||{};s[t]=e,this.props[Ki]=s,this.save()}remove_event_timer(t){var e=(this.props[Ki]||{})[t];return P(e)||(delete this.props[Ki][t],this.save()),e}get_property(t){return this.props[t]}set_property(t,e){this.props[t]=e,this.save()}},Ec=ct("[Product Tours]"),Fr="ph_product_tours",Do=class{constructor(t){this.Ci=null,this.Ri=null,this._instance=t}onRemoteConfig(t){this._instance.persistence&&this._instance.persistence.register({[ic]:!(t==null||!t.productTours)}),this.loadIfEnabled()}loadIfEnabled(){var t,e;this.Ci||(t=this._instance).config.disable_product_tours||(e=t.persistence)==null||!e.get_property(ic)||this.it(()=>this.Fi())}it(t){var e,s;(e=R.__PosthogExtensions__)!=null&&e.generateProductTours?t():(s=R.__PosthogExtensions__)==null||s.loadExternalDependency==null||s.loadExternalDependency(this._instance,"product-tours",n=>{n?Ec.error("Could not load product tours script",n):t()})}Fi(){var t;!this.Ci&&(t=R.__PosthogExtensions__)!=null&&t.generateProductTours&&(this.Ci=R.__PosthogExtensions__.generateProductTours(this._instance,!0))}getProductTours(t,e){if(e===void 0&&(e=!1),!V(this.Ri)||e){var s=this._instance.persistence;if(s){var n=s.props[Fr];if(V(n)&&!e)return this.Ri=n,void t(n,{isLoaded:!0})}this._instance._send_request({url:this._instance.requestRouter.endpointFor("api","/api/product_tours/?token="+this._instance.config.token),method:"GET",callback:r=>{var o=r.statusCode;if(o!==200||!r.json){var a="Product Tours API could not be loaded, status: "+o;return Ec.error(a),void t([],{isLoaded:!1,error:a})}var l=V(r.json.product_tours)?r.json.product_tours:[];this.Ri=l,s&&s.register({[Fr]:l}),t(l,{isLoaded:!0})}})}else t(this.Ri,{isLoaded:!0})}getActiveProductTours(t){W(this.Ci)?t([],{isLoaded:!1,error:"Product tours not loaded"}):this.Ci.getActiveProductTours(t)}showProductTour(t){var e;(e=this.Ci)==null||e.showTourById(t)}previewTour(t){this.Ci?this.Ci.previewTour(t):this.it(()=>{var e;this.Fi(),(e=this.Ci)==null||e.previewTour(t)})}dismissProductTour(){var t;(t=this.Ci)==null||t.dismissTour("user_clicked_skip")}nextStep(){var t;(t=this.Ci)==null||t.nextStep()}previousStep(){var t;(t=this.Ci)==null||t.previousStep()}clearCache(){var t;this.Ri=null,(t=this._instance.persistence)==null||t.unregister(Fr)}resetTour(t){var e;(e=this.Ci)==null||e.resetTour(t)}resetAllTours(){var t;(t=this.Ci)==null||t.resetAllTours()}cancelPendingTour(t){var e;(e=this.Ci)==null||e.cancelPendingTour(t)}},qi=(function(i){return i.Activation="events",i.Cancellation="cancelEvents",i})({}),e1=(function(i){return i.Button="button",i.Tab="tab",i.Selector="selector",i})({}),i1=(function(i){return i.TopLeft="top_left",i.TopRight="top_right",i.TopCenter="top_center",i.MiddleLeft="middle_left",i.MiddleRight="middle_right",i.MiddleCenter="middle_center",i.Left="left",i.Center="center",i.Right="right",i.NextToTrigger="next_to_trigger",i})({}),s1=(function(i){return i.Top="top",i.Left="left",i.Right="right",i.Bottom="bottom",i})({}),Lr=(function(i){return i.Popover="popover",i.API="api",i.Widget="widget",i.ExternalSurvey="external_survey",i})({}),n1=(function(i){return i.Open="open",i.MultipleChoice="multiple_choice",i.SingleChoice="single_choice",i.Rating="rating",i.Link="link",i})({}),r1=(function(i){return i.NextQuestion="next_question",i.End="end",i.ResponseBased="response_based",i.SpecificQuestion="specific_question",i})({}),o1=(function(i){return i.Once="once",i.Recurring="recurring",i.Always="always",i})({}),ts=(function(i){return i.SHOWN="survey shown",i.DISMISSED="survey dismissed",i.SENT="survey sent",i.ABANDONED="survey abandoned",i})({}),Nr=(function(i){return i.SURVEY_ID="$survey_id",i.SURVEY_NAME="$survey_name",i.SURVEY_RESPONSE="$survey_response",i.SURVEY_ITERATION="$survey_iteration",i.SURVEY_ITERATION_START_DATE="$survey_iteration_start_date",i.SURVEY_PARTIALLY_COMPLETED="$survey_partially_completed",i.SURVEY_SUBMISSION_ID="$survey_submission_id",i.SURVEY_QUESTIONS="$survey_questions",i.SURVEY_COMPLETED="$survey_completed",i.PRODUCT_TOUR_ID="$product_tour_id",i.SURVEY_LAST_SEEN_DATE="$survey_last_seen_date",i})({}),Nh=(function(i){return i.Popover="popover",i.Inline="inline",i})({}),K=ct("[Surveys]"),$h="seenSurvey_",Jg=(i,t)=>{var e="$survey_"+t+"/"+i.id;return i.current_iteration&&i.current_iteration>0&&(e="$survey_"+t+"/"+i.id+"/"+i.current_iteration),e},Cc=i=>((t,e)=>{var s=""+t+e.id;return e.current_iteration&&e.current_iteration>0&&(s=""+t+e.id+"_"+e.current_iteration),s})($h,i),Qg=[Lr.Popover,Lr.Widget,Lr.API],tm={ignoreConditions:!1,ignoreDelay:!1,displayType:Nh.Popover},hs=class{constructor(){this.Mi={},this.Mi={}}on(t,e){return this.Mi[t]||(this.Mi[t]=[]),this.Mi[t].push(e),()=>{this.Mi[t]=this.Mi[t].filter(s=>s!==e)}}emit(t,e){for(var s of this.Mi[t]||[])s(e);for(var n of this.Mi["*"]||[])n(t,e)}};function ii(i,t,e){if(W(i))return!1;switch(e){case"exact":return i===t;case"contains":var s=t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/_/g,".").replace(/%/g,".*");return new RegExp(s,"i").test(i);case"regex":try{return new RegExp(t).test(i)}catch{return!1}default:return!1}}var Ro=class{constructor(t){this.Oi=new hs,this.Ai=(e,s)=>this.Di(e,s)&&this.ji(e,s)&&this.Li(e,s)&&this.Ni(e,s),this.Di=(e,s)=>s==null||!s.event||e?.event===s?.event,this._instance=t,this.Ui=new Set,this.zi=new Set}init(){var t;if(!P((t=this._instance)==null?void 0:t.Hi)){var e;(e=this._instance)==null||e.Hi((s,n)=>{this.on(s,n)})}}register(t){var e,s;if(!P((e=this._instance)==null?void 0:e.Hi)&&(t.forEach(o=>{var a,l;(a=this.zi)==null||a.add(o),(l=o.steps)==null||l.forEach(c=>{var h;(h=this.Ui)==null||h.add(c?.event||"")})}),(s=this._instance)!=null&&s.autocapture)){var n,r=new Set;t.forEach(o=>{var a;(a=o.steps)==null||a.forEach(l=>{l!=null&&l.selector&&r.add(l?.selector)})}),(n=this._instance)==null||n.autocapture.setElementSelectors(r)}}on(t,e){var s;e!=null&&t.length!=0&&(this.Ui.has(t)||this.Ui.has(e?.event))&&this.zi&&((s=this.zi)==null?void 0:s.size)>0&&this.zi.forEach(n=>{this.Bi(e,n)&&this.Oi.emit("actionCaptured",n.name)})}qi(t){this.onAction("actionCaptured",e=>t(e))}Bi(t,e){if(e?.steps==null)return!1;for(var s of e.steps)if(this.Ai(t,s))return!0;return!1}onAction(t,e){return this.Oi.on(t,e)}ji(t,e){if(e!=null&&e.url){var s,n=t==null||(s=t.properties)==null?void 0:s.$current_url;if(!n||typeof n!="string"||!ii(n,e.url,e.url_matching||"contains"))return!1}return!0}Li(t,e){return!!this.Wi(t,e)&&!!this.Gi(t,e)&&!!this.Vi(t,e)}Wi(t,e){var s;if(e==null||!e.href)return!0;var n=this.Ji(t);if(n.length>0)return n.some(a=>ii(a.href,e.href,e.href_matching||"exact"));var r,o=(t==null||(s=t.properties)==null?void 0:s.$elements_chain)||"";return!!o&&ii((r=o.match(/(?::|")href="(.*?)"/))?r[1]:"",e.href,e.href_matching||"exact")}Gi(t,e){var s;if(e==null||!e.text)return!0;var n=this.Ji(t);if(n.length>0)return n.some(c=>ii(c.text,e.text,e.text_matching||"exact")||ii(c.$el_text,e.text,e.text_matching||"exact"));var r,o,a,l=(t==null||(s=t.properties)==null?void 0:s.$elements_chain)||"";return!!l&&(r=(function(c){for(var h,u=[],d=/(?::|")text="(.*?)"/g;!W(h=d.exec(c));)u.includes(h[1])||u.push(h[1]);return u})(l),o=e.text,a=e.text_matching||"exact",r.some(c=>ii(c,o,a)))}Vi(t,e){var s,n;if(e==null||!e.selector)return!0;var r=t==null||(s=t.properties)==null?void 0:s.$element_selectors;if(r!=null&&r.includes(e.selector))return!0;var o=(t==null||(n=t.properties)==null?void 0:n.$elements_chain)||"";if(e.selector_regex&&o)try{return new RegExp(e.selector_regex).test(o)}catch{return!1}return!1}Ji(t){var e;return(t==null||(e=t.properties)==null?void 0:e.$elements)==null?[]:t?.properties.$elements}Ni(t,e){return e==null||!e.properties||e.properties.length===0||Lh(e.properties.reduce((s,n)=>{var r=V(n.value)?n.value.map(String):n.value!=null?[String(n.value)]:[];return s[n.key]={values:r,operator:n.operator||"exact"},s},{}),t?.properties)}},Io=class{constructor(t){this._instance=t,this.Ki=new Map,this.Yi=new Map,this.Xi=new Map}Qi(t,e){return!!t&&Lh(t.propertyFilters,e?.properties)}Zi(t,e){var s=new Map;return t.forEach(n=>{var r;(r=n.conditions)==null||(r=r[e])==null||(r=r.values)==null||r.forEach(o=>{if(o!=null&&o.name){var a=s.get(o.name)||[];a.push(n.id),s.set(o.name,a)}})}),s}te(t,e,s){var n=(s===qi.Activation?this.Ki:this.Yi).get(t),r=[];return this.ie(o=>{r=o.filter(a=>n?.includes(a.id))}),r.filter(o=>{var a,l=(a=o.conditions)==null||(a=a[s])==null||(a=a.values)==null?void 0:a.find(c=>c.name===t);return this.Qi(l,e)})}register(t){var e;P((e=this._instance)==null?void 0:e.Hi)||(this.ee(t),this.re(t))}re(t){var e=t.filter(s=>{var n,r;return((n=s.conditions)==null?void 0:n.actions)&&((r=s.conditions)==null||(r=r.actions)==null||(r=r.values)==null?void 0:r.length)>0});e.length!==0&&(this.se==null&&(this.se=new Ro(this._instance),this.se.init(),this.se.qi(s=>{this.onAction(s)})),e.forEach(s=>{var n,r,o,a,l;s.conditions&&(n=s.conditions)!=null&&n.actions&&(r=s.conditions)!=null&&(r=r.actions)!=null&&r.values&&((o=s.conditions)==null||(o=o.actions)==null||(o=o.values)==null?void 0:o.length)>0&&((a=this.se)==null||a.register(s.conditions.actions.values),(l=s.conditions)==null||(l=l.actions)==null||(l=l.values)==null||l.forEach(c=>{if(c&&c.name){var h=this.Xi.get(c.name);h&&h.push(s.id),this.Xi.set(c.name,h||[s.id])}}))}))}ee(t){var e,s=t.filter(r=>{var o,a;return((o=r.conditions)==null?void 0:o.events)&&((a=r.conditions)==null||(a=a.events)==null||(a=a.values)==null?void 0:a.length)>0}),n=t.filter(r=>{var o,a;return((o=r.conditions)==null?void 0:o.cancelEvents)&&((a=r.conditions)==null||(a=a.cancelEvents)==null||(a=a.values)==null?void 0:a.length)>0});(s.length!==0||n.length!==0)&&((e=this._instance)==null||e.Hi((r,o)=>{this.onEvent(r,o)}),this.Ki=this.Zi(t,qi.Activation),this.Yi=this.Zi(t,qi.Cancellation))}onEvent(t,e){var s,n=this.ne(),r=this.oe(),o=this.ae(),a=((s=this._instance)==null||(s=s.persistence)==null?void 0:s.props[r])||[];if(o===t&&e&&a.length>0){var l,c;n.info("event matched, removing item from activated items",{event:t,eventPayload:e,existingActivatedItems:a});var h=(e==null||(l=e.properties)==null?void 0:l.$survey_id)||(e==null||(c=e.properties)==null?void 0:c.$product_tour_id);if(h){var u=a.indexOf(h);u>=0&&(a.splice(u,1),this.le(a))}}else{if(this.Yi.has(t)){var d=this.te(t,e,qi.Cancellation);d.length>0&&(n.info("cancel event matched, cancelling items",{event:t,itemsToCancel:d.map(p=>p.id)}),d.forEach(p=>{var g=a.indexOf(p.id);g>=0&&a.splice(g,1),this.ue(p.id)}),this.le(a))}if(this.Ki.has(t)){n.info("event name matched",{event:t,eventPayload:e,items:this.Ki.get(t)});var f=this.te(t,e,qi.Activation);this.le(a.concat(f.map(p=>p.id)||[]))}}}onAction(t){var e,s=this.oe(),n=((e=this._instance)==null||(e=e.persistence)==null?void 0:e.props[s])||[];this.Xi.has(t)&&this.le(n.concat(this.Xi.get(t)||[]))}le(t){var e,s=this.ne(),n=this.oe(),r=[...new Set(t)].filter(o=>!this.he(o));s.info("updating activated items",{activatedItems:r}),(e=this._instance)==null||(e=e.persistence)==null||e.register({[n]:r})}getActivatedIds(){var t,e=this.oe(),s=(t=this._instance)==null||(t=t.persistence)==null?void 0:t.props[e];return s||[]}getEventToItemsMap(){return this.Ki}de(){return this.se}},Fo=class extends Io{constructor(t){super(t)}oe(){return"$surveys_activated"}ae(){return ts.SHOWN}ie(t){var e;(e=this._instance)==null||e.getSurveys(t)}ue(t){var e;(e=this._instance)==null||e.cancelPendingSurvey(t)}ne(){return K}he(){return!1}getSurveys(){return this.getActivatedIds()}getEventToSurveys(){return this.getEventToItemsMap()}},Lo=class{constructor(t){this.ve=void 0,this._surveyManager=null,this.ce=!1,this.fe=[],this.pe=null,this._instance=t,this._surveyEventReceiver=null}onRemoteConfig(t){if(!this._instance.config.disable_surveys){var e=t.surveys;if(W(e))return K.warn("Flags not loaded yet. Not loading surveys.");var s=V(e);this.ve=s?e.length>0:e,K.info("flags response received, isSurveysEnabled: "+this.ve),this.loadIfEnabled()}}reset(){localStorage.removeItem("lastSeenSurveyDate");for(var t=[],e=0;e<localStorage.length;e++){var s=localStorage.key(e);(s!=null&&s.startsWith($h)||s!=null&&s.startsWith("inProgressSurvey_"))&&t.push(s)}t.forEach(n=>localStorage.removeItem(n))}loadIfEnabled(){if(!this._surveyManager)if(this.ce)K.info("Already initializing surveys, skipping...");else if(this._instance.config.disable_surveys)K.info("Disabled. Not loading surveys.");else if(this._instance.config.cookieless_mode&&this._instance.consent.isOptedOut())K.info("Not loading surveys in cookieless mode without consent.");else{var t=R?.__PosthogExtensions__;if(t){if(!P(this.ve)||this._instance.config.advanced_enable_surveys){var e=this.ve||this._instance.config.advanced_enable_surveys;this.ce=!0;try{var s=t.generateSurveys;if(s)return void this.ge(s,e);var n=t.loadExternalDependency;if(!n)return void this._e("PostHog loadExternalDependency extension not found.");n(this._instance,"surveys",r=>{r||!t.generateSurveys?this._e("Could not load surveys script",r):this.ge(t.generateSurveys,e)})}catch(r){throw this._e("Error initializing surveys",r),r}finally{this.ce=!1}}}else K.error("PostHog Extensions not found.")}}ge(t,e){this._surveyManager=t(this._instance,e),this._surveyEventReceiver=new Fo(this._instance),K.info("Surveys loaded successfully"),this.me({isLoaded:!0})}_e(t,e){K.error(t,e),this.me({isLoaded:!1,error:t})}onSurveysLoaded(t){return this.fe.push(t),this._surveyManager&&this.me({isLoaded:!0}),()=>{this.fe=this.fe.filter(e=>e!==t)}}getSurveys(t,e){if(e===void 0&&(e=!1),this._instance.config.disable_surveys)return K.info("Disabled. Not loading surveys."),t([]);var s,n=this._instance.get_property(ao);if(n&&!e)return t(n,{isLoaded:!0});typeof Promise<"u"&&this.pe?this.pe.then(r=>{var{surveys:o,context:a}=r;return t(o,a)}):(typeof Promise<"u"&&(this.pe=new Promise(r=>{s=r})),this._instance._send_request({url:this._instance.requestRouter.endpointFor("api","/api/surveys/?token="+this._instance.config.token),method:"GET",timeout:this._instance.config.surveys_request_timeout_ms,callback:r=>{var o;this.pe=null;var a=r.statusCode;if(a!==200||!r.json){var l="Surveys API could not be loaded, status: "+a;K.error(l);var c={isLoaded:!1,error:l};return t([],c),void(s==null||s({surveys:[],context:c}))}var h,u=r.json.surveys||[],d=u.filter(p=>(function(g){return!(!g.start_date||g.end_date)})(p)&&((function(g){var m;return!((m=g.conditions)==null||(m=m.events)==null||(m=m.values)==null||!m.length)})(p)||(function(g){var m;return!((m=g.conditions)==null||(m=m.actions)==null||(m=m.values)==null||!m.length)})(p)));d.length>0&&((h=this._surveyEventReceiver)==null||h.register(d)),(o=this._instance.persistence)==null||o.register({[ao]:u});var f={isLoaded:!0};t(u,f),s?.({surveys:u,context:f})}}))}me(t){for(var e of this.fe)try{if(!t.isLoaded)return e([],t);this.getSurveys(e)}catch(s){K.error("Error in survey callback",s)}}getActiveMatchingSurveys(t,e){if(e===void 0&&(e=!1),!W(this._surveyManager))return this._surveyManager.getActiveMatchingSurveys(t,e);K.warn("init was not called")}ye(t){var e=null;return this.getSurveys(s=>{var n;e=(n=s.find(r=>r.id===t))!==null&&n!==void 0?n:null}),e}be(t){if(W(this._surveyManager))return{eligible:!1,reason:"SDK is not enabled or survey functionality is not yet loaded"};var e=typeof t=="string"?this.ye(t):t;return e?this._surveyManager.checkSurveyEligibility(e):{eligible:!1,reason:"Survey not found"}}canRenderSurvey(t){if(W(this._surveyManager))return K.warn("init was not called"),{visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"};var e=this.be(t);return{visible:e.eligible,disabledReason:e.reason}}canRenderSurveyAsync(t,e){return W(this._surveyManager)?(K.warn("init was not called"),Promise.resolve({visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"})):new Promise(s=>{this.getSurveys(n=>{var r,o=(r=n.find(l=>l.id===t))!==null&&r!==void 0?r:null;if(o){var a=this.be(o);s({visible:a.eligible,disabledReason:a.reason})}else s({visible:!1,disabledReason:"Survey not found"})},e)})}renderSurvey(t,e){var s;if(W(this._surveyManager))K.warn("init was not called");else{var n=typeof t=="string"?this.ye(t):t;if(n!=null&&n.id)if(Qg.includes(n.type)){var r=C?.querySelector(e);if(r)return(s=n.appearance)!=null&&s.surveyPopupDelaySeconds?(K.info("Rendering survey "+n.id+" with delay of "+n.appearance.surveyPopupDelaySeconds+" seconds"),void setTimeout(()=>{var o,a;K.info("Rendering survey "+n.id+" with delay of "+((o=n.appearance)==null?void 0:o.surveyPopupDelaySeconds)+" seconds"),(a=this._surveyManager)==null||a.renderSurvey(n,r),K.info("Survey "+n.id+" rendered")},1e3*n.appearance.surveyPopupDelaySeconds)):void this._surveyManager.renderSurvey(n,r);K.warn("Survey element not found")}else K.warn("Surveys of type "+n.type+" cannot be rendered in the app");else K.warn("Survey not found")}}displaySurvey(t,e){var s;if(W(this._surveyManager))K.warn("init was not called");else{var n=this.ye(t);if(n){var r=n;if((s=n.appearance)!=null&&s.surveyPopupDelaySeconds&&e.ignoreDelay&&(r=T({},n,{appearance:T({},n.appearance,{surveyPopupDelaySeconds:0})})),e.ignoreConditions===!1){var o=this.canRenderSurvey(n);if(!o.visible)return void K.warn("Survey is not eligible to be displayed: ",o.disabledReason)}e.displayType!==Nh.Inline?this._surveyManager.handlePopoverSurvey(r):this.renderSurvey(r,e.selector)}else K.warn("Survey not found")}}cancelPendingSurvey(t){W(this._surveyManager)?K.warn("init was not called"):this._surveyManager.cancelSurvey(t)}handlePageUnload(){var t;(t=this._surveyManager)==null||t.handlePageUnload()}},ee=ct("[Conversations]"),No=class{constructor(t){this.we=void 0,this._conversationsManager=null,this.xe=!1,this.Ee=null,this._instance=t}onRemoteConfig(t){if(!this._instance.config.disable_conversations){var e=t.conversations;W(e)||(ae(e)?this.we=e:(this.we=e.enabled,this.Ee=e),this.loadIfEnabled())}}reset(){var t;(t=this._conversationsManager)==null||t.reset(),this._conversationsManager=null,this.we=void 0,this.Ee=null}loadIfEnabled(){if(!this._conversationsManager&&!this.xe&&!(this._instance.config.disable_conversations||this._instance.config.cookieless_mode&&this._instance.consent.isOptedOut())){var t=R?.__PosthogExtensions__;if(t&&!P(this.we)&&this.we)if(this.Ee&&this.Ee.token){this.xe=!0;try{var e=t.initConversations;if(e)return this.$e(e),void(this.xe=!1);var s=t.loadExternalDependency;if(!s)return void this.Se("PostHog loadExternalDependency extension not found.");s(this._instance,"conversations",n=>{n||!t.initConversations?this.Se("Could not load conversations script",n):this.$e(t.initConversations),this.xe=!1})}catch(n){this.Se("Error initializing conversations",n),this.xe=!1}}else ee.error("Conversations enabled but missing token in remote config.")}}$e(t){if(this.Ee)try{this._conversationsManager=t(this.Ee,this._instance),ee.info("Conversations loaded successfully")}catch(e){this.Se("Error completing conversations initialization",e)}else ee.error("Cannot complete initialization: remote config is null")}Se(t,e){ee.error(t,e),this._conversationsManager=null,this.xe=!1}show(){this._conversationsManager?this._conversationsManager.show():ee.warn("Conversations not loaded yet.")}hide(){this._conversationsManager&&this._conversationsManager.hide()}isAvailable(){return this.we===!0&&!Ht(this._conversationsManager)}isVisible(){var t,e;return(t=(e=this._conversationsManager)==null?void 0:e.isVisible())!==null&&t!==void 0&&t}sendMessage(t,e,s){var n=this;return ni(function*(){return n._conversationsManager?n._conversationsManager.sendMessage(t,e,s):(ee.warn("Conversations not available yet."),null)})()}getMessages(t,e){var s=this;return ni(function*(){return s._conversationsManager?s._conversationsManager.getMessages(t,e):(ee.warn("Conversations not available yet."),null)})()}markAsRead(t){var e=this;return ni(function*(){return e._conversationsManager?e._conversationsManager.markAsRead(t):(ee.warn("Conversations not available yet."),null)})()}getTickets(t){var e=this;return ni(function*(){return e._conversationsManager?e._conversationsManager.getTickets(t):(ee.warn("Conversations not available yet."),null)})()}getCurrentTicketId(){var t,e;return(t=(e=this._conversationsManager)==null?void 0:e.getCurrentTicketId())!==null&&t!==void 0?t:null}getWidgetSessionId(){var t,e;return(t=(e=this._conversationsManager)==null?void 0:e.getWidgetSessionId())!==null&&t!==void 0?t:null}},Oc=ct("[RateLimiter]"),$o=class{constructor(t){var e,s;this.serverLimits={},this.lastEventRateLimited=!1,this.checkForLimiting=n=>{var r=n.text;if(r&&r.length)try{(JSON.parse(r).quota_limited||[]).forEach(o=>{Oc.info((o||"events")+" is quota limited."),this.serverLimits[o]=new Date().getTime()+6e4})}catch(o){return void Oc.warn('could not rate limit - continuing. Error: "'+o?.message+'"',{text:r})}},this.instance=t,this.captureEventsPerSecond=((e=t.config.rate_limiting)==null?void 0:e.events_per_second)||10,this.captureEventsBurstLimit=Math.max(((s=t.config.rate_limiting)==null?void 0:s.events_burst_limit)||10*this.captureEventsPerSecond,this.captureEventsPerSecond),this.lastEventRateLimited=this.clientRateLimitContext(!0).isRateLimited}clientRateLimitContext(t){var e,s,n;t===void 0&&(t=!1);var r=new Date().getTime(),o=(e=(s=this.instance.persistence)==null?void 0:s.get_property(co))!==null&&e!==void 0?e:{tokens:this.captureEventsBurstLimit,last:r};o.tokens+=(r-o.last)/1e3*this.captureEventsPerSecond,o.last=r,o.tokens>this.captureEventsBurstLimit&&(o.tokens=this.captureEventsBurstLimit);var a=o.tokens<1;return a||t||(o.tokens=Math.max(0,o.tokens-1)),!a||this.lastEventRateLimited||t||this.instance.capture("$$client_ingestion_warning",{$$client_ingestion_warning_message:"posthog-js client rate limited. Config is set to "+this.captureEventsPerSecond+" events per second and "+this.captureEventsBurstLimit+" events burst limit."},{skip_client_rate_limiting:!0}),this.lastEventRateLimited=a,(n=this.instance.persistence)==null||n.set_property(co,o),{isRateLimited:a,remainingTokens:o.tokens}}isServerRateLimited(t){var e=this.serverLimits[t||"events"]||!1;return e!==!1&&new Date().getTime()<e}},We=ct("[RemoteConfig]"),Bo=class{constructor(t){this._instance=t}get remoteConfig(){var t;return(t=R._POSTHOG_REMOTE_CONFIG)==null||(t=t[this._instance.config.token])==null?void 0:t.config}ke(t){var e,s;(e=R.__PosthogExtensions__)!=null&&e.loadExternalDependency?(s=R.__PosthogExtensions__)==null||s.loadExternalDependency==null||s.loadExternalDependency(this._instance,"remote-config",()=>t(this.remoteConfig)):(We.error("PostHog Extensions not found. Cannot load remote config."),t())}Pe(t){this._instance._send_request({method:"GET",url:this._instance.requestRouter.endpointFor("assets","/array/"+this._instance.config.token+"/config"),callback:e=>{t(e.json)}})}load(){try{if(this.remoteConfig)return We.info("Using preloaded remote config",this.remoteConfig),void this.yi(this.remoteConfig);if(this._instance.O())return void We.warn("Remote config is disabled. Falling back to local config.");this.ke(t=>{if(!t)return We.info("No config found after loading remote JS config. Falling back to JSON."),void this.Pe(e=>{this.yi(e)});this.yi(t)})}catch(t){We.error("Error loading remote config",t)}}yi(t){t?this._instance.config.__preview_remote_config?(this._instance.yi(t),t.hasFeatureFlags!==!1&&this._instance.featureFlags.ensureFlagsLoaded()):We.info("__preview_remote_config is disabled. Logging config instead",t):We.error("Failed to fetch remote config from PostHog.")}},zo=3e3,jo=class{constructor(t,e){this.Te=!0,this.Ie=[],this.Ce=qt(e?.flush_interval_ms||zo,250,5e3,E.createLogger("flush interval"),zo),this.Re=t}enqueue(t){this.Ie.push(t),this.Fe||this.Me()}unload(){this.Oe();var t=this.Ie.length>0?this.Ae():{},e=Object.values(t);[...e.filter(s=>s.url.indexOf("/e")===0),...e.filter(s=>s.url.indexOf("/e")!==0)].map(s=>{this.Re(T({},s,{transport:"sendBeacon"}))})}enable(){this.Te=!1,this.Me()}Me(){var t=this;this.Te||(this.Fe=setTimeout(()=>{if(this.Oe(),this.Ie.length>0){var e=this.Ae(),s=function(){var r=e[n],o=new Date().getTime();r.data&&V(r.data)&&Z(r.data,a=>{a.offset=Math.abs(a.timestamp-o),delete a.timestamp}),t.Re(r)};for(var n in e)s()}},this.Ce))}Oe(){clearTimeout(this.Fe),this.Fe=void 0}Ae(){var t={};return Z(this.Ie,e=>{var s,n=e,r=(n?n.batchKey:null)||n.url;P(t[r])&&(t[r]=T({},n,{data:[]})),(s=t[r].data)==null||s.push(n.data)}),this.Ie=[],t}},em=["retriesPerformedSoFar"],Ho=class{constructor(t){this.De=!1,this.je=3e3,this.Ie=[],this._instance=t,this.Ie=[],this.Le=!0,!P(x)&&"onLine"in x.navigator&&(this.Le=x.navigator.onLine,this.Ne=()=>{this.Le=!0,this.Lt()},this.Ue=()=>{this.Le=!1},ht(x,"online",this.Ne),ht(x,"offline",this.Ue))}get length(){return this.Ie.length}retriableRequest(t){var{retriesPerformedSoFar:e}=t,s=Fc(t,em);Ys(e)&&(s.url=fn(s.url,{retry_count:e})),this._instance._send_request(T({},s,{callback:n=>{n.statusCode!==200&&(n.statusCode<400||n.statusCode>=500)&&(e??0)<10?this.ze(T({retriesPerformedSoFar:e},s)):s.callback==null||s.callback(n)}}))}ze(t){var e=t.retriesPerformedSoFar||0;t.retriesPerformedSoFar=e+1;var s=(function(o){var a=3e3*Math.pow(2,o),l=a/2,c=Math.min(18e5,a),h=(Math.random()-.5)*(c-l);return Math.ceil(c+h)})(e),n=Date.now()+s;this.Ie.push({retryAt:n,requestOptions:t});var r="Enqueued failed request for retry in "+s;navigator.onLine||(r+=" (Browser is offline)"),E.warn(r),this.De||(this.De=!0,this.He())}He(){if(this.Be&&clearTimeout(this.Be),this.Ie.length===0)return this.De=!1,void(this.Be=void 0);this.Be=setTimeout(()=>{this.Le&&this.Ie.length>0&&this.Lt(),this.He()},this.je)}Lt(){var t=Date.now(),e=[],s=this.Ie.filter(r=>r.retryAt<t||(e.push(r),!1));if(this.Ie=e,s.length>0)for(var{requestOptions:n}of s)this.retriableRequest(n)}unload(){for(var{requestOptions:t}of(this.Be&&(clearTimeout(this.Be),this.Be=void 0),this.De=!1,P(x)||(this.Ne&&(x.removeEventListener("online",this.Ne),this.Ne=void 0),this.Ue&&(x.removeEventListener("offline",this.Ue),this.Ue=void 0)),this.Ie))try{this._instance._send_request(T({},t,{transport:"sendBeacon"}))}catch(e){E.error(e)}this.Ie=[]}},Wo=class{constructor(t){this.qe=()=>{var e,s,n,r;this.We||(this.We={});var o=this.scrollElement(),a=this.scrollY(),l=o?Math.max(0,o.scrollHeight-o.clientHeight):0,c=a+(o?.clientHeight||0),h=o?.scrollHeight||0;this.We.lastScrollY=Math.ceil(a),this.We.maxScrollY=Math.max(a,(e=this.We.maxScrollY)!==null&&e!==void 0?e:0),this.We.maxScrollHeight=Math.max(l,(s=this.We.maxScrollHeight)!==null&&s!==void 0?s:0),this.We.lastContentY=c,this.We.maxContentY=Math.max(c,(n=this.We.maxContentY)!==null&&n!==void 0?n:0),this.We.maxContentHeight=Math.max(h,(r=this.We.maxContentHeight)!==null&&r!==void 0?r:0)},this._instance=t}getContext(){return this.We}resetContext(){var t=this.We;return setTimeout(this.qe,0),t}startMeasuringScrollPosition(){ht(x,"scroll",this.qe,{capture:!0}),ht(x,"scrollend",this.qe,{capture:!0}),ht(x,"resize",this.qe)}scrollElement(){if(!this._instance.config.scroll_root_selector)return x?.document.documentElement;var t=V(this._instance.config.scroll_root_selector)?this._instance.config.scroll_root_selector:[this._instance.config.scroll_root_selector];for(var e of t){var s=x?.document.querySelector(e);if(s)return s}}scrollY(){if(this._instance.config.scroll_root_selector){var t=this.scrollElement();return t&&t.scrollTop||0}return x&&(x.scrollY||x.pageYOffset||x.document.documentElement.scrollTop)||0}scrollX(){if(this._instance.config.scroll_root_selector){var t=this.scrollElement();return t&&t.scrollLeft||0}return x&&(x.scrollX||x.pageXOffset||x.document.documentElement.scrollLeft)||0}},im=i=>Ch(i?.config.mask_personal_data_properties,i?.config.custom_personal_data_properties),gn=class{constructor(t,e,s,n){this.Ge=r=>{var o=this.Ve();if(!o||o.sessionId!==r){var a={sessionId:r,props:this.Je(this._instance)};this.Ke.register({[lo]:a})}},this._instance=t,this.Ye=e,this.Ke=s,this.Je=n||im,this.Ye.onSessionId(this.Ge)}Ve(){return this.Ke.props[lo]}getSetOnceProps(){var t,e=(t=this.Ve())==null?void 0:t.props;return e?"r"in e?Oh(e):{$referring_domain:e.referringDomain,$pathname:e.initialPathName,utm_source:e.utm_source,utm_campaign:e.utm_campaign,utm_medium:e.utm_medium,utm_content:e.utm_content,utm_term:e.utm_term}:{}}getSessionProps(){var t={};return Z(ea(this.getSetOnceProps()),(e,s)=>{s==="$current_url"&&(s="url"),t["$session_entry_"+jr(s)]=e}),t}},$r=ct("[SessionId]"),mn=class{on(t,e){return this.Xe.on(t,e)}constructor(t,e,s){var n;if(this.Qe=[],this.Ze=void 0,this.Xe=new hs,this.tr=(h,u)=>Math.abs(h-u)>this.sessionTimeoutMs,!t.persistence)throw new Error("SessionIdManager requires a PostHogPersistence instance");if(t.config.cookieless_mode==="always")throw new Error('SessionIdManager cannot be used with cookieless_mode="always"');this.R=t.config,this.Ke=t.persistence,this.ir=void 0,this.er=void 0,this._sessionStartTimestamp=null,this._sessionActivityTimestamp=null,this.rr=e||we,this.sr=s||we;var r=this.R.persistence_name||this.R.token,o=this.R.session_idle_timeout_seconds||1800;if(this._sessionTimeoutMs=1e3*qt(o,60,36e3,$r.createLogger("session_idle_timeout_seconds"),1800),t.register({$configured_session_timeout_ms:this._sessionTimeoutMs}),this.nr(),this.ar="ph_"+r+"_window_id",this.lr="ph_"+r+"_primary_window_exists",this.ur()){var a=_t.W(this.ar),l=_t.W(this.lr);a&&!l?this.ir=a:_t.V(this.ar),_t.G(this.lr,!0)}if((n=this.R.bootstrap)!=null&&n.sessionID)try{var c=(h=>{var u=h.replace(/-/g,"");if(u.length!==32)throw new Error("Not a valid UUID");if(u[12]!=="7")throw new Error("Not a UUIDv7");return parseInt(u.substring(0,12),16)})(this.R.bootstrap.sessionID);this.hr(this.R.bootstrap.sessionID,new Date().getTime(),c)}catch(h){$r.error("Invalid sessionID in bootstrap",h)}this.dr()}get sessionTimeoutMs(){return this._sessionTimeoutMs}onSessionId(t){return P(this.Qe)&&(this.Qe=[]),this.Qe.push(t),this.er&&t(this.er,this.ir),()=>{this.Qe=this.Qe.filter(e=>e!==t)}}ur(){return this.R.persistence!=="memory"&&!this.Ke.Si&&_t.H()}vr(t){t!==this.ir&&(this.ir=t,this.ur()&&_t.G(this.ar,t))}cr(){return this.ir?this.ir:this.ur()?_t.W(this.ar):null}hr(t,e,s){t===this.er&&e===this._sessionActivityTimestamp&&s===this._sessionStartTimestamp||(this._sessionStartTimestamp=s,this._sessionActivityTimestamp=e,this.er=t,this.Ke.register({[Qs]:[e,t,s]}))}pr(){var t=this.Ke.props[Qs];return V(t)&&t.length===2&&t.push(t[0]),t||[0,null,0]}resetSessionId(){this.hr(null,null,null)}destroy(){clearTimeout(this.gr),this.gr=void 0,this.Ze&&x&&(x.removeEventListener("beforeunload",this.Ze,{capture:!1}),this.Ze=void 0),this.Qe=[]}dr(){this.Ze=()=>{this.ur()&&_t.V(this.lr)},ht(x,"beforeunload",this.Ze,{capture:!1})}checkAndGetSessionAndWindowId(t,e){if(t===void 0&&(t=!1),e===void 0&&(e=null),this.R.cookieless_mode==="always")throw new Error('checkAndGetSessionAndWindowId should not be called with cookieless_mode="always"');var s=e||new Date().getTime(),[n,r,o]=this.pr(),a=this.cr(),l=Ys(o)&&Math.abs(s-o)>864e5,c=!1,h=!r,u=!h&&!t&&this.tr(s,n);h||u||l?(r=this.rr(),a=this.sr(),$r.info("new session ID generated",{sessionId:r,windowId:a,changeReason:{noSessionId:h,activityTimeout:u,sessionPastMaximumLength:l}}),o=s,c=!0):a||(a=this.sr(),c=!0);var d=Ys(n)&&t&&!l?n:s,f=Ys(o)?o:new Date().getTime();return this.vr(a),this.hr(r,d,f),t||this.nr(),c&&this.Qe.forEach(p=>p(r,a,c?{noSessionId:h,activityTimeout:u,sessionPastMaximumLength:l}:void 0)),{sessionId:r,windowId:a,sessionStartTimestamp:f,changeReason:c?{noSessionId:h,activityTimeout:u,sessionPastMaximumLength:l}:void 0,lastActivityTimestamp:n}}nr(){clearTimeout(this.gr),this.gr=setTimeout(()=>{var[t]=this.pr();if(this.tr(new Date().getTime(),t)){var e=this.er;this.resetSessionId(),this.Xe.emit("forcedIdleReset",{idleSessionId:e})}},1.1*this.sessionTimeoutMs)}},sm=["$set_once","$set"],xe=ct("[SiteApps]"),Vo=class{constructor(t){this._instance=t,this._r=[],this.apps={}}get isEnabled(){return!!this._instance.config.opt_in_site_apps}mr(t,e){if(e){var s=this.globalsForEvent(e);this._r.push(s),this._r.length>1e3&&(this._r=this._r.slice(10))}}get siteAppLoaders(){var t;return(t=R._POSTHOG_REMOTE_CONFIG)==null||(t=t[this._instance.config.token])==null?void 0:t.siteApps}init(){if(this.isEnabled){var t=this._instance.Hi(this.mr.bind(this));this.yr=()=>{t(),this._r=[],this.yr=void 0}}}globalsForEvent(t){var e,s,n,r,o,a,l;if(!t)throw new Error("Event payload is required");var c={},h=this._instance.get_property("$groups")||[],u=this._instance.get_property("$stored_group_properties")||{};for(var[d,f]of Object.entries(u))c[d]={id:h[d],type:d,properties:f};var{$set_once:p,$set:g}=t;return{event:T({},Fc(t,sm),{properties:T({},t.properties,g?{$set:T({},(e=(s=t.properties)==null?void 0:s.$set)!==null&&e!==void 0?e:{},g)}:{},p?{$set_once:T({},(n=(r=t.properties)==null?void 0:r.$set_once)!==null&&n!==void 0?n:{},p)}:{}),elements_chain:(o=(a=t.properties)==null?void 0:a.$elements_chain)!==null&&o!==void 0?o:"",distinct_id:(l=t.properties)==null?void 0:l.distinct_id}),person:{properties:this._instance.get_property("$stored_person_properties")},groups:c}}setupSiteApp(t){var e=this.apps[t.id],s=()=>{var a;!e.errored&&this._r.length&&(xe.info("Processing "+this._r.length+" events for site app with id "+t.id),this._r.forEach(l=>e.processEvent==null?void 0:e.processEvent(l)),e.processedBuffer=!0),Object.values(this.apps).every(l=>l.processedBuffer||l.errored)&&((a=this.yr)==null||a.call(this))},n=!1,r=a=>{e.errored=!a,e.loaded=!0,xe.info("Site app with id "+t.id+" "+(a?"loaded":"errored")),n&&s()};try{var{processEvent:o}=t.init({posthog:this._instance,callback:a=>{r(a)}});o&&(e.processEvent=o),n=!0}catch(a){xe.error("Error while initializing PostHog app with config id "+t.id,a),r(!1)}if(n&&e.loaded)try{s()}catch(a){xe.error("Error while processing buffered events PostHog app with config id "+t.id,a),e.errored=!0}}br(){var t=this.siteAppLoaders||[];for(var e of t)this.apps[e.id]={id:e.id,loaded:!1,errored:!1,processedBuffer:!1};for(var s of t)this.setupSiteApp(s)}wr(t){if(Object.keys(this.apps).length!==0){var e=this.globalsForEvent(t);for(var s of Object.values(this.apps))try{s.processEvent==null||s.processEvent(e)}catch(n){xe.error("Error while processing event "+t.event+" for site app "+s.id,n)}}}onRemoteConfig(t){var e,s,n,r=this;if((e=this.siteAppLoaders)!=null&&e.length)return this.isEnabled?(this.br(),void this._instance.on("eventCaptured",c=>this.wr(c))):void xe.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.');if((s=this.yr)==null||s.call(this),(n=t.siteApps)!=null&&n.length)if(this.isEnabled){var o=function(c){var h;R["__$$ph_site_app_"+c]=r._instance,(h=R.__PosthogExtensions__)==null||h.loadSiteApp==null||h.loadSiteApp(r._instance,l,u=>{if(u)return xe.error("Error while initializing PostHog app with config id "+c,u)})};for(var{id:a,url:l}of t.siteApps)o(a)}else xe.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.')}},Bh=function(i,t){if(!i)return!1;var e=i.userAgent;if(e&&Wl(e,t))return!0;try{var s=i?.userAgentData;if(s!=null&&s.brands&&s.brands.some(n=>Wl(n?.brand,t)))return!0}catch{}return!!i.webdriver},es=(function(i){return i.US="us",i.EU="eu",i.CUSTOM="custom",i})({}),Tc="i.posthog.com",Uo=class{constructor(t){this.Er={},this.instance=t}get apiHost(){var t=this.instance.config.api_host.trim().replace(/\/$/,"");return t==="https://app.posthog.com"?"https://us.i.posthog.com":t}get flagsApiHost(){var t=this.instance.config.flags_api_host;return t?t.trim().replace(/\/$/,""):this.apiHost}get uiHost(){var t,e=(t=this.instance.config.ui_host)==null?void 0:t.replace(/\/$/,"");return e||(e=this.apiHost.replace("."+Tc,".posthog.com")),e==="https://app.posthog.com"?"https://us.posthog.com":e}get region(){return this.Er[this.apiHost]||(/https:\/\/(app|us|us-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.Er[this.apiHost]=es.US:/https:\/\/(eu|eu-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.Er[this.apiHost]=es.EU:this.Er[this.apiHost]=es.CUSTOM),this.Er[this.apiHost]}endpointFor(t,e){if(e===void 0&&(e=""),e&&(e=e[0]==="/"?e:"/"+e),t==="ui")return this.uiHost+e;if(t==="flags")return this.flagsApiHost+e;if(this.region===es.CUSTOM)return this.apiHost+e;var s=Tc+e;switch(t){case"assets":return"https://"+this.region+"-assets."+s;case"api":return"https://"+this.region+"."+s}}},nm={icontains:(i,t)=>!!x&&t.href.toLowerCase().indexOf(i.toLowerCase())>-1,not_icontains:(i,t)=>!!x&&t.href.toLowerCase().indexOf(i.toLowerCase())===-1,regex:(i,t)=>!!x&&pn(t.href,i),not_regex:(i,t)=>!!x&&!pn(t.href,i),exact:(i,t)=>t.href===i,is_not:(i,t)=>t.href!==i},qo=class i{constructor(t){var e=this;this.getWebExperimentsAndEvaluateDisplayLogic=function(s){s===void 0&&(s=!1),e.getWebExperiments(n=>{i.$r("retrieved web experiments from the server"),e.Sr=new Map,n.forEach(r=>{if(r.feature_flag_key){var o;e.Sr&&(i.$r("setting flag key ",r.feature_flag_key," to web experiment ",r),(o=e.Sr)==null||o.set(r.feature_flag_key,r));var a=e._instance.getFeatureFlag(r.feature_flag_key);ft(a)&&r.variants[a]&&e.kr(r.name,a,r.variants[a].transforms)}else if(r.variants)for(var l in r.variants){var c=r.variants[l];i.Pr(c)&&e.kr(r.name,l,c.transforms)}})},s)},this._instance=t,this._instance.onFeatureFlags(s=>{this.onFeatureFlags(s)})}onFeatureFlags(t){if(this._is_bot())i.$r("Refusing to render web experiment since the viewer is a likely bot");else if(!this._instance.config.disable_web_experiments){if(W(this.Sr))return this.Sr=new Map,this.loadIfEnabled(),void this.previewWebExperiment();i.$r("applying feature flags",t),t.forEach(e=>{var s;if(this.Sr&&(s=this.Sr)!=null&&s.has(e)){var n,r=this._instance.getFeatureFlag(e),o=(n=this.Sr)==null?void 0:n.get(e);r&&o!=null&&o.variants[r]&&this.kr(o.name,r,o.variants[r].transforms)}})}}previewWebExperiment(){var t=i.getWindowLocation();if(t!=null&&t.search){var e=an(t?.search,"__experiment_id"),s=an(t?.search,"__experiment_variant");e&&s&&(i.$r("previewing web experiments "+e+" && "+s),this.getWebExperiments(n=>{this.Tr(parseInt(e),s,n)},!1,!0))}}loadIfEnabled(){this._instance.config.disable_web_experiments||this.getWebExperimentsAndEvaluateDisplayLogic()}getWebExperiments(t,e,s){if(this._instance.config.disable_web_experiments&&!s)return t([]);var n=this._instance.get_property("$web_experiments");if(n&&!e)return t(n);this._instance._send_request({url:this._instance.requestRouter.endpointFor("api","/api/web_experiments/?token="+this._instance.config.token),method:"GET",callback:r=>{if(r.statusCode!==200||!r.json)return t([]);var o=r.json.experiments||[];return t(o)}})}Tr(t,e,s){var n=s.filter(r=>r.id===t);n&&n.length>0&&(i.$r("Previewing web experiment ["+n[0].name+"] with variant ["+e+"]"),this.kr(n[0].name,e,n[0].variants[e].transforms))}static Pr(t){return!W(t.conditions)&&i.Ir(t)&&i.Cr(t)}static Ir(t){var e;if(W(t.conditions)||W((e=t.conditions)==null?void 0:e.url))return!0;var s,n,r,o=i.getWindowLocation();return!!o&&((s=t.conditions)==null||!s.url||nm[(n=(r=t.conditions)==null?void 0:r.urlMatchType)!==null&&n!==void 0?n:"icontains"](t.conditions.url,o))}static getWindowLocation(){return x?.location}static Cr(t){var e;if(W(t.conditions)||W((e=t.conditions)==null?void 0:e.utm))return!0;var s=Sh();if(s.utm_source){var n,r,o,a,l,c,h,u,d=(n=t.conditions)==null||(n=n.utm)==null||!n.utm_campaign||((r=t.conditions)==null||(r=r.utm)==null?void 0:r.utm_campaign)==s.utm_campaign,f=(o=t.conditions)==null||(o=o.utm)==null||!o.utm_source||((a=t.conditions)==null||(a=a.utm)==null?void 0:a.utm_source)==s.utm_source,p=(l=t.conditions)==null||(l=l.utm)==null||!l.utm_medium||((c=t.conditions)==null||(c=c.utm)==null?void 0:c.utm_medium)==s.utm_medium,g=(h=t.conditions)==null||(h=h.utm)==null||!h.utm_term||((u=t.conditions)==null||(u=u.utm)==null?void 0:u.utm_term)==s.utm_term;return d&&p&&g&&f}return!1}static $r(t){for(var e=arguments.length,s=new Array(e>1?e-1:0),n=1;n<e;n++)s[n-1]=arguments[n];E.info("[WebExperiments] "+t,s)}kr(t,e,s){this._is_bot()?i.$r("Refusing to render web experiment since the viewer is a likely bot"):e!=="control"?s.forEach(n=>{if(n.selector){var r;i.$r("applying transform of variant "+e+" for experiment "+t+" ",n);var o=(r=document)==null?void 0:r.querySelectorAll(n.selector);o?.forEach(a=>{var l=a;n.html&&(l.innerHTML=n.html),n.css&&l.setAttribute("style",n.css)})}}):i.$r("Control variants leave the page unmodified.")}_is_bot(){return Rt&&this._instance?Bh(Rt,this._instance.config.custom_blocked_useragents):void 0}},rm=ct("[PostHog ExternalIntegrations]"),om={intercom:"intercom-integration",crispChat:"crisp-chat-integration"},Yo=class{constructor(t){this._instance=t}it(t,e){var s;(s=R.__PosthogExtensions__)==null||s.loadExternalDependency==null||s.loadExternalDependency(this._instance,t,n=>{if(n)return rm.error("failed to load script",n);e()})}startIfEnabledOrStop(){var t=this,e=function(o){var a,l,c;!n||(a=R.__PosthogExtensions__)!=null&&(a=a.integrations)!=null&&a[o]||t.it(om[o],()=>{var h;(h=R.__PosthogExtensions__)==null||(h=h.integrations)==null||(h=h[o])==null||h.start(t._instance)}),!n&&(l=R.__PosthogExtensions__)!=null&&(l=l.integrations)!=null&&l[o]&&((c=R.__PosthogExtensions__)==null||(c=c.integrations)==null||(c=c[o])==null||c.stop())};for(var[s,n]of Object.entries((r=this._instance.config.integrations)!==null&&r!==void 0?r:{})){var r;e(s)}}},Go="[SessionRecording]",Yi=ct(Go),_n=class{get started(){var t;return!((t=this.Rr)==null||!t.isStarted)}get status(){return this.Rr?this.Rr.status:this.Fr&&!this.Mr?"disabled":"lazy_loading"}constructor(t){if(this._forceAllowLocalhostNetworkCapture=!1,this.Fr=!1,this.Or=void 0,this._instance=t,!this._instance.sessionManager)throw Yi.error("started without valid sessionManager"),new Error(Go+" started without valid sessionManager. This is a bug.");if(this._instance.config.cookieless_mode==="always")throw new Error(Go+' cannot be used with cookieless_mode="always"')}get Mr(){var t,e=!((t=this._instance.get_property(Mr))==null||!t.enabled),s=!this._instance.config.disable_session_recording,n=this._instance.config.disable_session_recording||this._instance.consent.isOptedOut();return x&&e&&s&&!n}startIfEnabledOrStop(t){var e;if(!this.Mr||(e=this.Rr)==null||!e.isStarted){var s=!P(Object.assign)&&!P(Array.from);this.Mr&&s?(this.Ar(t),Yi.info("starting")):this.stopRecording()}}Ar(t){var e,s,n;this.Mr&&(R!=null&&(e=R.__PosthogExtensions__)!=null&&(e=e.rrweb)!=null&&e.record&&(s=R.__PosthogExtensions__)!=null&&s.initSessionRecording?this.Dr(t):(n=R.__PosthogExtensions__)==null||n.loadExternalDependency==null||n.loadExternalDependency(this._instance,this.jr,r=>{if(r)return Yi.error("could not load recorder",r);this.Dr(t)}))}stopRecording(){var t,e;(t=this.Or)==null||t.call(this),this.Or=void 0,(e=this.Rr)==null||e.stop()}Lr(){var t;(t=this._instance.persistence)==null||t.unregister(ah)}Nr(t){if(this._instance.persistence){var e,s,n=this._instance.persistence,r=()=>{var o=t.sessionRecording===!1?void 0:t.sessionRecording,a=o?.sampleRate,l=W(a)?null:parseFloat(a);W(l)&&this.Lr();var c=o?.minimumDurationMilliseconds;n.register({[Mr]:T({enabled:!!o},o,{networkPayloadCapture:T({capturePerformance:t.capturePerformance},o?.networkPayloadCapture),canvasRecording:{enabled:o?.recordCanvas,fps:o?.canvasFps,quality:o?.canvasQuality},sampleRate:l,minimumDurationMilliseconds:P(c)?null:c,endpoint:o?.endpoint,triggerMatchType:o?.triggerMatchType,masking:o?.masking,urlTriggers:o?.urlTriggers})})};r(),(e=this.Or)==null||e.call(this),this.Or=(s=this._instance.sessionManager)==null?void 0:s.onSessionId(r)}}onRemoteConfig(t){"sessionRecording"in t?t.sessionRecording!==!1?(this.Nr(t),this.Fr=!0,this.startIfEnabledOrStop()):this.Fr=!0:Yi.info("skipping remote config with no sessionRecording",t)}log(t,e){var s;e===void 0&&(e="log"),(s=this.Rr)!=null&&s.log?this.Rr.log(t,e):Yi.warn("log called before recorder was ready")}get jr(){var t,e,s=(t=this._instance)==null||(t=t.persistence)==null?void 0:t.get_property(Mr);return(s==null||(e=s.scriptConfig)==null?void 0:e.script)||"lazy-recorder"}Dr(t){var e,s;if((e=R.__PosthogExtensions__)==null||!e.initSessionRecording)throw Error("Called on script loaded before session recording is available");this.Rr||(this.Rr=(s=R.__PosthogExtensions__)==null?void 0:s.initSessionRecording(this._instance),this.Rr._forceAllowLocalhostNetworkCapture=this._forceAllowLocalhostNetworkCapture),this.Rr.start(t)}onRRwebEmit(t){var e;(e=this.Rr)==null||e.onRRwebEmit==null||e.onRRwebEmit(t)}overrideLinkedFlag(){var t,e;this.Rr||(e=this._instance.persistence)==null||e.register({$replay_override_linked_flag:!0}),(t=this.Rr)==null||t.overrideLinkedFlag()}overrideSampling(){var t,e;this.Rr||(e=this._instance.persistence)==null||e.register({$replay_override_sampling:!0}),(t=this.Rr)==null||t.overrideSampling()}overrideTrigger(t){var e,s;this.Rr||(s=this._instance.persistence)==null||s.register({[t==="url"?"$replay_override_url_trigger":"$replay_override_event_trigger"]:!0}),(e=this.Rr)==null||e.overrideTrigger(t)}get sdkDebugProperties(){var t;return((t=this.Rr)==null?void 0:t.sdkDebugProperties)||{$recording_status:this.status}}tryAddCustomEvent(t,e){var s;return!((s=this.Rr)==null||!s.tryAddCustomEvent(t,e))}},ns={},Xo=()=>{},si="posthog",zh=!Gg&&Et?.indexOf("MSIE")===-1&&Et?.indexOf("Mozilla")===-1,Ac=i=>{var t;return T({api_host:"https://us.i.posthog.com",flags_api_host:null,ui_host:null,token:"",autocapture:!0,cross_subdomain_cookie:hg(C?.location),persistence:"localStorage+cookie",persistence_name:"",cookie_persisted_properties:[],loaded:Xo,save_campaign_params:!0,custom_campaign_params:[],custom_blocked_useragents:[],save_referrer:!0,capture_pageleave:"if_capture_pageview",defaults:i??"unset",__preview_deferred_init_extensions:!1,debug:Ct&&ft(Ct?.search)&&Ct.search.indexOf("__posthog_debug=true")!==-1||!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_web_experiments:!0,disable_surveys:!1,disable_surveys_automatic_display:!1,disable_conversations:!1,disable_product_tours:!0,disable_external_dependency_loading:!1,enable_recording_console_log:void 0,secure_cookie:(x==null||(t=x.location)==null?void 0:t.protocol)==="https:",ip:!1,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_useragent_filter:!1,opt_out_capturing_persistence_type:"localStorage",consent_persistence_name:null,opt_out_capturing_cookie_prefix:null,opt_in_site_apps:!1,property_denylist:[],respect_dnt:!1,sanitize_properties:null,request_headers:{},request_batching:!0,properties_string_max_length:65535,mask_all_element_attributes:!1,mask_all_text:!1,mask_personal_data_properties:!1,custom_personal_data_properties:[],advanced_disable_flags:!1,advanced_disable_decide:!1,advanced_disable_feature_flags:!1,advanced_disable_feature_flags_on_first_load:!1,advanced_only_evaluate_survey_feature_flags:!1,advanced_enable_surveys:!1,advanced_disable_toolbar_metrics:!1,feature_flag_request_timeout_ms:3e3,surveys_request_timeout_ms:1e4,on_request_error:e=>{var s="Bad HTTP status: "+e.statusCode+" "+e.text;E.error(s)},get_device_id:e=>e,capture_performance:void 0,name:"posthog",bootstrap:{},disable_compression:!1,session_idle_timeout_seconds:1800,person_profiles:"identified_only",before_send:void 0,request_queue_config:{flush_interval_ms:zo},error_tracking:{},_onCapture:Xo,__preview_eager_load_replay:!1},(e=>({rageclick:!(e&&e>="2025-11-30")||{content_ignorelist:!0},capture_pageview:!(e&&e>="2025-05-24")||"history_change",session_recording:e&&e>="2025-11-30"?{strictMinimumDuration:!0}:{}}))(i))},Dc=i=>{var t={};P(i.process_person)||(t.person_profiles=i.process_person),P(i.xhr_headers)||(t.request_headers=i.xhr_headers),P(i.cookie_name)||(t.persistence_name=i.cookie_name),P(i.disable_cookie)||(t.disable_persistence=i.disable_cookie),P(i.store_google)||(t.save_campaign_params=i.store_google),P(i.verbose)||(t.debug=i.verbose);var e=lt({},t,i);return V(i.property_blacklist)&&(P(i.property_denylist)?e.property_denylist=i.property_blacklist:V(i.property_denylist)?e.property_denylist=[...i.property_blacklist,...i.property_denylist]:E.error("Invalid value for property_denylist config: "+i.property_denylist)),e},Ko=class{constructor(){this.__forceAllowLocalhost=!1}get Ur(){return this.__forceAllowLocalhost}set Ur(t){E.error("WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`"),this.__forceAllowLocalhost=t}},vn=class i{get decideEndpointWasHit(){var t,e;return(t=(e=this.featureFlags)==null?void 0:e.hasLoadedFlags)!==null&&t!==void 0&&t}get flagsEndpointWasHit(){var t,e;return(t=(e=this.featureFlags)==null?void 0:e.hasLoadedFlags)!==null&&t!==void 0&&t}constructor(){this.webPerformance=new Ko,this.zr=!1,this.version=ie.LIB_VERSION,this.Hr=new hs,this._calculate_event_properties=this.calculateEventProperties.bind(this),this.config=Ac(),this.SentryIntegration=yo,this.sentryIntegration=t=>(function(e,s){var n=kh(e,s);return{name:wh,processEvent:r=>n(r)}})(this,t),this.__request_queue=[],this.__loaded=!1,this.analyticsDefaultEndpoint="/e/",this.Br=!1,this.qr=null,this.Wr=null,this.Gr=null,this.featureFlags=new Ao(this),this.toolbar=new wo(this),this.scrollManager=new Wo(this),this.pageViewManager=new hn(this),this.surveys=new Lo(this),this.conversations=new No(this),this.experiments=new qo(this),this.exceptions=new To(this),this.rateLimiter=new $o(this),this.requestRouter=new Uo(this),this.consent=new vo(this),this.externalIntegrations=new Yo(this),this.people={set:(t,e,s)=>{var n=ft(t)?{[t]:e}:t;this.setPersonProperties(n),s?.({})},set_once:(t,e,s)=>{var n=ft(t)?{[t]:e}:t;this.setPersonProperties(void 0,n),s?.({})}},this.on("eventCaptured",t=>E.info('send "'+t?.event+'"',t))}init(t,e,s){if(s&&s!==si){var n,r=(n=ns[s])!==null&&n!==void 0?n:new i;return r._init(t,e,s),ns[s]=r,ns[si][s]=r,r}return this._init(t,e,s)}_init(t,e,s){var n;if(e===void 0&&(e={}),P(t)||Hr(t))return E.critical("PostHog was initialized without a token. This likely indicates a misconfiguration. Please check the first argument passed to posthog.init()"),this;if(this.__loaded)return console.warn("[PostHog.js]","You have already initialized PostHog! Re-initializing is a no-op"),this;this.__loaded=!0,this.config={},e.debug=this.Vr(e.debug),this.Jr=e,this.Kr=[],e.person_profiles&&(this.Wr=e.person_profiles),this.set_config(lt({},Ac(e.defaults),Dc(e),{name:s,token:t})),this.config.on_xhr_error&&E.error("on_xhr_error is deprecated. Use on_request_error instead"),this.compression=e.disable_compression?void 0:re.GZipJS;var r=this.Yr();this.persistence=new ss(this.config,r),this.sessionPersistence=this.config.persistence==="sessionStorage"||this.config.persistence==="memory"?this.persistence:new ss(T({},this.config,{persistence:"sessionStorage"}),r);var o=T({},this.persistence.props),a=T({},this.sessionPersistence.props);this.register({$initialization_time:new Date().toISOString()}),this.Xr=new jo(v=>this.Qr(v),this.config.request_queue_config),this.Zr=new Ho(this),this.__request_queue=[];var l=this.config.cookieless_mode==="always"||this.config.cookieless_mode==="on_reject"&&this.consent.isExplicitlyOptedOut();if(l||(this.sessionManager=new mn(this),this.sessionPropsManager=new gn(this,this.sessionManager,this.persistence)),this.config.__preview_deferred_init_extensions?(E.info("Deferring extension initialization to improve startup performance"),setTimeout(()=>{this.ts(l)},0)):(E.info("Initializing extensions synchronously"),this.ts(l)),ie.DEBUG=ie.DEBUG||this.config.debug,ie.DEBUG&&E.info("Starting in debug mode",{this:this,config:e,thisC:T({},this.config),p:o,s:a}),((n=e.bootstrap)==null?void 0:n.distinctID)!==void 0){var c,h,u=this.config.get_device_id(we()),d=(c=e.bootstrap)!=null&&c.isIdentifiedID?u:e.bootstrap.distinctID;this.persistence.set_property(se,(h=e.bootstrap)!=null&&h.isIdentifiedID?"identified":"anonymous"),this.register({distinct_id:e.bootstrap.distinctID,$device_id:d})}if(this.es()){var f,p,g=Object.keys(((f=e.bootstrap)==null?void 0:f.featureFlags)||{}).filter(v=>{var y;return!((y=e.bootstrap)==null||(y=y.featureFlags)==null||!y[v])}).reduce((v,y)=>{var w;return v[y]=((w=e.bootstrap)==null||(w=w.featureFlags)==null?void 0:w[y])||!1,v},{}),m=Object.keys(((p=e.bootstrap)==null?void 0:p.featureFlagPayloads)||{}).filter(v=>g[v]).reduce((v,y)=>{var w,b;return(w=e.bootstrap)!=null&&(w=w.featureFlagPayloads)!=null&&w[y]&&(v[y]=(b=e.bootstrap)==null||(b=b.featureFlagPayloads)==null?void 0:b[y]),v},{});this.featureFlags.receivedFeatureFlags({featureFlags:g,featureFlagPayloads:m})}if(l)this.register_once({distinct_id:Bi,$device_id:null},"");else if(!this.get_distinct_id()){var _=this.config.get_device_id(we());this.register_once({distinct_id:_,$device_id:_},""),this.persistence.set_property(se,"anonymous")}return ht(x,"onpagehide"in self?"pagehide":"unload",this._handle_unload.bind(this),{passive:!1}),this.toolbar.maybeLoadToolbar(),e.segment?Dg(this,()=>this.rs()):this.rs(),ke(this.config._onCapture)&&this.config._onCapture!==Xo&&(E.warn("onCapture is deprecated. Please use `before_send` instead"),this.on("eventCaptured",v=>this.config._onCapture(v.event,v))),this.config.ip&&E.warn('The `ip` config option has NO EFFECT AT ALL and has been deprecated. Use a custom transformation or "Discard IP data" project setting instead. See https://posthog.com/tutorials/web-redact-properties#hiding-customer-ip-address for more information.'),this}ts(t){var e=performance.now();this.historyAutocapture=new xo(this),this.historyAutocapture.startIfEnabled();var s=[];s.push(()=>{new ko(this).startIfEnabledOrStop()}),s.push(()=>{var n;this.siteApps=new Vo(this),(n=this.siteApps)==null||n.init()}),t||s.push(()=>{this.sessionRecording=new _n(this),this.sessionRecording.startIfEnabledOrStop()}),this.config.disable_scroll_properties||s.push(()=>{this.scrollManager.startMeasuringScrollPosition()}),s.push(()=>{this.autocapture=new po(this),this.autocapture.startIfEnabled()}),s.push(()=>{this.surveys.loadIfEnabled()}),s.push(()=>{this.conversations.loadIfEnabled()}),s.push(()=>{this.productTours=new Do(this),this.productTours.loadIfEnabled()}),s.push(()=>{this.heatmaps=new Mo(this),this.heatmaps.startIfEnabled()}),s.push(()=>{this.webVitalsAutocapture=new So(this)}),s.push(()=>{this.exceptionObserver=new bo(this),this.exceptionObserver.startIfEnabledOrStop()}),s.push(()=>{this.deadClicksAutocapture=new cn(this,Ag),this.deadClicksAutocapture.startIfEnabled()}),s.push(()=>{if(this.ss){var n=this.ss;this.ss=void 0,this.yi(n)}}),this.ns(s,e)}ns(t,e){for(;t.length>0;){if(this.config.__preview_deferred_init_extensions&&performance.now()-e>=30&&t.length>0)return void setTimeout(()=>{this.ns(t,e)},0);var s=t.shift();if(s)try{s()}catch(r){E.error("Error initializing extension:",r)}}var n=Math.round(performance.now()-e);this.register_for_session({$sdk_debug_extensions_init_method:this.config.__preview_deferred_init_extensions?"deferred":"synchronous",$sdk_debug_extensions_init_time_ms:n}),this.config.__preview_deferred_init_extensions&&E.info("PostHog extensions initialized ("+n+"ms)")}yi(t){var e,s,n,r,o,a,l,c,h;if(!C||!C.body)return E.info("document not ready yet, trying again in 500 milliseconds..."),void setTimeout(()=>{this.yi(t)},500);this.config.__preview_deferred_init_extensions&&(this.ss=t),this.compression=void 0,t.supportedCompression&&!this.config.disable_compression&&(this.compression=$(t.supportedCompression,re.GZipJS)?re.GZipJS:$(t.supportedCompression,re.Base64)?re.Base64:void 0),(e=t.analytics)!=null&&e.endpoint&&(this.analyticsDefaultEndpoint=t.analytics.endpoint),this.set_config({person_profiles:this.Wr?this.Wr:"identified_only"}),(s=this.siteApps)==null||s.onRemoteConfig(t),(n=this.sessionRecording)==null||n.onRemoteConfig(t),(r=this.autocapture)==null||r.onRemoteConfig(t),(o=this.heatmaps)==null||o.onRemoteConfig(t),this.surveys.onRemoteConfig(t),this.conversations.onRemoteConfig(t),(a=this.productTours)==null||a.onRemoteConfig(t),(l=this.webVitalsAutocapture)==null||l.onRemoteConfig(t),(c=this.exceptionObserver)==null||c.onRemoteConfig(t),this.exceptions.onRemoteConfig(t),(h=this.deadClicksAutocapture)==null||h.onRemoteConfig(t)}rs(){try{this.config.loaded(this)}catch(t){E.critical("`loaded` function failed",t)}this.os(),this.config.capture_pageview&&setTimeout(()=>{(this.consent.isOptedIn()||this.config.cookieless_mode==="always")&&this.ls()},1),new Bo(this).load(),this.featureFlags.flags()}os(){var t;this.is_capturing()&&this.config.request_batching&&((t=this.Xr)==null||t.enable())}_dom_loaded(){this.is_capturing()&&Se(this.__request_queue,t=>this.Qr(t)),this.__request_queue=[],this.os()}_handle_unload(){var t,e;this.surveys.handlePageUnload(),this.config.request_batching?(this.us()&&this.capture("$pageleave"),(t=this.Xr)==null||t.unload(),(e=this.Zr)==null||e.unload()):this.us()&&this.capture("$pageleave",null,{transport:"sendBeacon"})}_send_request(t){this.__loaded&&(zh?this.__request_queue.push(t):this.rateLimiter.isServerRateLimited(t.batchKey)||(t.transport=t.transport||this.config.api_transport,t.url=fn(t.url,{ip:this.config.ip?1:0}),t.headers=T({},this.config.request_headers,t.headers),t.compression=t.compression==="best-available"?this.compression:t.compression,t.disableXHRCredentials=this.config.__preview_disable_xhr_credentials,this.config.__preview_disable_beacon&&(t.disableTransport=["sendBeacon"]),t.fetchOptions=t.fetchOptions||this.config.fetch_options,(e=>{var s,n,r,o=T({},e);o.timeout=o.timeout||6e4,o.url=fn(o.url,{_:new Date().getTime().toString(),ver:ie.LIB_VERSION,compression:o.compression});var a=(s=o.transport)!==null&&s!==void 0?s:"fetch",l=Xs.filter(h=>!o.disableTransport||!h.transport||!o.disableTransport.includes(h.transport)),c=(n=(r=nh(l,h=>h.transport===a))==null?void 0:r.method)!==null&&n!==void 0?n:l[0].method;if(!c)throw new Error("No available transport method");c(o)})(T({},t,{callback:e=>{var s,n;this.rateLimiter.checkForLimiting(e),e.statusCode>=400&&((s=(n=this.config).on_request_error)==null||s.call(n,e)),t.callback==null||t.callback(e)}}))))}Qr(t){this.Zr?this.Zr.retriableRequest(t):this._send_request(t)}_execute_array(t){var e,s=[],n=[],r=[];Se(t,a=>{a&&(e=a[0],V(e)?r.push(a):ke(a)?a.call(this):V(a)&&e==="alias"?s.push(a):V(a)&&e.indexOf("capture")!==-1&&ke(this[e])?r.push(a):n.push(a))});var o=function(a,l){Se(a,function(c){if(V(c[0])){var h=l;Z(c,function(u){h=h[u[0]].apply(h,u.slice(1))})}else this[c[0]].apply(this,c.slice(1))},l)};o(s,this),o(n,this),o(r,this)}es(){var t,e;return((t=this.config.bootstrap)==null?void 0:t.featureFlags)&&Object.keys((e=this.config.bootstrap)==null?void 0:e.featureFlags).length>0||!1}push(t){this._execute_array([t])}capture(t,e,s){var n;if(this.__loaded&&this.persistence&&this.sessionPersistence&&this.Xr){if(this.is_capturing())if(!P(t)&&ft(t)){var r=!this.config.opt_out_useragent_filter&&this._is_bot();if(!(r&&!this.config.__preview_capture_bot_pageviews)){var o=s!=null&&s.skip_client_rate_limiting?void 0:this.rateLimiter.clientRateLimitContext();if(o==null||!o.isRateLimited){e!=null&&e.$current_url&&!ft(e?.$current_url)&&(E.error("Invalid `$current_url` property provided to `posthog.capture`. Input must be a string. Ignoring provided value."),e==null||delete e.$current_url),this.sessionPersistence.update_search_keyword(),this.config.save_campaign_params&&this.sessionPersistence.update_campaign_params(),this.config.save_referrer&&this.sessionPersistence.update_referrer_info(),(this.config.save_campaign_params||this.config.save_referrer)&&this.persistence.set_initial_person_info();var a=new Date,l=s?.timestamp||a,c=we(),h={uuid:c,event:t,properties:this.calculateEventProperties(t,e||{},l,c)};t==="$pageview"&&this.config.__preview_capture_bot_pageviews&&r&&(h.event="$bot_pageview",h.properties.$browser_type="bot"),o&&(h.properties.$lib_rate_limit_remaining_tokens=o.remainingTokens),s?.$set&&(h.$set=s?.$set);var u,d=t!=="$groupidentify",f=this.hs(s?.$set_once,d);if(f&&(h.$set_once=f),(h=lg(h,s!=null&&s._noTruncate?null:this.config.properties_string_max_length)).timestamp=l,P(s?.timestamp)||(h.properties.$event_time_override_provided=!0,h.properties.$event_time_override_system_time=a),t===ts.DISMISSED||t===ts.SENT){var p=e?.[Nr.SURVEY_ID],g=e?.[Nr.SURVEY_ITERATION];u={id:p,current_iteration:g},localStorage.getItem(Cc(u))||localStorage.setItem(Cc(u),"true"),h.$set=T({},h.$set,{[Jg({id:p,current_iteration:g},t===ts.SENT?"responded":"dismissed")]:!0})}else t===ts.SHOWN&&(h.$set=T({},h.$set,{[Nr.SURVEY_LAST_SEEN_DATE]:new Date().toISOString()}));var m=T({},h.properties.$set,h.$set);if(ri(m)||this.setPersonPropertiesForFlags(m),!W(this.config.before_send)){var _=this.ds(h);if(!_)return;h=_}this.Hr.emit("eventCaptured",h);var v={method:"POST",url:(n=s?._url)!==null&&n!==void 0?n:this.requestRouter.endpointFor("api",this.analyticsDefaultEndpoint),data:h,compression:"best-available",batchKey:s?._batchKey};return!this.config.request_batching||s&&(s==null||!s._batchKey)||s!=null&&s.send_instantly?this.Qr(v):this.Xr.enqueue(v),h}E.critical("This capture call is ignored due to client rate limiting.")}}else E.error("No event name provided to posthog.capture")}else E.uninitializedWarning("posthog.capture")}Hi(t){return this.on("eventCaptured",e=>t(e.event,e))}calculateEventProperties(t,e,s,n,r){if(s=s||new Date,!this.persistence||!this.sessionPersistence)return e;var o=r?void 0:this.persistence.remove_event_timer(t),a=T({},e);if(a.token=this.config.token,a.$config_defaults=this.config.defaults,(this.config.cookieless_mode=="always"||this.config.cookieless_mode=="on_reject"&&this.consent.isExplicitlyOptedOut())&&(a.$cookieless_mode=!0),t==="$snapshot"){var l=T({},this.persistence.properties(),this.sessionPersistence.properties());return a.distinct_id=l.distinct_id,(!ft(a.distinct_id)&&!le(a.distinct_id)||Hr(a.distinct_id))&&E.error("Invalid distinct_id for replay event. This indicates a bug in your implementation"),a}var c,h=$g(this.config.mask_personal_data_properties,this.config.custom_personal_data_properties);if(this.sessionManager){var{sessionId:u,windowId:d}=this.sessionManager.checkAndGetSessionAndWindowId(r,s.getTime());a.$session_id=u,a.$window_id=d}this.sessionPropsManager&&lt(a,this.sessionPropsManager.getSessionProps());try{var f;this.sessionRecording&&lt(a,this.sessionRecording.sdkDebugProperties),a.$sdk_debug_retry_queue_size=(f=this.Zr)==null?void 0:f.length}catch(_){a.$sdk_debug_error_capturing_properties=String(_)}if(this.requestRouter.region===es.CUSTOM&&(a.$lib_custom_api_host=this.config.api_host),c=t!=="$pageview"||r?t!=="$pageleave"||r?this.pageViewManager.doEvent():this.pageViewManager.doPageLeave(s):this.pageViewManager.doPageView(s,n),a=lt(a,c),t==="$pageview"&&C&&(a.title=C.title),!P(o)){var p=s.getTime()-o;a.$duration=parseFloat((p/1e3).toFixed(3))}Et&&this.config.opt_out_useragent_filter&&(a.$browser_type=this._is_bot()?"bot":"browser"),(a=lt({},h,this.persistence.properties(),this.sessionPersistence.properties(),a)).$is_identified=this._isIdentified(),V(this.config.property_denylist)?Z(this.config.property_denylist,function(_){delete a[_]}):E.error("Invalid value for property_denylist config: "+this.config.property_denylist+" or property_blacklist config: "+this.config.property_blacklist);var g=this.config.sanitize_properties;g&&(E.error("sanitize_properties is deprecated. Use before_send instead"),a=g(a,t));var m=this.vs();return a.$process_person_profile=m,m&&!r&&this.cs("_calculate_event_properties"),a}hs(t,e){var s;if(e===void 0&&(e=!0),!this.persistence||!this.vs()||this.zr)return t;var n=this.persistence.get_initial_props(),r=(s=this.sessionPropsManager)==null?void 0:s.getSetOnceProps(),o=lt({},n,r||{},t||{}),a=this.config.sanitize_properties;return a&&(E.error("sanitize_properties is deprecated. Use before_send instead"),o=a(o,"$set_once")),e&&(this.zr=!0),ri(o)?void 0:o}register(t,e){var s;(s=this.persistence)==null||s.register(t,e)}register_once(t,e,s){var n;(n=this.persistence)==null||n.register_once(t,e,s)}register_for_session(t){var e;(e=this.sessionPersistence)==null||e.register(t)}unregister(t){var e;(e=this.persistence)==null||e.unregister(t)}unregister_for_session(t){var e;(e=this.sessionPersistence)==null||e.unregister(t)}fs(t,e){this.register({[t]:e})}getFeatureFlag(t,e){return this.featureFlags.getFeatureFlag(t,e)}getFeatureFlagPayload(t){var e=this.featureFlags.getFeatureFlagPayload(t);try{return JSON.parse(e)}catch{return e}}isFeatureEnabled(t,e){return this.featureFlags.isFeatureEnabled(t,e)}reloadFeatureFlags(){this.featureFlags.reloadFeatureFlags()}updateFlags(t,e,s){var n=s!=null&&s.merge?this.featureFlags.getFlagVariants():{},r=s!=null&&s.merge?this.featureFlags.getFlagPayloads():{},o=T({},n,t),a=T({},r,e),l={};for(var[c,h]of Object.entries(o)){var u=typeof h=="string";l[c]={key:c,enabled:!!u||!!h,variant:u?h:void 0,reason:void 0,metadata:P(a?.[c])?void 0:{id:0,version:void 0,description:void 0,payload:a[c]}}}this.featureFlags.receivedFeatureFlags({flags:l})}updateEarlyAccessFeatureEnrollment(t,e,s){this.featureFlags.updateEarlyAccessFeatureEnrollment(t,e,s)}getEarlyAccessFeatures(t,e,s){return e===void 0&&(e=!1),this.featureFlags.getEarlyAccessFeatures(t,e,s)}on(t,e){return this.Hr.on(t,e)}onFeatureFlags(t){return this.featureFlags.onFeatureFlags(t)}onSurveysLoaded(t){return this.surveys.onSurveysLoaded(t)}onSessionId(t){var e,s;return(e=(s=this.sessionManager)==null?void 0:s.onSessionId(t))!==null&&e!==void 0?e:()=>{}}getSurveys(t,e){e===void 0&&(e=!1),this.surveys.getSurveys(t,e)}getActiveMatchingSurveys(t,e){e===void 0&&(e=!1),this.surveys.getActiveMatchingSurveys(t,e)}renderSurvey(t,e){this.surveys.renderSurvey(t,e)}displaySurvey(t,e){e===void 0&&(e=tm),this.surveys.displaySurvey(t,e)}cancelPendingSurvey(t){this.surveys.cancelPendingSurvey(t)}canRenderSurvey(t){return this.surveys.canRenderSurvey(t)}canRenderSurveyAsync(t,e){return e===void 0&&(e=!1),this.surveys.canRenderSurveyAsync(t,e)}identify(t,e,s){if(!this.__loaded||!this.persistence)return E.uninitializedWarning("posthog.identify");if(le(t)&&(t=t.toString(),E.warn("The first argument to posthog.identify was a number, but it should be a string. It has been converted to a string.")),t)if(["distinct_id","distinctid"].includes(t.toLowerCase()))E.critical('The string "'+t+'" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.');else if(t!==Bi){if(this.cs("posthog.identify")){var n=this.get_distinct_id();if(this.register({$user_id:t}),!this.get_property("$device_id")){var r=n;this.register_once({$had_persisted_distinct_id:!0,$device_id:r},"")}t!==n&&t!==this.get_property(Xi)&&(this.unregister(Xi),this.register({distinct_id:t}));var o=(this.persistence.get_property(se)||"anonymous")==="anonymous";t!==n&&o?(this.persistence.set_property(se,"identified"),this.setPersonPropertiesForFlags(T({},s||{},e||{}),!1),this.capture("$identify",{distinct_id:t,$anon_distinct_id:n},{$set:e||{},$set_once:s||{}}),this.Gr=wc(t,e,s),this.featureFlags.setAnonymousDistinctId(n)):(e||s)&&this.setPersonProperties(e,s),t!==n&&(this.reloadFeatureFlags(),this.unregister(tn))}}else E.critical('The string "'+Bi+'" was set in posthog.identify which indicates an error. This ID is only used as a sentinel value.');else E.error("Unique user id has not been set in posthog.identify")}setPersonProperties(t,e){if((t||e)&&this.cs("posthog.setPersonProperties")){var s=wc(this.get_distinct_id(),t,e);this.Gr!==s?(this.setPersonPropertiesForFlags(T({},e||{},t||{})),this.capture("$set",{$set:t||{},$set_once:e||{}}),this.Gr=s):E.info("A duplicate setPersonProperties call was made with the same properties. It has been ignored.")}}group(t,e,s){if(t&&e){var n=this.getGroups();n[t]!==e&&this.resetGroupPropertiesForFlags(t),this.register({$groups:T({},n,{[t]:e})}),s&&(this.capture("$groupidentify",{$group_type:t,$group_key:e,$group_set:s}),this.setGroupPropertiesForFlags({[t]:s})),n[t]===e||s||this.reloadFeatureFlags()}else E.error("posthog.group requires a group type and group key")}resetGroups(){this.register({$groups:{}}),this.resetGroupPropertiesForFlags(),this.reloadFeatureFlags()}setPersonPropertiesForFlags(t,e){e===void 0&&(e=!0),this.featureFlags.setPersonPropertiesForFlags(t,e)}resetPersonPropertiesForFlags(){this.featureFlags.resetPersonPropertiesForFlags()}setGroupPropertiesForFlags(t,e){e===void 0&&(e=!0),this.cs("posthog.setGroupPropertiesForFlags")&&this.featureFlags.setGroupPropertiesForFlags(t,e)}resetGroupPropertiesForFlags(t){this.featureFlags.resetGroupPropertiesForFlags(t)}reset(t){var e,s,n,r;if(E.info("reset"),!this.__loaded)return E.uninitializedWarning("posthog.reset");var o=this.get_property("$device_id");if(this.consent.reset(),(e=this.persistence)==null||e.clear(),(s=this.sessionPersistence)==null||s.clear(),this.surveys.reset(),this.featureFlags.reset(),(n=this.persistence)==null||n.set_property(se,"anonymous"),(r=this.sessionManager)==null||r.resetSessionId(),this.Gr=null,this.config.cookieless_mode==="always")this.register_once({distinct_id:Bi,$device_id:null},"");else{var a=this.config.get_device_id(we());this.register_once({distinct_id:a,$device_id:t?a:o},"")}this.register({$last_posthog_reset:new Date().toISOString()},1)}get_distinct_id(){return this.get_property("distinct_id")}getGroups(){return this.get_property("$groups")||{}}get_session_id(){var t,e;return(t=(e=this.sessionManager)==null?void 0:e.checkAndGetSessionAndWindowId(!0).sessionId)!==null&&t!==void 0?t:""}get_session_replay_url(t){if(!this.sessionManager)return"";var{sessionId:e,sessionStartTimestamp:s}=this.sessionManager.checkAndGetSessionAndWindowId(!0),n=this.requestRouter.endpointFor("ui","/project/"+this.config.token+"/replay/"+e);if(t!=null&&t.withTimestamp&&s){var r,o=(r=t.timestampLookBack)!==null&&r!==void 0?r:10;if(!s)return n;n+="?t="+Math.max(Math.floor((new Date().getTime()-s)/1e3)-o,0)}return n}alias(t,e){return t===this.get_property(rh)?(E.critical("Attempting to create alias for existing People user - aborting."),-2):this.cs("posthog.alias")?(P(e)&&(e=this.get_distinct_id()),t!==e?(this.fs(Xi,t),this.capture("$create_alias",{alias:t,distinct_id:e})):(E.warn("alias matches current distinct_id - skipping api call."),this.identify(t),-1)):void 0}set_config(t){var e=T({},this.config);if(mt(t)){var s,n,r,o,a,l,c;lt(this.config,Dc(t));var h=this.Yr();(s=this.persistence)==null||s.update_config(this.config,e,h),this.sessionPersistence=this.config.persistence==="sessionStorage"||this.config.persistence==="memory"?this.persistence:new ss(T({},this.config,{persistence:"sessionStorage"}),h);var u=this.Vr(this.config.debug);ae(u)&&(this.config.debug=u),ae(this.config.debug)&&(this.config.debug?(ie.DEBUG=!0,st.H()&&st.G("ph_debug","true"),E.info("set_config",{config:t,oldConfig:e,newConfig:T({},this.config)})):(ie.DEBUG=!1,st.H()&&st.V("ph_debug"))),(n=this.exceptionObserver)==null||n.onConfigChange(),(r=this.sessionRecording)==null||r.startIfEnabledOrStop(),(o=this.autocapture)==null||o.startIfEnabled(),(a=this.heatmaps)==null||a.startIfEnabled(),(l=this.exceptionObserver)==null||l.startIfEnabledOrStop(),this.surveys.loadIfEnabled(),this.ps(),(c=this.externalIntegrations)==null||c.startIfEnabledOrStop()}}startSessionRecording(t){var e=t===!0,s={sampling:e||!(t==null||!t.sampling),linked_flag:e||!(t==null||!t.linked_flag),url_trigger:e||!(t==null||!t.url_trigger),event_trigger:e||!(t==null||!t.event_trigger)};if(Object.values(s).some(Boolean)){var n,r,o,a,l;(n=this.sessionManager)==null||n.checkAndGetSessionAndWindowId(),s.sampling&&((r=this.sessionRecording)==null||r.overrideSampling()),s.linked_flag&&((o=this.sessionRecording)==null||o.overrideLinkedFlag()),s.url_trigger&&((a=this.sessionRecording)==null||a.overrideTrigger("url")),s.event_trigger&&((l=this.sessionRecording)==null||l.overrideTrigger("event"))}this.set_config({disable_session_recording:!1})}stopSessionRecording(){this.set_config({disable_session_recording:!0})}sessionRecordingStarted(){var t;return!((t=this.sessionRecording)==null||!t.started)}captureException(t,e){var s=new Error("PostHog syntheticException"),n=this.exceptions.buildProperties(t,{handled:!0,syntheticException:s});return this.exceptions.sendExceptionEvent(T({},n,e))}startExceptionAutocapture(t){this.set_config({capture_exceptions:t==null||t})}stopExceptionAutocapture(){this.set_config({capture_exceptions:!1})}loadToolbar(t){return this.toolbar.loadToolbar(t)}get_property(t){var e;return(e=this.persistence)==null?void 0:e.props[t]}getSessionProperty(t){var e;return(e=this.sessionPersistence)==null?void 0:e.props[t]}toString(){var t,e=(t=this.config.name)!==null&&t!==void 0?t:si;return e!==si&&(e=si+"."+e),e}_isIdentified(){var t,e;return((t=this.persistence)==null?void 0:t.get_property(se))==="identified"||((e=this.sessionPersistence)==null?void 0:e.get_property(se))==="identified"}vs(){var t,e;return!(this.config.person_profiles==="never"||this.config.person_profiles==="identified_only"&&!this._isIdentified()&&ri(this.getGroups())&&((t=this.persistence)==null||(t=t.props)==null||!t[Xi])&&((e=this.persistence)==null||(e=e.props)==null||!e[sn]))}us(){return this.config.capture_pageleave===!0||this.config.capture_pageleave==="if_capture_pageview"&&(this.config.capture_pageview===!0||this.config.capture_pageview==="history_change")}createPersonProfile(){this.vs()||this.cs("posthog.createPersonProfile")&&this.setPersonProperties({},{})}cs(t){return this.config.person_profiles==="never"?(E.error(t+' was called, but process_person is set to "never". This call will be ignored.'),!1):(this.fs(sn,!0),!0)}Yr(){if(this.config.cookieless_mode==="always")return!0;var t=this.consent.isOptedOut(),e=this.config.opt_out_persistence_by_default||this.config.cookieless_mode==="on_reject";return this.config.disable_persistence||t&&!!e}ps(){var t,e,s,n,r=this.Yr();return((t=this.persistence)==null?void 0:t.Si)!==r&&((s=this.persistence)==null||s.set_disabled(r)),((e=this.sessionPersistence)==null?void 0:e.Si)!==r&&((n=this.sessionPersistence)==null||n.set_disabled(r)),r}opt_in_capturing(t){var e;if(this.config.cookieless_mode!=="always"){var s,n,r;this.config.cookieless_mode==="on_reject"&&this.consent.isExplicitlyOptedOut()&&(this.reset(!0),(s=this.sessionManager)==null||s.destroy(),(n=this.pageViewManager)==null||n.destroy(),this.sessionManager=new mn(this),this.pageViewManager=new hn(this),this.persistence&&(this.sessionPropsManager=new gn(this,this.sessionManager,this.persistence)),this.sessionRecording=new _n(this),this.sessionRecording.startIfEnabledOrStop()),this.consent.optInOut(!0),this.ps(),this.os(),(e=this.sessionRecording)==null||e.startIfEnabledOrStop(),this.config.cookieless_mode=="on_reject"&&this.surveys.loadIfEnabled(),(P(t?.captureEventName)||t!=null&&t.captureEventName)&&this.capture((r=t?.captureEventName)!==null&&r!==void 0?r:"$opt_in",t?.captureProperties,{send_instantly:!0}),this.config.capture_pageview&&this.ls()}else E.warn('Consent opt in/out is not valid with cookieless_mode="always" and will be ignored')}opt_out_capturing(){var t,e,s;this.config.cookieless_mode!=="always"?(this.config.cookieless_mode==="on_reject"&&this.consent.isOptedIn()&&this.reset(!0),this.consent.optInOut(!1),this.ps(),this.config.cookieless_mode==="on_reject"&&(this.register({distinct_id:Bi,$device_id:null}),(t=this.sessionManager)==null||t.destroy(),(e=this.pageViewManager)==null||e.destroy(),this.sessionManager=void 0,this.sessionPropsManager=void 0,(s=this.sessionRecording)==null||s.stopRecording(),this.sessionRecording=void 0,this.ls())):E.warn('Consent opt in/out is not valid with cookieless_mode="always" and will be ignored')}has_opted_in_capturing(){return this.consent.isOptedIn()}has_opted_out_capturing(){return this.consent.isOptedOut()}get_explicit_consent_status(){var t=this.consent.consent;return t===ne.GRANTED?"granted":t===ne.DENIED?"denied":"pending"}is_capturing(){return this.config.cookieless_mode==="always"||(this.config.cookieless_mode==="on_reject"?this.consent.isExplicitlyOptedOut()||this.consent.isOptedIn():!this.has_opted_out_capturing())}clear_opt_in_out_capturing(){this.consent.reset(),this.ps()}_is_bot(){return Rt?Bh(Rt,this.config.custom_blocked_useragents):void 0}ls(){C&&(C.visibilityState==="visible"?this.Br||(this.Br=!0,this.capture("$pageview",{title:C.title},{send_instantly:!0}),this.qr&&(C.removeEventListener("visibilitychange",this.qr),this.qr=null)):this.qr||(this.qr=this.ls.bind(this),ht(C,"visibilitychange",this.qr)))}debug(t){t===!1?(x?.console.log("You've disabled debug mode."),this.set_config({debug:!1})):(x?.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),this.set_config({debug:!0}))}O(){var t,e,s,n,r,o,a,l=this.Jr||{};return"advanced_disable_flags"in l?!!l.advanced_disable_flags:this.config.advanced_disable_flags!==!1?!!this.config.advanced_disable_flags:this.config.advanced_disable_decide===!0?(E.warn("Config field 'advanced_disable_decide' is deprecated. Please use 'advanced_disable_flags' instead. The old field will be removed in a future major version."),!0):(s="advanced_disable_decide",n=!1,r=E,o=(e="advanced_disable_flags")in(t=l)&&!P(t[e]),a=s in t&&!P(t[s]),o?t[e]:a?(r&&r.warn("Config field '"+s+"' is deprecated. Please use '"+e+"' instead. The old field will be removed in a future major version."),t[s]):n)}ds(t){if(W(this.config.before_send))return t;var e=V(this.config.before_send)?this.config.before_send:[this.config.before_send],s=t;for(var n of e){if(s=n(s),W(s)){var r="Event '"+t.event+"' was rejected in beforeSend function";return Fp(t.event)?E.warn(r+". This can cause unexpected behavior."):E.info(r),null}s.properties&&!ri(s.properties)||E.warn("Event '"+t.event+"' has no properties after beforeSend function, this is likely an error.")}return s}getPageViewId(){var t;return(t=this.pageViewManager.Kt)==null?void 0:t.pageViewId}captureTraceFeedback(t,e){this.capture("$ai_feedback",{$ai_trace_id:String(t),$ai_feedback_text:e})}captureTraceMetric(t,e,s){this.capture("$ai_metric",{$ai_trace_id:String(t),$ai_metric_name:e,$ai_metric_value:String(s)})}Vr(t){var e=ae(t)&&!t,s=st.H()&&st.q("ph_debug")==="true";return!e&&(!!s||t)}};(function(i,t){for(var e=0;e<t.length;e++)i.prototype[t[e]]=ag(i.prototype[t[e]])})(vn,["identify"]);var Rc;var a1=(Rc=ns[si]=new vn,(function(){function i(){i.done||(i.done=!0,zh=!1,Z(ns,function(t){t._dom_loaded()}))}C!=null&&C.addEventListener?C.readyState==="complete"?i():ht(C,"DOMContentLoaded",i,{capture:!1}):x&&E.error("Browser doesn't support `document.addEventListener` so PostHog couldn't be initialized")})(),Rc);function ms(i){return i+.5|0}var Pe=(i,t,e)=>Math.max(Math.min(i,e),t);function ps(i){return Pe(ms(i*2.55),0,255)}function Ee(i){return Pe(ms(i*255),0,255)}function ce(i){return Pe(ms(i/2.55)/100,0,1)}function jh(i){return Pe(ms(i*100),0,100)}var Nt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},la=[..."0123456789ABCDEF"],am=i=>la[i&15],lm=i=>la[(i&240)>>4]+la[i&15],wn=i=>(i&240)>>4===(i&15),cm=i=>wn(i.r)&&wn(i.g)&&wn(i.b)&&wn(i.a);function hm(i){var t=i.length,e;return i[0]==="#"&&(t===4||t===5?e={r:255&Nt[i[1]]*17,g:255&Nt[i[2]]*17,b:255&Nt[i[3]]*17,a:t===5?Nt[i[4]]*17:255}:(t===7||t===9)&&(e={r:Nt[i[1]]<<4|Nt[i[2]],g:Nt[i[3]]<<4|Nt[i[4]],b:Nt[i[5]]<<4|Nt[i[6]],a:t===9?Nt[i[7]]<<4|Nt[i[8]]:255})),e}var um=(i,t)=>i<255?t(i):"";function dm(i){var t=cm(i)?am:lm;return i?"#"+t(i.r)+t(i.g)+t(i.b)+um(i.a,t):void 0}var fm=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Uh(i,t,e){let s=t*Math.min(e,1-e),n=(r,o=(r+i/30)%12)=>e-s*Math.max(Math.min(o-3,9-o,1),-1);return[n(0),n(8),n(4)]}function pm(i,t,e){let s=(n,r=(n+i/60)%6)=>e-e*t*Math.max(Math.min(r,4-r,1),0);return[s(5),s(3),s(1)]}function gm(i,t,e){let s=Uh(i,1,.5),n;for(t+e>1&&(n=1/(t+e),t*=n,e*=n),n=0;n<3;n++)s[n]*=1-t-e,s[n]+=t;return s}function mm(i,t,e,s,n){return i===n?(t-e)/s+(t<e?6:0):t===n?(e-i)/s+2:(i-t)/s+4}function ca(i){let e=i.r/255,s=i.g/255,n=i.b/255,r=Math.max(e,s,n),o=Math.min(e,s,n),a=(r+o)/2,l,c,h;return r!==o&&(h=r-o,c=a>.5?h/(2-r-o):h/(r+o),l=mm(e,s,n,h,r),l=l*60+.5),[l|0,c||0,a]}function ha(i,t,e,s){return(Array.isArray(t)?i(t[0],t[1],t[2]):i(t,e,s)).map(Ee)}function ua(i,t,e){return ha(Uh,i,t,e)}function _m(i,t,e){return ha(gm,i,t,e)}function vm(i,t,e){return ha(pm,i,t,e)}function qh(i){return(i%360+360)%360}function bm(i){let t=fm.exec(i),e=255,s;if(!t)return;t[5]!==s&&(e=t[6]?ps(+t[5]):Ee(+t[5]));let n=qh(+t[2]),r=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?s=_m(n,r,o):t[1]==="hsv"?s=vm(n,r,o):s=ua(n,r,o),{r:s[0],g:s[1],b:s[2],a:e}}function xm(i,t){var e=ca(i);e[0]=qh(e[0]+t),e=ua(e),i.r=e[0],i.g=e[1],i.b=e[2]}function ym(i){if(!i)return;let t=ca(i),e=t[0],s=jh(t[1]),n=jh(t[2]);return i.a<255?`hsla(${e}, ${s}%, ${n}%, ${ce(i.a)})`:`hsl(${e}, ${s}%, ${n}%)`}var Hh={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Wh={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function wm(){let i={},t=Object.keys(Wh),e=Object.keys(Hh),s,n,r,o,a;for(s=0;s<t.length;s++){for(o=a=t[s],n=0;n<e.length;n++)r=e[n],a=a.replace(r,Hh[r]);r=parseInt(Wh[o],16),i[a]=[r>>16&255,r>>8&255,r&255]}return i}var kn;function km(i){kn||(kn=wm(),kn.transparent=[0,0,0,0]);let t=kn[i.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}var Sm=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Mm(i){let t=Sm.exec(i),e=255,s,n,r;if(t){if(t[7]!==s){let o=+t[7];e=t[8]?ps(o):Pe(o*255,0,255)}return s=+t[1],n=+t[3],r=+t[5],s=255&(t[2]?ps(s):Pe(s,0,255)),n=255&(t[4]?ps(n):Pe(n,0,255)),r=255&(t[6]?ps(r):Pe(r,0,255)),{r:s,g:n,b:r,a:e}}}function Pm(i){return i&&(i.a<255?`rgba(${i.r}, ${i.g}, ${i.b}, ${ce(i.a)})`:`rgb(${i.r}, ${i.g}, ${i.b})`)}var aa=i=>i<=.0031308?i*12.92:Math.pow(i,1/2.4)*1.055-.055,pi=i=>i<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4);function Em(i,t,e){let s=pi(ce(i.r)),n=pi(ce(i.g)),r=pi(ce(i.b));return{r:Ee(aa(s+e*(pi(ce(t.r))-s))),g:Ee(aa(n+e*(pi(ce(t.g))-n))),b:Ee(aa(r+e*(pi(ce(t.b))-r))),a:i.a+e*(t.a-i.a)}}function Sn(i,t,e){if(i){let s=ca(i);s[t]=Math.max(0,Math.min(s[t]+s[t]*e,t===0?360:1)),s=ua(s),i.r=s[0],i.g=s[1],i.b=s[2]}}function Yh(i,t){return i&&Object.assign(t||{},i)}function Vh(i){var t={r:0,g:0,b:0,a:255};return Array.isArray(i)?i.length>=3&&(t={r:i[0],g:i[1],b:i[2],a:255},i.length>3&&(t.a=Ee(i[3]))):(t=Yh(i,{r:0,g:0,b:0,a:1}),t.a=Ee(t.a)),t}function Cm(i){return i.charAt(0)==="r"?Mm(i):bm(i)}var gs=class i{constructor(t){if(t instanceof i)return t;let e=typeof t,s;e==="object"?s=Vh(t):e==="string"&&(s=hm(t)||km(t)||Cm(t)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var t=Yh(this._rgb);return t&&(t.a=ce(t.a)),t}set rgb(t){this._rgb=Vh(t)}rgbString(){return this._valid?Pm(this._rgb):void 0}hexString(){return this._valid?dm(this._rgb):void 0}hslString(){return this._valid?ym(this._rgb):void 0}mix(t,e){if(t){let s=this.rgb,n=t.rgb,r,o=e===r?.5:e,a=2*o-1,l=s.a-n.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;r=1-c,s.r=255&c*s.r+r*n.r+.5,s.g=255&c*s.g+r*n.g+.5,s.b=255&c*s.b+r*n.b+.5,s.a=o*s.a+(1-o)*n.a,this.rgb=s}return this}interpolate(t,e){return t&&(this._rgb=Em(this._rgb,t._rgb,e)),this}clone(){return new i(this.rgb)}alpha(t){return this._rgb.a=Ee(t),this}clearer(t){let e=this._rgb;return e.a*=1-t,this}greyscale(){let t=this._rgb,e=ms(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){let e=this._rgb;return e.a*=1+t,this}negate(){let t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Sn(this._rgb,2,t),this}darken(t){return Sn(this._rgb,2,-t),this}saturate(t){return Sn(this._rgb,1,t),this}desaturate(t){return Sn(this._rgb,1,-t),this}rotate(t){return xm(this._rgb,t),this}};function Xt(){}var nu=(()=>{let i=0;return()=>i++})();function N(i){return i==null}function Q(i){if(Array.isArray&&Array.isArray(i))return!0;let t=Object.prototype.toString.call(i);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function B(i){return i!==null&&Object.prototype.toString.call(i)==="[object Object]"}function nt(i){return(typeof i=="number"||i instanceof Number)&&isFinite(+i)}function Ot(i,t){return nt(i)?i:t}function F(i,t){return typeof i>"u"?t:i}var ru=(i,t)=>typeof i=="string"&&i.endsWith("%")?parseFloat(i)/100:+i/t,ga=(i,t)=>typeof i=="string"&&i.endsWith("%")?parseFloat(i)/100*t:+i;function G(i,t,e){if(i&&typeof i.call=="function")return i.apply(e,t)}function U(i,t,e,s){let n,r,o;if(Q(i))if(r=i.length,s)for(n=r-1;n>=0;n--)t.call(e,i[n],n);else for(n=0;n<r;n++)t.call(e,i[n],n);else if(B(i))for(o=Object.keys(i),r=o.length,n=0;n<r;n++)t.call(e,i[o[n]],o[n])}function bs(i,t){let e,s,n,r;if(!i||!t||i.length!==t.length)return!1;for(e=0,s=i.length;e<s;++e)if(n=i[e],r=t[e],n.datasetIndex!==r.datasetIndex||n.index!==r.index)return!1;return!0}function Cn(i){if(Q(i))return i.map(Cn);if(B(i)){let t=Object.create(null),e=Object.keys(i),s=e.length,n=0;for(;n<s;++n)t[e[n]]=Cn(i[e[n]]);return t}return i}function ou(i){return["__proto__","prototype","constructor"].indexOf(i)===-1}function Om(i,t,e,s){if(!ou(i))return;let n=t[i],r=e[i];B(n)&&B(r)?mi(n,r,s):t[i]=Cn(r)}function mi(i,t,e){let s=Q(t)?t:[t],n=s.length;if(!B(i))return i;e=e||{};let r=e.merger||Om,o;for(let a=0;a<n;++a){if(o=s[a],!B(o))continue;let l=Object.keys(o);for(let c=0,h=l.length;c<h;++c)r(l[c],i,o,e)}return i}function vi(i,t){return mi(i,t,{merger:Tm})}function Tm(i,t,e){if(!ou(i))return;let s=t[i],n=e[i];B(s)&&B(n)?vi(s,n):Object.prototype.hasOwnProperty.call(t,i)||(t[i]=Cn(n))}var Gh={"":i=>i,x:i=>i.x,y:i=>i.y};function Am(i){let t=i.split("."),e=[],s="";for(let n of t)s+=n,s.endsWith("\\")?s=s.slice(0,-1)+".":(e.push(s),s="");return e}function Dm(i){let t=Am(i);return e=>{for(let s of t){if(s==="")break;e=e&&e[s]}return e}}function de(i,t){return(Gh[t]||(Gh[t]=Dm(t)))(i)}function Dn(i){return i.charAt(0).toUpperCase()+i.slice(1)}var bi=i=>typeof i<"u",he=i=>typeof i=="function",ma=(i,t)=>{if(i.size!==t.size)return!1;for(let e of i)if(!t.has(e))return!1;return!0};function au(i){return i.type==="mouseup"||i.type==="click"||i.type==="contextmenu"}var z=Math.PI,tt=2*z,Rm=tt+z,On=Number.POSITIVE_INFINITY,Im=z/180,ot=z/2,Ye=z/4,Xh=z*2/3,ue=Math.log10,Wt=Math.sign;function xi(i,t,e){return Math.abs(i-t)<e}function _a(i){let t=Math.round(i);i=xi(i,t,i/1e3)?t:i;let e=Math.pow(10,Math.floor(ue(i))),s=i/e;return(s<=1?1:s<=2?2:s<=5?5:10)*e}function lu(i){let t=[],e=Math.sqrt(i),s;for(s=1;s<e;s++)i%s===0&&(t.push(s),t.push(i/s));return e===(e|0)&&t.push(e),t.sort((n,r)=>n-r).pop(),t}function Fm(i){return typeof i=="symbol"||typeof i=="object"&&i!==null&&!(Symbol.toPrimitive in i||"toString"in i||"valueOf"in i)}function Ke(i){return!Fm(i)&&!isNaN(parseFloat(i))&&isFinite(i)}function cu(i,t){let e=Math.round(i);return e-t<=i&&e+t>=i}function va(i,t,e){let s,n,r;for(s=0,n=i.length;s<n;s++)r=i[s][e],isNaN(r)||(t.min=Math.min(t.min,r),t.max=Math.max(t.max,r))}function $t(i){return i*(z/180)}function Rn(i){return i*(180/z)}function ba(i){if(!nt(i))return;let t=1,e=0;for(;Math.round(i*t)/t!==i;)t*=10,e++;return e}function xa(i,t){let e=t.x-i.x,s=t.y-i.y,n=Math.sqrt(e*e+s*s),r=Math.atan2(s,e);return r<-.5*z&&(r+=tt),{angle:r,distance:n}}function Tn(i,t){return Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2))}function Lm(i,t){return(i-t+Rm)%tt-z}function bt(i){return(i%tt+tt)%tt}function yi(i,t,e,s){let n=bt(i),r=bt(t),o=bt(e),a=bt(r-n),l=bt(o-n),c=bt(n-r),h=bt(n-o);return n===r||n===o||s&&r===o||a>l&&c<h}function pt(i,t,e){return Math.max(t,Math.min(e,i))}function hu(i){return pt(i,-32768,32767)}function Kt(i,t,e,s=1e-6){return i>=Math.min(t,e)-s&&i<=Math.max(t,e)+s}function In(i,t,e){e=e||(o=>i[o]<t);let s=i.length-1,n=0,r;for(;s-n>1;)r=n+s>>1,e(r)?n=r:s=r;return{lo:n,hi:s}}var Yt=(i,t,e,s)=>In(i,e,s?n=>{let r=i[n][t];return r<e||r===e&&i[n+1][t]===e}:n=>i[n][t]<e),uu=(i,t,e)=>In(i,e,s=>i[s][t]>=e);function du(i,t,e){let s=0,n=i.length;for(;s<n&&i[s]<t;)s++;for(;n>s&&i[n-1]>e;)n--;return s>0||n<i.length?i.slice(s,n):i}var fu=["push","pop","shift","splice","unshift"];function pu(i,t){if(i._chartjs){i._chartjs.listeners.push(t);return}Object.defineProperty(i,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),fu.forEach(e=>{let s="_onData"+Dn(e),n=i[e];Object.defineProperty(i,e,{configurable:!0,enumerable:!1,value(...r){let o=n.apply(this,r);return i._chartjs.listeners.forEach(a=>{typeof a[s]=="function"&&a[s](...r)}),o}})})}function ya(i,t){let e=i._chartjs;if(!e)return;let s=e.listeners,n=s.indexOf(t);n!==-1&&s.splice(n,1),!(s.length>0)&&(fu.forEach(r=>{delete i[r]}),delete i._chartjs)}function wa(i){let t=new Set(i);return t.size===i.length?i:Array.from(t)}var ka=(function(){return typeof window>"u"?function(i){return i()}:window.requestAnimationFrame})();function Sa(i,t){let e=[],s=!1;return function(...n){e=n,s||(s=!0,ka.call(window,()=>{s=!1,i.apply(t,e)}))}}function gu(i,t){let e;return function(...s){return t?(clearTimeout(e),e=setTimeout(i,t,s)):i.apply(this,s),t}}var Fn=i=>i==="start"?"left":i==="end"?"right":"center",xt=(i,t,e)=>i==="start"?t:i==="end"?e:(t+e)/2,mu=(i,t,e,s)=>i===(s?"left":"right")?e:i==="center"?(t+e)/2:t;function Ma(i,t,e){let s=t.length,n=0,r=s;if(i._sorted){let{iScale:o,vScale:a,_parsed:l}=i,c=i.dataset&&i.dataset.options?i.dataset.options.spanGaps:null,h=o.axis,{min:u,max:d,minDefined:f,maxDefined:p}=o.getUserBounds();if(f){if(n=Math.min(Yt(l,h,u).lo,e?s:Yt(t,h,o.getPixelForValue(u)).lo),c){let g=l.slice(0,n+1).reverse().findIndex(m=>!N(m[a.axis]));n-=Math.max(0,g)}n=pt(n,0,s-1)}if(p){let g=Math.max(Yt(l,o.axis,d,!0).hi+1,e?0:Yt(t,h,o.getPixelForValue(d),!0).hi+1);if(c){let m=l.slice(g-1).findIndex(_=>!N(_[a.axis]));g+=Math.max(0,m)}r=pt(g,n,s)-n}else r=s-n}return{start:n,count:r}}function Pa(i){let{xScale:t,yScale:e,_scaleRanges:s}=i,n={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!s)return i._scaleRanges=n,!0;let r=s.xmin!==t.min||s.xmax!==t.max||s.ymin!==e.min||s.ymax!==e.max;return Object.assign(s,n),r}var Mn=i=>i===0||i===1,Kh=(i,t,e)=>-(Math.pow(2,10*(i-=1))*Math.sin((i-t)*tt/e)),Zh=(i,t,e)=>Math.pow(2,-10*i)*Math.sin((i-t)*tt/e)+1,gi={linear:i=>i,easeInQuad:i=>i*i,easeOutQuad:i=>-i*(i-2),easeInOutQuad:i=>(i/=.5)<1?.5*i*i:-.5*(--i*(i-2)-1),easeInCubic:i=>i*i*i,easeOutCubic:i=>(i-=1)*i*i+1,easeInOutCubic:i=>(i/=.5)<1?.5*i*i*i:.5*((i-=2)*i*i+2),easeInQuart:i=>i*i*i*i,easeOutQuart:i=>-((i-=1)*i*i*i-1),easeInOutQuart:i=>(i/=.5)<1?.5*i*i*i*i:-.5*((i-=2)*i*i*i-2),easeInQuint:i=>i*i*i*i*i,easeOutQuint:i=>(i-=1)*i*i*i*i+1,easeInOutQuint:i=>(i/=.5)<1?.5*i*i*i*i*i:.5*((i-=2)*i*i*i*i+2),easeInSine:i=>-Math.cos(i*ot)+1,easeOutSine:i=>Math.sin(i*ot),easeInOutSine:i=>-.5*(Math.cos(z*i)-1),easeInExpo:i=>i===0?0:Math.pow(2,10*(i-1)),easeOutExpo:i=>i===1?1:-Math.pow(2,-10*i)+1,easeInOutExpo:i=>Mn(i)?i:i<.5?.5*Math.pow(2,10*(i*2-1)):.5*(-Math.pow(2,-10*(i*2-1))+2),easeInCirc:i=>i>=1?i:-(Math.sqrt(1-i*i)-1),easeOutCirc:i=>Math.sqrt(1-(i-=1)*i),easeInOutCirc:i=>(i/=.5)<1?-.5*(Math.sqrt(1-i*i)-1):.5*(Math.sqrt(1-(i-=2)*i)+1),easeInElastic:i=>Mn(i)?i:Kh(i,.075,.3),easeOutElastic:i=>Mn(i)?i:Zh(i,.075,.3),easeInOutElastic(i){return Mn(i)?i:i<.5?.5*Kh(i*2,.1125,.45):.5+.5*Zh(i*2-1,.1125,.45)},easeInBack(i){return i*i*((1.70158+1)*i-1.70158)},easeOutBack(i){return(i-=1)*i*((1.70158+1)*i+1.70158)+1},easeInOutBack(i){let t=1.70158;return(i/=.5)<1?.5*(i*i*(((t*=1.525)+1)*i-t)):.5*((i-=2)*i*(((t*=1.525)+1)*i+t)+2)},easeInBounce:i=>1-gi.easeOutBounce(1-i),easeOutBounce(i){return i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375},easeInOutBounce:i=>i<.5?gi.easeInBounce(i*2)*.5:gi.easeOutBounce(i*2-1)*.5+.5};function Ea(i){if(i&&typeof i=="object"){let t=i.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function Ca(i){return Ea(i)?i:new gs(i)}function da(i){return Ea(i)?i:new gs(i).saturate(.5).darken(.1).hexString()}var Nm=["x","y","borderWidth","radius","tension"],$m=["color","borderColor","backgroundColor"];function Bm(i){i.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),i.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),i.set("animations",{colors:{type:"color",properties:$m},numbers:{type:"number",properties:Nm}}),i.describe("animations",{_fallback:"animation"}),i.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function zm(i){i.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}var Jh=new Map;function jm(i,t){t=t||{};let e=i+JSON.stringify(t),s=Jh.get(e);return s||(s=new Intl.NumberFormat(i,t),Jh.set(e,s)),s}function wi(i,t,e){return jm(t,e).format(i)}var _u={values(i){return Q(i)?i:""+i},numeric(i,t,e){if(i===0)return"0";let s=this.chart.options.locale,n,r=i;if(e.length>1){let c=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(c<1e-4||c>1e15)&&(n="scientific"),r=Hm(i,e)}let o=ue(Math.abs(r)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:n,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),wi(i,s,l)},logarithmic(i,t,e){if(i===0)return"0";let s=e[t].significand||i/Math.pow(10,Math.floor(ue(i)));return[1,2,3,5,10,15].includes(s)||t>.8*e.length?_u.numeric.call(this,i,t,e):""}};function Hm(i,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&i!==Math.floor(i)&&(e=i-Math.floor(i)),e}var xs={formatters:_u};function Wm(i){i.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:xs.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),i.route("scale.ticks","color","","color"),i.route("scale.grid","color","","borderColor"),i.route("scale.border","color","","borderColor"),i.route("scale.title","color","","color"),i.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),i.describe("scales",{_fallback:"scale"}),i.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}var Te=Object.create(null),Ln=Object.create(null);function _s(i,t){if(!t)return i;let e=t.split(".");for(let s=0,n=e.length;s<n;++s){let r=e[s];i=i[r]||(i[r]=Object.create(null))}return i}function fa(i,t,e){return typeof t=="string"?mi(_s(i,t),e):mi(_s(i,""),t)}var pa=class{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,n)=>da(n.backgroundColor),this.hoverBorderColor=(s,n)=>da(n.borderColor),this.hoverColor=(s,n)=>da(n.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return fa(this,t,e)}get(t){return _s(this,t)}describe(t,e){return fa(Ln,t,e)}override(t,e){return fa(Te,t,e)}route(t,e,s,n){let r=_s(this,t),o=_s(this,s),a="_"+e;Object.defineProperties(r,{[a]:{value:r[e],writable:!0},[e]:{enumerable:!0,get(){let l=this[a],c=o[n];return B(l)?Object.assign({},c,l):F(l,c)},set(l){this[a]=l}}})}apply(t){t.forEach(e=>e(this))}},X=new pa({_scriptable:i=>!i.startsWith("on"),_indexable:i=>i!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Bm,zm,Wm]);function Vm(i){return!i||N(i.size)||N(i.family)?null:(i.style?i.style+" ":"")+(i.weight?i.weight+" ":"")+i.size+"px "+i.family}function vs(i,t,e,s,n){let r=t[n];return r||(r=t[n]=i.measureText(n).width,e.push(n)),r>s&&(s=r),s}function vu(i,t,e,s){s=s||{};let n=s.data=s.data||{},r=s.garbageCollect=s.garbageCollect||[];s.font!==t&&(n=s.data={},r=s.garbageCollect=[],s.font=t),i.save(),i.font=t;let o=0,a=e.length,l,c,h,u,d;for(l=0;l<a;l++)if(u=e[l],u!=null&&!Q(u))o=vs(i,n,r,o,u);else if(Q(u))for(c=0,h=u.length;c<h;c++)d=u[c],d!=null&&!Q(d)&&(o=vs(i,n,r,o,d));i.restore();let f=r.length/2;if(f>e.length){for(l=0;l<f;l++)delete n[r[l]];r.splice(0,f)}return o}function Ae(i,t,e){let s=i.currentDevicePixelRatio,n=e!==0?Math.max(e/2,.5):0;return Math.round((t-n)*s)/s+n}function Oa(i,t){!t&&!i||(t=t||i.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,i.width,i.height),t.restore())}function Nn(i,t,e,s){Ta(i,t,e,s,null)}function Ta(i,t,e,s,n){let r,o,a,l,c,h,u,d,f=t.pointStyle,p=t.rotation,g=t.radius,m=(p||0)*Im;if(f&&typeof f=="object"&&(r=f.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){i.save(),i.translate(e,s),i.rotate(m),i.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),i.restore();return}if(!(isNaN(g)||g<=0)){switch(i.beginPath(),f){default:n?i.ellipse(e,s,n/2,g,0,0,tt):i.arc(e,s,g,0,tt),i.closePath();break;case"triangle":h=n?n/2:g,i.moveTo(e+Math.sin(m)*h,s-Math.cos(m)*g),m+=Xh,i.lineTo(e+Math.sin(m)*h,s-Math.cos(m)*g),m+=Xh,i.lineTo(e+Math.sin(m)*h,s-Math.cos(m)*g),i.closePath();break;case"rectRounded":c=g*.516,l=g-c,o=Math.cos(m+Ye)*l,u=Math.cos(m+Ye)*(n?n/2-c:l),a=Math.sin(m+Ye)*l,d=Math.sin(m+Ye)*(n?n/2-c:l),i.arc(e-u,s-a,c,m-z,m-ot),i.arc(e+d,s-o,c,m-ot,m),i.arc(e+u,s+a,c,m,m+ot),i.arc(e-d,s+o,c,m+ot,m+z),i.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*g,h=n?n/2:l,i.rect(e-h,s-l,2*h,2*l);break}m+=Ye;case"rectRot":u=Math.cos(m)*(n?n/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(n?n/2:g),i.moveTo(e-u,s-a),i.lineTo(e+d,s-o),i.lineTo(e+u,s+a),i.lineTo(e-d,s+o),i.closePath();break;case"crossRot":m+=Ye;case"cross":u=Math.cos(m)*(n?n/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(n?n/2:g),i.moveTo(e-u,s-a),i.lineTo(e+u,s+a),i.moveTo(e+d,s-o),i.lineTo(e-d,s+o);break;case"star":u=Math.cos(m)*(n?n/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(n?n/2:g),i.moveTo(e-u,s-a),i.lineTo(e+u,s+a),i.moveTo(e+d,s-o),i.lineTo(e-d,s+o),m+=Ye,u=Math.cos(m)*(n?n/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(n?n/2:g),i.moveTo(e-u,s-a),i.lineTo(e+u,s+a),i.moveTo(e+d,s-o),i.lineTo(e-d,s+o);break;case"line":o=n?n/2:Math.cos(m)*g,a=Math.sin(m)*g,i.moveTo(e-o,s-a),i.lineTo(e+o,s+a);break;case"dash":i.moveTo(e,s),i.lineTo(e+Math.cos(m)*(n?n/2:g),s+Math.sin(m)*g);break;case!1:i.closePath();break}i.fill(),t.borderWidth>0&&i.stroke()}}function Gt(i,t,e){return e=e||.5,!t||i&&i.x>t.left-e&&i.x<t.right+e&&i.y>t.top-e&&i.y<t.bottom+e}function ys(i,t){i.save(),i.beginPath(),i.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),i.clip()}function ws(i){i.restore()}function bu(i,t,e,s,n){if(!t)return i.lineTo(e.x,e.y);if(n==="middle"){let r=(t.x+e.x)/2;i.lineTo(r,t.y),i.lineTo(r,e.y)}else n==="after"!=!!s?i.lineTo(t.x,e.y):i.lineTo(e.x,t.y);i.lineTo(e.x,e.y)}function xu(i,t,e,s){if(!t)return i.lineTo(e.x,e.y);i.bezierCurveTo(s?t.cp1x:t.cp2x,s?t.cp1y:t.cp2y,s?e.cp2x:e.cp1x,s?e.cp2y:e.cp1y,e.x,e.y)}function Um(i,t){t.translation&&i.translate(t.translation[0],t.translation[1]),N(t.rotation)||i.rotate(t.rotation),t.color&&(i.fillStyle=t.color),t.textAlign&&(i.textAlign=t.textAlign),t.textBaseline&&(i.textBaseline=t.textBaseline)}function qm(i,t,e,s,n){if(n.strikethrough||n.underline){let r=i.measureText(s),o=t-r.actualBoundingBoxLeft,a=t+r.actualBoundingBoxRight,l=e-r.actualBoundingBoxAscent,c=e+r.actualBoundingBoxDescent,h=n.strikethrough?(l+c)/2:c;i.strokeStyle=i.fillStyle,i.beginPath(),i.lineWidth=n.decorationWidth||2,i.moveTo(o,h),i.lineTo(a,h),i.stroke()}}function Ym(i,t){let e=i.fillStyle;i.fillStyle=t.color,i.fillRect(t.left,t.top,t.width,t.height),i.fillStyle=e}function De(i,t,e,s,n,r={}){let o=Q(t)?t:[t],a=r.strokeWidth>0&&r.strokeColor!=="",l,c;for(i.save(),i.font=n.string,Um(i,r),l=0;l<o.length;++l)c=o[l],r.backdrop&&Ym(i,r.backdrop),a&&(r.strokeColor&&(i.strokeStyle=r.strokeColor),N(r.strokeWidth)||(i.lineWidth=r.strokeWidth),i.strokeText(c,e,s,r.maxWidth)),i.fillText(c,e,s,r.maxWidth),qm(i,e,s,c,r),s+=Number(n.lineHeight);i.restore()}function ki(i,t){let{x:e,y:s,w:n,h:r,radius:o}=t;i.arc(e+o.topLeft,s+o.topLeft,o.topLeft,1.5*z,z,!0),i.lineTo(e,s+r-o.bottomLeft),i.arc(e+o.bottomLeft,s+r-o.bottomLeft,o.bottomLeft,z,ot,!0),i.lineTo(e+n-o.bottomRight,s+r),i.arc(e+n-o.bottomRight,s+r-o.bottomRight,o.bottomRight,ot,0,!0),i.lineTo(e+n,s+o.topRight),i.arc(e+n-o.topRight,s+o.topRight,o.topRight,0,-ot,!0),i.lineTo(e+o.topLeft,s)}var Gm=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Xm=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Km(i,t){let e=(""+i).match(Gm);if(!e||e[1]==="normal")return t*1.2;switch(i=+e[2],e[3]){case"px":return i;case"%":i/=100;break}return t*i}var Zm=i=>+i||0;function $n(i,t){let e={},s=B(t),n=s?Object.keys(t):t,r=B(i)?s?o=>F(i[o],i[t[o]]):o=>i[o]:()=>i;for(let o of n)e[o]=Zm(r(o));return e}function Aa(i){return $n(i,{top:"y",right:"x",bottom:"y",left:"x"})}function Re(i){return $n(i,["topLeft","topRight","bottomLeft","bottomRight"])}function yt(i){let t=Aa(i);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function ut(i,t){i=i||{},t=t||X.font;let e=F(i.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let s=F(i.style,t.style);s&&!(""+s).match(Xm)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);let n={family:F(i.family,t.family),lineHeight:Km(F(i.lineHeight,t.lineHeight),e),size:e,style:s,weight:F(i.weight,t.weight),string:""};return n.string=Vm(n),n}function Si(i,t,e,s){let n=!0,r,o,a;for(r=0,o=i.length;r<o;++r)if(a=i[r],a!==void 0&&(t!==void 0&&typeof a=="function"&&(a=a(t),n=!1),e!==void 0&&Q(a)&&(a=a[e%a.length],n=!1),a!==void 0))return s&&!n&&(s.cacheable=!1),a}function yu(i,t,e){let{min:s,max:n}=i,r=ga(t,(n-s)/2),o=(a,l)=>e&&a===0?0:a+l;return{min:o(s,-Math.abs(r)),max:o(n,r)}}function fe(i,t){return Object.assign(Object.create(i),t)}function Bn(i,t=[""],e,s,n=()=>i[0]){let r=e||i;typeof s>"u"&&(s=Su("_fallback",i));let o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:i,_rootScopes:r,_fallback:s,_getTarget:n,override:a=>Bn([a,...i],t,r,s)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete i[0][l],!0},get(a,l){return wu(a,l,()=>r_(l,t,i,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(i[0])},has(a,l){return tu(a).includes(l)},ownKeys(a){return tu(a)},set(a,l,c){let h=a._storage||(a._storage=n());return a[l]=h[l]=c,delete a._keys,!0}})}function Xe(i,t,e,s){let n={_cacheable:!1,_proxy:i,_context:t,_subProxy:e,_stack:new Set,_descriptors:Da(i,s),setContext:r=>Xe(i,r,e,s),override:r=>Xe(i.override(r),t,e,s)};return new Proxy(n,{deleteProperty(r,o){return delete r[o],delete i[o],!0},get(r,o,a){return wu(r,o,()=>Qm(r,o,a))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(i,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(i,o)},getPrototypeOf(){return Reflect.getPrototypeOf(i)},has(r,o){return Reflect.has(i,o)},ownKeys(){return Reflect.ownKeys(i)},set(r,o,a){return i[o]=a,delete r[o],!0}})}function Da(i,t={scriptable:!0,indexable:!0}){let{_scriptable:e=t.scriptable,_indexable:s=t.indexable,_allKeys:n=t.allKeys}=i;return{allKeys:n,scriptable:e,indexable:s,isScriptable:he(e)?e:()=>e,isIndexable:he(s)?s:()=>s}}var Jm=(i,t)=>i?i+Dn(t):t,Ra=(i,t)=>B(t)&&i!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function wu(i,t,e){if(Object.prototype.hasOwnProperty.call(i,t)||t==="constructor")return i[t];let s=e();return i[t]=s,s}function Qm(i,t,e){let{_proxy:s,_context:n,_subProxy:r,_descriptors:o}=i,a=s[t];return he(a)&&o.isScriptable(t)&&(a=t_(t,a,i,e)),Q(a)&&a.length&&(a=e_(t,a,i,o.isIndexable)),Ra(t,a)&&(a=Xe(a,n,r&&r[t],o)),a}function t_(i,t,e,s){let{_proxy:n,_context:r,_subProxy:o,_stack:a}=e;if(a.has(i))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+i);a.add(i);let l=t(r,o||s);return a.delete(i),Ra(i,l)&&(l=Ia(n._scopes,n,i,l)),l}function e_(i,t,e,s){let{_proxy:n,_context:r,_subProxy:o,_descriptors:a}=e;if(typeof r.index<"u"&&s(i))return t[r.index%t.length];if(B(t[0])){let l=t,c=n._scopes.filter(h=>h!==l);t=[];for(let h of l){let u=Ia(c,n,i,h);t.push(Xe(u,r,o&&o[i],a))}}return t}function ku(i,t,e){return he(i)?i(t,e):i}var i_=(i,t)=>i===!0?t:typeof i=="string"?de(t,i):void 0;function s_(i,t,e,s,n){for(let r of t){let o=i_(e,r);if(o){i.add(o);let a=ku(o._fallback,e,n);if(typeof a<"u"&&a!==e&&a!==s)return a}else if(o===!1&&typeof s<"u"&&e!==s)return null}return!1}function Ia(i,t,e,s){let n=t._rootScopes,r=ku(t._fallback,e,s),o=[...i,...n],a=new Set;a.add(s);let l=Qh(a,o,e,r||e,s);return l===null||typeof r<"u"&&r!==e&&(l=Qh(a,o,r,l,s),l===null)?!1:Bn(Array.from(a),[""],n,r,()=>n_(t,e,s))}function Qh(i,t,e,s,n){for(;e;)e=s_(i,t,e,s,n);return e}function n_(i,t,e){let s=i._getTarget();t in s||(s[t]={});let n=s[t];return Q(n)&&B(e)?e:n||{}}function r_(i,t,e,s){let n;for(let r of t)if(n=Su(Jm(r,i),e),typeof n<"u")return Ra(i,n)?Ia(e,s,i,n):n}function Su(i,t){for(let e of t){if(!e)continue;let s=e[i];if(typeof s<"u")return s}}function tu(i){let t=i._keys;return t||(t=i._keys=o_(i._scopes)),t}function o_(i){let t=new Set;for(let e of i)for(let s of Object.keys(e).filter(n=>!n.startsWith("_")))t.add(s);return Array.from(t)}function Fa(i,t,e,s){let{iScale:n}=i,{key:r="r"}=this._parsing,o=new Array(s),a,l,c,h;for(a=0,l=s;a<l;++a)c=a+e,h=t[c],o[a]={r:n.parse(de(h,r),c)};return o}var a_=Number.EPSILON||1e-14,_i=(i,t)=>t<i.length&&!i[t].skip&&i[t],Mu=i=>i==="x"?"y":"x";function l_(i,t,e,s){let n=i.skip?t:i,r=t,o=e.skip?t:e,a=Tn(r,n),l=Tn(o,r),c=a/(a+l),h=l/(a+l);c=isNaN(c)?0:c,h=isNaN(h)?0:h;let u=s*c,d=s*h;return{previous:{x:r.x-u*(o.x-n.x),y:r.y-u*(o.y-n.y)},next:{x:r.x+d*(o.x-n.x),y:r.y+d*(o.y-n.y)}}}function c_(i,t,e){let s=i.length,n,r,o,a,l,c=_i(i,0);for(let h=0;h<s-1;++h)if(l=c,c=_i(i,h+1),!(!l||!c)){if(xi(t[h],0,a_)){e[h]=e[h+1]=0;continue}n=e[h]/t[h],r=e[h+1]/t[h],a=Math.pow(n,2)+Math.pow(r,2),!(a<=9)&&(o=3/Math.sqrt(a),e[h]=n*o*t[h],e[h+1]=r*o*t[h])}}function h_(i,t,e="x"){let s=Mu(e),n=i.length,r,o,a,l=_i(i,0);for(let c=0;c<n;++c){if(o=a,a=l,l=_i(i,c+1),!a)continue;let h=a[e],u=a[s];o&&(r=(h-o[e])/3,a[`cp1${e}`]=h-r,a[`cp1${s}`]=u-r*t[c]),l&&(r=(l[e]-h)/3,a[`cp2${e}`]=h+r,a[`cp2${s}`]=u+r*t[c])}}function u_(i,t="x"){let e=Mu(t),s=i.length,n=Array(s).fill(0),r=Array(s),o,a,l,c=_i(i,0);for(o=0;o<s;++o)if(a=l,l=c,c=_i(i,o+1),!!l){if(c){let h=c[t]-l[t];n[o]=h!==0?(c[e]-l[e])/h:0}r[o]=a?c?Wt(n[o-1])!==Wt(n[o])?0:(n[o-1]+n[o])/2:n[o-1]:n[o]}c_(i,n,r),h_(i,r,t)}function Pn(i,t,e){return Math.max(Math.min(i,e),t)}function d_(i,t){let e,s,n,r,o,a=Gt(i[0],t);for(e=0,s=i.length;e<s;++e)o=r,r=a,a=e<s-1&&Gt(i[e+1],t),r&&(n=i[e],o&&(n.cp1x=Pn(n.cp1x,t.left,t.right),n.cp1y=Pn(n.cp1y,t.top,t.bottom)),a&&(n.cp2x=Pn(n.cp2x,t.left,t.right),n.cp2y=Pn(n.cp2y,t.top,t.bottom)))}function Pu(i,t,e,s,n){let r,o,a,l;if(t.spanGaps&&(i=i.filter(c=>!c.skip)),t.cubicInterpolationMode==="monotone")u_(i,n);else{let c=s?i[i.length-1]:i[0];for(r=0,o=i.length;r<o;++r)a=i[r],l=l_(c,a,i[Math.min(r+1,o-(s?0:1))%o],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}t.capBezierPoints&&d_(i,e)}function zn(){return typeof window<"u"&&typeof document<"u"}function jn(i){let t=i.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function An(i,t,e){let s;return typeof i=="string"?(s=parseInt(i,10),i.indexOf("%")!==-1&&(s=s/100*t.parentNode[e])):s=i,s}var Hn=i=>i.ownerDocument.defaultView.getComputedStyle(i,null);function f_(i,t){return Hn(i).getPropertyValue(t)}var p_=["top","right","bottom","left"];function Ge(i,t,e){let s={};e=e?"-"+e:"";for(let n=0;n<4;n++){let r=p_[n];s[r]=parseFloat(i[t+"-"+r+e])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}var g_=(i,t,e)=>(i>0||t>0)&&(!e||!e.shadowRoot);function m_(i,t){let e=i.touches,s=e&&e.length?e[0]:i,{offsetX:n,offsetY:r}=s,o=!1,a,l;if(g_(n,r,i.target))a=n,l=r;else{let c=t.getBoundingClientRect();a=s.clientX-c.left,l=s.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Ie(i,t){if("native"in i)return i;let{canvas:e,currentDevicePixelRatio:s}=t,n=Hn(e),r=n.boxSizing==="border-box",o=Ge(n,"padding"),a=Ge(n,"border","width"),{x:l,y:c,box:h}=m_(i,e),u=o.left+(h&&a.left),d=o.top+(h&&a.top),{width:f,height:p}=t;return r&&(f-=o.width+a.width,p-=o.height+a.height),{x:Math.round((l-u)/f*e.width/s),y:Math.round((c-d)/p*e.height/s)}}function __(i,t,e){let s,n;if(t===void 0||e===void 0){let r=i&&jn(i);if(!r)t=i.clientWidth,e=i.clientHeight;else{let o=r.getBoundingClientRect(),a=Hn(r),l=Ge(a,"border","width"),c=Ge(a,"padding");t=o.width-c.width-l.width,e=o.height-c.height-l.height,s=An(a.maxWidth,r,"clientWidth"),n=An(a.maxHeight,r,"clientHeight")}}return{width:t,height:e,maxWidth:s||On,maxHeight:n||On}}var Oe=i=>Math.round(i*10)/10;function Eu(i,t,e,s){let n=Hn(i),r=Ge(n,"margin"),o=An(n.maxWidth,i,"clientWidth")||On,a=An(n.maxHeight,i,"clientHeight")||On,l=__(i,t,e),{width:c,height:h}=l;if(n.boxSizing==="content-box"){let d=Ge(n,"border","width"),f=Ge(n,"padding");c-=f.width+d.width,h-=f.height+d.height}return c=Math.max(0,c-r.width),h=Math.max(0,s?c/s:h-r.height),c=Oe(Math.min(c,o,l.maxWidth)),h=Oe(Math.min(h,a,l.maxHeight)),c&&!h&&(h=Oe(c/2)),(t!==void 0||e!==void 0)&&s&&l.height&&h>l.height&&(h=l.height,c=Oe(Math.floor(h*s))),{width:c,height:h}}function La(i,t,e){let s=t||1,n=Oe(i.height*s),r=Oe(i.width*s);i.height=Oe(i.height),i.width=Oe(i.width);let o=i.canvas;return o.style&&(e||!o.style.height&&!o.style.width)&&(o.style.height=`${i.height}px`,o.style.width=`${i.width}px`),i.currentDevicePixelRatio!==s||o.height!==n||o.width!==r?(i.currentDevicePixelRatio=s,o.height=n,o.width=r,i.ctx.setTransform(s,0,0,s,0,0),!0):!1}var Cu=(function(){let i=!1;try{let t={get passive(){return i=!0,!1}};zn()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return i})();function Na(i,t){let e=f_(i,t),s=e&&e.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function Ce(i,t,e,s){return{x:i.x+e*(t.x-i.x),y:i.y+e*(t.y-i.y)}}function Ou(i,t,e,s){return{x:i.x+e*(t.x-i.x),y:s==="middle"?e<.5?i.y:t.y:s==="after"?e<1?i.y:t.y:e>0?t.y:i.y}}function Tu(i,t,e,s){let n={x:i.cp2x,y:i.cp2y},r={x:t.cp1x,y:t.cp1y},o=Ce(i,n,e),a=Ce(n,r,e),l=Ce(r,t,e),c=Ce(o,a,e),h=Ce(a,l,e);return Ce(c,h,e)}var v_=function(i,t){return{x(e){return i+i+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,s){return e-s},leftForLtr(e,s){return e-s}}},b_=function(){return{x(i){return i},setWidth(i){},textAlign(i){return i},xPlus(i,t){return i+t},leftForLtr(i,t){return i}}};function Ze(i,t,e){return i?v_(t,e):b_()}function $a(i,t){let e,s;(t==="ltr"||t==="rtl")&&(e=i.canvas.style,s=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),i.prevTextDirection=s)}function Ba(i,t){t!==void 0&&(delete i.prevTextDirection,i.canvas.style.setProperty("direction",t[0],t[1]))}function Au(i){return i==="angle"?{between:yi,compare:Lm,normalize:bt}:{between:Kt,compare:(t,e)=>t-e,normalize:t=>t}}function eu({start:i,end:t,count:e,loop:s,style:n}){return{start:i%e,end:t%e,loop:s&&(t-i+1)%e===0,style:n}}function x_(i,t,e){let{property:s,start:n,end:r}=e,{between:o,normalize:a}=Au(s),l=t.length,{start:c,end:h,loop:u}=i,d,f;if(u){for(c+=l,h+=l,d=0,f=l;d<f&&o(a(t[c%l][s]),n,r);++d)c--,h--;c%=l,h%=l}return h<c&&(h+=l),{start:c,end:h,loop:u,style:i.style}}function za(i,t,e){if(!e)return[i];let{property:s,start:n,end:r}=e,o=t.length,{compare:a,between:l,normalize:c}=Au(s),{start:h,end:u,loop:d,style:f}=x_(i,t,e),p=[],g=!1,m=null,_,v,y,w=()=>l(n,y,_)&&a(n,y)!==0,b=()=>a(r,_)===0||l(r,y,_),S=()=>g||w(),M=()=>!g||b();for(let k=h,O=h;k<=u;++k)v=t[k%o],!v.skip&&(_=c(v[s]),_!==y&&(g=l(_,n,r),m===null&&S()&&(m=a(_,n)===0?k:O),m!==null&&M()&&(p.push(eu({start:m,end:k,loop:d,count:o,style:f})),m=null),O=k,y=_));return m!==null&&p.push(eu({start:m,end:u,loop:d,count:o,style:f})),p}function ja(i,t){let e=[],s=i.segments;for(let n=0;n<s.length;n++){let r=za(s[n],i.points,t);r.length&&e.push(...r)}return e}function y_(i,t,e,s){let n=0,r=t-1;if(e&&!s)for(;n<t&&!i[n].skip;)n++;for(;n<t&&i[n].skip;)n++;for(n%=t,e&&(r+=n);r>n&&i[r%t].skip;)r--;return r%=t,{start:n,end:r}}function w_(i,t,e,s){let n=i.length,r=[],o=t,a=i[t],l;for(l=t+1;l<=e;++l){let c=i[l%n];c.skip||c.stop?a.skip||(s=!1,r.push({start:t%n,end:(l-1)%n,loop:s}),t=o=c.stop?l:null):(o=l,a.skip&&(t=l)),a=c}return o!==null&&r.push({start:t%n,end:o%n,loop:s}),r}function Du(i,t){let e=i.points,s=i.options.spanGaps,n=e.length;if(!n)return[];let r=!!i._loop,{start:o,end:a}=y_(e,n,r,s);if(s===!0)return iu(i,[{start:o,end:a,loop:r}],e,t);let l=a<o?a+n:a,c=!!i._fullLoop&&o===0&&a===n-1;return iu(i,w_(e,o,l,c),e,t)}function iu(i,t,e,s){return!s||!s.setContext||!e?t:k_(i,t,e,s)}function k_(i,t,e,s){let n=i._chart.getContext(),r=su(i.options),{_datasetIndex:o,options:{spanGaps:a}}=i,l=e.length,c=[],h=r,u=t[0].start,d=u;function f(p,g,m,_){let v=a?-1:1;if(p!==g){for(p+=l;e[p%l].skip;)p-=v;for(;e[g%l].skip;)g+=v;p%l!==g%l&&(c.push({start:p%l,end:g%l,loop:m,style:_}),h=_,u=g%l)}}for(let p of t){u=a?u:p.start;let g=e[u%l],m;for(d=u+1;d<=p.end;d++){let _=e[d%l];m=su(s.setContext(fe(n,{type:"segment",p0:g,p1:_,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:o}))),S_(m,h)&&f(u,d-1,p.loop,h),g=_,h=m}u<d-1&&f(u,d-1,p.loop,h)}return c}function su(i){return{backgroundColor:i.backgroundColor,borderCapStyle:i.borderCapStyle,borderDash:i.borderDash,borderDashOffset:i.borderDashOffset,borderJoinStyle:i.borderJoinStyle,borderWidth:i.borderWidth,borderColor:i.borderColor}}function S_(i,t){if(!t)return!1;let e=[],s=function(n,r){return Ea(r)?(e.includes(r)||e.push(r),e.indexOf(r)):r};return JSON.stringify(i,s)!==JSON.stringify(t,s)}function En(i,t,e){return i.options.clip?i[e]:t[e]}function M_(i,t){let{xScale:e,yScale:s}=i;return e&&s?{left:En(e,t,"left"),right:En(e,t,"right"),top:En(s,t,"top"),bottom:En(s,t,"bottom")}:t}function Ha(i,t){let e=t._clip;if(e.disabled)return!1;let s=M_(t,i.chartArea);return{left:e.left===!1?0:s.left-(e.left===!0?0:e.left),right:e.right===!1?i.width:s.right+(e.right===!0?0:e.right),top:e.top===!1?0:s.top-(e.top===!0?0:e.top),bottom:e.bottom===!1?i.height:s.bottom+(e.bottom===!0?0:e.bottom)}}var tl=class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,s,n){let r=e.listeners[n],o=e.duration;r.forEach(a=>a({chart:t,initial:e.initial,numSteps:o,currentStep:Math.min(s-e.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=ka.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((s,n)=>{if(!s.running||!s.items.length)return;let r=s.items,o=r.length-1,a=!1,l;for(;o>=0;--o)l=r[o],l._active?(l._total>s.duration&&(s.duration=l._total),l.tick(t),a=!0):(r[o]=r[r.length-1],r.pop());a&&(n.draw(),this._notify(n,s,t,"progress")),r.length||(s.running=!1,this._notify(n,s,t,"complete"),s.initial=!1),e+=r.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){let e=this._charts,s=e.get(t);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,s)),s}listen(t,e,s){this._getAnims(t).listeners[e].push(s)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){let e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((s,n)=>Math.max(s,n._duration),0),this._refresh())}running(t){if(!this._running)return!1;let e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){let e=this._charts.get(t);if(!e||!e.items.length)return;let s=e.items,n=s.length-1;for(;n>=0;--n)s[n].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}},pe=new tl,Ru="transparent",P_={boolean(i,t,e){return e>.5?t:i},color(i,t,e){let s=Ca(i||Ru),n=s.valid&&Ca(t||Ru);return n&&n.valid?n.mix(s,e).hexString():t},number(i,t,e){return i+(t-i)*e}},el=class{constructor(t,e,s,n){let r=e[s];n=Si([t.to,n,r,t.from]);let o=Si([t.from,r,n]);this._active=!0,this._fn=t.fn||P_[t.type||typeof o],this._easing=gi[t.easing]||gi.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=s,this._from=o,this._to=n,this._promises=void 0}active(){return this._active}update(t,e,s){if(this._active){this._notify(!1);let n=this._target[this._prop],r=s-this._start,o=this._duration-r;this._start=s,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=Si([t.to,e,n,t.from]),this._from=Si([t.from,n,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){let e=t-this._start,s=this._duration,n=this._prop,r=this._from,o=this._loop,a=this._to,l;if(this._active=r!==a&&(o||e<s),!this._active){this._target[n]=a,this._notify(!0);return}if(e<0){this._target[n]=r;return}l=e/s%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[n]=this._fn(r,a,l)}wait(){let t=this._promises||(this._promises=[]);return new Promise((e,s)=>{t.push({res:e,rej:s})})}_notify(t){let e=t?"res":"rej",s=this._promises||[];for(let n=0;n<s.length;n++)s[n][e]()}},Zn=class{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!B(t))return;let e=Object.keys(X.animation),s=this._properties;Object.getOwnPropertyNames(t).forEach(n=>{let r=t[n];if(!B(r))return;let o={};for(let a of e)o[a]=r[a];(Q(r.properties)&&r.properties||[n]).forEach(a=>{(a===n||!s.has(a))&&s.set(a,o)})})}_animateOptions(t,e){let s=e.options,n=C_(t,s);if(!n)return[];let r=this._createAnimations(n,s);return s.$shared&&E_(t.options.$animations,s).then(()=>{t.options=s},()=>{}),r}_createAnimations(t,e){let s=this._properties,n=[],r=t.$animations||(t.$animations={}),o=Object.keys(e),a=Date.now(),l;for(l=o.length-1;l>=0;--l){let c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){n.push(...this._animateOptions(t,e));continue}let h=e[c],u=r[c],d=s.get(c);if(u)if(d&&u.active()){u.update(d,h,a);continue}else u.cancel();if(!d||!d.duration){t[c]=h;continue}r[c]=u=new el(d,t,c,h),n.push(u)}return n}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}let s=this._createAnimations(t,e);if(s.length)return pe.add(this._chart,s),!0}};function E_(i,t){let e=[],s=Object.keys(t);for(let n=0;n<s.length;n++){let r=i[s[n]];r&&r.active()&&e.push(r.wait())}return Promise.all(e)}function C_(i,t){if(!t)return;let e=i.options;if(!e){i.options=t;return}return e.$shared&&(i.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function Iu(i,t){let e=i&&i.options||{},s=e.reverse,n=e.min===void 0?t:0,r=e.max===void 0?t:0;return{start:s?r:n,end:s?n:r}}function O_(i,t,e){if(e===!1)return!1;let s=Iu(i,e),n=Iu(t,e);return{top:n.end,right:s.end,bottom:n.start,left:s.start}}function T_(i){let t,e,s,n;return B(i)?(t=i.top,e=i.right,s=i.bottom,n=i.left):t=e=s=n=i,{top:t,right:e,bottom:s,left:n,disabled:i===!1}}function Rd(i,t){let e=[],s=i._getSortedDatasetMetas(t),n,r;for(n=0,r=s.length;n<r;++n)e.push(s[n].index);return e}function Fu(i,t,e,s={}){let n=i.keys,r=s.mode==="single",o,a,l,c;if(t===null)return;let h=!1;for(o=0,a=n.length;o<a;++o){if(l=+n[o],l===e){if(h=!0,s.all)continue;break}c=i.values[l],nt(c)&&(r||t===0||Wt(t)===Wt(c))&&(t+=c)}return!h&&!s.all?0:t}function A_(i,t){let{iScale:e,vScale:s}=t,n=e.axis==="x"?"x":"y",r=s.axis==="x"?"x":"y",o=Object.keys(i),a=new Array(o.length),l,c,h;for(l=0,c=o.length;l<c;++l)h=o[l],a[l]={[n]:h,[r]:i[h]};return a}function Wa(i,t){let e=i&&i.options.stacked;return e||e===void 0&&t.stack!==void 0}function D_(i,t,e){return`${i.id}.${t.id}.${e.stack||e.type}`}function R_(i){let{min:t,max:e,minDefined:s,maxDefined:n}=i.getUserBounds();return{min:s?t:Number.NEGATIVE_INFINITY,max:n?e:Number.POSITIVE_INFINITY}}function I_(i,t,e){let s=i[t]||(i[t]={});return s[e]||(s[e]={})}function Lu(i,t,e,s){for(let n of t.getMatchingVisibleMetas(s).reverse()){let r=i[n.index];if(e&&r>0||!e&&r<0)return n.index}return null}function Nu(i,t){let{chart:e,_cachedMeta:s}=i,n=e._stacks||(e._stacks={}),{iScale:r,vScale:o,index:a}=s,l=r.axis,c=o.axis,h=D_(r,o,s),u=t.length,d;for(let f=0;f<u;++f){let p=t[f],{[l]:g,[c]:m}=p,_=p._stacks||(p._stacks={});d=_[c]=I_(n,h,g),d[a]=m,d._top=Lu(d,o,!0,s.type),d._bottom=Lu(d,o,!1,s.type);let v=d._visualValues||(d._visualValues={});v[a]=m}}function Va(i,t){let e=i.scales;return Object.keys(e).filter(s=>e[s].axis===t).shift()}function F_(i,t){return fe(i,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function L_(i,t,e){return fe(i,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function ks(i,t){let e=i.controller.index,s=i.vScale&&i.vScale.axis;if(s){t=t||i._parsed;for(let n of t){let r=n._stacks;if(!r||r[s]===void 0||r[s][e]===void 0)return;delete r[s][e],r[s]._visualValues!==void 0&&r[s]._visualValues[e]!==void 0&&delete r[s]._visualValues[e]}}}var Ua=i=>i==="reset"||i==="none",$u=(i,t)=>t?i:Object.assign({},i),N_=(i,t,e)=>i&&!t.hidden&&t._stacked&&{keys:Rd(e,!0),values:null},Le=(()=>{class i{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,s){this.chart=e,this._ctx=e.ctx,this.index=s,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){let e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Wa(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&ks(this._cachedMeta),this.index=e}linkScales(){let e=this.chart,s=this._cachedMeta,n=this.getDataset(),r=(d,f,p,g)=>d==="x"?f:d==="r"?g:p,o=s.xAxisID=F(n.xAxisID,Va(e,"x")),a=s.yAxisID=F(n.yAxisID,Va(e,"y")),l=s.rAxisID=F(n.rAxisID,Va(e,"r")),c=s.indexAxis,h=s.iAxisID=r(c,o,a,l),u=s.vAxisID=r(c,a,o,l);s.xScale=this.getScaleForId(o),s.yScale=this.getScaleForId(a),s.rScale=this.getScaleForId(l),s.iScale=this.getScaleForId(h),s.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){let s=this._cachedMeta;return e===s.iScale?s.vScale:s.iScale}reset(){this._update("reset")}_destroy(){let e=this._cachedMeta;this._data&&ya(this._data,this),e._stacked&&ks(e)}_dataCheck(){let e=this.getDataset(),s=e.data||(e.data=[]),n=this._data;if(B(s)){let r=this._cachedMeta;this._data=A_(s,r)}else if(n!==s){if(n){ya(n,this);let r=this._cachedMeta;ks(r),r._parsed=[]}s&&Object.isExtensible(s)&&pu(s,this),this._syncList=[],this._data=s}}addElements(){let e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){let s=this._cachedMeta,n=this.getDataset(),r=!1;this._dataCheck();let o=s._stacked;s._stacked=Wa(s.vScale,s),s.stack!==n.stack&&(r=!0,ks(s),s.stack=n.stack),this._resyncElements(e),(r||o!==s._stacked)&&(Nu(this,s._parsed),s._stacked=Wa(s.vScale,s))}configure(){let e=this.chart.config,s=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),s,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,s){let{_cachedMeta:n,_data:r}=this,{iScale:o,_stacked:a}=n,l=o.axis,c=e===0&&s===r.length?!0:n._sorted,h=e>0&&n._parsed[e-1],u,d,f;if(this._parsing===!1)n._parsed=r,n._sorted=!0,f=r;else{Q(r[e])?f=this.parseArrayData(n,r,e,s):B(r[e])?f=this.parseObjectData(n,r,e,s):f=this.parsePrimitiveData(n,r,e,s);let p=()=>d[l]===null||h&&d[l]<h[l];for(u=0;u<s;++u)n._parsed[u+e]=d=f[u],c&&(p()&&(c=!1),h=d);n._sorted=c}a&&Nu(this,f)}parsePrimitiveData(e,s,n,r){let{iScale:o,vScale:a}=e,l=o.axis,c=a.axis,h=o.getLabels(),u=o===a,d=new Array(r),f,p,g;for(f=0,p=r;f<p;++f)g=f+n,d[f]={[l]:u||o.parse(h[g],g),[c]:a.parse(s[g],g)};return d}parseArrayData(e,s,n,r){let{xScale:o,yScale:a}=e,l=new Array(r),c,h,u,d;for(c=0,h=r;c<h;++c)u=c+n,d=s[u],l[c]={x:o.parse(d[0],u),y:a.parse(d[1],u)};return l}parseObjectData(e,s,n,r){let{xScale:o,yScale:a}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,h=new Array(r),u,d,f,p;for(u=0,d=r;u<d;++u)f=u+n,p=s[f],h[u]={x:o.parse(de(p,l),f),y:a.parse(de(p,c),f)};return h}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,s,n){let r=this.chart,o=this._cachedMeta,a=s[e.axis],l={keys:Rd(r,!0),values:s._stacks[e.axis]._visualValues};return Fu(l,a,o.index,{mode:n})}updateRangeFromParsed(e,s,n,r){let o=n[s.axis],a=o===null?NaN:o,l=r&&n._stacks[s.axis];r&&l&&(r.values=l,a=Fu(r,o,this._cachedMeta.index)),e.min=Math.min(e.min,a),e.max=Math.max(e.max,a)}getMinMax(e,s){let n=this._cachedMeta,r=n._parsed,o=n._sorted&&e===n.iScale,a=r.length,l=this._getOtherScale(e),c=N_(s,n,this.chart),h={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:d}=R_(l),f,p;function g(){p=r[f];let m=p[l.axis];return!nt(p[e.axis])||u>m||d<m}for(f=0;f<a&&!(!g()&&(this.updateRangeFromParsed(h,e,p,c),o));++f);if(o){for(f=a-1;f>=0;--f)if(!g()){this.updateRangeFromParsed(h,e,p,c);break}}return h}getAllParsedValues(e){let s=this._cachedMeta._parsed,n=[],r,o,a;for(r=0,o=s.length;r<o;++r)a=s[r][e.axis],nt(a)&&n.push(a);return n}getMaxOverflow(){return!1}getLabelAndValue(e){let s=this._cachedMeta,n=s.iScale,r=s.vScale,o=this.getParsed(e);return{label:n?""+n.getLabelForValue(o[n.axis]):"",value:r?""+r.getLabelForValue(o[r.axis]):""}}_update(e){let s=this._cachedMeta;this.update(e||"default"),s._clip=T_(F(this.options.clip,O_(s.xScale,s.yScale,this.getMaxOverflow())))}update(e){}draw(){let e=this._ctx,s=this.chart,n=this._cachedMeta,r=n.data||[],o=s.chartArea,a=[],l=this._drawStart||0,c=this._drawCount||r.length-l,h=this.options.drawActiveElementsOnTop,u;for(n.dataset&&n.dataset.draw(e,o,l,c),u=l;u<l+c;++u){let d=r[u];d.hidden||(d.active&&h?a.push(d):d.draw(e,o))}for(u=0;u<a.length;++u)a[u].draw(e,o)}getStyle(e,s){let n=s?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,s,n){let r=this.getDataset(),o;if(e>=0&&e<this._cachedMeta.data.length){let a=this._cachedMeta.data[e];o=a.$context||(a.$context=L_(this.getContext(),e,a)),o.parsed=this.getParsed(e),o.raw=r.data[e],o.index=o.dataIndex=e}else o=this.$context||(this.$context=F_(this.chart.getContext(),this.index)),o.dataset=r,o.index=o.datasetIndex=this.index;return o.active=!!s,o.mode=n,o}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,s){return this._resolveElementOptions(this.dataElementType.id,s,e)}_resolveElementOptions(e,s="default",n){let r=s==="active",o=this._cachedDataOpts,a=e+"-"+s,l=o[a],c=this.enableOptionSharing&&bi(n);if(l)return $u(l,c);let h=this.chart.config,u=h.datasetElementScopeKeys(this._type,e),d=r?[`${e}Hover`,"hover",e,""]:[e,""],f=h.getOptionScopes(this.getDataset(),u),p=Object.keys(X.elements[e]),g=()=>this.getContext(n,r,s),m=h.resolveNamedOptions(f,p,g,d);return m.$shared&&(m.$shared=c,o[a]=Object.freeze($u(m,c))),m}_resolveAnimations(e,s,n){let r=this.chart,o=this._cachedDataOpts,a=`animation-${s}`,l=o[a];if(l)return l;let c;if(r.options.animation!==!1){let u=this.chart.config,d=u.datasetAnimationScopeKeys(this._type,s),f=u.getOptionScopes(this.getDataset(),d);c=u.createResolver(f,this.getContext(e,n,s))}let h=new Zn(r,c&&c.animations);return c&&c._cacheable&&(o[a]=Object.freeze(h)),h}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,s){return!s||Ua(e)||this.chart._animationsDisabled}_getSharedOptions(e,s){let n=this.resolveDataElementOptions(e,s),r=this._sharedOptions,o=this.getSharedOptions(n),a=this.includeOptions(s,o)||o!==r;return this.updateSharedOptions(o,s,n),{sharedOptions:o,includeOptions:a}}updateElement(e,s,n,r){Ua(r)?Object.assign(e,n):this._resolveAnimations(s,r).update(e,n)}updateSharedOptions(e,s,n){e&&!Ua(s)&&this._resolveAnimations(void 0,s).update(e,n)}_setStyle(e,s,n,r){e.active=r;let o=this.getStyle(s,r);this._resolveAnimations(s,n,r).update(e,{options:!r&&this.getSharedOptions(o)||o})}removeHoverStyle(e,s,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,s,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){let e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){let e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){let s=this._data,n=this._cachedMeta.data;for(let[l,c,h]of this._syncList)this[l](c,h);this._syncList=[];let r=n.length,o=s.length,a=Math.min(o,r);a&&this.parse(0,a),o>r?this._insertElements(r,o-r,e):o<r&&this._removeElements(o,r-o)}_insertElements(e,s,n=!0){let r=this._cachedMeta,o=r.data,a=e+s,l,c=h=>{for(h.length+=s,l=h.length-1;l>=a;l--)h[l]=h[l-s]};for(c(o),l=e;l<a;++l)o[l]=new this.dataElementType;this._parsing&&c(r._parsed),this.parse(e,s),n&&this.updateElements(o,e,s,"reset")}updateElements(e,s,n,r){}_removeElements(e,s){let n=this._cachedMeta;if(this._parsing){let r=n._parsed.splice(e,s);n._stacked&&ks(n,r)}n.data.splice(e,s)}_sync(e){if(this._parsing)this._syncList.push(e);else{let[s,n,r]=e;this[s](n,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){let e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,s){s&&this._sync(["_removeElements",e,s]);let n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return i})();function $_(i,t){if(!i._cache.$bar){let e=i.getMatchingVisibleMetas(t),s=[];for(let n=0,r=e.length;n<r;n++)s=s.concat(e[n].controller.getAllParsedValues(i));i._cache.$bar=wa(s.sort((n,r)=>n-r))}return i._cache.$bar}function B_(i){let t=i.iScale,e=$_(t,i.type),s=t._length,n,r,o,a,l=()=>{o===32767||o===-32768||(bi(a)&&(s=Math.min(s,Math.abs(o-a)||s)),a=o)};for(n=0,r=e.length;n<r;++n)o=t.getPixelForValue(e[n]),l();for(a=void 0,n=0,r=t.ticks.length;n<r;++n)o=t.getPixelForTick(n),l();return s}function z_(i,t,e,s){let n=e.barThickness,r,o;return N(n)?(r=t.min*e.categoryPercentage,o=e.barPercentage):(r=n*s,o=1),{chunk:r/s,ratio:o,start:t.pixels[i]-r/2}}function j_(i,t,e,s){let n=t.pixels,r=n[i],o=i>0?n[i-1]:null,a=i<n.length-1?n[i+1]:null,l=e.categoryPercentage;o===null&&(o=r-(a===null?t.end-t.start:a-r)),a===null&&(a=r+r-o);let c=r-(r-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/s,ratio:e.barPercentage,start:c}}function H_(i,t,e,s){let n=e.parse(i[0],s),r=e.parse(i[1],s),o=Math.min(n,r),a=Math.max(n,r),l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),t[e.axis]=c,t._custom={barStart:l,barEnd:c,start:n,end:r,min:o,max:a}}function Id(i,t,e,s){return Q(i)?H_(i,t,e,s):t[e.axis]=e.parse(i,s),t}function Bu(i,t,e,s){let n=i.iScale,r=i.vScale,o=n.getLabels(),a=n===r,l=[],c,h,u,d;for(c=e,h=e+s;c<h;++c)d=t[c],u={},u[n.axis]=a||n.parse(o[c],c),l.push(Id(d,u,r,c));return l}function qa(i){return i&&i.barStart!==void 0&&i.barEnd!==void 0}function W_(i,t,e){return i!==0?Wt(i):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}function V_(i){let t,e,s,n,r;return i.horizontal?(t=i.base>i.x,e="left",s="right"):(t=i.base<i.y,e="bottom",s="top"),t?(n="end",r="start"):(n="start",r="end"),{start:e,end:s,reverse:t,top:n,bottom:r}}function U_(i,t,e,s){let n=t.borderSkipped,r={};if(!n){i.borderSkipped=r;return}if(n===!0){i.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}let{start:o,end:a,reverse:l,top:c,bottom:h}=V_(i);n==="middle"&&e&&(i.enableBorderRadius=!0,(e._top||0)===s?n=c:(e._bottom||0)===s?n=h:(r[zu(h,o,a,l)]=!0,n=c)),r[zu(n,o,a,l)]=!0,i.borderSkipped=r}function zu(i,t,e,s){return s?(i=q_(i,t,e),i=ju(i,e,t)):i=ju(i,t,e),i}function q_(i,t,e){return i===t?e:i===e?t:i}function ju(i,t,e){return i==="start"?t:i==="end"?e:i}function Y_(i,{inflateAmount:t},e){i.inflateAmount=t==="auto"?e===1?.33:0:t}var G_=(()=>{class i extends Le{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,s,n,r){return Bu(e,s,n,r)}parseArrayData(e,s,n,r){return Bu(e,s,n,r)}parseObjectData(e,s,n,r){let{iScale:o,vScale:a}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,h=o.axis==="x"?l:c,u=a.axis==="x"?l:c,d=[],f,p,g,m;for(f=n,p=n+r;f<p;++f)m=s[f],g={},g[o.axis]=o.parse(de(m,h),f),d.push(Id(de(m,u),g,a,f));return d}updateRangeFromParsed(e,s,n,r){super.updateRangeFromParsed(e,s,n,r);let o=n._custom;o&&s===this._cachedMeta.vScale&&(e.min=Math.min(e.min,o.min),e.max=Math.max(e.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(e){let s=this._cachedMeta,{iScale:n,vScale:r}=s,o=this.getParsed(e),a=o._custom,l=qa(a)?"["+a.start+", "+a.end+"]":""+r.getLabelForValue(o[r.axis]);return{label:""+n.getLabelForValue(o[n.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize();let e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){let s=this._cachedMeta;this.updateElements(s.data,0,s.data.length,e)}updateElements(e,s,n,r){let o=r==="reset",{index:a,_cachedMeta:{vScale:l}}=this,c=l.getBasePixel(),h=l.isHorizontal(),u=this._getRuler(),{sharedOptions:d,includeOptions:f}=this._getSharedOptions(s,r);for(let p=s;p<s+n;p++){let g=this.getParsed(p),m=o||N(g[l.axis])?{base:c,head:c}:this._calculateBarValuePixels(p),_=this._calculateBarIndexPixels(p,u),v=(g._stacks||{})[l.axis],y={horizontal:h,base:m.base,enableBorderRadius:!v||qa(g._custom)||a===v._top||a===v._bottom,x:h?m.head:_.center,y:h?_.center:m.head,height:h?_.size:Math.abs(m.size),width:h?Math.abs(m.size):_.size};f&&(y.options=d||this.resolveDataElementOptions(p,e[p].active?"active":r));let w=y.options||e[p].options;U_(y,w,v,a),Y_(y,w,u.ratio),this.updateElement(e[p],p,y,r)}}_getStacks(e,s){let{iScale:n}=this._cachedMeta,r=n.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),o=n.options.stacked,a=[],l=this._cachedMeta.controller.getParsed(s),c=l&&l[n.axis],h=u=>{let d=u._parsed.find(p=>p[n.axis]===c),f=d&&d[u.vScale.axis];if(N(f)||isNaN(f))return!0};for(let u of r)if(!(s!==void 0&&h(u))&&((o===!1||a.indexOf(u.stack)===-1||o===void 0&&u.stack===void 0)&&a.push(u.stack),u.index===e))break;return a.length||a.push(void 0),a}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){let e=this.chart.scales,s=this.chart.options.indexAxis;return Object.keys(e).filter(n=>e[n].axis===s).shift()}_getAxis(){let e={},s=this.getFirstScaleIdForIndexAxis();for(let n of this.chart.data.datasets)e[F(this.chart.options.indexAxis==="x"?n.xAxisID:n.yAxisID,s)]=!0;return Object.keys(e)}_getStackIndex(e,s,n){let r=this._getStacks(e,n),o=s!==void 0?r.indexOf(s):-1;return o===-1?r.length-1:o}_getRuler(){let e=this.options,s=this._cachedMeta,n=s.iScale,r=[],o,a;for(o=0,a=s.data.length;o<a;++o)r.push(n.getPixelForValue(this.getParsed(o)[n.axis],o));let l=e.barThickness;return{min:l||B_(s),pixels:r,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:l?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){let{_cachedMeta:{vScale:s,_stacked:n,index:r},options:{base:o,minBarLength:a}}=this,l=o||0,c=this.getParsed(e),h=c._custom,u=qa(h),d=c[s.axis],f=0,p=n?this.applyStack(s,c,n):d,g,m;p!==d&&(f=p-d,p=d),u&&(d=h.barStart,p=h.barEnd-h.barStart,d!==0&&Wt(d)!==Wt(h.barEnd)&&(f=0),f+=d);let _=!N(o)&&!u?o:f,v=s.getPixelForValue(_);if(this.chart.getDataVisibility(e)?g=s.getPixelForValue(f+p):g=v,m=g-v,Math.abs(m)<a){m=W_(m,s,l)*a,d===l&&(v-=m/2);let y=s.getPixelForDecimal(0),w=s.getPixelForDecimal(1),b=Math.min(y,w),S=Math.max(y,w);v=Math.max(Math.min(v,S),b),g=v+m,n&&!u&&(c._stacks[s.axis]._visualValues[r]=s.getValueForPixel(g)-s.getValueForPixel(v))}if(v===s.getPixelForValue(l)){let y=Wt(m)*s.getLineWidthForValue(l)/2;v+=y,m-=y}return{size:m,base:v,head:g,center:g+m/2}}_calculateBarIndexPixels(e,s){let n=s.scale,r=this.options,o=r.skipNull,a=F(r.maxBarThickness,1/0),l,c,h=this._getAxisCount();if(s.grouped){let u=o?this._getStackCount(e):s.stackCount,d=r.barThickness==="flex"?j_(e,s,r,u*h):z_(e,s,r,u*h),f=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,p=this._getAxis().indexOf(F(f,this.getFirstScaleIdForIndexAxis())),g=this._getStackIndex(this.index,this._cachedMeta.stack,o?e:void 0)+p;l=d.start+d.chunk*g+d.chunk/2,c=Math.min(a,d.chunk*d.ratio)}else l=n.getPixelForValue(this.getParsed(e)[n.axis],e),c=Math.min(a,s.min*s.ratio);return{base:l-c/2,head:l+c/2,center:l,size:c}}draw(){let e=this._cachedMeta,s=e.vScale,n=e.data,r=n.length,o=0;for(;o<r;++o)this.getParsed(o)[s.axis]!==null&&!n[o].hidden&&n[o].draw(this._ctx)}}return i})(),X_=(()=>{class i extends Le{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,s,n,r){let o=super.parsePrimitiveData(e,s,n,r);for(let a=0;a<o.length;a++)o[a]._custom=this.resolveDataElementOptions(a+n).radius;return o}parseArrayData(e,s,n,r){let o=super.parseArrayData(e,s,n,r);for(let a=0;a<o.length;a++){let l=s[n+a];o[a]._custom=F(l[2],this.resolveDataElementOptions(a+n).radius)}return o}parseObjectData(e,s,n,r){let o=super.parseObjectData(e,s,n,r);for(let a=0;a<o.length;a++){let l=s[n+a];o[a]._custom=F(l&&l.r&&+l.r,this.resolveDataElementOptions(a+n).radius)}return o}getMaxOverflow(){let e=this._cachedMeta.data,s=0;for(let n=e.length-1;n>=0;--n)s=Math.max(s,e[n].size(this.resolveDataElementOptions(n))/2);return s>0&&s}getLabelAndValue(e){let s=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:o}=s,a=this.getParsed(e),l=r.getLabelForValue(a.x),c=o.getLabelForValue(a.y),h=a._custom;return{label:n[e]||"",value:"("+l+", "+c+(h?", "+h:"")+")"}}update(e){let s=this._cachedMeta.data;this.updateElements(s,0,s.length,e)}updateElements(e,s,n,r){let o=r==="reset",{iScale:a,vScale:l}=this._cachedMeta,{sharedOptions:c,includeOptions:h}=this._getSharedOptions(s,r),u=a.axis,d=l.axis;for(let f=s;f<s+n;f++){let p=e[f],g=!o&&this.getParsed(f),m={},_=m[u]=o?a.getPixelForDecimal(.5):a.getPixelForValue(g[u]),v=m[d]=o?l.getBasePixel():l.getPixelForValue(g[d]);m.skip=isNaN(_)||isNaN(v),h&&(m.options=c||this.resolveDataElementOptions(f,p.active?"active":r),o&&(m.options.radius=0)),this.updateElement(p,f,m,r)}}resolveDataElementOptions(e,s){let n=this.getParsed(e),r=super.resolveDataElementOptions(e,s);r.$shared&&(r=Object.assign({},r,{$shared:!1}));let o=r.radius;return s!=="active"&&(r.radius=0),r.radius+=F(n&&n._custom,o),r}}return i})();function K_(i,t,e){let s=1,n=1,r=0,o=0;if(t<tt){let a=i,l=a+t,c=Math.cos(a),h=Math.sin(a),u=Math.cos(l),d=Math.sin(l),f=(y,w,b)=>yi(y,a,l,!0)?1:Math.max(w,w*e,b,b*e),p=(y,w,b)=>yi(y,a,l,!0)?-1:Math.min(w,w*e,b,b*e),g=f(0,c,u),m=f(ot,h,d),_=p(z,c,u),v=p(z+ot,h,d);s=(g-_)/2,n=(m-v)/2,r=-(g+_)/2,o=-(m+v)/2}return{ratioX:s,ratioY:n,offsetX:r,offsetY:o}}var yl=(()=>{class i extends Le{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){let s=e.data,{labels:{pointStyle:n,textAlign:r,color:o,useBorderRadius:a,borderRadius:l}}=e.legend.options;return s.labels.length&&s.datasets.length?s.labels.map((c,h)=>{let d=e.getDatasetMeta(0).controller.getStyle(h);return{text:c,fillStyle:d.backgroundColor,fontColor:o,hidden:!e.getDataVisibility(h),lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:d.borderWidth,strokeStyle:d.borderColor,textAlign:r,pointStyle:n,borderRadius:a&&(l||d.borderRadius),index:h}}):[]}},onClick(e,s,n){n.chart.toggleDataVisibility(s.index),n.chart.update()}}}};constructor(e,s){super(e,s),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,s){let n=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=n;else{let o=c=>+n[c];if(B(n[e])){let{key:c="value"}=this._parsing;o=h=>+de(n[h],c)}let a,l;for(a=e,l=e+s;a<l;++a)r._parsed[a]=o(a)}}_getRotation(){return $t(this.options.rotation-90)}_getCircumference(){return $t(this.options.circumference)}_getRotationExtents(){let e=tt,s=-tt;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){let r=this.chart.getDatasetMeta(n).controller,o=r._getRotation(),a=r._getCircumference();e=Math.min(e,o),s=Math.max(s,o+a)}return{rotation:e,circumference:s-e}}update(e){let s=this.chart,{chartArea:n}=s,r=this._cachedMeta,o=r.data,a=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,l=Math.max((Math.min(n.width,n.height)-a)/2,0),c=Math.min(ru(this.options.cutout,l),1),h=this._getRingWeight(this.index),{circumference:u,rotation:d}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:g,offsetY:m}=K_(d,u,c),_=(n.width-a)/f,v=(n.height-a)/p,y=Math.max(Math.min(_,v)/2,0),w=ga(this.options.radius,y),b=Math.max(w*c,0),S=(w-b)/this._getVisibleDatasetWeightTotal();this.offsetX=g*w,this.offsetY=m*w,r.total=this.calculateTotal(),this.outerRadius=w-S*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-S*h,0),this.updateElements(o,0,o.length,e)}_circumference(e,s){let n=this.options,r=this._cachedMeta,o=this._getCircumference();return s&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||r._parsed[e]===null||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*o/tt)}updateElements(e,s,n,r){let o=r==="reset",a=this.chart,l=a.chartArea,h=a.options.animation,u=(l.left+l.right)/2,d=(l.top+l.bottom)/2,f=o&&h.animateScale,p=f?0:this.innerRadius,g=f?0:this.outerRadius,{sharedOptions:m,includeOptions:_}=this._getSharedOptions(s,r),v=this._getRotation(),y;for(y=0;y<s;++y)v+=this._circumference(y,o);for(y=s;y<s+n;++y){let w=this._circumference(y,o),b=e[y],S={x:u+this.offsetX,y:d+this.offsetY,startAngle:v,endAngle:v+w,circumference:w,outerRadius:g,innerRadius:p};_&&(S.options=m||this.resolveDataElementOptions(y,b.active?"active":r)),v+=w,this.updateElement(b,y,S,r)}}calculateTotal(){let e=this._cachedMeta,s=e.data,n=0,r;for(r=0;r<s.length;r++){let o=e._parsed[r];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(r)&&!s[r].hidden&&(n+=Math.abs(o))}return n}calculateCircumference(e){let s=this._cachedMeta.total;return s>0&&!isNaN(e)?tt*(Math.abs(e)/s):0}getLabelAndValue(e){let s=this._cachedMeta,n=this.chart,r=n.data.labels||[],o=wi(s._parsed[e],n.options.locale);return{label:r[e]||"",value:o}}getMaxBorderWidth(e){let s=0,n=this.chart,r,o,a,l,c;if(!e){for(r=0,o=n.data.datasets.length;r<o;++r)if(n.isDatasetVisible(r)){a=n.getDatasetMeta(r),e=a.data,l=a.controller;break}}if(!e)return 0;for(r=0,o=e.length;r<o;++r)c=l.resolveDataElementOptions(r),c.borderAlign!=="inner"&&(s=Math.max(s,c.borderWidth||0,c.hoverBorderWidth||0));return s}getMaxOffset(e){let s=0;for(let n=0,r=e.length;n<r;++n){let o=this.resolveDataElementOptions(n);s=Math.max(s,o.offset||0,o.hoverOffset||0)}return s}_getRingWeightOffset(e){let s=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(s+=this._getRingWeight(n));return s}_getRingWeight(e){return Math.max(F(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}return i})(),Z_=(()=>{class i extends Le{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){let s=this._cachedMeta,{dataset:n,data:r=[],_dataset:o}=s,a=this.chart._animationsDisabled,{start:l,count:c}=Ma(s,r,a);this._drawStart=l,this._drawCount=c,Pa(s)&&(l=0,c=r.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!o._decimated,n.points=r;let h=this.resolveDatasetElementOptions(e);this.options.showLine||(h.borderWidth=0),h.segment=this.options.segment,this.updateElement(n,void 0,{animated:!a,options:h},e),this.updateElements(r,l,c,e)}updateElements(e,s,n,r){let o=r==="reset",{iScale:a,vScale:l,_stacked:c,_dataset:h}=this._cachedMeta,{sharedOptions:u,includeOptions:d}=this._getSharedOptions(s,r),f=a.axis,p=l.axis,{spanGaps:g,segment:m}=this.options,_=Ke(g)?g:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||o||r==="none",y=s+n,w=e.length,b=s>0&&this.getParsed(s-1);for(let S=0;S<w;++S){let M=e[S],k=v?M:{};if(S<s||S>=y){k.skip=!0;continue}let O=this.getParsed(S),A=N(O[p]),D=k[f]=a.getPixelForValue(O[f],S),I=k[p]=o||A?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,O,c):O[p],S);k.skip=isNaN(D)||isNaN(I)||A,k.stop=S>0&&Math.abs(O[f]-b[f])>_,m&&(k.parsed=O,k.raw=h.data[S]),d&&(k.options=u||this.resolveDataElementOptions(S,M.active?"active":r)),v||this.updateElement(M,S,k,r),b=O}}getMaxOverflow(){let e=this._cachedMeta,s=e.dataset,n=s.options&&s.options.borderWidth||0,r=e.data||[];if(!r.length)return n;let o=r[0].size(this.resolveDataElementOptions(0)),a=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(n,o,a)/2}draw(){let e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}return i})(),Fd=(()=>{class i extends Le{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){let s=e.data;if(s.labels.length&&s.datasets.length){let{labels:{pointStyle:n,color:r}}=e.legend.options;return s.labels.map((o,a)=>{let c=e.getDatasetMeta(0).controller.getStyle(a);return{text:o,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:r,lineWidth:c.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(a),index:a}})}return[]}},onClick(e,s,n){n.chart.toggleDataVisibility(s.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(e,s){super(e,s),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){let s=this._cachedMeta,n=this.chart,r=n.data.labels||[],o=wi(s._parsed[e].r,n.options.locale);return{label:r[e]||"",value:o}}parseObjectData(e,s,n,r){return Fa.bind(this)(e,s,n,r)}update(e){let s=this._cachedMeta.data;this._updateRadius(),this.updateElements(s,0,s.length,e)}getMinMax(){let e=this._cachedMeta,s={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((n,r)=>{let o=this.getParsed(r).r;!isNaN(o)&&this.chart.getDataVisibility(r)&&(o<s.min&&(s.min=o),o>s.max&&(s.max=o))}),s}_updateRadius(){let e=this.chart,s=e.chartArea,n=e.options,r=Math.min(s.right-s.left,s.bottom-s.top),o=Math.max(r/2,0),a=Math.max(n.cutoutPercentage?o/100*n.cutoutPercentage:1,0),l=(o-a)/e.getVisibleDatasetCount();this.outerRadius=o-l*this.index,this.innerRadius=this.outerRadius-l}updateElements(e,s,n,r){let o=r==="reset",a=this.chart,c=a.options.animation,h=this._cachedMeta.rScale,u=h.xCenter,d=h.yCenter,f=h.getIndexAngle(0)-.5*z,p=f,g,m=360/this.countVisibleElements();for(g=0;g<s;++g)p+=this._computeAngle(g,r,m);for(g=s;g<s+n;g++){let _=e[g],v=p,y=p+this._computeAngle(g,r,m),w=a.getDataVisibility(g)?h.getDistanceFromCenterForValue(this.getParsed(g).r):0;p=y,o&&(c.animateScale&&(w=0),c.animateRotate&&(v=y=f));let b={x:u,y:d,innerRadius:0,outerRadius:w,startAngle:v,endAngle:y,options:this.resolveDataElementOptions(g,_.active?"active":r)};this.updateElement(_,g,b,r)}}countVisibleElements(){let e=this._cachedMeta,s=0;return e.data.forEach((n,r)=>{!isNaN(this.getParsed(r).r)&&this.chart.getDataVisibility(r)&&s++}),s}_computeAngle(e,s,n){return this.chart.getDataVisibility(e)?$t(this.resolveDataElementOptions(e,s).angle||n):0}}return i})(),J_=(()=>{class i extends yl{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}return i})(),Q_=(()=>{class i extends Le{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(e){let s=this._cachedMeta.vScale,n=this.getParsed(e);return{label:s.getLabels()[e],value:""+s.getLabelForValue(n[s.axis])}}parseObjectData(e,s,n,r){return Fa.bind(this)(e,s,n,r)}update(e){let s=this._cachedMeta,n=s.dataset,r=s.data||[],o=s.iScale.getLabels();if(n.points=r,e!=="resize"){let a=this.resolveDatasetElementOptions(e);this.options.showLine||(a.borderWidth=0);let l={_loop:!0,_fullLoop:o.length===r.length,options:a};this.updateElement(n,void 0,l,e)}this.updateElements(r,0,r.length,e)}updateElements(e,s,n,r){let o=this._cachedMeta.rScale,a=r==="reset";for(let l=s;l<s+n;l++){let c=e[l],h=this.resolveDataElementOptions(l,c.active?"active":r),u=o.getPointPositionForValue(l,this.getParsed(l).r),d=a?o.xCenter:u.x,f=a?o.yCenter:u.y,p={x:d,y:f,angle:u.angle,skip:isNaN(d)||isNaN(f),options:h};this.updateElement(c,l,p,r)}}}return i})(),tv=(()=>{class i extends Le{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(e){let s=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:o}=s,a=this.getParsed(e),l=r.getLabelForValue(a.x),c=o.getLabelForValue(a.y);return{label:n[e]||"",value:"("+l+", "+c+")"}}update(e){let s=this._cachedMeta,{data:n=[]}=s,r=this.chart._animationsDisabled,{start:o,count:a}=Ma(s,n,r);if(this._drawStart=o,this._drawCount=a,Pa(s)&&(o=0,a=n.length),this.options.showLine){this.datasetElementType||this.addElements();let{dataset:l,_dataset:c}=s;l._chart=this.chart,l._datasetIndex=this.index,l._decimated=!!c._decimated,l.points=n;let h=this.resolveDatasetElementOptions(e);h.segment=this.options.segment,this.updateElement(l,void 0,{animated:!r,options:h},e)}else this.datasetElementType&&(delete s.dataset,this.datasetElementType=!1);this.updateElements(n,o,a,e)}addElements(){let{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,s,n,r){let o=r==="reset",{iScale:a,vScale:l,_stacked:c,_dataset:h}=this._cachedMeta,u=this.resolveDataElementOptions(s,r),d=this.getSharedOptions(u),f=this.includeOptions(r,d),p=a.axis,g=l.axis,{spanGaps:m,segment:_}=this.options,v=Ke(m)?m:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||o||r==="none",w=s>0&&this.getParsed(s-1);for(let b=s;b<s+n;++b){let S=e[b],M=this.getParsed(b),k=y?S:{},O=N(M[g]),A=k[p]=a.getPixelForValue(M[p],b),D=k[g]=o||O?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,M,c):M[g],b);k.skip=isNaN(A)||isNaN(D)||O,k.stop=b>0&&Math.abs(M[p]-w[p])>v,_&&(k.parsed=M,k.raw=h.data[b]),f&&(k.options=d||this.resolveDataElementOptions(b,S.active?"active":r)),y||this.updateElement(S,b,k,r),w=M}this.updateSharedOptions(d,r,u)}getMaxOverflow(){let e=this._cachedMeta,s=e.data||[];if(!this.options.showLine){let l=0;for(let c=s.length-1;c>=0;--c)l=Math.max(l,s[c].size(this.resolveDataElementOptions(c))/2);return l>0&&l}let n=e.dataset,r=n.options&&n.options.borderWidth||0;if(!s.length)return r;let o=s[0].size(this.resolveDataElementOptions(0)),a=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(r,o,a)/2}}return i})(),ev=Object.freeze({__proto__:null,BarController:G_,BubbleController:X_,DoughnutController:yl,LineController:Z_,PieController:J_,PolarAreaController:Fd,RadarController:Q_,ScatterController:tv});function Je(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var il=class i{static override(t){Object.assign(i.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return Je()}parse(){return Je()}format(){return Je()}add(){return Je()}diff(){return Je()}startOf(){return Je()}endOf(){return Je()}},iv={_date:il};function sv(i,t,e,s){let{controller:n,data:r,_sorted:o}=i,a=n._cachedMeta.iScale,l=i.dataset&&i.dataset.options?i.dataset.options.spanGaps:null;if(a&&t===a.axis&&t!=="r"&&o&&r.length){let c=a._reversePixels?uu:Yt;if(s){if(n._sharedOptions){let h=r[0],u=typeof h.getRange=="function"&&h.getRange(t);if(u){let d=c(r,t,e-u),f=c(r,t,e+u);return{lo:d.lo,hi:f.hi}}}}else{let h=c(r,t,e);if(l){let{vScale:u}=n._cachedMeta,{_parsed:d}=i,f=d.slice(0,h.lo+1).reverse().findIndex(g=>!N(g[u.axis]));h.lo-=Math.max(0,f);let p=d.slice(h.hi).findIndex(g=>!N(g[u.axis]));h.hi+=Math.max(0,p)}return h}}return{lo:0,hi:r.length-1}}function Rs(i,t,e,s,n){let r=i.getSortedVisibleDatasetMetas(),o=e[t];for(let a=0,l=r.length;a<l;++a){let{index:c,data:h}=r[a],{lo:u,hi:d}=sv(r[a],t,o,n);for(let f=u;f<=d;++f){let p=h[f];p.skip||s(p,c,f)}}}function nv(i){let t=i.indexOf("x")!==-1,e=i.indexOf("y")!==-1;return function(s,n){let r=t?Math.abs(s.x-n.x):0,o=e?Math.abs(s.y-n.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function Ya(i,t,e,s,n){let r=[];return!n&&!i.isPointInArea(t)||Rs(i,e,t,function(a,l,c){!n&&!Gt(a,i.chartArea,0)||a.inRange(t.x,t.y,s)&&r.push({element:a,datasetIndex:l,index:c})},!0),r}function rv(i,t,e,s){let n=[];function r(o,a,l){let{startAngle:c,endAngle:h}=o.getProps(["startAngle","endAngle"],s),{angle:u}=xa(o,{x:t.x,y:t.y});yi(u,c,h)&&n.push({element:o,datasetIndex:a,index:l})}return Rs(i,e,t,r),n}function ov(i,t,e,s,n,r){let o=[],a=nv(e),l=Number.POSITIVE_INFINITY;function c(h,u,d){let f=h.inRange(t.x,t.y,n);if(s&&!f)return;let p=h.getCenterPoint(n);if(!(!!r||i.isPointInArea(p))&&!f)return;let m=a(t,p);m<l?(o=[{element:h,datasetIndex:u,index:d}],l=m):m===l&&o.push({element:h,datasetIndex:u,index:d})}return Rs(i,e,t,c),o}function Ga(i,t,e,s,n,r){return!r&&!i.isPointInArea(t)?[]:e==="r"&&!s?rv(i,t,e,n):ov(i,t,e,s,n,r)}function Hu(i,t,e,s,n){let r=[],o=e==="x"?"inXRange":"inYRange",a=!1;return Rs(i,e,t,(l,c,h)=>{l[o]&&l[o](t[e],n)&&(r.push({element:l,datasetIndex:c,index:h}),a=a||l.inRange(t.x,t.y,n))}),s&&!a?[]:r}var av={evaluateInteractionItems:Rs,modes:{index(i,t,e,s){let n=Ie(t,i),r=e.axis||"x",o=e.includeInvisible||!1,a=e.intersect?Ya(i,n,r,s,o):Ga(i,n,r,!1,s,o),l=[];return a.length?(i.getSortedVisibleDatasetMetas().forEach(c=>{let h=a[0].index,u=c.data[h];u&&!u.skip&&l.push({element:u,datasetIndex:c.index,index:h})}),l):[]},dataset(i,t,e,s){let n=Ie(t,i),r=e.axis||"xy",o=e.includeInvisible||!1,a=e.intersect?Ya(i,n,r,s,o):Ga(i,n,r,!1,s,o);if(a.length>0){let l=a[0].datasetIndex,c=i.getDatasetMeta(l).data;a=[];for(let h=0;h<c.length;++h)a.push({element:c[h],datasetIndex:l,index:h})}return a},point(i,t,e,s){let n=Ie(t,i),r=e.axis||"xy",o=e.includeInvisible||!1;return Ya(i,n,r,s,o)},nearest(i,t,e,s){let n=Ie(t,i),r=e.axis||"xy",o=e.includeInvisible||!1;return Ga(i,n,r,e.intersect,s,o)},x(i,t,e,s){let n=Ie(t,i);return Hu(i,n,"x",e.intersect,s)},y(i,t,e,s){let n=Ie(t,i);return Hu(i,n,"y",e.intersect,s)}}},Ld=["left","top","right","bottom"];function Ss(i,t){return i.filter(e=>e.pos===t)}function Wu(i,t){return i.filter(e=>Ld.indexOf(e.pos)===-1&&e.box.axis===t)}function Ms(i,t){return i.sort((e,s)=>{let n=t?s:e,r=t?e:s;return n.weight===r.weight?n.index-r.index:n.weight-r.weight})}function lv(i){let t=[],e,s,n,r,o,a;for(e=0,s=(i||[]).length;e<s;++e)n=i[e],{position:r,options:{stack:o,stackWeight:a=1}}=n,t.push({index:e,box:n,pos:r,horizontal:n.isHorizontal(),weight:n.weight,stack:o&&r+o,stackWeight:a});return t}function cv(i){let t={};for(let e of i){let{stack:s,pos:n,stackWeight:r}=e;if(!s||!Ld.includes(n))continue;let o=t[s]||(t[s]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return t}function hv(i,t){let e=cv(i),{vBoxMaxWidth:s,hBoxMaxHeight:n}=t,r,o,a;for(r=0,o=i.length;r<o;++r){a=i[r];let{fullSize:l}=a.box,c=e[a.stack],h=c&&a.stackWeight/c.weight;a.horizontal?(a.width=h?h*s:l&&t.availableWidth,a.height=n):(a.width=s,a.height=h?h*n:l&&t.availableHeight)}return e}function uv(i){let t=lv(i),e=Ms(t.filter(c=>c.box.fullSize),!0),s=Ms(Ss(t,"left"),!0),n=Ms(Ss(t,"right")),r=Ms(Ss(t,"top"),!0),o=Ms(Ss(t,"bottom")),a=Wu(t,"x"),l=Wu(t,"y");return{fullSize:e,leftAndTop:s.concat(r),rightAndBottom:n.concat(l).concat(o).concat(a),chartArea:Ss(t,"chartArea"),vertical:s.concat(n).concat(l),horizontal:r.concat(o).concat(a)}}function Vu(i,t,e,s){return Math.max(i[e],t[e])+Math.max(i[s],t[s])}function Nd(i,t){i.top=Math.max(i.top,t.top),i.left=Math.max(i.left,t.left),i.bottom=Math.max(i.bottom,t.bottom),i.right=Math.max(i.right,t.right)}function dv(i,t,e,s){let{pos:n,box:r}=e,o=i.maxPadding;if(!B(n)){e.size&&(i[n]-=e.size);let u=s[e.stack]||{size:0,count:1};u.size=Math.max(u.size,e.horizontal?r.height:r.width),e.size=u.size/u.count,i[n]+=e.size}r.getPadding&&Nd(o,r.getPadding());let a=Math.max(0,t.outerWidth-Vu(o,i,"left","right")),l=Math.max(0,t.outerHeight-Vu(o,i,"top","bottom")),c=a!==i.w,h=l!==i.h;return i.w=a,i.h=l,e.horizontal?{same:c,other:h}:{same:h,other:c}}function fv(i){let t=i.maxPadding;function e(s){let n=Math.max(t[s]-i[s],0);return i[s]+=n,n}i.y+=e("top"),i.x+=e("left"),e("right"),e("bottom")}function pv(i,t){let e=t.maxPadding;function s(n){let r={left:0,top:0,right:0,bottom:0};return n.forEach(o=>{r[o]=Math.max(t[o],e[o])}),r}return s(i?["left","right"]:["top","bottom"])}function Cs(i,t,e,s){let n=[],r,o,a,l,c,h;for(r=0,o=i.length,c=0;r<o;++r){a=i[r],l=a.box,l.update(a.width||t.w,a.height||t.h,pv(a.horizontal,t));let{same:u,other:d}=dv(t,e,a,s);c|=u&&n.length,h=h||d,l.fullSize||n.push(a)}return c&&Cs(n,t,e,s)||h}function Wn(i,t,e,s,n){i.top=e,i.left=t,i.right=t+s,i.bottom=e+n,i.width=s,i.height=n}function Uu(i,t,e,s){let n=e.padding,{x:r,y:o}=t;for(let a of i){let l=a.box,c=s[a.stack]||{count:1,placed:0,weight:1},h=a.stackWeight/c.weight||1;if(a.horizontal){let u=t.w*h,d=c.size||l.height;bi(c.start)&&(o=c.start),l.fullSize?Wn(l,n.left,o,e.outerWidth-n.right-n.left,d):Wn(l,t.left+c.placed,o,u,d),c.start=o,c.placed+=u,o=l.bottom}else{let u=t.h*h,d=c.size||l.width;bi(c.start)&&(r=c.start),l.fullSize?Wn(l,r,n.top,d,e.outerHeight-n.bottom-n.top):Wn(l,r,t.top+c.placed,d,u),c.start=r,c.placed+=u,r=l.right}}t.x=r,t.y=o}var kt={addBox(i,t){i.boxes||(i.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},i.boxes.push(t)},removeBox(i,t){let e=i.boxes?i.boxes.indexOf(t):-1;e!==-1&&i.boxes.splice(e,1)},configure(i,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(i,t,e,s){if(!i)return;let n=yt(i.options.layout.padding),r=Math.max(t-n.width,0),o=Math.max(e-n.height,0),a=uv(i.boxes),l=a.vertical,c=a.horizontal;U(i.boxes,g=>{typeof g.beforeLayout=="function"&&g.beforeLayout()});let h=l.reduce((g,m)=>m.box.options&&m.box.options.display===!1?g:g+1,0)||1,u=Object.freeze({outerWidth:t,outerHeight:e,padding:n,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/h,hBoxMaxHeight:o/2}),d=Object.assign({},n);Nd(d,yt(s));let f=Object.assign({maxPadding:d,w:r,h:o,x:n.left,y:n.top},n),p=hv(l.concat(c),u);Cs(a.fullSize,f,u,p),Cs(l,f,u,p),Cs(c,f,u,p)&&Cs(l,f,u,p),fv(f),Uu(a.leftAndTop,f,u,p),f.x+=f.w,f.y+=f.h,Uu(a.rightAndBottom,f,u,p),i.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},U(a.chartArea,g=>{let m=g.box;Object.assign(m,i.chartArea),m.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}},Jn=class{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,s){}removeEventListener(t,e,s){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,s,n){return e=Math.max(0,e||t.width),s=s||t.height,{width:e,height:Math.max(0,n?Math.floor(e/n):s)}}isAttached(t){return!0}updateConfig(t){}},sl=class extends Jn{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}},Xn="$chartjs",gv={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},qu=i=>i===null||i==="";function mv(i,t){let e=i.style,s=i.getAttribute("height"),n=i.getAttribute("width");if(i[Xn]={initial:{height:s,width:n,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",qu(n)){let r=Na(i,"width");r!==void 0&&(i.width=r)}if(qu(s))if(i.style.height==="")i.height=i.width/(t||2);else{let r=Na(i,"height");r!==void 0&&(i.height=r)}return i}var $d=Cu?{passive:!0}:!1;function _v(i,t,e){i&&i.addEventListener(t,e,$d)}function vv(i,t,e){i&&i.canvas&&i.canvas.removeEventListener(t,e,$d)}function bv(i,t){let e=gv[i.type]||i.type,{x:s,y:n}=Ie(i,t);return{type:e,chart:t,native:i,x:s!==void 0?s:null,y:n!==void 0?n:null}}function Qn(i,t){for(let e of i)if(e===t||e.contains(t))return!0}function xv(i,t,e){let s=i.canvas,n=new MutationObserver(r=>{let o=!1;for(let a of r)o=o||Qn(a.addedNodes,s),o=o&&!Qn(a.removedNodes,s);o&&e()});return n.observe(document,{childList:!0,subtree:!0}),n}function yv(i,t,e){let s=i.canvas,n=new MutationObserver(r=>{let o=!1;for(let a of r)o=o||Qn(a.removedNodes,s),o=o&&!Qn(a.addedNodes,s);o&&e()});return n.observe(document,{childList:!0,subtree:!0}),n}var Ts=new Map,Yu=0;function Bd(){let i=window.devicePixelRatio;i!==Yu&&(Yu=i,Ts.forEach((t,e)=>{e.currentDevicePixelRatio!==i&&t()}))}function wv(i,t){Ts.size||window.addEventListener("resize",Bd),Ts.set(i,t)}function kv(i){Ts.delete(i),Ts.size||window.removeEventListener("resize",Bd)}function Sv(i,t,e){let s=i.canvas,n=s&&jn(s);if(!n)return;let r=Sa((a,l)=>{let c=n.clientWidth;e(a,l),c<n.clientWidth&&e()},window),o=new ResizeObserver(a=>{let l=a[0],c=l.contentRect.width,h=l.contentRect.height;c===0&&h===0||r(c,h)});return o.observe(n),wv(i,r),o}function Xa(i,t,e){e&&e.disconnect(),t==="resize"&&kv(i)}function Mv(i,t,e){let s=i.canvas,n=Sa(r=>{i.ctx!==null&&e(bv(r,i))},i);return _v(s,t,n),n}var nl=class extends Jn{acquireContext(t,e){let s=t&&t.getContext&&t.getContext("2d");return s&&s.canvas===t?(mv(t,e),s):null}releaseContext(t){let e=t.canvas;if(!e[Xn])return!1;let s=e[Xn].initial;["height","width"].forEach(r=>{let o=s[r];N(o)?e.removeAttribute(r):e.setAttribute(r,o)});let n=s.style||{};return Object.keys(n).forEach(r=>{e.style[r]=n[r]}),e.width=e.width,delete e[Xn],!0}addEventListener(t,e,s){this.removeEventListener(t,e);let n=t.$proxies||(t.$proxies={}),o={attach:xv,detach:yv,resize:Sv}[e]||Mv;n[e]=o(t,e,s)}removeEventListener(t,e){let s=t.$proxies||(t.$proxies={}),n=s[e];if(!n)return;({attach:Xa,detach:Xa,resize:Xa}[e]||vv)(t,e,n),s[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,s,n){return Eu(t,e,s,n)}isAttached(t){let e=t&&jn(t);return!!(e&&e.isConnected)}};function Pv(i){return!zn()||typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas?sl:nl}var Vt=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){let{x:e,y:s}=this.getProps(["x","y"],t);return{x:e,y:s}}hasValue(){return Ke(this.x)&&Ke(this.y)}getProps(t,e){let s=this.$animations;if(!e||!s)return this;let n={};return t.forEach(r=>{n[r]=s[r]&&s[r].active()?s[r]._to:this[r]}),n}};function Ev(i,t){let e=i.options.ticks,s=Cv(i),n=Math.min(e.maxTicksLimit||s,s),r=e.major.enabled?Tv(t):[],o=r.length,a=r[0],l=r[o-1],c=[];if(o>n)return Av(t,c,r,o/n),c;let h=Ov(r,t,n);if(o>0){let u,d,f=o>1?Math.round((l-a)/(o-1)):null;for(Vn(t,c,h,N(f)?0:a-f,a),u=0,d=o-1;u<d;u++)Vn(t,c,h,r[u],r[u+1]);return Vn(t,c,h,l,N(f)?t.length:l+f),c}return Vn(t,c,h),c}function Cv(i){let t=i.options.offset,e=i._tickSize(),s=i._length/e+(t?0:1),n=i._maxLength/e;return Math.floor(Math.min(s,n))}function Ov(i,t,e){let s=Dv(i),n=t.length/e;if(!s)return Math.max(n,1);let r=lu(s);for(let o=0,a=r.length-1;o<a;o++){let l=r[o];if(l>n)return l}return Math.max(n,1)}function Tv(i){let t=[],e,s;for(e=0,s=i.length;e<s;e++)i[e].major&&t.push(e);return t}function Av(i,t,e,s){let n=0,r=e[0],o;for(s=Math.ceil(s),o=0;o<i.length;o++)o===r&&(t.push(i[o]),n++,r=e[n*s])}function Vn(i,t,e,s,n){let r=F(s,0),o=Math.min(F(n,i.length),i.length),a=0,l,c,h;for(e=Math.ceil(e),n&&(l=n-s,e=l/Math.floor(l/e)),h=r;h<0;)a++,h=Math.round(r+a*e);for(c=Math.max(r,0);c<o;c++)c===h&&(t.push(i[c]),a++,h=Math.round(r+a*e))}function Dv(i){let t=i.length,e,s;if(t<2)return!1;for(s=i[0],e=1;e<t;++e)if(i[e]-i[e-1]!==s)return!1;return s}var Rv=i=>i==="left"?"right":i==="right"?"left":i,Gu=(i,t,e)=>t==="top"||t==="left"?i[t]+e:i[t]-e,Xu=(i,t)=>Math.min(t||i,i);function Ku(i,t){let e=[],s=i.length/t,n=i.length,r=0;for(;r<n;r+=s)e.push(i[Math.floor(r)]);return e}function Iv(i,t,e){let s=i.ticks.length,n=Math.min(t,s-1),r=i._startPixel,o=i._endPixel,a=1e-6,l=i.getPixelForTick(n),c;if(!(e&&(s===1?c=Math.max(l-r,o-l):t===0?c=(i.getPixelForTick(1)-l)/2:c=(l-i.getPixelForTick(n-1))/2,l+=n<t?c:-c,l<r-a||l>o+a)))return l}function Fv(i,t){U(i,e=>{let s=e.gc,n=s.length/2,r;if(n>t){for(r=0;r<n;++r)delete e.data[s[r]];s.splice(0,n)}})}function Ps(i){return i.drawTicks?i.tickLength:0}function Zu(i,t){if(!i.display)return 0;let e=ut(i.font,t),s=yt(i.padding);return(Q(i.text)?i.text.length:1)*e.lineHeight+s.height}function Lv(i,t){return fe(i,{scale:t,type:"scale"})}function Nv(i,t,e){return fe(i,{tick:e,index:t,type:"tick"})}function $v(i,t,e){let s=Fn(i);return(e&&t!=="right"||!e&&t==="right")&&(s=Rv(s)),s}function Bv(i,t,e,s){let{top:n,left:r,bottom:o,right:a,chart:l}=i,{chartArea:c,scales:h}=l,u=0,d,f,p,g=o-n,m=a-r;if(i.isHorizontal()){if(f=xt(s,r,a),B(e)){let _=Object.keys(e)[0],v=e[_];p=h[_].getPixelForValue(v)+g-t}else e==="center"?p=(c.bottom+c.top)/2+g-t:p=Gu(i,e,t);d=a-r}else{if(B(e)){let _=Object.keys(e)[0],v=e[_];f=h[_].getPixelForValue(v)-m+t}else e==="center"?f=(c.left+c.right)/2-m+t:f=Gu(i,e,t);p=xt(s,o,n),u=e==="left"?-ot:ot}return{titleX:f,titleY:p,maxWidth:d,rotation:u}}var ti=class i extends Vt{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:s,_suggestedMax:n}=this;return t=Ot(t,Number.POSITIVE_INFINITY),e=Ot(e,Number.NEGATIVE_INFINITY),s=Ot(s,Number.POSITIVE_INFINITY),n=Ot(n,Number.NEGATIVE_INFINITY),{min:Ot(t,s),max:Ot(e,n),minDefined:nt(t),maxDefined:nt(e)}}getMinMax(t){let{min:e,max:s,minDefined:n,maxDefined:r}=this.getUserBounds(),o;if(n&&r)return{min:e,max:s};let a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,t),n||(e=Math.min(e,o.min)),r||(s=Math.max(s,o.max));return e=r&&e>s?s:e,s=n&&e>s?e:s,{min:Ot(e,Ot(s,e)),max:Ot(s,Ot(e,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){G(this.options.beforeUpdate,[this])}update(t,e,s){let{beginAtZero:n,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=yu(this,r,n),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let l=a<this.ticks.length;this._convertTicksToLabels(l?Ku(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=Ev(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,s;this.isHorizontal()?(e=this.left,s=this.right):(e=this.top,s=this.bottom,t=!t),this._startPixel=e,this._endPixel=s,this._reversePixels=t,this._length=s-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){G(this.options.afterUpdate,[this])}beforeSetDimensions(){G(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){G(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),G(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){G(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){let e=this.options.ticks,s,n,r;for(s=0,n=t.length;s<n;s++)r=t[s],r.label=G(e.callback,[r.value,s,t],this)}afterTickToLabelConversion(){G(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){G(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let t=this.options,e=t.ticks,s=Xu(this.ticks.length,t.ticks.maxTicksLimit),n=e.minRotation||0,r=e.maxRotation,o=n,a,l,c;if(!this._isVisible()||!e.display||n>=r||s<=1||!this.isHorizontal()){this.labelRotation=n;return}let h=this._getLabelSizes(),u=h.widest.width,d=h.highest.height,f=pt(this.chart.width-u,0,this.maxWidth);a=t.offset?this.maxWidth/s:f/(s-1),u+6>a&&(a=f/(s-(t.offset?.5:1)),l=this.maxHeight-Ps(t.grid)-e.padding-Zu(t.title,this.chart.options.font),c=Math.sqrt(u*u+d*d),o=Rn(Math.min(Math.asin(pt((h.highest.height+6)/a,-1,1)),Math.asin(pt(l/c,-1,1))-Math.asin(pt(d/c,-1,1)))),o=Math.max(n,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){G(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){G(this.options.beforeFit,[this])}fit(){let t={width:0,height:0},{chart:e,options:{ticks:s,title:n,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){let l=Zu(n,e.options.font);if(a?(t.width=this.maxWidth,t.height=Ps(r)+l):(t.height=this.maxHeight,t.width=Ps(r)+l),s.display&&this.ticks.length){let{first:c,last:h,widest:u,highest:d}=this._getLabelSizes(),f=s.padding*2,p=$t(this.labelRotation),g=Math.cos(p),m=Math.sin(p);if(a){let _=s.mirror?0:m*u.width+g*d.height;t.height=Math.min(this.maxHeight,t.height+_+f)}else{let _=s.mirror?0:g*u.width+m*d.height;t.width=Math.min(this.maxWidth,t.width+_+f)}this._calculatePadding(c,h,m,g)}}this._handleMargins(),a?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,s,n){let{ticks:{align:r,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){let h=this.getPixelForTick(0)-this.left,u=this.right-this.getPixelForTick(this.ticks.length-1),d=0,f=0;l?c?(d=n*t.width,f=s*e.height):(d=s*t.height,f=n*e.width):r==="start"?f=e.width:r==="end"?d=t.width:r!=="inner"&&(d=t.width/2,f=e.width/2),this.paddingLeft=Math.max((d-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((f-u+o)*this.width/(this.width-u),0)}else{let h=e.height/2,u=t.height/2;r==="start"?(h=0,u=t.height):r==="end"&&(h=e.height,u=0),this.paddingTop=h+o,this.paddingBottom=u+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){G(this.options.afterFit,[this])}isHorizontal(){let{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,s;for(e=0,s=t.length;e<s;e++)N(t[e].label)&&(t.splice(e,1),s--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){let e=this.options.ticks.sampleSize,s=this.ticks;e<s.length&&(s=Ku(s,e)),this._labelSizes=t=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,s){let{ctx:n,_longestTextCache:r}=this,o=[],a=[],l=Math.floor(e/Xu(e,s)),c=0,h=0,u,d,f,p,g,m,_,v,y,w,b;for(u=0;u<e;u+=l){if(p=t[u].label,g=this._resolveTickFontOptions(u),n.font=m=g.string,_=r[m]=r[m]||{data:{},gc:[]},v=g.lineHeight,y=w=0,!N(p)&&!Q(p))y=vs(n,_.data,_.gc,y,p),w=v;else if(Q(p))for(d=0,f=p.length;d<f;++d)b=p[d],!N(b)&&!Q(b)&&(y=vs(n,_.data,_.gc,y,b),w+=v);o.push(y),a.push(w),c=Math.max(y,c),h=Math.max(w,h)}Fv(r,e);let S=o.indexOf(c),M=a.indexOf(h),k=O=>({width:o[O]||0,height:a[O]||0});return{first:k(0),last:k(e-1),widest:k(S),highest:k(M),widths:o,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){let e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);let e=this._startPixel+t*this._length;return hu(this._alignToPixels?Ae(this.chart,e,0):e)}getDecimalForPixel(t){let e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){let e=this.ticks||[];if(t>=0&&t<e.length){let s=e[t];return s.$context||(s.$context=Nv(this.getContext(),t,s))}return this.$context||(this.$context=Lv(this.chart.getContext(),this))}_tickSize(){let t=this.options.ticks,e=$t(this.labelRotation),s=Math.abs(Math.cos(e)),n=Math.abs(Math.sin(e)),r=this._getLabelSizes(),o=t.autoSkipPadding||0,a=r?r.widest.width+o:0,l=r?r.highest.height+o:0;return this.isHorizontal()?l*s>a*n?a/s:l/n:l*n<a*s?l/s:a/n}_isVisible(){let t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){let e=this.axis,s=this.chart,n=this.options,{grid:r,position:o,border:a}=n,l=r.offset,c=this.isHorizontal(),u=this.ticks.length+(l?1:0),d=Ps(r),f=[],p=a.setContext(this.getContext()),g=p.display?p.width:0,m=g/2,_=function(j){return Ae(s,j,g)},v,y,w,b,S,M,k,O,A,D,I,q;if(o==="top")v=_(this.bottom),M=this.bottom-d,O=v-m,D=_(t.top)+m,q=t.bottom;else if(o==="bottom")v=_(this.top),D=t.top,q=_(t.bottom)-m,M=v+m,O=this.top+d;else if(o==="left")v=_(this.right),S=this.right-d,k=v-m,A=_(t.left)+m,I=t.right;else if(o==="right")v=_(this.left),A=t.left,I=_(t.right)-m,S=v+m,k=this.left+d;else if(e==="x"){if(o==="center")v=_((t.top+t.bottom)/2+.5);else if(B(o)){let j=Object.keys(o)[0],H=o[j];v=_(this.chart.scales[j].getPixelForValue(H))}D=t.top,q=t.bottom,M=v+m,O=M+d}else if(e==="y"){if(o==="center")v=_((t.left+t.right)/2);else if(B(o)){let j=Object.keys(o)[0],H=o[j];v=_(this.chart.scales[j].getPixelForValue(H))}S=v-m,k=S-d,A=t.left,I=t.right}let it=F(n.ticks.maxTicksLimit,u),L=Math.max(1,Math.ceil(u/it));for(y=0;y<u;y+=L){let j=this.getContext(y),H=r.setContext(j),dt=a.setContext(j),Y=H.lineWidth,St=H.color,zt=dt.dash||[],rt=dt.dashOffset,gt=H.tickWidth,at=H.tickColor,It=H.tickBorderDash||[],wt=H.tickBorderDashOffset;w=Iv(this,y,l),w!==void 0&&(b=Ae(s,w,Y),c?S=k=A=I=b:M=O=D=q=b,f.push({tx1:S,ty1:M,tx2:k,ty2:O,x1:A,y1:D,x2:I,y2:q,width:Y,color:St,borderDash:zt,borderDashOffset:rt,tickWidth:gt,tickColor:at,tickBorderDash:It,tickBorderDashOffset:wt}))}return this._ticksLength=u,this._borderValue=v,f}_computeLabelItems(t){let e=this.axis,s=this.options,{position:n,ticks:r}=s,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:h,mirror:u}=r,d=Ps(s.grid),f=d+h,p=u?-h:f,g=-$t(this.labelRotation),m=[],_,v,y,w,b,S,M,k,O,A,D,I,q="middle";if(n==="top")S=this.bottom-p,M=this._getXAxisLabelAlignment();else if(n==="bottom")S=this.top+p,M=this._getXAxisLabelAlignment();else if(n==="left"){let L=this._getYAxisLabelAlignment(d);M=L.textAlign,b=L.x}else if(n==="right"){let L=this._getYAxisLabelAlignment(d);M=L.textAlign,b=L.x}else if(e==="x"){if(n==="center")S=(t.top+t.bottom)/2+f;else if(B(n)){let L=Object.keys(n)[0],j=n[L];S=this.chart.scales[L].getPixelForValue(j)+f}M=this._getXAxisLabelAlignment()}else if(e==="y"){if(n==="center")b=(t.left+t.right)/2-f;else if(B(n)){let L=Object.keys(n)[0],j=n[L];b=this.chart.scales[L].getPixelForValue(j)}M=this._getYAxisLabelAlignment(d).textAlign}e==="y"&&(l==="start"?q="top":l==="end"&&(q="bottom"));let it=this._getLabelSizes();for(_=0,v=a.length;_<v;++_){y=a[_],w=y.label;let L=r.setContext(this.getContext(_));k=this.getPixelForTick(_)+r.labelOffset,O=this._resolveTickFontOptions(_),A=O.lineHeight,D=Q(w)?w.length:1;let j=D/2,H=L.color,dt=L.textStrokeColor,Y=L.textStrokeWidth,St=M;o?(b=k,M==="inner"&&(_===v-1?St=this.options.reverse?"left":"right":_===0?St=this.options.reverse?"right":"left":St="center"),n==="top"?c==="near"||g!==0?I=-D*A+A/2:c==="center"?I=-it.highest.height/2-j*A+A:I=-it.highest.height+A/2:c==="near"||g!==0?I=A/2:c==="center"?I=it.highest.height/2-j*A:I=it.highest.height-D*A,u&&(I*=-1),g!==0&&!L.showLabelBackdrop&&(b+=A/2*Math.sin(g))):(S=k,I=(1-D)*A/2);let zt;if(L.showLabelBackdrop){let rt=yt(L.backdropPadding),gt=it.heights[_],at=it.widths[_],It=I-rt.top,wt=0-rt.left;switch(q){case"middle":It-=gt/2;break;case"bottom":It-=gt;break}switch(M){case"center":wt-=at/2;break;case"right":wt-=at;break;case"inner":_===v-1?wt-=at:_>0&&(wt-=at/2);break}zt={left:wt,top:It,width:at+rt.width,height:gt+rt.height,color:L.backdropColor}}m.push({label:w,font:O,textOffset:I,options:{rotation:g,color:H,strokeColor:dt,strokeWidth:Y,textAlign:St,textBaseline:q,translation:[b,S],backdrop:zt}})}return m}_getXAxisLabelAlignment(){let{position:t,ticks:e}=this.options;if(-$t(this.labelRotation))return t==="top"?"left":"right";let n="center";return e.align==="start"?n="left":e.align==="end"?n="right":e.align==="inner"&&(n="inner"),n}_getYAxisLabelAlignment(t){let{position:e,ticks:{crossAlign:s,mirror:n,padding:r}}=this.options,o=this._getLabelSizes(),a=t+r,l=o.widest.width,c,h;return e==="left"?n?(h=this.right+r,s==="near"?c="left":s==="center"?(c="center",h+=l/2):(c="right",h+=l)):(h=this.right-a,s==="near"?c="right":s==="center"?(c="center",h-=l/2):(c="left",h=this.left)):e==="right"?n?(h=this.left+r,s==="near"?c="right":s==="center"?(c="center",h-=l/2):(c="left",h-=l)):(h=this.left+a,s==="near"?c="left":s==="center"?(c="center",h+=l/2):(c="right",h=this.right)):c="right",{textAlign:c,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;let t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){let{ctx:t,options:{backgroundColor:e},left:s,top:n,width:r,height:o}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(s,n,r,o),t.restore())}getLineWidthForValue(t){let e=this.options.grid;if(!this._isVisible()||!e.display)return 0;let n=this.ticks.findIndex(r=>r.value===t);return n>=0?e.setContext(this.getContext(n)).lineWidth:0}drawGrid(t){let e=this.options.grid,s=this.ctx,n=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t)),r,o,a=(l,c,h)=>{!h.width||!h.color||(s.save(),s.lineWidth=h.width,s.strokeStyle=h.color,s.setLineDash(h.borderDash||[]),s.lineDashOffset=h.borderDashOffset,s.beginPath(),s.moveTo(l.x,l.y),s.lineTo(c.x,c.y),s.stroke(),s.restore())};if(e.display)for(r=0,o=n.length;r<o;++r){let l=n[r];e.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),e.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){let{chart:t,ctx:e,options:{border:s,grid:n}}=this,r=s.setContext(this.getContext()),o=s.display?r.width:0;if(!o)return;let a=n.setContext(this.getContext(0)).lineWidth,l=this._borderValue,c,h,u,d;this.isHorizontal()?(c=Ae(t,this.left,o)-o/2,h=Ae(t,this.right,a)+a/2,u=d=l):(u=Ae(t,this.top,o)-o/2,d=Ae(t,this.bottom,a)+a/2,c=h=l),e.save(),e.lineWidth=r.width,e.strokeStyle=r.color,e.beginPath(),e.moveTo(c,u),e.lineTo(h,d),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;let s=this.ctx,n=this._computeLabelArea();n&&ys(s,n);let r=this.getLabelItems(t);for(let o of r){let a=o.options,l=o.font,c=o.label,h=o.textOffset;De(s,c,0,h,l,a)}n&&ws(s)}drawTitle(){let{ctx:t,options:{position:e,title:s,reverse:n}}=this;if(!s.display)return;let r=ut(s.font),o=yt(s.padding),a=s.align,l=r.lineHeight/2;e==="bottom"||e==="center"||B(e)?(l+=o.bottom,Q(s.text)&&(l+=r.lineHeight*(s.text.length-1))):l+=o.top;let{titleX:c,titleY:h,maxWidth:u,rotation:d}=Bv(this,l,e,a);De(t,s.text,0,0,r,{color:s.color,maxWidth:u,rotation:d,textAlign:$v(a,e,n),textBaseline:"middle",translation:[c,h]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){let t=this.options,e=t.ticks&&t.ticks.z||0,s=F(t.grid&&t.grid.z,-1),n=F(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==i.prototype.draw?[{z:e,draw:r=>{this.draw(r)}}]:[{z:s,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:n,draw:()=>{this.drawBorder()}},{z:e,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(t){let e=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",n=[],r,o;for(r=0,o=e.length;r<o;++r){let a=e[r];a[s]===this.id&&(!t||a.type===t)&&n.push(a)}return n}_resolveTickFontOptions(t){let e=this.options.ticks.setContext(this.getContext(t));return ut(e.font)}_maxDigits(){let t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}},Pi=class{constructor(t,e,s){this.type=t,this.scope=e,this.override=s,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){let e=Object.getPrototypeOf(t),s;Hv(e)&&(s=this.register(e));let n=this.items,r=t.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in n||(n[r]=t,zv(t,o,s),this.override&&X.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){let e=this.items,s=t.id,n=this.scope;s in e&&delete e[s],n&&s in X[n]&&(delete X[n][s],this.override&&delete Te[s])}};function zv(i,t,e){let s=mi(Object.create(null),[e?X.get(e):{},X.get(t),i.defaults]);X.set(t,s),i.defaultRoutes&&jv(t,i.defaultRoutes),i.descriptors&&X.describe(t,i.descriptors)}function jv(i,t){Object.keys(t).forEach(e=>{let s=e.split("."),n=s.pop(),r=[i].concat(s).join("."),o=t[e].split("."),a=o.pop(),l=o.join(".");X.route(r,n,l,a)})}function Hv(i){return"id"in i&&"defaults"in i}var rl=class{constructor(){this.controllers=new Pi(Le,"datasets",!0),this.elements=new Pi(Vt,"elements"),this.plugins=new Pi(Object,"plugins"),this.scales=new Pi(ti,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,s){[...e].forEach(n=>{let r=s||this._getRegistryForType(n);s||r.isForType(n)||r===this.plugins&&n.id?this._exec(t,r,n):U(n,o=>{let a=s||this._getRegistryForType(o);this._exec(t,a,o)})})}_exec(t,e,s){let n=Dn(t);G(s["before"+n],[],s),e[t](s),G(s["after"+n],[],s)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){let s=this._typedRegistries[e];if(s.isForType(t))return s}return this.plugins}_get(t,e,s){let n=e.get(t);if(n===void 0)throw new Error('"'+t+'" is not a registered '+s+".");return n}},Jt=new rl,ol=class{constructor(){this._init=void 0}notify(t,e,s,n){if(e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install")),this._init===void 0)return;let r=n?this._descriptors(t).filter(n):this._descriptors(t),o=this._notify(r,t,e,s);return e==="afterDestroy"&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall"),this._init=void 0),o}_notify(t,e,s,n){n=n||{};for(let r of t){let o=r.plugin,a=o[s],l=[e,n,r.options];if(G(a,l,o)===!1&&n.cancelable)return!1}return!0}invalidate(){N(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;let e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){let s=t&&t.config,n=F(s.options&&s.options.plugins,{}),r=Wv(s);return n===!1&&!e?[]:Uv(t,r,n,e)}_notifyStateChanges(t){let e=this._oldCache||[],s=this._cache,n=(r,o)=>r.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(n(e,s),t,"stop"),this._notify(n(s,e),t,"start")}};function Wv(i){let t={},e=[],s=Object.keys(Jt.plugins.items);for(let r=0;r<s.length;r++)e.push(Jt.getPlugin(s[r]));let n=i.plugins||[];for(let r=0;r<n.length;r++){let o=n[r];e.indexOf(o)===-1&&(e.push(o),t[o.id]=!0)}return{plugins:e,localIds:t}}function Vv(i,t){return!t&&i===!1?null:i===!0?{}:i}function Uv(i,{plugins:t,localIds:e},s,n){let r=[],o=i.getContext();for(let a of t){let l=a.id,c=Vv(s[l],n);c!==null&&r.push({plugin:a,options:qv(i.config,{plugin:a,local:e[l]},c,o)})}return r}function qv(i,{plugin:t,local:e},s,n){let r=i.pluginScopeKeys(t),o=i.getOptionScopes(s,r);return e&&t.defaults&&o.push(t.defaults),i.createResolver(o,n,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function al(i,t){let e=X.datasets[i]||{};return((t.datasets||{})[i]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function Yv(i,t){let e=i;return i==="_index_"?e=t:i==="_value_"&&(e=t==="x"?"y":"x"),e}function Gv(i,t){return i===t?"_index_":"_value_"}function Ju(i){if(i==="x"||i==="y"||i==="r")return i}function Xv(i){if(i==="top"||i==="bottom")return"x";if(i==="left"||i==="right")return"y"}function ll(i,...t){if(Ju(i))return i;for(let e of t){let s=e.axis||Xv(e.position)||i.length>1&&Ju(i[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${i}' axis. Please provide 'axis' or 'position' option.`)}function Qu(i,t,e){if(e[t+"AxisID"]===i)return{axis:t}}function Kv(i,t){if(t.data&&t.data.datasets){let e=t.data.datasets.filter(s=>s.xAxisID===i||s.yAxisID===i);if(e.length)return Qu(i,"x",e[0])||Qu(i,"y",e[0])}return{}}function Zv(i,t){let e=Te[i.type]||{scales:{}},s=t.scales||{},n=al(i.type,t),r=Object.create(null);return Object.keys(s).forEach(o=>{let a=s[o];if(!B(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);let l=ll(o,a,Kv(o,i),X.scales[a.type]),c=Gv(l,n),h=e.scales||{};r[o]=vi(Object.create(null),[{axis:l},a,h[l],h[c]])}),i.data.datasets.forEach(o=>{let a=o.type||i.type,l=o.indexAxis||al(a,t),h=(Te[a]||{}).scales||{};Object.keys(h).forEach(u=>{let d=Yv(u,l),f=o[d+"AxisID"]||d;r[f]=r[f]||Object.create(null),vi(r[f],[{axis:d},s[f],h[u]])})}),Object.keys(r).forEach(o=>{let a=r[o];vi(a,[X.scales[a.type],X.scale])}),r}function zd(i){let t=i.options||(i.options={});t.plugins=F(t.plugins,{}),t.scales=Zv(i,t)}function jd(i){return i=i||{},i.datasets=i.datasets||[],i.labels=i.labels||[],i}function Jv(i){return i=i||{},i.data=jd(i.data),zd(i),i}var td=new Map,Hd=new Set;function Un(i,t){let e=td.get(i);return e||(e=t(),td.set(i,e),Hd.add(e)),e}var Es=(i,t,e)=>{let s=de(t,e);s!==void 0&&i.add(s)},cl=class{constructor(t){this._config=Jv(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=jd(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){let t=this._config;this.clearCache(),zd(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Un(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return Un(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return Un(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){let e=t.id,s=this.type;return Un(`${s}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){let s=this._scopeCache,n=s.get(t);return(!n||e)&&(n=new Map,s.set(t,n)),n}getOptionScopes(t,e,s){let{options:n,type:r}=this,o=this._cachedScopes(t,s),a=o.get(e);if(a)return a;let l=new Set;e.forEach(h=>{t&&(l.add(t),h.forEach(u=>Es(l,t,u))),h.forEach(u=>Es(l,n,u)),h.forEach(u=>Es(l,Te[r]||{},u)),h.forEach(u=>Es(l,X,u)),h.forEach(u=>Es(l,Ln,u))});let c=Array.from(l);return c.length===0&&c.push(Object.create(null)),Hd.has(e)&&o.set(e,c),c}chartOptionScopes(){let{options:t,type:e}=this;return[t,Te[e]||{},X.datasets[e]||{},{type:e},X,Ln]}resolveNamedOptions(t,e,s,n=[""]){let r={$shared:!0},{resolver:o,subPrefixes:a}=ed(this._resolverCache,t,n),l=o;if(tb(o,e)){r.$shared=!1,s=he(s)?s():s;let c=this.createResolver(t,s,a);l=Xe(o,s,c)}for(let c of e)r[c]=l[c];return r}createResolver(t,e,s=[""],n){let{resolver:r}=ed(this._resolverCache,t,s);return B(e)?Xe(r,e,void 0,n):r}};function ed(i,t,e){let s=i.get(t);s||(s=new Map,i.set(t,s));let n=e.join(),r=s.get(n);return r||(r={resolver:Bn(t,e),subPrefixes:e.filter(a=>!a.toLowerCase().includes("hover"))},s.set(n,r)),r}var Qv=i=>B(i)&&Object.getOwnPropertyNames(i).some(t=>he(i[t]));function tb(i,t){let{isScriptable:e,isIndexable:s}=Da(i);for(let n of t){let r=e(n),o=s(n),a=(o||r)&&i[n];if(r&&(he(a)||Qv(a))||o&&Q(a))return!0}return!1}var eb="4.5.1",ib=["top","bottom","left","right","chartArea"];function id(i,t){return i==="top"||i==="bottom"||ib.indexOf(i)===-1&&t==="x"}function sd(i,t){return function(e,s){return e[i]===s[i]?e[t]-s[t]:e[i]-s[i]}}function nd(i){let t=i.chart,e=t.options.animation;t.notifyPlugins("afterRender"),G(e&&e.onComplete,[i],t)}function sb(i){let t=i.chart,e=t.options.animation;G(e&&e.onProgress,[i],t)}function Wd(i){return zn()&&typeof i=="string"?i=document.getElementById(i):i&&i.length&&(i=i[0]),i&&i.canvas&&(i=i.canvas),i}var Kn={},rd=i=>{let t=Wd(i);return Object.values(Kn).filter(e=>e.canvas===t).pop()};function nb(i,t,e){let s=Object.keys(i);for(let n of s){let r=+n;if(r>=t){let o=i[n];delete i[n],(e>0||r>t)&&(i[r+e]=o)}}}function rb(i,t,e,s){return!e||i.type==="mouseout"?null:s?t:i}var sr=(()=>{class i{static defaults=X;static instances=Kn;static overrides=Te;static registry=Jt;static version=eb;static getChart=rd;static register(...e){Jt.add(...e),od()}static unregister(...e){Jt.remove(...e),od()}constructor(e,s){let n=this.config=new cl(s),r=Wd(e),o=rd(r);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");let a=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||Pv(r)),this.platform.updateConfig(n);let l=this.platform.acquireContext(r,a.aspectRatio),c=l&&l.canvas,h=c&&c.height,u=c&&c.width;if(this.id=nu(),this.ctx=l,this.canvas=c,this.width=u,this.height=h,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new ol,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=gu(d=>this.update(d),a.resizeDelay||0),this._dataChanges=[],Kn[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}pe.listen(this,"complete",nd),pe.listen(this,"progress",sb),this._initialize(),this.attached&&this.update()}get aspectRatio(){let{options:{aspectRatio:e,maintainAspectRatio:s},width:n,height:r,_aspectRatio:o}=this;return N(e)?s&&o?o:r?n/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Jt}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():La(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Oa(this.canvas,this.ctx),this}stop(){return pe.stop(this),this}resize(e,s){pe.running(this)?this._resizeBeforeDraw={width:e,height:s}:this._resize(e,s)}_resize(e,s){let n=this.options,r=this.canvas,o=n.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(r,e,s,o),l=n.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,La(this,l,!0)&&(this.notifyPlugins("resize",{size:a}),G(n.onResize,[this,a],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){let s=this.options.scales||{};U(s,(n,r)=>{n.id=r})}buildOrUpdateScales(){let e=this.options,s=e.scales,n=this.scales,r=Object.keys(n).reduce((a,l)=>(a[l]=!1,a),{}),o=[];s&&(o=o.concat(Object.keys(s).map(a=>{let l=s[a],c=ll(a,l),h=c==="r",u=c==="x";return{options:l,dposition:h?"chartArea":u?"bottom":"left",dtype:h?"radialLinear":u?"category":"linear"}}))),U(o,a=>{let l=a.options,c=l.id,h=ll(c,l),u=F(l.type,a.dtype);(l.position===void 0||id(l.position,h)!==id(a.dposition))&&(l.position=a.dposition),r[c]=!0;let d=null;if(c in n&&n[c].type===u)d=n[c];else{let f=Jt.getScale(u);d=new f({id:c,type:u,ctx:this.ctx,chart:this}),n[d.id]=d}d.init(l,e)}),U(r,(a,l)=>{a||delete n[l]}),U(n,a=>{kt.configure(this,a,a.options),kt.addBox(this,a)})}_updateMetasets(){let e=this._metasets,s=this.data.datasets.length,n=e.length;if(e.sort((r,o)=>r.index-o.index),n>s){for(let r=s;r<n;++r)this._destroyDatasetMeta(r);e.splice(s,n-s)}this._sortedMetasets=e.slice(0).sort(sd("order","index"))}_removeUnreferencedMetasets(){let{_metasets:e,data:{datasets:s}}=this;e.length>s.length&&delete this._stacks,e.forEach((n,r)=>{s.filter(o=>o===n._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){let e=[],s=this.data.datasets,n,r;for(this._removeUnreferencedMetasets(),n=0,r=s.length;n<r;n++){let o=s[n],a=this.getDatasetMeta(n),l=o.type||this.config.type;if(a.type&&a.type!==l&&(this._destroyDatasetMeta(n),a=this.getDatasetMeta(n)),a.type=l,a.indexAxis=o.indexAxis||al(l,this.options),a.order=o.order||0,a.index=n,a.label=""+o.label,a.visible=this.isDatasetVisible(n),a.controller)a.controller.updateIndex(n),a.controller.linkScales();else{let c=Jt.getController(l),{datasetElementType:h,dataElementType:u}=X.datasets[l];Object.assign(c,{dataElementType:Jt.getElement(u),datasetElementType:h&&Jt.getElement(h)}),a.controller=new c(this,n),e.push(a.controller)}}return this._updateMetasets(),e}_resetElements(){U(this.data.datasets,(e,s)=>{this.getDatasetMeta(s).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){let s=this.config;s.update();let n=this._options=s.createResolver(s.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;let o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let h=0,u=this.data.datasets.length;h<u;h++){let{controller:d}=this.getDatasetMeta(h),f=!r&&o.indexOf(d)===-1;d.buildOrUpdateElements(f),a=Math.max(+d.getMaxOverflow(),a)}a=this._minPadding=n.layout.autoPadding?a:0,this._updateLayout(a),r||U(o,h=>{h.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(sd("z","_idx"));let{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){U(this.scales,e=>{kt.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let e=this.options,s=new Set(Object.keys(this._listeners)),n=new Set(e.events);(!ma(s,n)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){let{_hiddenIndices:e}=this,s=this._getUniformDataChanges()||[];for(let{method:n,start:r,count:o}of s){let a=n==="_removeElements"?-o:o;nb(e,r,a)}}_getUniformDataChanges(){let e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];let s=this.data.datasets.length,n=o=>new Set(e.filter(a=>a[0]===o).map((a,l)=>l+","+a.splice(1).join(","))),r=n(0);for(let o=1;o<s;o++)if(!ma(r,n(o)))return;return Array.from(r).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;kt.update(this,this.width,this.height,e);let s=this.chartArea,n=s.width<=0||s.height<=0;this._layers=[],U(this.boxes,r=>{n&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,o)=>{r._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let s=0,n=this.data.datasets.length;s<n;++s)this.getDatasetMeta(s).controller.configure();for(let s=0,n=this.data.datasets.length;s<n;++s)this._updateDataset(s,he(e)?e({datasetIndex:s}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,s){let n=this.getDatasetMeta(e),r={meta:n,index:e,mode:s,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(n.controller._update(s),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(pe.has(this)?this.attached&&!pe.running(this)&&pe.start(this):(this.draw(),nd({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){let{width:n,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;let s=this._layers;for(e=0;e<s.length&&s[e].z<=0;++e)s[e].draw(this.chartArea);for(this._drawDatasets();e<s.length;++e)s[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){let s=this._sortedMetasets,n=[],r,o;for(r=0,o=s.length;r<o;++r){let a=s[r];(!e||a.visible)&&n.push(a)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;let e=this.getSortedVisibleDatasetMetas();for(let s=e.length-1;s>=0;--s)this._drawDataset(e[s]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){let s=this.ctx,n={meta:e,index:e.index,cancelable:!0},r=Ha(this,e);this.notifyPlugins("beforeDatasetDraw",n)!==!1&&(r&&ys(s,r),e.controller.draw(),r&&ws(s),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return Gt(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,s,n,r){let o=av.modes[s];return typeof o=="function"?o(this,e,n,r):[]}getDatasetMeta(e){let s=this.data.datasets[e],n=this._metasets,r=n.filter(o=>o&&o._dataset===s).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:s&&s.order||0,index:e,_dataset:s,_parsed:[],_sorted:!1},n.push(r)),r}getContext(){return this.$context||(this.$context=fe(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){let s=this.data.datasets[e];if(!s)return!1;let n=this.getDatasetMeta(e);return typeof n.hidden=="boolean"?!n.hidden:!s.hidden}setDatasetVisibility(e,s){let n=this.getDatasetMeta(e);n.hidden=!s}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,s,n){let r=n?"show":"hide",o=this.getDatasetMeta(e),a=o.controller._resolveAnimations(void 0,r);bi(s)?(o.data[s].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),a.update(o,{visible:n}),this.update(l=>l.datasetIndex===e?r:void 0))}hide(e,s){this._updateVisibility(e,s,!1)}show(e,s){this._updateVisibility(e,s,!0)}_destroyDatasetMeta(e){let s=this._metasets[e];s&&s.controller&&s.controller._destroy(),delete this._metasets[e]}_stop(){let e,s;for(this.stop(),pe.remove(this),e=0,s=this.data.datasets.length;e<s;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:e,ctx:s}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Oa(e,s),this.platform.releaseContext(s),this.canvas=null,this.ctx=null),delete Kn[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){let e=this._listeners,s=this.platform,n=(o,a)=>{s.addEventListener(this,o,a),e[o]=a},r=(o,a,l)=>{o.offsetX=a,o.offsetY=l,this._eventHandler(o)};U(this.options.events,o=>n(o,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});let e=this._responsiveListeners,s=this.platform,n=(c,h)=>{s.addEventListener(this,c,h),e[c]=h},r=(c,h)=>{e[c]&&(s.removeEventListener(this,c,h),delete e[c])},o=(c,h)=>{this.canvas&&this.resize(c,h)},a,l=()=>{r("attach",l),this.attached=!0,this.resize(),n("resize",o),n("detach",a)};a=()=>{this.attached=!1,r("resize",o),this._stop(),this._resize(0,0),n("attach",l)},s.isAttached(this.canvas)?l():a()}unbindEvents(){U(this._listeners,(e,s)=>{this.platform.removeEventListener(this,s,e)}),this._listeners={},U(this._responsiveListeners,(e,s)=>{this.platform.removeEventListener(this,s,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,s,n){let r=n?"set":"remove",o,a,l,c;for(s==="dataset"&&(o=this.getDatasetMeta(e[0].datasetIndex),o.controller["_"+r+"DatasetHoverStyle"]()),l=0,c=e.length;l<c;++l){a=e[l];let h=a&&this.getDatasetMeta(a.datasetIndex).controller;h&&h[r+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){let s=this._active||[],n=e.map(({datasetIndex:o,index:a})=>{let l=this.getDatasetMeta(o);if(!l)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:l.data[a],index:a}});!bs(n,s)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,s))}notifyPlugins(e,s,n){return this._plugins.notify(this,e,s,n)}isPluginEnabled(e){return this._plugins._cache.filter(s=>s.plugin.id===e).length===1}_updateHoverStyles(e,s,n){let r=this.options.hover,o=(c,h)=>c.filter(u=>!h.some(d=>u.datasetIndex===d.datasetIndex&&u.index===d.index)),a=o(s,e),l=n?e:o(e,s);a.length&&this.updateHoverStyle(a,r.mode,!1),l.length&&r.mode&&this.updateHoverStyle(l,r.mode,!0)}_eventHandler(e,s){let n={event:e,replay:s,cancelable:!0,inChartArea:this.isPointInArea(e)},r=a=>(a.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",n,r)===!1)return;let o=this._handleEvent(e,s,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,r),(o||n.changed)&&this.render(),this}_handleEvent(e,s,n){let{_active:r=[],options:o}=this,a=s,l=this._getActiveElements(e,r,n,a),c=au(e),h=rb(e,this._lastEvent,n,c);n&&(this._lastEvent=null,G(o.onHover,[e,l,this],this),c&&G(o.onClick,[e,l,this],this));let u=!bs(l,r);return(u||s)&&(this._active=l,this._updateHoverStyles(l,r,s)),this._lastEvent=h,u}_getActiveElements(e,s,n,r){if(e.type==="mouseout")return[];if(!n)return s;let o=this.options.hover;return this.getElementsAtEventForMode(e,o.mode,o,r)}}return i})();function od(){return U(sr.instances,i=>i._plugins.invalidate())}function ob(i,t,e){let{startAngle:s,x:n,y:r,outerRadius:o,innerRadius:a,options:l}=t,{borderWidth:c,borderJoinStyle:h}=l,u=Math.min(c/o,bt(s-e));if(i.beginPath(),i.arc(n,r,o-c/2,s+u/2,e-u/2),a>0){let d=Math.min(c/a,bt(s-e));i.arc(n,r,a+c/2,e-d/2,s+d/2,!0)}else{let d=Math.min(c/2,o*bt(s-e));if(h==="round")i.arc(n,r,d,e-z/2,s+z/2,!0);else if(h==="bevel"){let f=2*d*d,p=-f*Math.cos(e+z/2)+n,g=-f*Math.sin(e+z/2)+r,m=f*Math.cos(s+z/2)+n,_=f*Math.sin(s+z/2)+r;i.lineTo(p,g),i.lineTo(m,_)}}i.closePath(),i.moveTo(0,0),i.rect(0,0,i.canvas.width,i.canvas.height),i.clip("evenodd")}function ab(i,t,e){let{startAngle:s,pixelMargin:n,x:r,y:o,outerRadius:a,innerRadius:l}=t,c=n/a;i.beginPath(),i.arc(r,o,a,s-c,e+c),l>n?(c=n/l,i.arc(r,o,l,e+c,s-c,!0)):i.arc(r,o,n,e+ot,s-ot),i.closePath(),i.clip()}function lb(i){return $n(i,["outerStart","outerEnd","innerStart","innerEnd"])}function cb(i,t,e,s){let n=lb(i.options.borderRadius),r=(e-t)/2,o=Math.min(r,s*t/2),a=l=>{let c=(e-Math.min(r,l))*s/2;return pt(l,0,Math.min(r,c))};return{outerStart:a(n.outerStart),outerEnd:a(n.outerEnd),innerStart:pt(n.innerStart,0,o),innerEnd:pt(n.innerEnd,0,o)}}function Mi(i,t,e,s){return{x:e+i*Math.cos(t),y:s+i*Math.sin(t)}}function tr(i,t,e,s,n,r){let{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:h}=t,u=Math.max(t.outerRadius+s+e-c,0),d=h>0?h+s+e+c:0,f=0,p=n-l;if(s){let L=h>0?h-s:0,j=u>0?u-s:0,H=(L+j)/2,dt=H!==0?p*H/(H+s):p;f=(p-dt)/2}let g=Math.max(.001,p*u-e/z)/u,m=(p-g)/2,_=l+m+f,v=n-m-f,{outerStart:y,outerEnd:w,innerStart:b,innerEnd:S}=cb(t,d,u,v-_),M=u-y,k=u-w,O=_+y/M,A=v-w/k,D=d+b,I=d+S,q=_+b/D,it=v-S/I;if(i.beginPath(),r){let L=(O+A)/2;if(i.arc(o,a,u,O,L),i.arc(o,a,u,L,A),w>0){let Y=Mi(k,A,o,a);i.arc(Y.x,Y.y,w,A,v+ot)}let j=Mi(I,v,o,a);if(i.lineTo(j.x,j.y),S>0){let Y=Mi(I,it,o,a);i.arc(Y.x,Y.y,S,v+ot,it+Math.PI)}let H=(v-S/d+(_+b/d))/2;if(i.arc(o,a,d,v-S/d,H,!0),i.arc(o,a,d,H,_+b/d,!0),b>0){let Y=Mi(D,q,o,a);i.arc(Y.x,Y.y,b,q+Math.PI,_-ot)}let dt=Mi(M,_,o,a);if(i.lineTo(dt.x,dt.y),y>0){let Y=Mi(M,O,o,a);i.arc(Y.x,Y.y,y,_-ot,O)}}else{i.moveTo(o,a);let L=Math.cos(O)*u+o,j=Math.sin(O)*u+a;i.lineTo(L,j);let H=Math.cos(A)*u+o,dt=Math.sin(A)*u+a;i.lineTo(H,dt)}i.closePath()}function hb(i,t,e,s,n){let{fullCircles:r,startAngle:o,circumference:a}=t,l=t.endAngle;if(r){tr(i,t,e,s,l,n);for(let c=0;c<r;++c)i.fill();isNaN(a)||(l=o+(a%tt||tt))}return tr(i,t,e,s,l,n),i.fill(),l}function ub(i,t,e,s,n){let{fullCircles:r,startAngle:o,circumference:a,options:l}=t,{borderWidth:c,borderJoinStyle:h,borderDash:u,borderDashOffset:d,borderRadius:f}=l,p=l.borderAlign==="inner";if(!c)return;i.setLineDash(u||[]),i.lineDashOffset=d,p?(i.lineWidth=c*2,i.lineJoin=h||"round"):(i.lineWidth=c,i.lineJoin=h||"bevel");let g=t.endAngle;if(r){tr(i,t,e,s,g,n);for(let m=0;m<r;++m)i.stroke();isNaN(a)||(g=o+(a%tt||tt))}p&&ab(i,t,g),l.selfJoin&&g-o>=z&&f===0&&h!=="miter"&&ob(i,t,g),r||(tr(i,t,e,s,g,n),i.stroke())}var hl=class extends Vt{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,s){let n=this.getProps(["x","y"],s),{angle:r,distance:o}=xa(n,{x:t,y:e}),{startAngle:a,endAngle:l,innerRadius:c,outerRadius:h,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),d=(this.options.spacing+this.options.borderWidth)/2,f=F(u,l-a),p=yi(r,a,l)&&a!==l,g=f>=tt||p,m=Kt(o,c+d,h+d);return g&&m}getCenterPoint(t){let{x:e,y:s,startAngle:n,endAngle:r,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:l,spacing:c}=this.options,h=(n+r)/2,u=(o+a+c+l)/2;return{x:e+Math.cos(h)*u,y:s+Math.sin(h)*u}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){let{options:e,circumference:s}=this,n=(e.offset||0)/4,r=(e.spacing||0)/2,o=e.circular;if(this.pixelMargin=e.borderAlign==="inner"?.33:0,this.fullCircles=s>tt?Math.floor(s/tt):0,s===0||this.innerRadius<0||this.outerRadius<0)return;t.save();let a=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(a)*n,Math.sin(a)*n);let l=1-Math.sin(Math.min(z,s||0)),c=n*l;t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,hb(t,this,c,r,o),ub(t,this,c,r,o),t.restore()}};function Vd(i,t,e=t){i.lineCap=F(e.borderCapStyle,t.borderCapStyle),i.setLineDash(F(e.borderDash,t.borderDash)),i.lineDashOffset=F(e.borderDashOffset,t.borderDashOffset),i.lineJoin=F(e.borderJoinStyle,t.borderJoinStyle),i.lineWidth=F(e.borderWidth,t.borderWidth),i.strokeStyle=F(e.borderColor,t.borderColor)}function db(i,t,e){i.lineTo(e.x,e.y)}function fb(i){return i.stepped?bu:i.tension||i.cubicInterpolationMode==="monotone"?xu:db}function Ud(i,t,e={}){let s=i.length,{start:n=0,end:r=s-1}=e,{start:o,end:a}=t,l=Math.max(n,o),c=Math.min(r,a),h=n<o&&r<o||n>a&&r>a;return{count:s,start:l,loop:t.loop,ilen:c<l&&!h?s+c-l:c-l}}function pb(i,t,e,s){let{points:n,options:r}=t,{count:o,start:a,loop:l,ilen:c}=Ud(n,e,s),h=fb(r),{move:u=!0,reverse:d}=s||{},f,p,g;for(f=0;f<=c;++f)p=n[(a+(d?c-f:f))%o],!p.skip&&(u?(i.moveTo(p.x,p.y),u=!1):h(i,g,p,d,r.stepped),g=p);return l&&(p=n[(a+(d?c:0))%o],h(i,g,p,d,r.stepped)),!!l}function gb(i,t,e,s){let n=t.points,{count:r,start:o,ilen:a}=Ud(n,e,s),{move:l=!0,reverse:c}=s||{},h=0,u=0,d,f,p,g,m,_,v=w=>(o+(c?a-w:w))%r,y=()=>{g!==m&&(i.lineTo(h,m),i.lineTo(h,g),i.lineTo(h,_))};for(l&&(f=n[v(0)],i.moveTo(f.x,f.y)),d=0;d<=a;++d){if(f=n[v(d)],f.skip)continue;let w=f.x,b=f.y,S=w|0;S===p?(b<g?g=b:b>m&&(m=b),h=(u*h+w)/++u):(y(),i.lineTo(w,b),p=S,u=0,g=m=b),_=b}y()}function ul(i){let t=i.options,e=t.borderDash&&t.borderDash.length;return!i._decimated&&!i._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!e?gb:pb}function mb(i){return i.stepped?Ou:i.tension||i.cubicInterpolationMode==="monotone"?Tu:Ce}function _b(i,t,e,s){let n=t._path;n||(n=t._path=new Path2D,t.path(n,e,s)&&n.closePath()),Vd(i,t.options),i.stroke(n)}function vb(i,t,e,s){let{segments:n,options:r}=t,o=ul(t);for(let a of n)Vd(i,r,a.style),i.beginPath(),o(i,t,a,{start:e,end:e+s-1})&&i.closePath(),i.stroke()}var bb=typeof Path2D=="function";function xb(i,t,e,s){bb&&!t.options.segment?_b(i,t,e,s):vb(i,t,e,s)}var nr=(()=>{class i extends Vt{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,s){let n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){let r=n.spanGaps?this._loop:this._fullLoop;Pu(this._points,n,e,r,s),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=Du(this,this.options.segment))}first(){let e=this.segments,s=this.points;return e.length&&s[e[0].start]}last(){let e=this.segments,s=this.points,n=e.length;return n&&s[e[n-1].end]}interpolate(e,s){let n=this.options,r=e[s],o=this.points,a=ja(this,{property:s,start:r,end:r});if(!a.length)return;let l=[],c=mb(n),h,u;for(h=0,u=a.length;h<u;++h){let{start:d,end:f}=a[h],p=o[d],g=o[f];if(p===g){l.push(p);continue}let m=Math.abs((r-p[s])/(g[s]-p[s])),_=c(p,g,m,n.stepped);_[s]=e[s],l.push(_)}return l.length===1?l[0]:l}pathSegment(e,s,n){return ul(this)(e,this,s,n)}path(e,s,n){let r=this.segments,o=ul(this),a=this._loop;s=s||0,n=n||this.points.length-s;for(let l of r)a&=o(e,this,l,{start:s,end:s+n-1});return!!a}draw(e,s,n,r){let o=this.options||{};(this.points||[]).length&&o.borderWidth&&(e.save(),xb(e,this,n,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return i})();function ad(i,t,e,s){let n=i.options,{[e]:r}=i.getProps([e],s);return Math.abs(t-r)<n.radius+n.hitRadius}var yb=(()=>{class i extends Vt{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,s,n){let r=this.options,{x:o,y:a}=this.getProps(["x","y"],n);return Math.pow(e-o,2)+Math.pow(s-a,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(e,s){return ad(this,e,"x",s)}inYRange(e,s){return ad(this,e,"y",s)}getCenterPoint(e){let{x:s,y:n}=this.getProps(["x","y"],e);return{x:s,y:n}}size(e){e=e||this.options||{};let s=e.radius||0;s=Math.max(s,s&&e.hoverRadius||0);let n=s&&e.borderWidth||0;return(s+n)*2}draw(e,s){let n=this.options;this.skip||n.radius<.1||!Gt(this,s,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,Nn(e,n,this.x,this.y))}getRange(){let e=this.options||{};return e.radius+e.hitRadius}}return i})();function qd(i,t){let{x:e,y:s,base:n,width:r,height:o}=i.getProps(["x","y","base","width","height"],t),a,l,c,h,u;return i.horizontal?(u=o/2,a=Math.min(e,n),l=Math.max(e,n),c=s-u,h=s+u):(u=r/2,a=e-u,l=e+u,c=Math.min(s,n),h=Math.max(s,n)),{left:a,top:c,right:l,bottom:h}}function Fe(i,t,e,s){return i?0:pt(t,e,s)}function wb(i,t,e){let s=i.options.borderWidth,n=i.borderSkipped,r=Aa(s);return{t:Fe(n.top,r.top,0,e),r:Fe(n.right,r.right,0,t),b:Fe(n.bottom,r.bottom,0,e),l:Fe(n.left,r.left,0,t)}}function kb(i,t,e){let{enableBorderRadius:s}=i.getProps(["enableBorderRadius"]),n=i.options.borderRadius,r=Re(n),o=Math.min(t,e),a=i.borderSkipped,l=s||B(n);return{topLeft:Fe(!l||a.top||a.left,r.topLeft,0,o),topRight:Fe(!l||a.top||a.right,r.topRight,0,o),bottomLeft:Fe(!l||a.bottom||a.left,r.bottomLeft,0,o),bottomRight:Fe(!l||a.bottom||a.right,r.bottomRight,0,o)}}function Sb(i){let t=qd(i),e=t.right-t.left,s=t.bottom-t.top,n=wb(i,e/2,s/2),r=kb(i,e/2,s/2);return{outer:{x:t.left,y:t.top,w:e,h:s,radius:r},inner:{x:t.left+n.l,y:t.top+n.t,w:e-n.l-n.r,h:s-n.t-n.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(n.t,n.l)),topRight:Math.max(0,r.topRight-Math.max(n.t,n.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(n.b,n.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(n.b,n.r))}}}}function Ka(i,t,e,s){let n=t===null,r=e===null,a=i&&!(n&&r)&&qd(i,s);return a&&(n||Kt(t,a.left,a.right))&&(r||Kt(e,a.top,a.bottom))}function Mb(i){return i.topLeft||i.topRight||i.bottomLeft||i.bottomRight}function Pb(i,t){i.rect(t.x,t.y,t.w,t.h)}function Za(i,t,e={}){let s=i.x!==e.x?-t:0,n=i.y!==e.y?-t:0,r=(i.x+i.w!==e.x+e.w?t:0)-s,o=(i.y+i.h!==e.y+e.h?t:0)-n;return{x:i.x+s,y:i.y+n,w:i.w+r,h:i.h+o,radius:i.radius}}var dl=class extends Vt{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){let{inflateAmount:e,options:{borderColor:s,backgroundColor:n}}=this,{inner:r,outer:o}=Sb(this),a=Mb(o.radius)?ki:Pb;t.save(),(o.w!==r.w||o.h!==r.h)&&(t.beginPath(),a(t,Za(o,e,r)),t.clip(),a(t,Za(r,-e,o)),t.fillStyle=s,t.fill("evenodd")),t.beginPath(),a(t,Za(r,e)),t.fillStyle=n,t.fill(),t.restore()}inRange(t,e,s){return Ka(this,t,e,s)}inXRange(t,e){return Ka(this,t,null,e)}inYRange(t,e){return Ka(this,null,t,e)}getCenterPoint(t){let{x:e,y:s,base:n,horizontal:r}=this.getProps(["x","y","base","horizontal"],t);return{x:r?(e+n)/2:e,y:r?s:(s+n)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}},Eb=Object.freeze({__proto__:null,ArcElement:hl,BarElement:dl,LineElement:nr,PointElement:yb}),fl=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],ld=fl.map(i=>i.replace("rgb(","rgba(").replace(")",", 0.5)"));function Yd(i){return fl[i%fl.length]}function Gd(i){return ld[i%ld.length]}function Cb(i,t){return i.borderColor=Yd(t),i.backgroundColor=Gd(t),++t}function Ob(i,t){return i.backgroundColor=i.data.map(()=>Yd(t++)),t}function Tb(i,t){return i.backgroundColor=i.data.map(()=>Gd(t++)),t}function Ab(i){let t=0;return(e,s)=>{let n=i.getDatasetMeta(s).controller;n instanceof yl?t=Ob(e,t):n instanceof Fd?t=Tb(e,t):n&&(t=Cb(e,t))}}function cd(i){let t;for(t in i)if(i[t].borderColor||i[t].backgroundColor)return!0;return!1}function Db(i){return i&&(i.borderColor||i.backgroundColor)}function Rb(){return X.borderColor!=="rgba(0,0,0,0.1)"||X.backgroundColor!=="rgba(0,0,0,0.1)"}var Ib={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(i,t,e){if(!e.enabled)return;let{data:{datasets:s},options:n}=i.config,{elements:r}=n,o=cd(s)||Db(n)||r&&cd(r)||Rb();if(!e.forceOverride&&o)return;let a=Ab(i);s.forEach(a)}};function Fb(i,t,e,s,n){let r=n.samples||s;if(r>=e)return i.slice(t,t+e);let o=[],a=(e-2)/(r-2),l=0,c=t+e-1,h=t,u,d,f,p,g;for(o[l++]=i[h],u=0;u<r-2;u++){let m=0,_=0,v,y=Math.floor((u+1)*a)+1+t,w=Math.min(Math.floor((u+2)*a)+1,e)+t,b=w-y;for(v=y;v<w;v++)m+=i[v].x,_+=i[v].y;m/=b,_/=b;let S=Math.floor(u*a)+1+t,M=Math.min(Math.floor((u+1)*a)+1,e)+t,{x:k,y:O}=i[h];for(f=p=-1,v=S;v<M;v++)p=.5*Math.abs((k-m)*(i[v].y-O)-(k-i[v].x)*(_-O)),p>f&&(f=p,d=i[v],g=v);o[l++]=d,h=g}return o[l++]=i[c],o}function Lb(i,t,e,s){let n=0,r=0,o,a,l,c,h,u,d,f,p,g,m=[],_=t+e-1,v=i[t].x,w=i[_].x-v;for(o=t;o<t+e;++o){a=i[o],l=(a.x-v)/w*s,c=a.y;let b=l|0;if(b===h)c<p?(p=c,u=o):c>g&&(g=c,d=o),n=(r*n+a.x)/++r;else{let S=o-1;if(!N(u)&&!N(d)){let M=Math.min(u,d),k=Math.max(u,d);M!==f&&M!==S&&m.push(js(zs({},i[M]),{x:n})),k!==f&&k!==S&&m.push(js(zs({},i[k]),{x:n}))}o>0&&S!==f&&m.push(i[S]),m.push(a),h=b,r=0,p=g=c,u=d=f=o}}return m}function Xd(i){if(i._decimated){let t=i._data;delete i._decimated,delete i._data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function hd(i){i.data.datasets.forEach(t=>{Xd(t)})}function Nb(i,t){let e=t.length,s=0,n,{iScale:r}=i,{min:o,max:a,minDefined:l,maxDefined:c}=r.getUserBounds();return l&&(s=pt(Yt(t,r.axis,o).lo,0,e-1)),c?n=pt(Yt(t,r.axis,a).hi+1,s,e)-s:n=e-s,{start:s,count:n}}var $b={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(i,t,e)=>{if(!e.enabled){hd(i);return}let s=i.width;i.data.datasets.forEach((n,r)=>{let{_data:o,indexAxis:a}=n,l=i.getDatasetMeta(r),c=o||n.data;if(Si([a,i.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;let h=i.scales[l.xAxisID];if(h.type!=="linear"&&h.type!=="time"||i.options.parsing)return;let{start:u,count:d}=Nb(l,c),f=e.threshold||4*s;if(d<=f){Xd(n);return}N(o)&&(n._data=c,delete n.data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(g){this._data=g}}));let p;switch(e.algorithm){case"lttb":p=Fb(c,u,d,s,e);break;case"min-max":p=Lb(c,u,d,s);break;default:throw new Error(`Unsupported decimation algorithm '${e.algorithm}'`)}n._decimated=p})},destroy(i){hd(i)}};function Bb(i,t,e){let s=i.segments,n=i.points,r=t.points,o=[];for(let a of s){let{start:l,end:c}=a;c=rr(l,c,n);let h=pl(e,n[l],n[c],a.loop);if(!t.segments){o.push({source:a,target:h,start:n[l],end:n[c]});continue}let u=ja(t,h);for(let d of u){let f=pl(e,r[d.start],r[d.end],d.loop),p=za(a,n,f);for(let g of p)o.push({source:g,target:d,start:{[e]:ud(h,f,"start",Math.max)},end:{[e]:ud(h,f,"end",Math.min)}})}}return o}function pl(i,t,e,s){if(s)return;let n=t[i],r=e[i];return i==="angle"&&(n=bt(n),r=bt(r)),{property:i,start:n,end:r}}function zb(i,t){let{x:e=null,y:s=null}=i||{},n=t.points,r=[];return t.segments.forEach(({start:o,end:a})=>{a=rr(o,a,n);let l=n[o],c=n[a];s!==null?(r.push({x:l.x,y:s}),r.push({x:c.x,y:s})):e!==null&&(r.push({x:e,y:l.y}),r.push({x:e,y:c.y}))}),r}function rr(i,t,e){for(;t>i;t--){let s=e[t];if(!isNaN(s.x)&&!isNaN(s.y))break}return t}function ud(i,t,e,s){return i&&t?s(i[e],t[e]):i?i[e]:t?t[e]:0}function Kd(i,t){let e=[],s=!1;return Q(i)?(s=!0,e=i):e=zb(i,t),e.length?new nr({points:e,options:{tension:0},_loop:s,_fullLoop:s}):null}function dd(i){return i&&i.fill!==!1}function jb(i,t,e){let n=i[t].fill,r=[t],o;if(!e)return n;for(;n!==!1&&r.indexOf(n)===-1;){if(!nt(n))return n;if(o=i[n],!o)return!1;if(o.visible)return n;r.push(n),n=o.fill}return!1}function Hb(i,t,e){let s=qb(i);if(B(s))return isNaN(s.value)?!1:s;let n=parseFloat(s);return nt(n)&&Math.floor(n)===n?Wb(s[0],t,n,e):["origin","start","end","stack","shape"].indexOf(s)>=0&&s}function Wb(i,t,e,s){return(i==="-"||i==="+")&&(e=t+e),e===t||e<0||e>=s?!1:e}function Vb(i,t){let e=null;return i==="start"?e=t.bottom:i==="end"?e=t.top:B(i)?e=t.getPixelForValue(i.value):t.getBasePixel&&(e=t.getBasePixel()),e}function Ub(i,t,e){let s;return i==="start"?s=e:i==="end"?s=t.options.reverse?t.min:t.max:B(i)?s=i.value:s=t.getBaseValue(),s}function qb(i){let t=i.options,e=t.fill,s=F(e&&e.target,e);return s===void 0&&(s=!!t.backgroundColor),s===!1||s===null?!1:s===!0?"origin":s}function Yb(i){let{scale:t,index:e,line:s}=i,n=[],r=s.segments,o=s.points,a=Gb(t,e);a.push(Kd({x:null,y:t.bottom},s));for(let l=0;l<r.length;l++){let c=r[l];for(let h=c.start;h<=c.end;h++)Xb(n,o[h],a)}return new nr({points:n,options:{}})}function Gb(i,t){let e=[],s=i.getMatchingVisibleMetas("line");for(let n=0;n<s.length;n++){let r=s[n];if(r.index===t)break;r.hidden||e.unshift(r.dataset)}return e}function Xb(i,t,e){let s=[];for(let n=0;n<e.length;n++){let r=e[n],{first:o,last:a,point:l}=Kb(r,t,"x");if(!(!l||o&&a)){if(o)s.unshift(l);else if(i.push(l),!a)break}}i.push(...s)}function Kb(i,t,e){let s=i.interpolate(t,e);if(!s)return{};let n=s[e],r=i.segments,o=i.points,a=!1,l=!1;for(let c=0;c<r.length;c++){let h=r[c],u=o[h.start][e],d=o[h.end][e];if(Kt(n,u,d)){a=n===u,l=n===d;break}}return{first:a,last:l,point:s}}var er=class{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,s){let{x:n,y:r,radius:o}=this;return e=e||{start:0,end:tt},t.arc(n,r,o,e.end,e.start,!0),!s.bounds}interpolate(t){let{x:e,y:s,radius:n}=this,r=t.angle;return{x:e+Math.cos(r)*n,y:s+Math.sin(r)*n,angle:r}}};function Zb(i){let{chart:t,fill:e,line:s}=i;if(nt(e))return Jb(t,e);if(e==="stack")return Yb(i);if(e==="shape")return!0;let n=Qb(i);return n instanceof er?n:Kd(n,s)}function Jb(i,t){let e=i.getDatasetMeta(t);return e&&i.isDatasetVisible(t)?e.dataset:null}function Qb(i){return(i.scale||{}).getPointPositionForValue?ex(i):tx(i)}function tx(i){let{scale:t={},fill:e}=i,s=Vb(e,t);if(nt(s)){let n=t.isHorizontal();return{x:n?s:null,y:n?null:s}}return null}function ex(i){let{scale:t,fill:e}=i,s=t.options,n=t.getLabels().length,r=s.reverse?t.max:t.min,o=Ub(e,t,r),a=[];if(s.grid.circular){let l=t.getPointPositionForValue(0,r);return new er({x:l.x,y:l.y,radius:t.getDistanceFromCenterForValue(o)})}for(let l=0;l<n;++l)a.push(t.getPointPositionForValue(l,o));return a}function Ja(i,t,e){let s=Zb(t),{chart:n,index:r,line:o,scale:a,axis:l}=t,c=o.options,h=c.fill,u=c.backgroundColor,{above:d=u,below:f=u}=h||{},p=n.getDatasetMeta(r),g=Ha(n,p);s&&o.points.length&&(ys(i,e),ix(i,{line:o,target:s,above:d,below:f,area:e,scale:a,axis:l,clip:g}),ws(i))}function ix(i,t){let{line:e,target:s,above:n,below:r,area:o,scale:a,clip:l}=t,c=e._loop?"angle":t.axis;i.save();let h=r;r!==n&&(c==="x"?(fd(i,s,o.top),Qa(i,{line:e,target:s,color:n,scale:a,property:c,clip:l}),i.restore(),i.save(),fd(i,s,o.bottom)):c==="y"&&(pd(i,s,o.left),Qa(i,{line:e,target:s,color:r,scale:a,property:c,clip:l}),i.restore(),i.save(),pd(i,s,o.right),h=n)),Qa(i,{line:e,target:s,color:h,scale:a,property:c,clip:l}),i.restore()}function fd(i,t,e){let{segments:s,points:n}=t,r=!0,o=!1;i.beginPath();for(let a of s){let{start:l,end:c}=a,h=n[l],u=n[rr(l,c,n)];r?(i.moveTo(h.x,h.y),r=!1):(i.lineTo(h.x,e),i.lineTo(h.x,h.y)),o=!!t.pathSegment(i,a,{move:o}),o?i.closePath():i.lineTo(u.x,e)}i.lineTo(t.first().x,e),i.closePath(),i.clip()}function pd(i,t,e){let{segments:s,points:n}=t,r=!0,o=!1;i.beginPath();for(let a of s){let{start:l,end:c}=a,h=n[l],u=n[rr(l,c,n)];r?(i.moveTo(h.x,h.y),r=!1):(i.lineTo(e,h.y),i.lineTo(h.x,h.y)),o=!!t.pathSegment(i,a,{move:o}),o?i.closePath():i.lineTo(e,u.y)}i.lineTo(e,t.first().y),i.closePath(),i.clip()}function Qa(i,t){let{line:e,target:s,property:n,color:r,scale:o,clip:a}=t,l=Bb(e,s,n);for(let{source:c,target:h,start:u,end:d}of l){let{style:{backgroundColor:f=r}={}}=c,p=s!==!0;i.save(),i.fillStyle=f,sx(i,o,a,p&&pl(n,u,d)),i.beginPath();let g=!!e.pathSegment(i,c),m;if(p){g?i.closePath():gd(i,s,d,n);let _=!!s.pathSegment(i,h,{move:g,reverse:!0});m=g&&_,m||gd(i,s,u,n)}i.closePath(),i.fill(m?"evenodd":"nonzero"),i.restore()}}function sx(i,t,e,s){let n=t.chart.chartArea,{property:r,start:o,end:a}=s||{};if(r==="x"||r==="y"){let l,c,h,u;r==="x"?(l=o,c=n.top,h=a,u=n.bottom):(l=n.left,c=o,h=n.right,u=a),i.beginPath(),e&&(l=Math.max(l,e.left),h=Math.min(h,e.right),c=Math.max(c,e.top),u=Math.min(u,e.bottom)),i.rect(l,c,h-l,u-c),i.clip()}}function gd(i,t,e,s){let n=t.interpolate(e,s);n&&i.lineTo(n.x,n.y)}var nx={id:"filler",afterDatasetsUpdate(i,t,e){let s=(i.data.datasets||[]).length,n=[],r,o,a,l;for(o=0;o<s;++o)r=i.getDatasetMeta(o),a=r.dataset,l=null,a&&a.options&&a instanceof nr&&(l={visible:i.isDatasetVisible(o),index:o,fill:Hb(a,o,s),chart:i,axis:r.controller.options.indexAxis,scale:r.vScale,line:a}),r.$filler=l,n.push(l);for(o=0;o<s;++o)l=n[o],!(!l||l.fill===!1)&&(l.fill=jb(n,o,e.propagate))},beforeDraw(i,t,e){let s=e.drawTime==="beforeDraw",n=i.getSortedVisibleDatasetMetas(),r=i.chartArea;for(let o=n.length-1;o>=0;--o){let a=n[o].$filler;a&&(a.line.updateControlPoints(r,a.axis),s&&a.fill&&Ja(i.ctx,a,r))}},beforeDatasetsDraw(i,t,e){if(e.drawTime!=="beforeDatasetsDraw")return;let s=i.getSortedVisibleDatasetMetas();for(let n=s.length-1;n>=0;--n){let r=s[n].$filler;dd(r)&&Ja(i.ctx,r,i.chartArea)}},beforeDatasetDraw(i,t,e){let s=t.meta.$filler;!dd(s)||e.drawTime!=="beforeDatasetDraw"||Ja(i.ctx,s,i.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}},md=(i,t)=>{let{boxHeight:e=t,boxWidth:s=t}=i;return i.usePointStyle&&(e=Math.min(e,t),s=i.pointStyleWidth||Math.min(s,t)),{boxWidth:s,boxHeight:e,itemHeight:Math.max(t,e)}},rx=(i,t)=>i!==null&&t!==null&&i.datasetIndex===t.datasetIndex&&i.index===t.index,ir=class extends Vt{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,s){this.maxWidth=t,this.maxHeight=e,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){let t=this.options.labels||{},e=G(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(s=>t.filter(s,this.chart.data))),t.sort&&(e=e.sort((s,n)=>t.sort(s,n,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){let{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}let s=t.labels,n=ut(s.font),r=n.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=md(s,r),c,h;e.font=n.string,this.isHorizontal()?(c=this.maxWidth,h=this._fitRows(o,r,a,l)+10):(h=this.maxHeight,c=this._fitCols(o,n,a,l)+10),this.width=Math.min(c,t.maxWidth||this.maxWidth),this.height=Math.min(h,t.maxHeight||this.maxHeight)}_fitRows(t,e,s,n){let{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],h=n+a,u=t;r.textAlign="left",r.textBaseline="middle";let d=-1,f=-h;return this.legendItems.forEach((p,g)=>{let m=s+e/2+r.measureText(p.text).width;(g===0||c[c.length-1]+m+2*a>o)&&(u+=h,c[c.length-(g>0?0:1)]=0,f+=h,d++),l[g]={left:0,top:f,row:d,width:m,height:n},c[c.length-1]+=m+a}),u}_fitCols(t,e,s,n){let{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],h=o-t,u=a,d=0,f=0,p=0,g=0;return this.legendItems.forEach((m,_)=>{let{itemWidth:v,itemHeight:y}=ox(s,e,r,m,n);_>0&&f+y+2*a>h&&(u+=d+a,c.push({width:d,height:f}),p+=d+a,g++,d=f=0),l[_]={left:p,top:f,col:g,width:v,height:y},d=Math.max(d,v),f+=y+a}),u+=d,c.push({width:d,height:f}),u}adjustHitBoxes(){if(!this.options.display)return;let t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:s,labels:{padding:n},rtl:r}}=this,o=Ze(r,this.left,this.width);if(this.isHorizontal()){let a=0,l=xt(s,this.left+n,this.right-this.lineWidths[a]);for(let c of e)a!==c.row&&(a=c.row,l=xt(s,this.left+n,this.right-this.lineWidths[a])),c.top+=this.top+t+n,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+n}else{let a=0,l=xt(s,this.top+t+n,this.bottom-this.columnSizes[a].height);for(let c of e)c.col!==a&&(a=c.col,l=xt(s,this.top+t+n,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+n,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+n}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){let t=this.ctx;ys(t,this),this._draw(),ws(t)}}_draw(){let{options:t,columnSizes:e,lineWidths:s,ctx:n}=this,{align:r,labels:o}=t,a=X.color,l=Ze(t.rtl,this.left,this.width),c=ut(o.font),{padding:h}=o,u=c.size,d=u/2,f;this.drawTitle(),n.textAlign=l.textAlign("left"),n.textBaseline="middle",n.lineWidth=.5,n.font=c.string;let{boxWidth:p,boxHeight:g,itemHeight:m}=md(o,u),_=function(S,M,k){if(isNaN(p)||p<=0||isNaN(g)||g<0)return;n.save();let O=F(k.lineWidth,1);if(n.fillStyle=F(k.fillStyle,a),n.lineCap=F(k.lineCap,"butt"),n.lineDashOffset=F(k.lineDashOffset,0),n.lineJoin=F(k.lineJoin,"miter"),n.lineWidth=O,n.strokeStyle=F(k.strokeStyle,a),n.setLineDash(F(k.lineDash,[])),o.usePointStyle){let A={radius:g*Math.SQRT2/2,pointStyle:k.pointStyle,rotation:k.rotation,borderWidth:O},D=l.xPlus(S,p/2),I=M+d;Ta(n,A,D,I,o.pointStyleWidth&&p)}else{let A=M+Math.max((u-g)/2,0),D=l.leftForLtr(S,p),I=Re(k.borderRadius);n.beginPath(),Object.values(I).some(q=>q!==0)?ki(n,{x:D,y:A,w:p,h:g,radius:I}):n.rect(D,A,p,g),n.fill(),O!==0&&n.stroke()}n.restore()},v=function(S,M,k){De(n,k.text,S,M+m/2,c,{strikethrough:k.hidden,textAlign:l.textAlign(k.textAlign)})},y=this.isHorizontal(),w=this._computeTitleHeight();y?f={x:xt(r,this.left+h,this.right-s[0]),y:this.top+h+w,line:0}:f={x:this.left+h,y:xt(r,this.top+w+h,this.bottom-e[0].height),line:0},$a(this.ctx,t.textDirection);let b=m+h;this.legendItems.forEach((S,M)=>{n.strokeStyle=S.fontColor,n.fillStyle=S.fontColor;let k=n.measureText(S.text).width,O=l.textAlign(S.textAlign||(S.textAlign=o.textAlign)),A=p+d+k,D=f.x,I=f.y;l.setWidth(this.width),y?M>0&&D+A+h>this.right&&(I=f.y+=b,f.line++,D=f.x=xt(r,this.left+h,this.right-s[f.line])):M>0&&I+b>this.bottom&&(D=f.x=D+e[f.line].width+h,f.line++,I=f.y=xt(r,this.top+w+h,this.bottom-e[f.line].height));let q=l.x(D);if(_(q,I,S),D=mu(O,D+p+d,y?D+A:this.right,t.rtl),v(l.x(D),I,S),y)f.x+=A+h;else if(typeof S.text!="string"){let it=c.lineHeight;f.y+=Zd(S,it)+h}else f.y+=b}),Ba(this.ctx,t.textDirection)}drawTitle(){let t=this.options,e=t.title,s=ut(e.font),n=yt(e.padding);if(!e.display)return;let r=Ze(t.rtl,this.left,this.width),o=this.ctx,a=e.position,l=s.size/2,c=n.top+l,h,u=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),h=this.top+c,u=xt(t.align,u,this.right-d);else{let p=this.columnSizes.reduce((g,m)=>Math.max(g,m.height),0);h=c+xt(t.align,this.top,this.bottom-p-t.labels.padding-this._computeTitleHeight())}let f=xt(a,u,u+d);o.textAlign=r.textAlign(Fn(a)),o.textBaseline="middle",o.strokeStyle=e.color,o.fillStyle=e.color,o.font=s.string,De(o,e.text,f,h,s)}_computeTitleHeight(){let t=this.options.title,e=ut(t.font),s=yt(t.padding);return t.display?e.lineHeight+s.height:0}_getLegendItemAt(t,e){let s,n,r;if(Kt(t,this.left,this.right)&&Kt(e,this.top,this.bottom)){for(r=this.legendHitBoxes,s=0;s<r.length;++s)if(n=r[s],Kt(t,n.left,n.left+n.width)&&Kt(e,n.top,n.top+n.height))return this.legendItems[s]}return null}handleEvent(t){let e=this.options;if(!cx(t.type,e))return;let s=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){let n=this._hoveredItem,r=rx(n,s);n&&!r&&G(e.onLeave,[t,n,this],this),this._hoveredItem=s,s&&!r&&G(e.onHover,[t,s,this],this)}else s&&G(e.onClick,[t,s,this],this)}};function ox(i,t,e,s,n){let r=ax(s,i,t,e),o=lx(n,s,t.lineHeight);return{itemWidth:r,itemHeight:o}}function ax(i,t,e,s){let n=i.text;return n&&typeof n!="string"&&(n=n.reduce((r,o)=>r.length>o.length?r:o)),t+e.size/2+s.measureText(n).width}function lx(i,t,e){let s=i;return typeof t.text!="string"&&(s=Zd(t,e)),s}function Zd(i,t){let e=i.text?i.text.length:0;return t*e}function cx(i,t){return!!((i==="mousemove"||i==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(i==="click"||i==="mouseup"))}var hx={id:"legend",_element:ir,start(i,t,e){let s=i.legend=new ir({ctx:i.ctx,options:e,chart:i});kt.configure(i,s,e),kt.addBox(i,s)},stop(i){kt.removeBox(i,i.legend),delete i.legend},beforeUpdate(i,t,e){let s=i.legend;kt.configure(i,s,e),s.options=e},afterUpdate(i){let t=i.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(i,t){t.replay||i.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(i,t,e){let s=t.datasetIndex,n=e.chart;n.isDatasetVisible(s)?(n.hide(s),t.hidden=!0):(n.show(s),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:i=>i.chart.options.color,boxWidth:40,padding:10,generateLabels(i){let t=i.data.datasets,{labels:{usePointStyle:e,pointStyle:s,textAlign:n,color:r,useBorderRadius:o,borderRadius:a}}=i.legend.options;return i._getSortedDatasetMetas().map(l=>{let c=l.controller.getStyle(e?0:void 0),h=yt(c.borderWidth);return{text:t[l.index].label,fillStyle:c.backgroundColor,fontColor:r,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:c.borderColor,pointStyle:s||c.pointStyle,rotation:c.rotation,textAlign:n||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:i=>i.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:i=>!i.startsWith("on"),labels:{_scriptable:i=>!["generateLabels","filter","sort"].includes(i)}}},As=class extends Vt{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){let s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=e;let n=Q(s.text)?s.text.length:1;this._padding=yt(s.padding);let r=n*ut(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){let t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){let{top:e,left:s,bottom:n,right:r,options:o}=this,a=o.align,l=0,c,h,u;return this.isHorizontal()?(h=xt(a,s,r),u=e+t,c=r-s):(o.position==="left"?(h=s+t,u=xt(a,n,e),l=z*-.5):(h=r-t,u=xt(a,e,n),l=z*.5),c=n-e),{titleX:h,titleY:u,maxWidth:c,rotation:l}}draw(){let t=this.ctx,e=this.options;if(!e.display)return;let s=ut(e.font),r=s.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(r);De(t,e.text,0,0,s,{color:e.color,maxWidth:l,rotation:c,textAlign:Fn(e.align),textBaseline:"middle",translation:[o,a]})}};function ux(i,t){let e=new As({ctx:i.ctx,options:t,chart:i});kt.configure(i,e,t),kt.addBox(i,e),i.titleBlock=e}var dx={id:"title",_element:As,start(i,t,e){ux(i,e)},stop(i){let t=i.titleBlock;kt.removeBox(i,t),delete i.titleBlock},beforeUpdate(i,t,e){let s=i.titleBlock;kt.configure(i,s,e),s.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},qn=new WeakMap,fx={id:"subtitle",start(i,t,e){let s=new As({ctx:i.ctx,options:e,chart:i});kt.configure(i,s,e),kt.addBox(i,s),qn.set(i,s)},stop(i){kt.removeBox(i,qn.get(i)),qn.delete(i)},beforeUpdate(i,t,e){let s=qn.get(i);kt.configure(i,s,e),s.options=e},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},Os={average(i){if(!i.length)return!1;let t,e,s=new Set,n=0,r=0;for(t=0,e=i.length;t<e;++t){let a=i[t].element;if(a&&a.hasValue()){let l=a.tooltipPosition();s.add(l.x),n+=l.y,++r}}return r===0||s.size===0?!1:{x:[...s].reduce((a,l)=>a+l)/s.size,y:n/r}},nearest(i,t){if(!i.length)return!1;let e=t.x,s=t.y,n=Number.POSITIVE_INFINITY,r,o,a;for(r=0,o=i.length;r<o;++r){let l=i[r].element;if(l&&l.hasValue()){let c=l.getCenterPoint(),h=Tn(t,c);h<n&&(n=h,a=l)}}if(a){let l=a.tooltipPosition();e=l.x,s=l.y}return{x:e,y:s}}};function Zt(i,t){return t&&(Q(t)?Array.prototype.push.apply(i,t):i.push(t)),i}function ge(i){return(typeof i=="string"||i instanceof String)&&i.indexOf(`
`)>-1?i.split(`
`):i}function px(i,t){let{element:e,datasetIndex:s,index:n}=t,r=i.getDatasetMeta(s).controller,{label:o,value:a}=r.getLabelAndValue(n);return{chart:i,label:o,parsed:r.getParsed(n),raw:i.data.datasets[s].data[n],formattedValue:a,dataset:r.getDataset(),dataIndex:n,datasetIndex:s,element:e}}function _d(i,t){let e=i.chart.ctx,{body:s,footer:n,title:r}=i,{boxWidth:o,boxHeight:a}=t,l=ut(t.bodyFont),c=ut(t.titleFont),h=ut(t.footerFont),u=r.length,d=n.length,f=s.length,p=yt(t.padding),g=p.height,m=0,_=s.reduce((w,b)=>w+b.before.length+b.lines.length+b.after.length,0);if(_+=i.beforeBody.length+i.afterBody.length,u&&(g+=u*c.lineHeight+(u-1)*t.titleSpacing+t.titleMarginBottom),_){let w=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;g+=f*w+(_-f)*l.lineHeight+(_-1)*t.bodySpacing}d&&(g+=t.footerMarginTop+d*h.lineHeight+(d-1)*t.footerSpacing);let v=0,y=function(w){m=Math.max(m,e.measureText(w).width+v)};return e.save(),e.font=c.string,U(i.title,y),e.font=l.string,U(i.beforeBody.concat(i.afterBody),y),v=t.displayColors?o+2+t.boxPadding:0,U(s,w=>{U(w.before,y),U(w.lines,y),U(w.after,y)}),v=0,e.font=h.string,U(i.footer,y),e.restore(),m+=p.width,{width:m,height:g}}function gx(i,t){let{y:e,height:s}=t;return e<s/2?"top":e>i.height-s/2?"bottom":"center"}function mx(i,t,e,s){let{x:n,width:r}=s,o=e.caretSize+e.caretPadding;if(i==="left"&&n+r+o>t.width||i==="right"&&n-r-o<0)return!0}function _x(i,t,e,s){let{x:n,width:r}=e,{width:o,chartArea:{left:a,right:l}}=i,c="center";return s==="center"?c=n<=(a+l)/2?"left":"right":n<=r/2?c="left":n>=o-r/2&&(c="right"),mx(c,i,t,e)&&(c="center"),c}function vd(i,t,e){let s=e.yAlign||t.yAlign||gx(i,e);return{xAlign:e.xAlign||t.xAlign||_x(i,t,e,s),yAlign:s}}function vx(i,t){let{x:e,width:s}=i;return t==="right"?e-=s:t==="center"&&(e-=s/2),e}function bx(i,t,e){let{y:s,height:n}=i;return t==="top"?s+=e:t==="bottom"?s-=n+e:s-=n/2,s}function bd(i,t,e,s){let{caretSize:n,caretPadding:r,cornerRadius:o}=i,{xAlign:a,yAlign:l}=e,c=n+r,{topLeft:h,topRight:u,bottomLeft:d,bottomRight:f}=Re(o),p=vx(t,a),g=bx(t,l,c);return l==="center"?a==="left"?p+=c:a==="right"&&(p-=c):a==="left"?p-=Math.max(h,d)+n:a==="right"&&(p+=Math.max(u,f)+n),{x:pt(p,0,s.width-t.width),y:pt(g,0,s.height-t.height)}}function Yn(i,t,e){let s=yt(e.padding);return t==="center"?i.x+i.width/2:t==="right"?i.x+i.width-s.right:i.x+s.left}function xd(i){return Zt([],ge(i))}function xx(i,t,e){return fe(i,{tooltip:t,tooltipItems:e,type:"tooltip"})}function yd(i,t){let e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?i.override(e):i}var Jd={beforeTitle:Xt,title(i){if(i.length>0){let t=i[0],e=t.chart.data.labels,s=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(s>0&&t.dataIndex<s)return e[t.dataIndex]}return""},afterTitle:Xt,beforeBody:Xt,beforeLabel:Xt,label(i){if(this&&this.options&&this.options.mode==="dataset")return i.label+": "+i.formattedValue||i.formattedValue;let t=i.dataset.label||"";t&&(t+=": ");let e=i.formattedValue;return N(e)||(t+=e),t},labelColor(i){let e=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(i){let e=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:Xt,afterBody:Xt,beforeFooter:Xt,footer:Xt,afterFooter:Xt};function Tt(i,t,e,s){let n=i[t].call(e,s);return typeof n>"u"?Jd[t].call(e,s):n}var wd=(()=>{class i extends Vt{static positioners=Os;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let e=this._cachedAnimations;if(e)return e;let s=this.chart,n=this.options.setContext(this.getContext()),r=n.enabled&&s.options.animation&&n.animations,o=new Zn(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=xx(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,s){let{callbacks:n}=s,r=Tt(n,"beforeTitle",this,e),o=Tt(n,"title",this,e),a=Tt(n,"afterTitle",this,e),l=[];return l=Zt(l,ge(r)),l=Zt(l,ge(o)),l=Zt(l,ge(a)),l}getBeforeBody(e,s){return xd(Tt(s.callbacks,"beforeBody",this,e))}getBody(e,s){let{callbacks:n}=s,r=[];return U(e,o=>{let a={before:[],lines:[],after:[]},l=yd(n,o);Zt(a.before,ge(Tt(l,"beforeLabel",this,o))),Zt(a.lines,Tt(l,"label",this,o)),Zt(a.after,ge(Tt(l,"afterLabel",this,o))),r.push(a)}),r}getAfterBody(e,s){return xd(Tt(s.callbacks,"afterBody",this,e))}getFooter(e,s){let{callbacks:n}=s,r=Tt(n,"beforeFooter",this,e),o=Tt(n,"footer",this,e),a=Tt(n,"afterFooter",this,e),l=[];return l=Zt(l,ge(r)),l=Zt(l,ge(o)),l=Zt(l,ge(a)),l}_createItems(e){let s=this._active,n=this.chart.data,r=[],o=[],a=[],l=[],c,h;for(c=0,h=s.length;c<h;++c)l.push(px(this.chart,s[c]));return e.filter&&(l=l.filter((u,d,f)=>e.filter(u,d,f,n))),e.itemSort&&(l=l.sort((u,d)=>e.itemSort(u,d,n))),U(l,u=>{let d=yd(e.callbacks,u);r.push(Tt(d,"labelColor",this,u)),o.push(Tt(d,"labelPointStyle",this,u)),a.push(Tt(d,"labelTextColor",this,u))}),this.labelColors=r,this.labelPointStyles=o,this.labelTextColors=a,this.dataPoints=l,l}update(e,s){let n=this.options.setContext(this.getContext()),r=this._active,o,a=[];if(!r.length)this.opacity!==0&&(o={opacity:0});else{let l=Os[n.position].call(this,r,this._eventPosition);a=this._createItems(n),this.title=this.getTitle(a,n),this.beforeBody=this.getBeforeBody(a,n),this.body=this.getBody(a,n),this.afterBody=this.getAfterBody(a,n),this.footer=this.getFooter(a,n);let c=this._size=_d(this,n),h=Object.assign({},l,c),u=vd(this.chart,n,h),d=bd(n,h,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,o={opacity:1,x:d.x,y:d.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=a,this.$context=void 0,o&&this._resolveAnimations().update(this,o),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:s})}drawCaret(e,s,n,r){let o=this.getCaretPosition(e,n,r);s.lineTo(o.x1,o.y1),s.lineTo(o.x2,o.y2),s.lineTo(o.x3,o.y3)}getCaretPosition(e,s,n){let{xAlign:r,yAlign:o}=this,{caretSize:a,cornerRadius:l}=n,{topLeft:c,topRight:h,bottomLeft:u,bottomRight:d}=Re(l),{x:f,y:p}=e,{width:g,height:m}=s,_,v,y,w,b,S;return o==="center"?(b=p+m/2,r==="left"?(_=f,v=_-a,w=b+a,S=b-a):(_=f+g,v=_+a,w=b-a,S=b+a),y=_):(r==="left"?v=f+Math.max(c,u)+a:r==="right"?v=f+g-Math.max(h,d)-a:v=this.caretX,o==="top"?(w=p,b=w-a,_=v-a,y=v+a):(w=p+m,b=w+a,_=v+a,y=v-a),S=w),{x1:_,x2:v,x3:y,y1:w,y2:b,y3:S}}drawTitle(e,s,n){let r=this.title,o=r.length,a,l,c;if(o){let h=Ze(n.rtl,this.x,this.width);for(e.x=Yn(this,n.titleAlign,n),s.textAlign=h.textAlign(n.titleAlign),s.textBaseline="middle",a=ut(n.titleFont),l=n.titleSpacing,s.fillStyle=n.titleColor,s.font=a.string,c=0;c<o;++c)s.fillText(r[c],h.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+l,c+1===o&&(e.y+=n.titleMarginBottom-l)}}_drawColorBox(e,s,n,r,o){let a=this.labelColors[n],l=this.labelPointStyles[n],{boxHeight:c,boxWidth:h}=o,u=ut(o.bodyFont),d=Yn(this,"left",o),f=r.x(d),p=c<u.lineHeight?(u.lineHeight-c)/2:0,g=s.y+p;if(o.usePointStyle){let m={radius:Math.min(h,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},_=r.leftForLtr(f,h)+h/2,v=g+c/2;e.strokeStyle=o.multiKeyBackground,e.fillStyle=o.multiKeyBackground,Nn(e,m,_,v),e.strokeStyle=a.borderColor,e.fillStyle=a.backgroundColor,Nn(e,m,_,v)}else{e.lineWidth=B(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,e.strokeStyle=a.borderColor,e.setLineDash(a.borderDash||[]),e.lineDashOffset=a.borderDashOffset||0;let m=r.leftForLtr(f,h),_=r.leftForLtr(r.xPlus(f,1),h-2),v=Re(a.borderRadius);Object.values(v).some(y=>y!==0)?(e.beginPath(),e.fillStyle=o.multiKeyBackground,ki(e,{x:m,y:g,w:h,h:c,radius:v}),e.fill(),e.stroke(),e.fillStyle=a.backgroundColor,e.beginPath(),ki(e,{x:_,y:g+1,w:h-2,h:c-2,radius:v}),e.fill()):(e.fillStyle=o.multiKeyBackground,e.fillRect(m,g,h,c),e.strokeRect(m,g,h,c),e.fillStyle=a.backgroundColor,e.fillRect(_,g+1,h-2,c-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,s,n){let{body:r}=this,{bodySpacing:o,bodyAlign:a,displayColors:l,boxHeight:c,boxWidth:h,boxPadding:u}=n,d=ut(n.bodyFont),f=d.lineHeight,p=0,g=Ze(n.rtl,this.x,this.width),m=function(O){s.fillText(O,g.x(e.x+p),e.y+f/2),e.y+=f+o},_=g.textAlign(a),v,y,w,b,S,M,k;for(s.textAlign=a,s.textBaseline="middle",s.font=d.string,e.x=Yn(this,_,n),s.fillStyle=n.bodyColor,U(this.beforeBody,m),p=l&&_!=="right"?a==="center"?h/2+u:h+2+u:0,b=0,M=r.length;b<M;++b){for(v=r[b],y=this.labelTextColors[b],s.fillStyle=y,U(v.before,m),w=v.lines,l&&w.length&&(this._drawColorBox(s,e,b,g,n),f=Math.max(d.lineHeight,c)),S=0,k=w.length;S<k;++S)m(w[S]),f=d.lineHeight;U(v.after,m)}p=0,f=d.lineHeight,U(this.afterBody,m),e.y-=o}drawFooter(e,s,n){let r=this.footer,o=r.length,a,l;if(o){let c=Ze(n.rtl,this.x,this.width);for(e.x=Yn(this,n.footerAlign,n),e.y+=n.footerMarginTop,s.textAlign=c.textAlign(n.footerAlign),s.textBaseline="middle",a=ut(n.footerFont),s.fillStyle=n.footerColor,s.font=a.string,l=0;l<o;++l)s.fillText(r[l],c.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+n.footerSpacing}}drawBackground(e,s,n,r){let{xAlign:o,yAlign:a}=this,{x:l,y:c}=e,{width:h,height:u}=n,{topLeft:d,topRight:f,bottomLeft:p,bottomRight:g}=Re(r.cornerRadius);s.fillStyle=r.backgroundColor,s.strokeStyle=r.borderColor,s.lineWidth=r.borderWidth,s.beginPath(),s.moveTo(l+d,c),a==="top"&&this.drawCaret(e,s,n,r),s.lineTo(l+h-f,c),s.quadraticCurveTo(l+h,c,l+h,c+f),a==="center"&&o==="right"&&this.drawCaret(e,s,n,r),s.lineTo(l+h,c+u-g),s.quadraticCurveTo(l+h,c+u,l+h-g,c+u),a==="bottom"&&this.drawCaret(e,s,n,r),s.lineTo(l+p,c+u),s.quadraticCurveTo(l,c+u,l,c+u-p),a==="center"&&o==="left"&&this.drawCaret(e,s,n,r),s.lineTo(l,c+d),s.quadraticCurveTo(l,c,l+d,c),s.closePath(),s.fill(),r.borderWidth>0&&s.stroke()}_updateAnimationTarget(e){let s=this.chart,n=this.$animations,r=n&&n.x,o=n&&n.y;if(r||o){let a=Os[e.position].call(this,this._active,this._eventPosition);if(!a)return;let l=this._size=_d(this,e),c=Object.assign({},a,this._size),h=vd(s,e,c),u=bd(e,c,h,s);(r._to!==u.x||o._to!==u.y)&&(this.xAlign=h.xAlign,this.yAlign=h.yAlign,this.width=l.width,this.height=l.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){let s=this.options.setContext(this.getContext()),n=this.opacity;if(!n)return;this._updateAnimationTarget(s);let r={width:this.width,height:this.height},o={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;let a=yt(s.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;s.enabled&&l&&(e.save(),e.globalAlpha=n,this.drawBackground(o,e,r,s),$a(e,s.textDirection),o.y+=a.top,this.drawTitle(o,e,s),this.drawBody(o,e,s),this.drawFooter(o,e,s),Ba(e,s.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,s){let n=this._active,r=e.map(({datasetIndex:l,index:c})=>{let h=this.chart.getDatasetMeta(l);if(!h)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:h.data[c],index:c}}),o=!bs(n,r),a=this._positionChanged(r,s);(o||a)&&(this._active=r,this._eventPosition=s,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,s,n=!0){if(s&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let r=this.options,o=this._active||[],a=this._getActiveElements(e,o,s,n),l=this._positionChanged(a,e),c=s||!bs(a,o)||l;return c&&(this._active=a,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,s))),c}_getActiveElements(e,s,n,r){let o=this.options;if(e.type==="mouseout")return[];if(!r)return s.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);let a=this.chart.getElementsAtEventForMode(e,o.mode,o,n);return o.reverse&&a.reverse(),a}_positionChanged(e,s){let{caretX:n,caretY:r,options:o}=this,a=Os[o.position].call(this,e,s);return a!==!1&&(n!==a.x||r!==a.y)}}return i})(),yx={id:"tooltip",_element:wd,positioners:Os,afterInit(i,t,e){e&&(i.tooltip=new wd({chart:i,options:e}))},beforeUpdate(i,t,e){i.tooltip&&i.tooltip.initialize(e)},reset(i,t,e){i.tooltip&&i.tooltip.initialize(e)},afterDraw(i){let t=i.tooltip;if(t&&t._willRender()){let e={tooltip:t};if(i.notifyPlugins("beforeTooltipDraw",js(zs({},e),{cancelable:!0}))===!1)return;t.draw(i.ctx),i.notifyPlugins("afterTooltipDraw",e)}},afterEvent(i,t){if(i.tooltip){let e=t.replay;i.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(i,t)=>t.bodyFont.size,boxWidth:(i,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Jd},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:i=>i!=="filter"&&i!=="itemSort"&&i!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},wx=Object.freeze({__proto__:null,Colors:Ib,Decimation:$b,Filler:nx,Legend:hx,SubTitle:fx,Title:dx,Tooltip:yx}),kx=(i,t,e,s)=>(typeof t=="string"?(e=i.push(t)-1,s.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function Sx(i,t,e,s){let n=i.indexOf(t);if(n===-1)return kx(i,t,e,s);let r=i.lastIndexOf(t);return n!==r?e:n}var Mx=(i,t)=>i===null?null:pt(Math.round(i),0,t);function kd(i){let t=this.getLabels();return i>=0&&i<t.length?t[i]:i}var Px=(()=>{class i extends ti{static id="category";static defaults={ticks:{callback:kd}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){let s=this._addedLabels;if(s.length){let n=this.getLabels();for(let{index:r,label:o}of s)n[r]===o&&n.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,s){if(N(e))return null;let n=this.getLabels();return s=isFinite(s)&&n[s]===e?s:Sx(n,e,F(s,e),this._addedLabels),Mx(s,n.length-1)}determineDataLimits(){let{minDefined:e,maxDefined:s}=this.getUserBounds(),{min:n,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(n=0),s||(r=this.getLabels().length-1)),this.min=n,this.max=r}buildTicks(){let e=this.min,s=this.max,n=this.options.offset,r=[],o=this.getLabels();o=e===0&&s===o.length-1?o:o.slice(e,s+1),this._valueRange=Math.max(o.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let a=e;a<=s;a++)r.push({value:a});return r}getLabelForValue(e){return kd.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){let s=this.ticks;return e<0||e>s.length-1?null:this.getPixelForValue(s[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}return i})();function Ex(i,t){let e=[],{bounds:n,step:r,min:o,max:a,precision:l,count:c,maxTicks:h,maxDigits:u,includeBounds:d}=i,f=r||1,p=h-1,{min:g,max:m}=t,_=!N(o),v=!N(a),y=!N(c),w=(m-g)/(u+1),b=_a((m-g)/p/f)*f,S,M,k,O;if(b<1e-14&&!_&&!v)return[{value:g},{value:m}];O=Math.ceil(m/b)-Math.floor(g/b),O>p&&(b=_a(O*b/p/f)*f),N(l)||(S=Math.pow(10,l),b=Math.ceil(b*S)/S),n==="ticks"?(M=Math.floor(g/b)*b,k=Math.ceil(m/b)*b):(M=g,k=m),_&&v&&r&&cu((a-o)/r,b/1e3)?(O=Math.round(Math.min((a-o)/b,h)),b=(a-o)/O,M=o,k=a):y?(M=_?o:M,k=v?a:k,O=c-1,b=(k-M)/O):(O=(k-M)/b,xi(O,Math.round(O),b/1e3)?O=Math.round(O):O=Math.ceil(O));let A=Math.max(ba(b),ba(M));S=Math.pow(10,N(l)?A:l),M=Math.round(M*S)/S,k=Math.round(k*S)/S;let D=0;for(_&&(d&&M!==o?(e.push({value:o}),M<o&&D++,xi(Math.round((M+D*b)*S)/S,o,Sd(o,w,i))&&D++):M<o&&D++);D<O;++D){let I=Math.round((M+D*b)*S)/S;if(v&&I>a)break;e.push({value:I})}return v&&d&&k!==a?e.length&&xi(e[e.length-1].value,a,Sd(a,w,i))?e[e.length-1].value=a:e.push({value:a}):(!v||k===a)&&e.push({value:k}),e}function Sd(i,t,{horizontal:e,minRotation:s}){let n=$t(s),r=(e?Math.sin(n):Math.cos(n))||.001,o=.75*t*(""+i).length;return Math.min(t/r,o)}var Ei=class extends ti{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return N(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){let{beginAtZero:t}=this.options,{minDefined:e,maxDefined:s}=this.getUserBounds(),{min:n,max:r}=this,o=l=>n=e?n:l,a=l=>r=s?r:l;if(t){let l=Wt(n),c=Wt(r);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(n===r){let l=r===0?1:Math.abs(r*.05);a(r+l),t||o(n-l)}this.min=n,this.max=r}getTickLimit(){let t=this.options.ticks,{maxTicksLimit:e,stepSize:s}=t,n;return s?(n=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,n>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${n} ticks. Limiting to 1000.`),n=1e3)):(n=this.computeTickLimit(),e=e||11),e&&(n=Math.min(e,n)),n}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){let t=this.options,e=t.ticks,s=this.getTickLimit();s=Math.max(2,s);let n={maxTicks:s,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},r=this._range||this,o=Ex(n,r);return t.bounds==="ticks"&&va(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){let t=this.ticks,e=this.min,s=this.max;if(super.configure(),this.options.offset&&t.length){let n=(s-e)/Math.max(t.length-1,1)/2;e-=n,s+=n}this._startValue=e,this._endValue=s,this._valueRange=s-e}getLabelForValue(t){return wi(t,this.chart.options.locale,this.options.ticks.format)}},gl=class extends Ei{static id="linear";static defaults={ticks:{callback:xs.formatters.numeric}};determineDataLimits(){let{min:t,max:e}=this.getMinMax(!0);this.min=nt(t)?t:0,this.max=nt(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){let t=this.isHorizontal(),e=t?this.width:this.height,s=$t(this.options.ticks.minRotation),n=(t?Math.sin(s):Math.cos(s))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,r.lineHeight/n))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}},Ds=i=>Math.floor(ue(i)),Qe=(i,t)=>Math.pow(10,Ds(i)+t);function Md(i){return i/Math.pow(10,Ds(i))===1}function Pd(i,t,e){let s=Math.pow(10,e),n=Math.floor(i/s);return Math.ceil(t/s)-n}function Cx(i,t){let e=t-i,s=Ds(e);for(;Pd(i,t,s)>10;)s++;for(;Pd(i,t,s)<10;)s--;return Math.min(s,Ds(i))}function Ox(i,{min:t,max:e}){t=Ot(i.min,t);let s=[],n=Ds(t),r=Cx(t,e),o=r<0?Math.pow(10,Math.abs(r)):1,a=Math.pow(10,r),l=n>r?Math.pow(10,n):0,c=Math.round((t-l)*o)/o,h=Math.floor((t-l)/a/10)*a*10,u=Math.floor((c-h)/Math.pow(10,r)),d=Ot(i.min,Math.round((l+h+u*Math.pow(10,r))*o)/o);for(;d<e;)s.push({value:d,major:Md(d),significand:u}),u>=10?u=u<15?15:20:u++,u>=20&&(r++,u=2,o=r>=0?1:o),d=Math.round((l+h+u*Math.pow(10,r))*o)/o;let f=Ot(i.max,d);return s.push({value:f,major:Md(f),significand:u}),s}var ml=class extends ti{static id="logarithmic";static defaults={ticks:{callback:xs.formatters.logarithmic,major:{enabled:!0}}};constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){let s=Ei.prototype.parse.apply(this,[t,e]);if(s===0){this._zero=!0;return}return nt(s)&&s>0?s:null}determineDataLimits(){let{min:t,max:e}=this.getMinMax(!0);this.min=nt(t)?Math.max(0,t):null,this.max=nt(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!nt(this._userMin)&&(this.min=t===Qe(this.min,0)?Qe(this.min,-1):Qe(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:t,maxDefined:e}=this.getUserBounds(),s=this.min,n=this.max,r=a=>s=t?s:a,o=a=>n=e?n:a;s===n&&(s<=0?(r(1),o(10)):(r(Qe(s,-1)),o(Qe(n,1)))),s<=0&&r(Qe(n,-1)),n<=0&&o(Qe(s,1)),this.min=s,this.max=n}buildTicks(){let t=this.options,e={min:this._userMin,max:this._userMax},s=Ox(e,this);return t.bounds==="ticks"&&va(s,this,"value"),t.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}getLabelForValue(t){return t===void 0?"0":wi(t,this.chart.options.locale,this.options.ticks.format)}configure(){let t=this.min;super.configure(),this._startValue=ue(t),this._valueRange=ue(this.max)-ue(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(ue(t)-this._startValue)/this._valueRange)}getValueForPixel(t){let e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}};function _l(i){let t=i.ticks;if(t.display&&i.display){let e=yt(t.backdropPadding);return F(t.font&&t.font.size,X.font.size)+e.height}return 0}function Tx(i,t,e){return e=Q(e)?e:[e],{w:vu(i,t.string,e),h:e.length*t.lineHeight}}function Ed(i,t,e,s,n){return i===s||i===n?{start:t-e/2,end:t+e/2}:i<s||i>n?{start:t-e,end:t}:{start:t,end:t+e}}function Ax(i){let t={l:i.left+i._padding.left,r:i.right-i._padding.right,t:i.top+i._padding.top,b:i.bottom-i._padding.bottom},e=Object.assign({},t),s=[],n=[],r=i._pointLabels.length,o=i.options.pointLabels,a=o.centerPointLabels?z/r:0;for(let l=0;l<r;l++){let c=o.setContext(i.getPointLabelContext(l));n[l]=c.padding;let h=i.getPointPosition(l,i.drawingArea+n[l],a),u=ut(c.font),d=Tx(i.ctx,u,i._pointLabels[l]);s[l]=d;let f=bt(i.getIndexAngle(l)+a),p=Math.round(Rn(f)),g=Ed(p,h.x,d.w,0,180),m=Ed(p,h.y,d.h,90,270);Dx(e,t,f,g,m)}i.setCenterPoint(t.l-e.l,e.r-t.r,t.t-e.t,e.b-t.b),i._pointLabelItems=Fx(i,s,n)}function Dx(i,t,e,s,n){let r=Math.abs(Math.sin(e)),o=Math.abs(Math.cos(e)),a=0,l=0;s.start<t.l?(a=(t.l-s.start)/r,i.l=Math.min(i.l,t.l-a)):s.end>t.r&&(a=(s.end-t.r)/r,i.r=Math.max(i.r,t.r+a)),n.start<t.t?(l=(t.t-n.start)/o,i.t=Math.min(i.t,t.t-l)):n.end>t.b&&(l=(n.end-t.b)/o,i.b=Math.max(i.b,t.b+l))}function Rx(i,t,e){let s=i.drawingArea,{extra:n,additionalAngle:r,padding:o,size:a}=e,l=i.getPointPosition(t,s+n+o,r),c=Math.round(Rn(bt(l.angle+ot))),h=$x(l.y,a.h,c),u=Lx(c),d=Nx(l.x,a.w,u);return{visible:!0,x:l.x,y:h,textAlign:u,left:d,top:h,right:d+a.w,bottom:h+a.h}}function Ix(i,t){if(!t)return!0;let{left:e,top:s,right:n,bottom:r}=i;return!(Gt({x:e,y:s},t)||Gt({x:e,y:r},t)||Gt({x:n,y:s},t)||Gt({x:n,y:r},t))}function Fx(i,t,e){let s=[],n=i._pointLabels.length,r=i.options,{centerPointLabels:o,display:a}=r.pointLabels,l={extra:_l(r)/2,additionalAngle:o?z/n:0},c;for(let h=0;h<n;h++){l.padding=e[h],l.size=t[h];let u=Rx(i,h,l);s.push(u),a==="auto"&&(u.visible=Ix(u,c),u.visible&&(c=u))}return s}function Lx(i){return i===0||i===180?"center":i<180?"left":"right"}function Nx(i,t,e){return e==="right"?i-=t:e==="center"&&(i-=t/2),i}function $x(i,t,e){return e===90||e===270?i-=t/2:(e>270||e<90)&&(i-=t),i}function Bx(i,t,e){let{left:s,top:n,right:r,bottom:o}=e,{backdropColor:a}=t;if(!N(a)){let l=Re(t.borderRadius),c=yt(t.backdropPadding);i.fillStyle=a;let h=s-c.left,u=n-c.top,d=r-s+c.width,f=o-n+c.height;Object.values(l).some(p=>p!==0)?(i.beginPath(),ki(i,{x:h,y:u,w:d,h:f,radius:l}),i.fill()):i.fillRect(h,u,d,f)}}function zx(i,t){let{ctx:e,options:{pointLabels:s}}=i;for(let n=t-1;n>=0;n--){let r=i._pointLabelItems[n];if(!r.visible)continue;let o=s.setContext(i.getPointLabelContext(n));Bx(e,o,r);let a=ut(o.font),{x:l,y:c,textAlign:h}=r;De(e,i._pointLabels[n],l,c+a.lineHeight/2,a,{color:o.color,textAlign:h,textBaseline:"middle"})}}function Qd(i,t,e,s){let{ctx:n}=i;if(e)n.arc(i.xCenter,i.yCenter,t,0,tt);else{let r=i.getPointPosition(0,t);n.moveTo(r.x,r.y);for(let o=1;o<s;o++)r=i.getPointPosition(o,t),n.lineTo(r.x,r.y)}}function jx(i,t,e,s,n){let r=i.ctx,o=t.circular,{color:a,lineWidth:l}=t;!o&&!s||!a||!l||e<0||(r.save(),r.strokeStyle=a,r.lineWidth=l,r.setLineDash(n.dash||[]),r.lineDashOffset=n.dashOffset,r.beginPath(),Qd(i,e,o,s),r.closePath(),r.stroke(),r.restore())}function Hx(i,t,e){return fe(i,{label:e,index:t,type:"pointLabel"})}var vl=class extends Ei{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:xs.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let t=this._padding=yt(_l(this.options)/2),e=this.width=this.maxWidth-t.width,s=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+s/2+t.top),this.drawingArea=Math.floor(Math.min(e,s)/2)}determineDataLimits(){let{min:t,max:e}=this.getMinMax(!1);this.min=nt(t)&&!isNaN(t)?t:0,this.max=nt(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/_l(this.options))}generateTickLabels(t){Ei.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((e,s)=>{let n=G(this.options.pointLabels.callback,[e,s],this);return n||n===0?n:""}).filter((e,s)=>this.chart.getDataVisibility(s))}fit(){let t=this.options;t.display&&t.pointLabels.display?Ax(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,s,n){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((s-n)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,s,n))}getIndexAngle(t){let e=tt/(this._pointLabels.length||1),s=this.options.startAngle||0;return bt(t*e+$t(s))}getDistanceFromCenterForValue(t){if(N(t))return NaN;let e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(N(t))return NaN;let e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){let e=this._pointLabels||[];if(t>=0&&t<e.length){let s=e[t];return Hx(this.getContext(),t,s)}}getPointPosition(t,e,s=0){let n=this.getIndexAngle(t)-ot+s;return{x:Math.cos(n)*e+this.xCenter,y:Math.sin(n)*e+this.yCenter,angle:n}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){let{left:e,top:s,right:n,bottom:r}=this._pointLabelItems[t];return{left:e,top:s,right:n,bottom:r}}drawBackground(){let{backgroundColor:t,grid:{circular:e}}=this.options;if(t){let s=this.ctx;s.save(),s.beginPath(),Qd(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),s.closePath(),s.fillStyle=t,s.fill(),s.restore()}}drawGrid(){let t=this.ctx,e=this.options,{angleLines:s,grid:n,border:r}=e,o=this._pointLabels.length,a,l,c;if(e.pointLabels.display&&zx(this,o),n.display&&this.ticks.forEach((h,u)=>{if(u!==0||u===0&&this.min<0){l=this.getDistanceFromCenterForValue(h.value);let d=this.getContext(u),f=n.setContext(d),p=r.setContext(d);jx(this,f,l,o,p)}}),s.display){for(t.save(),a=o-1;a>=0;a--){let h=s.setContext(this.getPointLabelContext(a)),{color:u,lineWidth:d}=h;!d||!u||(t.lineWidth=d,t.strokeStyle=u,t.setLineDash(h.borderDash),t.lineDashOffset=h.borderDashOffset,l=this.getDistanceFromCenterForValue(e.reverse?this.min:this.max),c=this.getPointPosition(a,l),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(c.x,c.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){let t=this.ctx,e=this.options,s=e.ticks;if(!s.display)return;let n=this.getIndexAngle(0),r,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(n),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!e.reverse)return;let c=s.setContext(this.getContext(l)),h=ut(c.font);if(r=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){t.font=h.string,o=t.measureText(a.label).width,t.fillStyle=c.backdropColor;let u=yt(c.backdropPadding);t.fillRect(-o/2-u.left,-r-h.size/2-u.top,o+u.width,h.size+u.height)}De(t,a.label,0,-r,h,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),t.restore()}drawTitle(){}},or={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},At=Object.keys(or);function Cd(i,t){return i-t}function Od(i,t){if(N(t))return null;let e=i._adapter,{parser:s,round:n,isoWeekday:r}=i._parseOpts,o=t;return typeof s=="function"&&(o=s(o)),nt(o)||(o=typeof s=="string"?e.parse(o,s):e.parse(o)),o===null?null:(n&&(o=n==="week"&&(Ke(r)||r===!0)?e.startOf(o,"isoWeek",r):e.startOf(o,n)),+o)}function Td(i,t,e,s){let n=At.length;for(let r=At.indexOf(i);r<n-1;++r){let o=or[At[r]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((e-t)/(a*o.size))<=s)return At[r]}return At[n-1]}function Wx(i,t,e,s,n){for(let r=At.length-1;r>=At.indexOf(e);r--){let o=At[r];if(or[o].common&&i._adapter.diff(n,s,o)>=t-1)return o}return At[e?At.indexOf(e):0]}function Vx(i){for(let t=At.indexOf(i)+1,e=At.length;t<e;++t)if(or[At[t]].common)return At[t]}function Ad(i,t,e){if(!e)i[t]=!0;else if(e.length){let{lo:s,hi:n}=In(e,t),r=e[s]>=t?e[s]:e[n];i[r]=!0}}function Ux(i,t,e,s){let n=i._adapter,r=+n.startOf(t[0].value,s),o=t[t.length-1].value,a,l;for(a=r;a<=o;a=+n.add(a,1,s))l=e[a],l>=0&&(t[l].major=!0);return t}function Dd(i,t,e){let s=[],n={},r=t.length,o,a;for(o=0;o<r;++o)a=t[o],n[a]=o,s.push({value:a,major:!1});return r===0||!e?s:Ux(i,s,n,e)}var bl=(()=>{class i extends ti{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,s={}){let n=e.time||(e.time={}),r=this._adapter=new iv._date(e.adapters.date);r.init(s),vi(n.displayFormats,r.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=s.normalized}parse(e,s){return e===void 0?null:Od(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let e=this.options,s=this._adapter,n=e.time.unit||"day",{min:r,max:o,minDefined:a,maxDefined:l}=this.getUserBounds();function c(h){!a&&!isNaN(h.min)&&(r=Math.min(r,h.min)),!l&&!isNaN(h.max)&&(o=Math.max(o,h.max))}(!a||!l)&&(c(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&c(this.getMinMax(!1))),r=nt(r)&&!isNaN(r)?r:+s.startOf(Date.now(),n),o=nt(o)&&!isNaN(o)?o:+s.endOf(Date.now(),n)+1,this.min=Math.min(r,o-1),this.max=Math.max(r+1,o)}_getLabelBounds(){let e=this.getLabelTimestamps(),s=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(s=e[0],n=e[e.length-1]),{min:s,max:n}}buildTicks(){let e=this.options,s=e.time,n=e.ticks,r=n.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);let o=this.min,a=this.max,l=du(r,o,a);return this._unit=s.unit||(n.autoSkip?Td(s.minUnit,this.min,this.max,this._getLabelCapacity(o)):Wx(this,l.length,s.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:Vx(this._unit),this.initOffsets(r),e.reverse&&l.reverse(),Dd(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let s=0,n=0,r,o;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?s=1-r:s=(this.getDecimalForValue(e[1])-r)/2,o=this.getDecimalForValue(e[e.length-1]),e.length===1?n=o:n=(o-this.getDecimalForValue(e[e.length-2]))/2);let a=e.length<3?.5:.25;s=pt(s,0,a),n=pt(n,0,a),this._offsets={start:s,end:n,factor:1/(s+1+n)}}_generate(){let e=this._adapter,s=this.min,n=this.max,r=this.options,o=r.time,a=o.unit||Td(o.minUnit,s,n,this._getLabelCapacity(s)),l=F(r.ticks.stepSize,1),c=a==="week"?o.isoWeekday:!1,h=Ke(c)||c===!0,u={},d=s,f,p;if(h&&(d=+e.startOf(d,"isoWeek",c)),d=+e.startOf(d,h?"day":a),e.diff(n,s,a)>1e5*l)throw new Error(s+" and "+n+" are too far apart with stepSize of "+l+" "+a);let g=r.ticks.source==="data"&&this.getDataTimestamps();for(f=d,p=0;f<n;f=+e.add(f,l,a),p++)Ad(u,f,g);return(f===n||r.bounds==="ticks"||p===1)&&Ad(u,f,g),Object.keys(u).sort(Cd).map(m=>+m)}getLabelForValue(e){let s=this._adapter,n=this.options.time;return n.tooltipFormat?s.format(e,n.tooltipFormat):s.format(e,n.displayFormats.datetime)}format(e,s){let r=this.options.time.displayFormats,o=this._unit,a=s||r[o];return this._adapter.format(e,a)}_tickFormatFunction(e,s,n,r){let o=this.options,a=o.ticks.callback;if(a)return G(a,[e,s,n],this);let l=o.time.displayFormats,c=this._unit,h=this._majorUnit,u=c&&l[c],d=h&&l[h],f=n[s],p=h&&d&&f&&f.major;return this._adapter.format(e,r||(p?d:u))}generateTickLabels(e){let s,n,r;for(s=0,n=e.length;s<n;++s)r=e[s],r.label=this._tickFormatFunction(r.value,s,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){let s=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((s.start+n)*s.factor)}getValueForPixel(e){let s=this._offsets,n=this.getDecimalForPixel(e)/s.factor-s.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){let s=this.options.ticks,n=this.ctx.measureText(e).width,r=$t(this.isHorizontal()?s.maxRotation:s.minRotation),o=Math.cos(r),a=Math.sin(r),l=this._resolveTickFontOptions(0).size;return{w:n*o+l*a,h:n*a+l*o}}_getLabelCapacity(e){let s=this.options.time,n=s.displayFormats,r=n[s.unit]||n.millisecond,o=this._tickFormatFunction(e,0,Dd(this,[e],this._majorUnit),r),a=this._getLabelSize(o),l=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return l>0?l:1}getDataTimestamps(){let e=this._cache.data||[],s,n;if(e.length)return e;let r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(s=0,n=r.length;s<n;++s)e=e.concat(r[s].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){let e=this._cache.labels||[],s,n;if(e.length)return e;let r=this.getLabels();for(s=0,n=r.length;s<n;++s)e.push(Od(this,r[s]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return wa(e.sort(Cd))}}return i})();function Gn(i,t,e){let s=0,n=i.length-1,r,o,a,l;e?(t>=i[s].pos&&t<=i[n].pos&&({lo:s,hi:n}=Yt(i,"pos",t)),{pos:r,time:a}=i[s],{pos:o,time:l}=i[n]):(t>=i[s].time&&t<=i[n].time&&({lo:s,hi:n}=Yt(i,"time",t)),{time:r,pos:a}=i[s],{time:o,pos:l}=i[n]);let c=o-r;return c?a+(l-a)*(t-r)/c:a}var xl=class extends bl{static id="timeseries";static defaults=bl.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=Gn(e,this.min),this._tableRange=Gn(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){let{min:e,max:s}=this,n=[],r=[],o,a,l,c,h;for(o=0,a=t.length;o<a;++o)c=t[o],c>=e&&c<=s&&n.push(c);if(n.length<2)return[{time:e,pos:0},{time:s,pos:1}];for(o=0,a=n.length;o<a;++o)h=n[o+1],l=n[o-1],c=n[o],Math.round((h+l)/2)!==c&&r.push({time:c,pos:o/(a-1)});return r}_generate(){let t=this.min,e=this.max,s=super.getDataTimestamps();return(!s.includes(t)||!s.length)&&s.splice(0,0,t),(!s.includes(e)||s.length===1)&&s.push(e),s.sort((n,r)=>n-r)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;let e=this.getDataTimestamps(),s=this.getLabelTimestamps();return e.length&&s.length?t=this.normalize(e.concat(s)):t=e.length?e:s,t=this._cache.all=t,t}getDecimalForValue(t){return(Gn(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){let e=this._offsets,s=this.getDecimalForPixel(t)/e.factor-e.end;return Gn(this._table,s*this._tableRange+this._minPos,!0)}},qx=Object.freeze({__proto__:null,CategoryScale:Px,LinearScale:gl,LogarithmicScale:ml,RadialLinearScale:vl,TimeScale:bl,TimeSeriesScale:xl}),tf=[ev,Eb,wx,qx];var Yx=typeof global=="object"&&global&&global.Object===Object&&global,ar=Yx;var Gx=typeof self=="object"&&self&&self.Object===Object&&self,Xx=ar||Gx||Function("return this")(),Bt=Xx;var Kx=Bt.Symbol,Ci=Kx;var ef=Object.prototype,Zx=ef.hasOwnProperty,Jx=ef.toString,Is=Ci?Ci.toStringTag:void 0;function Qx(i){var t=Zx.call(i,Is),e=i[Is];try{i[Is]=void 0;var s=!0}catch{}var n=Jx.call(i);return s&&(t?i[Is]=e:delete i[Is]),n}var sf=Qx;var t0=Object.prototype,e0=t0.toString;function i0(i){return e0.call(i)}var nf=i0;var s0="[object Null]",n0="[object Undefined]",rf=Ci?Ci.toStringTag:void 0;function r0(i){return i==null?i===void 0?n0:s0:rf&&rf in Object(i)?sf(i):nf(i)}var Ne=r0;function o0(i){return i!=null&&typeof i=="object"}var Qt=o0;var a0=Array.isArray,Fs=a0;function l0(i){var t=typeof i;return i!=null&&(t=="object"||t=="function")}var Dt=l0;function c0(i){return i}var lr=c0;var h0="[object AsyncFunction]",u0="[object Function]",d0="[object GeneratorFunction]",f0="[object Proxy]";function p0(i){if(!Dt(i))return!1;var t=Ne(i);return t==u0||t==d0||t==h0||t==f0}var Oi=p0;var g0=Bt["__core-js_shared__"],cr=g0;var of=(function(){var i=/[^.]+$/.exec(cr&&cr.keys&&cr.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""})();function m0(i){return!!of&&of in i}var af=m0;var _0=Function.prototype,v0=_0.toString;function b0(i){if(i!=null){try{return v0.call(i)}catch{}try{return i+""}catch{}}return""}var lf=b0;var x0=/[\\^$.*+?()[\]{}|]/g,y0=/^\[object .+?Constructor\]$/,w0=Function.prototype,k0=Object.prototype,S0=w0.toString,M0=k0.hasOwnProperty,P0=RegExp("^"+S0.call(M0).replace(x0,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function E0(i){if(!Dt(i)||af(i))return!1;var t=Oi(i)?P0:y0;return t.test(lf(i))}var cf=E0;function C0(i,t){return i?.[t]}var hf=C0;function O0(i,t){var e=hf(i,t);return cf(e)?e:void 0}var Ti=O0;var uf=Object.create,T0=(function(){function i(){}return function(t){if(!Dt(t))return{};if(uf)return uf(t);i.prototype=t;var e=new i;return i.prototype=void 0,e}})(),df=T0;function A0(i,t,e){switch(e.length){case 0:return i.call(t);case 1:return i.call(t,e[0]);case 2:return i.call(t,e[0],e[1]);case 3:return i.call(t,e[0],e[1],e[2])}return i.apply(t,e)}var ff=A0;function D0(i,t){var e=-1,s=i.length;for(t||(t=Array(s));++e<s;)t[e]=i[e];return t}var pf=D0;var R0=800,I0=16,F0=Date.now;function L0(i){var t=0,e=0;return function(){var s=F0(),n=I0-(s-e);if(e=s,n>0){if(++t>=R0)return arguments[0]}else t=0;return i.apply(void 0,arguments)}}var gf=L0;function N0(i){return function(){return i}}var mf=N0;var $0=(function(){try{var i=Ti(Object,"defineProperty");return i({},"",{}),i}catch{}})(),Ai=$0;var B0=Ai?function(i,t){return Ai(i,"toString",{configurable:!0,enumerable:!1,value:mf(t),writable:!0})}:lr,_f=B0;var z0=gf(_f),vf=z0;var j0=9007199254740991,H0=/^(?:0|[1-9]\d*)$/;function W0(i,t){var e=typeof i;return t=t??j0,!!t&&(e=="number"||e!="symbol"&&H0.test(i))&&i>-1&&i%1==0&&i<t}var hr=W0;function V0(i,t,e){t=="__proto__"&&Ai?Ai(i,t,{configurable:!0,enumerable:!0,value:e,writable:!0}):i[t]=e}var Di=V0;function U0(i,t){return i===t||i!==i&&t!==t}var $e=U0;var q0=Object.prototype,Y0=q0.hasOwnProperty;function G0(i,t,e){var s=i[t];(!(Y0.call(i,t)&&$e(s,e))||e===void 0&&!(t in i))&&Di(i,t,e)}var bf=G0;function X0(i,t,e,s){var n=!e;e||(e={});for(var r=-1,o=t.length;++r<o;){var a=t[r],l=s?s(e[a],i[a],a,e,i):void 0;l===void 0&&(l=i[a]),n?Di(e,a,l):bf(e,a,l)}return e}var xf=X0;var yf=Math.max;function K0(i,t,e){return t=yf(t===void 0?i.length-1:t,0),function(){for(var s=arguments,n=-1,r=yf(s.length-t,0),o=Array(r);++n<r;)o[n]=s[t+n];n=-1;for(var a=Array(t+1);++n<t;)a[n]=s[n];return a[t]=e(o),ff(i,this,a)}}var wf=K0;function Z0(i,t){return vf(wf(i,t,lr),i+"")}var kf=Z0;var J0=9007199254740991;function Q0(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=J0}var ur=Q0;function ty(i){return i!=null&&ur(i.length)&&!Oi(i)}var Ri=ty;function ey(i,t,e){if(!Dt(e))return!1;var s=typeof t;return(s=="number"?Ri(e)&&hr(t,e.length):s=="string"&&t in e)?$e(e[t],i):!1}var Sf=ey;function iy(i){return kf(function(t,e){var s=-1,n=e.length,r=n>1?e[n-1]:void 0,o=n>2?e[2]:void 0;for(r=i.length>3&&typeof r=="function"?(n--,r):void 0,o&&Sf(e[0],e[1],o)&&(r=n<3?void 0:r,n=1),t=Object(t);++s<n;){var a=e[s];a&&i(t,a,s,r)}return t})}var Mf=iy;var sy=Object.prototype;function ny(i){var t=i&&i.constructor,e=typeof t=="function"&&t.prototype||sy;return i===e}var dr=ny;function ry(i,t){for(var e=-1,s=Array(i);++e<i;)s[e]=t(e);return s}var Pf=ry;var oy="[object Arguments]";function ay(i){return Qt(i)&&Ne(i)==oy}var wl=ay;var Ef=Object.prototype,ly=Ef.hasOwnProperty,cy=Ef.propertyIsEnumerable,hy=wl((function(){return arguments})())?wl:function(i){return Qt(i)&&ly.call(i,"callee")&&!cy.call(i,"callee")},Ls=hy;function uy(){return!1}var Cf=uy;var Af=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Of=Af&&typeof module=="object"&&module&&!module.nodeType&&module,dy=Of&&Of.exports===Af,Tf=dy?Bt.Buffer:void 0,fy=Tf?Tf.isBuffer:void 0,py=fy||Cf,fr=py;var gy="[object Arguments]",my="[object Array]",_y="[object Boolean]",vy="[object Date]",by="[object Error]",xy="[object Function]",yy="[object Map]",wy="[object Number]",ky="[object Object]",Sy="[object RegExp]",My="[object Set]",Py="[object String]",Ey="[object WeakMap]",Cy="[object ArrayBuffer]",Oy="[object DataView]",Ty="[object Float32Array]",Ay="[object Float64Array]",Dy="[object Int8Array]",Ry="[object Int16Array]",Iy="[object Int32Array]",Fy="[object Uint8Array]",Ly="[object Uint8ClampedArray]",Ny="[object Uint16Array]",$y="[object Uint32Array]",et={};et[Ty]=et[Ay]=et[Dy]=et[Ry]=et[Iy]=et[Fy]=et[Ly]=et[Ny]=et[$y]=!0;et[gy]=et[my]=et[Cy]=et[_y]=et[Oy]=et[vy]=et[by]=et[xy]=et[yy]=et[wy]=et[ky]=et[Sy]=et[My]=et[Py]=et[Ey]=!1;function By(i){return Qt(i)&&ur(i.length)&&!!et[Ne(i)]}var Df=By;function zy(i){return function(t){return i(t)}}var Rf=zy;var If=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Ns=If&&typeof module=="object"&&module&&!module.nodeType&&module,jy=Ns&&Ns.exports===If,kl=jy&&ar.process,Hy=(function(){try{var i=Ns&&Ns.require&&Ns.require("util").types;return i||kl&&kl.binding&&kl.binding("util")}catch{}})(),Sl=Hy;var Ff=Sl&&Sl.isTypedArray,Wy=Ff?Rf(Ff):Df,pr=Wy;var Vy=Object.prototype,Uy=Vy.hasOwnProperty;function qy(i,t){var e=Fs(i),s=!e&&Ls(i),n=!e&&!s&&fr(i),r=!e&&!s&&!n&&pr(i),o=e||s||n||r,a=o?Pf(i.length,String):[],l=a.length;for(var c in i)(t||Uy.call(i,c))&&!(o&&(c=="length"||n&&(c=="offset"||c=="parent")||r&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||hr(c,l)))&&a.push(c);return a}var Lf=qy;function Yy(i,t){return function(e){return i(t(e))}}var Nf=Yy;function Gy(i){var t=[];if(i!=null)for(var e in Object(i))t.push(e);return t}var $f=Gy;var Xy=Object.prototype,Ky=Xy.hasOwnProperty;function Zy(i){if(!Dt(i))return $f(i);var t=dr(i),e=[];for(var s in i)s=="constructor"&&(t||!Ky.call(i,s))||e.push(s);return e}var Bf=Zy;function Jy(i){return Ri(i)?Lf(i,!0):Bf(i)}var gr=Jy;var Qy=Ti(Object,"create"),me=Qy;function tw(){this.__data__=me?me(null):{},this.size=0}var zf=tw;function ew(i){var t=this.has(i)&&delete this.__data__[i];return this.size-=t?1:0,t}var jf=ew;var iw="__lodash_hash_undefined__",sw=Object.prototype,nw=sw.hasOwnProperty;function rw(i){var t=this.__data__;if(me){var e=t[i];return e===iw?void 0:e}return nw.call(t,i)?t[i]:void 0}var Hf=rw;var ow=Object.prototype,aw=ow.hasOwnProperty;function lw(i){var t=this.__data__;return me?t[i]!==void 0:aw.call(t,i)}var Wf=lw;var cw="__lodash_hash_undefined__";function hw(i,t){var e=this.__data__;return this.size+=this.has(i)?0:1,e[i]=me&&t===void 0?cw:t,this}var Vf=hw;function Ii(i){var t=-1,e=i==null?0:i.length;for(this.clear();++t<e;){var s=i[t];this.set(s[0],s[1])}}Ii.prototype.clear=zf;Ii.prototype.delete=jf;Ii.prototype.get=Hf;Ii.prototype.has=Wf;Ii.prototype.set=Vf;var Ml=Ii;function uw(){this.__data__=[],this.size=0}var Uf=uw;function dw(i,t){for(var e=i.length;e--;)if($e(i[e][0],t))return e;return-1}var Be=dw;var fw=Array.prototype,pw=fw.splice;function gw(i){var t=this.__data__,e=Be(t,i);if(e<0)return!1;var s=t.length-1;return e==s?t.pop():pw.call(t,e,1),--this.size,!0}var qf=gw;function mw(i){var t=this.__data__,e=Be(t,i);return e<0?void 0:t[e][1]}var Yf=mw;function _w(i){return Be(this.__data__,i)>-1}var Gf=_w;function vw(i,t){var e=this.__data__,s=Be(e,i);return s<0?(++this.size,e.push([i,t])):e[s][1]=t,this}var Xf=vw;function Fi(i){var t=-1,e=i==null?0:i.length;for(this.clear();++t<e;){var s=i[t];this.set(s[0],s[1])}}Fi.prototype.clear=Uf;Fi.prototype.delete=qf;Fi.prototype.get=Yf;Fi.prototype.has=Gf;Fi.prototype.set=Xf;var ze=Fi;var bw=Ti(Bt,"Map"),mr=bw;function xw(){this.size=0,this.__data__={hash:new Ml,map:new(mr||ze),string:new Ml}}var Kf=xw;function yw(i){var t=typeof i;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?i!=="__proto__":i===null}var Zf=yw;function ww(i,t){var e=i.__data__;return Zf(t)?e[typeof t=="string"?"string":"hash"]:e.map}var je=ww;function kw(i){var t=je(this,i).delete(i);return this.size-=t?1:0,t}var Jf=kw;function Sw(i){return je(this,i).get(i)}var Qf=Sw;function Mw(i){return je(this,i).has(i)}var tp=Mw;function Pw(i,t){var e=je(this,i),s=e.size;return e.set(i,t),this.size+=e.size==s?0:1,this}var ep=Pw;function Li(i){var t=-1,e=i==null?0:i.length;for(this.clear();++t<e;){var s=i[t];this.set(s[0],s[1])}}Li.prototype.clear=Kf;Li.prototype.delete=Jf;Li.prototype.get=Qf;Li.prototype.has=tp;Li.prototype.set=ep;var ip=Li;var Ew=Nf(Object.getPrototypeOf,Object),_r=Ew;var Cw="[object Object]",Ow=Function.prototype,Tw=Object.prototype,sp=Ow.toString,Aw=Tw.hasOwnProperty,Dw=sp.call(Object);function Rw(i){if(!Qt(i)||Ne(i)!=Cw)return!1;var t=_r(i);if(t===null)return!0;var e=Aw.call(t,"constructor")&&t.constructor;return typeof e=="function"&&e instanceof e&&sp.call(e)==Dw}var np=Rw;function Iw(){this.__data__=new ze,this.size=0}var rp=Iw;function Fw(i){var t=this.__data__,e=t.delete(i);return this.size=t.size,e}var op=Fw;function Lw(i){return this.__data__.get(i)}var ap=Lw;function Nw(i){return this.__data__.has(i)}var lp=Nw;var $w=200;function Bw(i,t){var e=this.__data__;if(e instanceof ze){var s=e.__data__;if(!mr||s.length<$w-1)return s.push([i,t]),this.size=++e.size,this;e=this.__data__=new ip(s)}return e.set(i,t),this.size=e.size,this}var cp=Bw;function Ni(i){var t=this.__data__=new ze(i);this.size=t.size}Ni.prototype.clear=rp;Ni.prototype.delete=op;Ni.prototype.get=ap;Ni.prototype.has=lp;Ni.prototype.set=cp;var hp=Ni;var pp=typeof exports=="object"&&exports&&!exports.nodeType&&exports,up=pp&&typeof module=="object"&&module&&!module.nodeType&&module,zw=up&&up.exports===pp,dp=zw?Bt.Buffer:void 0,fp=dp?dp.allocUnsafe:void 0;function jw(i,t){if(t)return i.slice();var e=i.length,s=fp?fp(e):new i.constructor(e);return i.copy(s),s}var gp=jw;var Hw=Bt.Uint8Array,Pl=Hw;function Ww(i){var t=new i.constructor(i.byteLength);return new Pl(t).set(new Pl(i)),t}var mp=Ww;function Vw(i,t){var e=t?mp(i.buffer):i.buffer;return new i.constructor(e,i.byteOffset,i.length)}var _p=Vw;function Uw(i){return typeof i.constructor=="function"&&!dr(i)?df(_r(i)):{}}var vp=Uw;function qw(i){return function(t,e,s){for(var n=-1,r=Object(t),o=s(t),a=o.length;a--;){var l=o[i?a:++n];if(e(r[l],l,r)===!1)break}return t}}var bp=qw;var Yw=bp(),xp=Yw;function Gw(i,t,e){(e!==void 0&&!$e(i[t],e)||e===void 0&&!(t in i))&&Di(i,t,e)}var $s=Gw;function Xw(i){return Qt(i)&&Ri(i)}var yp=Xw;function Kw(i,t){if(!(t==="constructor"&&typeof i[t]=="function")&&t!="__proto__")return i[t]}var Bs=Kw;function Zw(i){return xf(i,gr(i))}var wp=Zw;function Jw(i,t,e,s,n,r,o){var a=Bs(i,e),l=Bs(t,e),c=o.get(l);if(c){$s(i,e,c);return}var h=r?r(a,l,e+"",i,t,o):void 0,u=h===void 0;if(u){var d=Fs(l),f=!d&&fr(l),p=!d&&!f&&pr(l);h=l,d||f||p?Fs(a)?h=a:yp(a)?h=pf(a):f?(u=!1,h=gp(l,!0)):p?(u=!1,h=_p(l,!0)):h=[]:np(l)||Ls(l)?(h=a,Ls(a)?h=wp(a):(!Dt(a)||Oi(a))&&(h=vp(l))):u=!1}u&&(o.set(l,h),n(h,l,s,r,o),o.delete(l)),$s(i,e,h)}var kp=Jw;function Sp(i,t,e,s,n){i!==t&&xp(t,function(r,o){if(n||(n=new hp),Dt(r))kp(i,t,o,e,Sp,s,n);else{var a=s?s(Bs(i,o),r,o+"",i,t,n):void 0;a===void 0&&(a=r),$s(i,o,a)}},gr)}var Mp=Sp;var Qw=Mf(function(i,t,e){Mp(i,t,e)}),vr=Qw;var Pp=new Il("Configuration for ngCharts");function aE(...i){return{registerables:[...tf,...i]}}function lE(...i){let t=vr({},...i);return{provide:Pp,useValue:t}}var t1=(()=>{class i{constructor(){this.colorschemesOptions=new Al(void 0)}setColorschemesOptions(e){this.pColorschemesOptions=e,this.colorschemesOptions.next(e)}getColorschemesOptions(){return this.pColorschemesOptions}static{this.\u0275fac=function(s){return new(s||i)}}static{this.\u0275prov=Rl({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),cE=(()=>{class i{constructor(e,s,n,r){this.zone=s,this.themeService=n,this.type="bar",this.plugins=[],this.chartClick=new yr,this.chartHover=new yr,this.subs=[],this.themeOverrides={},r?.registerables&&sr.register(...r.registerables),r?.defaults&&X.set(r.defaults),this.ctx=e.nativeElement.getContext("2d"),this.subs.push(this.themeService.colorschemesOptions.pipe(Dl()).subscribe(o=>this.themeChanged(o)))}ngOnChanges(e){let s=["type"],n=Object.getOwnPropertyNames(e);if(n.some(r=>s.includes(r))||n.every(r=>e[r].isFirstChange()))this.render();else{let r=this.getChartConfiguration();this.chart&&(Object.assign(this.chart.config.data,r.data),this.chart.config.plugins&&Object.assign(this.chart.config.plugins,r.plugins),this.chart.config.options&&Object.assign(this.chart.config.options,r.options)),this.update()}}ngOnDestroy(){this.chart&&(this.chart.destroy(),this.chart=void 0),this.subs.forEach(e=>e.unsubscribe())}render(){return this.chart&&this.chart.destroy(),this.zone.runOutsideAngular(()=>this.chart=new sr(this.ctx,this.getChartConfiguration()))}update(e){this.chart&&this.zone.runOutsideAngular(()=>this.chart?.update(e))}hideDataset(e,s){this.chart&&(this.chart.getDatasetMeta(e).hidden=s,this.update())}isDatasetHidden(e){return this.chart?.getDatasetMeta(e)?.hidden}toBase64Image(){return this.chart?.toBase64Image()}themeChanged(e){this.themeOverrides=e,this.chart&&(this.chart.config.options&&Object.assign(this.chart.config.options,this.getChartOptions()),this.update())}getChartOptions(){return vr({onHover:(e,s)=>{!this.chartHover.observed&&!this.chartHover.observers?.length||this.zone.run(()=>this.chartHover.emit({event:e,active:s}))},onClick:(e,s)=>{!this.chartClick.observed&&!this.chartClick.observers?.length||this.zone.run(()=>this.chartClick.emit({event:e,active:s}))}},this.themeOverrides,this.options,{plugins:{legend:{display:this.legend}}})}getChartConfiguration(){return{type:this.type,data:this.getChartData(),options:this.getChartOptions(),plugins:this.plugins}}getChartData(){return this.data?this.data:{labels:this.labels||[],datasets:this.datasets||[]}}static{this.\u0275fac=function(s){return new(s||i)($i(Nl),$i(Fl),$i(t1),$i(Pp,8))}}static{this.\u0275dir=$l({type:i,selectors:[["canvas","baseChart",""]],inputs:{type:"type",legend:"legend",data:"data",options:"options",plugins:"plugins",labels:"labels",datasets:"datasets"},outputs:{chartClick:"chartClick",chartHover:"chartHover"},exportAs:["base-chart"],features:[Ll]})}}return i})();export{a1 as a,aE as b,lE as c,cE as d};
