import{a as x,b as A,d as T,e as N,f as L,g as k,h as D,p as B,r as I}from"./chunk-GSH74JW6.js";import{a as F}from"./chunk-ZT4MGTUK.js";import{a as E,c as P,d as W}from"./chunk-VKJMBSB6.js";import"./chunk-7QORBSNT.js";import"./chunk-QGSRP5SS.js";import{m as w}from"./chunk-KW2FFXRI.js";import{Bb as o,Cb as v,Da as r,Db as C,Fb as l,Gb as m,Hb as d,Qa as _,V as f,ab as h,bb as y,gb as b,hb as t,ib as n,jb as c,la as g,rb as S,tb as M}from"./chunk-VQO264VU.js";import"./chunk-VOSPIT4N.js";function j(u,s){if(u&1&&(t(0,"div",7),c(1,"i",28),t(2,"span"),o(3),n()()),u&2){let a=M();r(3),v(a.error())}}function q(u,s){u&1&&c(0,"span",27)}var R=class u{route=f(E);router=f(P);auth=f(F);id=null;form=g({name:"",type:"",rubro:"",address:"",cuil:"",email:"",phone:"",is_active:!0},{});loading=g(!0,{});saving=g(!1,{});error=g(null,{});async ngOnInit(){if(this.id=this.route.snapshot.paramMap.get("id"),this.id){let s=this.auth.getSupabaseClient(),{data:a,error:e}=await s.from("suppliers").select("*").eq("id",this.id).single();a&&this.form.set({name:a.name,type:a.type||"",rubro:a.rubro||"",address:a.address||"",cuil:a.tax_id||"",email:a.email||"",phone:a.phone||"",is_active:a.is_active})}this.loading.set(!1)}async save(){this.saving.set(!0),this.error.set(null);let s=this.auth.getSupabaseClient(),a={name:this.form().name,type:this.form().type,rubro:this.form().rubro,address:this.form().address,tax_id:this.form().cuil,email:this.form().email,phone:this.form().phone,is_active:this.form().is_active};try{if(this.id){let{error:e}=await s.from("suppliers").update(a).eq("id",this.id);if(e)throw e}else{let{error:e}=await s.from("suppliers").insert(a);if(e)throw e}this.router.navigate(["/admin/suppliers"])}catch(e){this.error.set(e.message)}finally{this.saving.set(!1)}}static \u0275fac=function(a){return new(a||u)};static \u0275cmp=_({type:u,selectors:[["app-admin-supplier-form-page"]],decls:50,vars:12,consts:[[1,"max-w-4xl","mx-auto","text-gray-800"],[1,"flex","items-center","gap-4","mb-6"],["routerLink","/admin/suppliers",1,"btn","btn-circle","btn-ghost"],[1,"fas","fa-arrow-left"],[1,"text-2xl","font-bold","text-gray-800"],[3,"ngSubmit"],[1,"admin-form-section"],[1,"alert","alert-error","mb-6"],[1,"mb-4"],[1,"admin-form-label"],["type","text","name","name","required","",1,"admin-form-input",3,"ngModelChange","ngModel"],[1,"admin-form-grid"],["type","text","name","type","placeholder","Ej: Mayorista, Fabricante",1,"admin-form-input",3,"ngModelChange","ngModel"],["type","text","name","rubro","placeholder","Ej: Electr\xF3nica",1,"admin-form-input",3,"ngModelChange","ngModel"],[1,"admin-form-grid","mt-4"],["type","text","name","cuil",1,"admin-form-input",3,"ngModelChange","ngModel"],["type","text","name","phone",1,"admin-form-input",3,"ngModelChange","ngModel"],[1,"mt-4"],["type","email","name","email",1,"admin-form-input",3,"ngModelChange","ngModel"],["type","text","name","address",1,"admin-form-input",3,"ngModelChange","ngModel"],[1,"mt-6"],[1,"admin-form-checkbox-container","w-fit"],["type","checkbox","name","is_active",1,"checkbox","checkbox-primary","admin-form-checkbox",3,"ngModelChange","ngModel"],[1,"font-medium","text-gray-700"],[1,"flex","justify-end","gap-4","mt-6"],["routerLink","/admin/suppliers",1,"btn","btn-ghost"],["type","submit",1,"btn","btn-primary","px-8",3,"disabled"],[1,"loading","loading-spinner","loading-xs","mr-2"],[1,"fas","fa-exclamation-circle"]],template:function(a,e){a&1&&(t(0,"div",0)(1,"div",1)(2,"a",2),c(3,"i",3),n(),t(4,"h1",4),o(5),n()(),t(6,"form",5),S("ngSubmit",function(){return e.save()}),t(7,"div",6),h(8,j,4,1,"div",7),t(9,"div",8)(10,"label",9),o(11,"Nombre"),n(),t(12,"input",10),d("ngModelChange",function(i){return m(e.form().name,i)||(e.form().name=i),i}),n()(),t(13,"div",11)(14,"div")(15,"label",9),o(16,"Tipo"),n(),t(17,"input",12),d("ngModelChange",function(i){return m(e.form().type,i)||(e.form().type=i),i}),n()(),t(18,"div")(19,"label",9),o(20,"Rubro"),n(),t(21,"input",13),d("ngModelChange",function(i){return m(e.form().rubro,i)||(e.form().rubro=i),i}),n()()(),t(22,"div",14)(23,"div")(24,"label",9),o(25,"CUIL/CUIT"),n(),t(26,"input",15),d("ngModelChange",function(i){return m(e.form().cuil,i)||(e.form().cuil=i),i}),n()(),t(27,"div")(28,"label",9),o(29,"Tel\xE9fono"),n(),t(30,"input",16),d("ngModelChange",function(i){return m(e.form().phone,i)||(e.form().phone=i),i}),n()()(),t(31,"div",17)(32,"label",9),o(33,"Email"),n(),t(34,"input",18),d("ngModelChange",function(i){return m(e.form().email,i)||(e.form().email=i),i}),n()(),t(35,"div",17)(36,"label",9),o(37,"Direcci\xF3n"),n(),t(38,"input",19),d("ngModelChange",function(i){return m(e.form().address,i)||(e.form().address=i),i}),n()(),t(39,"div",20)(40,"label",21)(41,"input",22),d("ngModelChange",function(i){return m(e.form().is_active,i)||(e.form().is_active=i),i}),n(),t(42,"span",23),o(43,"Activo"),n()()()(),t(44,"div",24)(45,"a",25),o(46,"Cancelar"),n(),t(47,"button",26),h(48,q,1,0,"span",27),o(49," Guardar "),n()()()()),a&2&&(r(5),C("",e.id?"Editar":"Nuevo"," Proveedor"),r(3),y(e.error()?8:-1),r(4),l("ngModel",e.form().name),r(5),l("ngModel",e.form().type),r(4),l("ngModel",e.form().rubro),r(5),l("ngModel",e.form().cuil),r(4),l("ngModel",e.form().phone),r(4),l("ngModel",e.form().email),r(4),l("ngModel",e.form().address),r(3),l("ngModel",e.form().is_active),r(6),b("disabled",e.saving()),r(),y(e.saving()?48:-1))},dependencies:[w,I,D,A,x,T,N,B,k,L,W],encapsulation:2})};export{R as AdminSupplierFormPage};
