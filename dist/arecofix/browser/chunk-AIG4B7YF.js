import{a as A}from"./chunk-FDEIW4RV.js";import"./chunk-KXBHGC7O.js";import{e as w}from"./chunk-SJUHAIWY.js";import"./chunk-2IHNZNBZ.js";import{l as E,m as S,o as y}from"./chunk-NGBKTTVY.js";import{Db as b,Fa as r,Fb as a,Gb as m,Hb as c,Ta as h,W as u,Wb as p,Xb as _,Yb as C,eb as f,fb as g,ib as x,jb as v,lb as i,ma as d,mb as t,nb as l,xb as P}from"./chunk-CVZCBU36.js";import"./chunk-VOSPIT4N.js";var D=(n,s)=>s.id;function T(n,s){n&1&&(i(0,"tr")(1,"td",7),a(2,"Cargando..."),t()())}function N(n,s){n&1&&(i(0,"tr")(1,"td",7),a(2,"No hay compras registradas."),t()())}function M(n,s){if(n&1&&(i(0,"tr")(1,"td"),a(2),p(3,"date"),t(),i(4,"td"),a(5),t(),i(6,"td")(7,"span",8),a(8),p(9,"uppercase"),t()(),i(10,"td",9),a(11),t(),l(12,"td"),t()),n&2){let e=s.$implicit;r(2),m(C(3,10,e.created_at,"short")),r(3),m((e.suppliers==null?null:e.suppliers.name)||"Desconocido"),r(2),b("badge-success",e.status==="received")("badge-warning",e.status==="ordered")("badge-error",e.status==="cancelled"),r(),c(" ",_(9,13,e.status)," "),r(3),c("$",e.total_amount)}}function k(n,s){if(n&1&&x(0,M,13,15,"tr",null,D),n&2){let e=P();v(e.purchases())}}var I=class n{auth=u(A);purchases=d([]);loading=d(!0);async ngOnInit(){await this.loadPurchases()}async loadPurchases(){this.loading.set(!0);let s=this.auth.getSupabaseClient(),{data:e,error:o}=await s.from("purchases").select("*, suppliers(name)").order("created_at",{ascending:!1});e&&this.purchases.set(e),this.loading.set(!1)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=h({type:n,selectors:[["app-admin-purchases-page"]],decls:25,vars:1,consts:[[1,"flex","justify-between","items-center","mb-6"],[1,"text-2xl","font-bold","text-gray-800"],["routerLink","/admin/purchases/new",1,"btn","btn-primary"],[1,"fas","fa-plus","mr-2"],[1,"bg-white","rounded-lg","shadow","overflow-hidden"],[1,"overflow-x-auto"],[1,"table","w-full"],["colspan","5",1,"text-center","py-4"],[1,"badge"],[1,"font-bold"]],template:function(e,o){e&1&&(i(0,"div",0)(1,"h1",1),a(2,"Compras"),t(),i(3,"a",2),l(4,"i",3),a(5," Nueva Compra "),t()(),i(6,"div",4)(7,"div",5)(8,"table",6)(9,"thead")(10,"tr")(11,"th"),a(12,"Fecha"),t(),i(13,"th"),a(14,"Proveedor"),t(),i(15,"th"),a(16,"Estado"),t(),i(17,"th"),a(18,"Total"),t(),i(19,"th"),a(20,"Acciones"),t()()(),i(21,"tbody"),f(22,T,3,0,"tr")(23,N,3,0,"tr")(24,k,2,0),t()()()()),e&2&&(r(22),g(o.loading()?22:o.purchases().length===0?23:24))},dependencies:[y,w,E,S],encapsulation:2})};export{I as AdminPurchasesPage};
