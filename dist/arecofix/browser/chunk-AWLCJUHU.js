import{d as A}from"./chunk-6WWONRBM.js";import"./chunk-6MFU4D2Y.js";import"./chunk-YTQUIG7T.js";import"./chunk-QBOH7QZY.js";import{o as y}from"./chunk-YNFFGNY6.js";import{l as E,m as S,q as w}from"./chunk-Q44XB7TV.js";import{Ab as a,Bb as t,Cb as l,Mb as P,Tb as v,Ua as r,Vb as i,W as u,Wb as c,Xb as m,gb as h,lc as p,ma as d,mc as _,nc as C,tb as f,ub as g,xb as x,yb as b}from"./chunk-DX2LKEMG.js";import"./chunk-C6Q5SG76.js";var D=(n,s)=>s.id;function T(n,s){n&1&&(a(0,"tr")(1,"td",8),i(2,"Cargando..."),t()())}function N(n,s){n&1&&(a(0,"tr")(1,"td",8),i(2,"No hay compras registradas."),t()())}function M(n,s){if(n&1&&(a(0,"tr",9)(1,"td"),i(2),p(3,"date"),t(),a(4,"td"),i(5),t(),a(6,"td")(7,"span",10),i(8),p(9,"uppercase"),t()(),a(10,"td",11),i(11),t(),l(12,"td"),t()),n&2){let e=s.$implicit;r(2),c(C(3,10,e.created_at,"short")),r(3),c((e.suppliers==null?null:e.suppliers.name)||"Desconocido"),r(2),v("badge-success",e.status==="received")("badge-warning",e.status==="ordered")("badge-error",e.status==="cancelled"),r(),m(" ",_(9,13,e.status)," "),r(3),m("$",e.total_amount)}}function k(n,s){if(n&1&&x(0,M,13,15,"tr",9,D),n&2){let e=P();b(e.purchases())}}var I=class n{auth=u(A);purchases=d([]);loading=d(!0);async ngOnInit(){await this.loadPurchases()}async loadPurchases(){this.loading.set(!0);let s=this.auth.getSupabaseClient(),{data:e,error:o}=await s.from("purchases").select("*, suppliers(name)").order("created_at",{ascending:!1});e&&this.purchases.set(e),this.loading.set(!1)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=h({type:n,selectors:[["app-admin-purchases-page"]],decls:25,vars:1,consts:[[1,"flex","justify-between","items-center","mb-6"],[1,"text-2xl","font-bold","text-green-600"],["routerLink","/admin/purchases/new",1,"btn","btn-primary"],[1,"fas","fa-plus","mr-2"],[1,"bg-base-100","rounded-lg","shadow","overflow-hidden","text-base-content"],[1,"overflow-x-auto"],[1,"table","w-full"],[1,"text-base-content","font-bold"],["colspan","5",1,"text-center","py-4","text-base-content/70"],[1,"hover:bg-base-200/50"],[1,"badge"],[1,"font-bold"]],template:function(e,o){e&1&&(a(0,"div",0)(1,"h1",1),i(2,"Compras"),t(),a(3,"a",2),l(4,"i",3),i(5," Nueva Compra "),t()(),a(6,"div",4)(7,"div",5)(8,"table",6)(9,"thead")(10,"tr",7)(11,"th"),i(12,"Fecha"),t(),a(13,"th"),i(14,"Proveedor"),t(),a(15,"th"),i(16,"Estado"),t(),a(17,"th"),i(18,"Total"),t(),a(19,"th"),i(20,"Acciones"),t()()(),a(21,"tbody"),f(22,T,3,0,"tr")(23,N,3,0,"tr")(24,k,2,0),t()()()()),e&2&&(r(22),g(o.loading()?22:o.purchases().length===0?23:24))},dependencies:[w,y,E,S],encapsulation:2})};export{I as AdminPurchasesPage};
