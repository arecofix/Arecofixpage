import{a as N,b as T,d as D,e as L,f as k,g as I,h as j,l as B,m as O,n as R,p as V,r as q}from"./chunk-3J4IWN72.js";import{a as W}from"./chunk-MCSV4IA2.js";import{a as A,c as P,d as F}from"./chunk-BWQSVEWZ.js";import"./chunk-44RGWP63.js";import"./chunk-4CQ4C23O.js";import{n as E}from"./chunk-XV34LPXM.js";import{Cb as w,Db as a,Eb as S,Fa as r,Fb as M,Hb as s,Ib as m,Jb as g,Sa as x,X as f,cb as y,db as b,ib as C,jb as t,kb as n,lb as p,na as c,tb as _,vb as h}from"./chunk-DPJIKM6M.js";import{a as v}from"./chunk-VOSPIT4N.js";function U(l,d){if(l&1&&(t(0,"div",7),p(1,"i",31),t(2,"span"),a(3),n()()),l&2){let o=h();r(3),S(o.error())}}function z(l,d){if(l&1&&p(0,"i",32),l&2){let o=h();w(o.form().icon)}}function H(l,d){l&1&&(t(0,"span",17),a(1,"N/A"),n())}function J(l,d){l&1&&p(0,"span",30)}var G=class l{route=f(A);router=f(P);auth=f(W);id=null;form=c({name:"",slug:"",description:"",icon:"",type:"product",is_active:!0},{});loading=c(!0,{});saving=c(!1,{});error=c(null,{});async ngOnInit(){if(this.id=this.route.snapshot.paramMap.get("id"),this.id){let d=this.auth.getSupabaseClient(),{data:o,error:e}=await d.from("categories").select("*").eq("id",this.id).single();o&&this.form.set({name:o.name,slug:o.slug,description:o.description||"",icon:o.icon||"",type:o.type,is_active:o.is_active})}this.loading.set(!1)}async save(){this.saving.set(!0),this.error.set(null);let d=this.auth.getSupabaseClient(),o=v({},this.form());o.slug||(o.slug=this.slugify(o.name));try{if(this.id){let{error:e}=await d.from("categories").update(o).eq("id",this.id);if(e)throw e}else{let{error:e}=await d.from("categories").insert(o);if(e)throw e}this.router.navigate(["/admin/categories"])}catch(e){this.error.set(e.message)}finally{this.saving.set(!1)}}slugify(d){return d.toString().toLowerCase().trim().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-")}static \u0275fac=function(o){return new(o||l)};static \u0275cmp=x({type:l,selectors:[["app-admin-category-form-page"]],decls:52,vars:11,consts:[[1,"max-w-4xl","mx-auto","text-gray-800"],[1,"flex","items-center","gap-4","mb-6"],["routerLink","/admin/categories",1,"btn","btn-circle","btn-ghost"],[1,"fas","fa-arrow-left"],[1,"text-2xl","font-bold","text-gray-800"],[3,"ngSubmit"],[1,"bg-white","p-6","rounded-xl","shadow-sm","border","border-gray-100","mb-6"],[1,"alert","alert-error","mb-6"],[1,"mb-4"],[1,"block","text-sm","font-medium","text-gray-700","mb-1.5"],["type","text","name","name","required","",1,"w-full","bg-white","text-gray-900","border","border-gray-300","rounded-lg","px-4","py-2","focus:outline-none","focus:ring-2","transition-all","duration-200","ease-in-out","shadow-sm","hover:border-gray-400",3,"ngModelChange","ngModel"],["type","text","name","slug","placeholder","Se genera autom\xE1ticamente si se deja vac\xEDo",1,"w-full","bg-white","text-gray-900","border","border-gray-300","rounded-lg","px-4","py-2","focus:outline-none","focus:ring-2","transition-all","duration-200","ease-in-out","shadow-sm","hover:border-gray-400",3,"ngModelChange","ngModel"],["name","description","rows","4",1,"w-full","bg-white","text-gray-900","border","border-gray-300","rounded-lg","px-4","py-2","focus:outline-none","focus:ring-2","transition-all","duration-200","ease-in-out","shadow-sm","hover:border-gray-400",3,"ngModelChange","ngModel"],[1,"flex","gap-4"],["type","text","name","icon","placeholder","Ej: fas fa-mobile-alt",1,"flex-1","bg-white","text-gray-900","border","border-gray-300","rounded-lg","px-4","py-2","focus:outline-none","focus:ring-2","transition-all","duration-200","ease-in-out","shadow-sm","hover:border-gray-400",3,"ngModelChange","ngModel"],[1,"w-12","h-10","flex","items-center","justify-center","bg-gray-100","rounded-lg","border","border-gray-200"],[1,"text-xl","text-gray-700",3,"class"],[1,"text-xs","text-gray-400"],[1,"text-xs","text-gray-500","mt-1"],["name","type",1,"w-full","bg-white","text-gray-900","border","border-gray-300","rounded-lg","px-4","py-2","focus:outline-none","focus:ring-2","transition-all","duration-200","ease-in-out","shadow-sm","hover:border-gray-400",3,"ngModelChange","ngModel"],["value","product"],["value","course"],["value","service"],[1,"mt-6"],[1,"flex","items-center","gap-3","p-3","bg-white","border","border-gray-200","rounded-lg","hover:bg-gray-50","transition-colors","cursor-pointer","w-fit"],["type","checkbox","name","is_active",1,"checkbox","checkbox-primary","h-5","w-5","rounded","border-gray-300",3,"ngModelChange","ngModel"],[1,"font-medium","text-gray-700"],[1,"flex","justify-end","gap-4","mt-6"],["routerLink","/admin/categories",1,"btn","btn-ghost"],["type","submit",1,"btn","btn-primary","px-8",3,"disabled"],[1,"loading","loading-spinner","loading-xs","mr-2"],[1,"fas","fa-exclamation-circle"],[1,"text-xl","text-gray-700"]],template:function(o,e){o&1&&(t(0,"div",0)(1,"div",1)(2,"a",2),p(3,"i",3),n(),t(4,"h1",4),a(5),n()(),t(6,"form",5),_("ngSubmit",function(){return e.save()}),t(7,"div",6),y(8,U,4,1,"div",7),t(9,"div",8)(10,"label",9),a(11,"Nombre"),n(),t(12,"input",10),g("ngModelChange",function(i){return m(e.form().name,i)||(e.form().name=i),i}),n()(),t(13,"div",8)(14,"label",9),a(15,"Slug (URL)"),n(),t(16,"input",11),g("ngModelChange",function(i){return m(e.form().slug,i)||(e.form().slug=i),i}),n()(),t(17,"div",8)(18,"label",9),a(19,"Descripci\xF3n"),n(),t(20,"textarea",12),g("ngModelChange",function(i){return m(e.form().description,i)||(e.form().description=i),i}),n()(),t(21,"div",8)(22,"label",9),a(23,"Icono (Font Awesome)"),n(),t(24,"div",13)(25,"input",14),g("ngModelChange",function(i){return m(e.form().icon,i)||(e.form().icon=i),i}),n(),t(26,"div",15),y(27,z,1,2,"i",16)(28,H,2,0,"span",17),n()(),t(29,"p",18),a(30,"Usa clases de Font Awesome (ej: fas fa-mobile-alt, fas fa-laptop)"),n()(),t(31,"div",8)(32,"label",9),a(33,"Tipo"),n(),t(34,"select",19),g("ngModelChange",function(i){return m(e.form().type,i)||(e.form().type=i),i}),t(35,"option",20),a(36,"Producto"),n(),t(37,"option",21),a(38,"Curso"),n(),t(39,"option",22),a(40,"Servicio"),n()()(),t(41,"div",23)(42,"label",24)(43,"input",25),g("ngModelChange",function(i){return m(e.form().is_active,i)||(e.form().is_active=i),i}),n(),t(44,"span",26),a(45,"Activo"),n()()()(),t(46,"div",27)(47,"a",28),a(48,"Cancelar"),n(),t(49,"button",29),y(50,J,1,0,"span",30),a(51," Guardar "),n()()()()),o&2&&(r(5),M("",e.id?"Editar":"Nueva"," Categor\xEDa"),r(3),b(e.error()?8:-1),r(4),s("ngModel",e.form().name),r(4),s("ngModel",e.form().slug),r(4),s("ngModel",e.form().description),r(5),s("ngModel",e.form().icon),r(2),b(e.form().icon?27:28),r(7),s("ngModel",e.form().type),r(9),s("ngModel",e.form().is_active),r(6),C("disabled",e.saving()),r(),b(e.saving()?50:-1))},dependencies:[E,q,j,O,R,T,N,B,D,L,V,I,k,F],encapsulation:2})};export{G as AdminCategoryFormPage};
