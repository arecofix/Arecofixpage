import{a as A}from"./chunk-ETUYVYEI.js";import"./chunk-23BTM2IY.js";import{d as y}from"./chunk-ZWPO54DG.js";import"./chunk-SH266SLM.js";import"./chunk-Z5OW2DIK.js";import{n as C,p as E}from"./chunk-DTICAINP.js";import{Fa as d,Fb as a,Gb as l,Hb as _,Ta as c,Tb as I,W as m,Wb as b,Yb as S,eb as p,fb as u,ib as f,jb as v,kb as g,lb as i,ma as s,mb as n,nb as x,xb as h}from"./chunk-RGAVNK56.js";import"./chunk-VOSPIT4N.js";var w=e=>["/admin/invoices",e],F=(e,o)=>o.id;function T(e,o){e&1&&(i(0,"tr")(1,"td",5),a(2,"Cargando..."),n()())}function D(e,o){e&1&&(i(0,"tr")(1,"td",5),a(2,"No hay facturas registradas."),n()())}function N(e,o){if(e&1&&(i(0,"tr")(1,"td"),a(2),b(3,"date"),n(),i(4,"td",6),a(5),n(),i(6,"td"),a(7),n(),i(8,"td",7),a(9),n(),i(10,"td")(11,"a",8),x(12,"i",9),n()()()),e&2){let t=o.$implicit;d(2),l(S(3,5,t.issued_at,"short")),d(3),l(t.invoice_number||"Pendiente"),d(2),l(t.customer_name||"Consumidor Final"),d(2),_("$",t.total_amount),d(2),g("routerLink",I(8,w,t.id))}}function M(e,o){if(e&1&&f(0,N,13,10,"tr",null,F),e&2){let t=h();v(t.invoices())}}var P=class e{auth=m(A);invoices=s([]);loading=s(!0);async ngOnInit(){await this.loadInvoices()}async loadInvoices(){this.loading.set(!0);let o=this.auth.getSupabaseClient(),{data:t,error:r}=await o.from("invoices").select("*, sales(*)").order("issued_at",{ascending:!1});t&&this.invoices.set(t),this.loading.set(!1)}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=c({type:e,selectors:[["app-admin-invoices-page"]],decls:22,vars:1,consts:[[1,"flex","justify-between","items-center","mb-6"],[1,"text-2xl","font-bold","text-gray-800"],[1,"bg-white","rounded-lg","shadow","overflow-hidden"],[1,"overflow-x-auto"],[1,"table","w-full"],["colspan","5",1,"text-center","py-4"],[1,"font-mono"],[1,"font-bold"],[1,"btn","btn-sm","btn-ghost",3,"routerLink"],[1,"fas","fa-eye"]],template:function(t,r){t&1&&(i(0,"div",0)(1,"h1",1),a(2,"Facturaci\xF3n"),n()(),i(3,"div",2)(4,"div",3)(5,"table",4)(6,"thead")(7,"tr")(8,"th"),a(9,"Fecha"),n(),i(10,"th"),a(11,"N\xFAmero"),n(),i(12,"th"),a(13,"Cliente"),n(),i(14,"th"),a(15,"Total"),n(),i(16,"th"),a(17,"Acciones"),n()()(),i(18,"tbody"),p(19,T,3,0,"tr")(20,D,3,0,"tr")(21,M,2,0),n()()()()),t&2&&(d(19),u(r.loading()?19:r.invoices().length===0?20:21))},dependencies:[E,y,C],encapsulation:2})};export{P as AdminInvoicesPage};
