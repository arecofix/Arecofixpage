{
  "version": 3,
  "sources": ["src/app/admin/clients/admin-client-form-page.ts", "src/app/admin/clients/admin-client-form-page.html"],
  "sourcesContent": ["import { Component, inject, OnInit, signal } from '@angular/core';\r\n\r\nimport { FormsModule } from '@angular/forms';\r\nimport { ActivatedRoute, Router, RouterLink } from '@angular/router';\r\nimport { AuthService } from '@app/core/services/auth.service';\r\n\r\n@Component({\r\n    selector: 'app-admin-client-form-page',\r\n    standalone: true,\r\n    imports: [FormsModule, RouterLink],\r\n    templateUrl: './admin-client-form-page.html',\r\n})\r\nexport class AdminClientFormPage implements OnInit {\r\n    private route = inject(ActivatedRoute);\r\n    private router = inject(Router);\r\n    private auth = inject(AuthService);\r\n\r\n    id: string | null = null;\r\n    form = signal({\r\n        first_name: '',\r\n        last_name: '',\r\n        email: '',\r\n        phone: '',\r\n        address: '',\r\n        dni: '',\r\n    });\r\n\r\n    loading = signal(true);\r\n    saving = signal(false);\r\n    error = signal<string | null>(null);\r\n\r\n    async ngOnInit() {\r\n        this.id = this.route.snapshot.paramMap.get('id');\r\n        if (this.id) {\r\n            const supabase = this.auth.getSupabaseClient();\r\n            const { data, error } = await supabase.from('profiles').select('*').eq('id', this.id).single();\r\n            if (data) {\r\n                this.form.set({\r\n                    first_name: data.first_name || '',\r\n                    last_name: data.last_name || '',\r\n                    email: data.email || '',\r\n                    phone: data.phone || '',\r\n                    address: data.address || '', // Assuming address exists in profiles\r\n                    dni: data.dni || '', // Assuming dni exists in profiles\r\n                });\r\n            }\r\n        }\r\n        this.loading.set(false);\r\n    }\r\n\r\n    async save() {\r\n        this.saving.set(true);\r\n        this.error.set(null);\r\n        const supabase = this.auth.getSupabaseClient();\r\n        const payload = { ...this.form() };\r\n\r\n        try {\r\n            if (this.id) {\r\n                const { error } = await supabase.from('profiles').update(payload).eq('id', this.id);\r\n                if (error) throw error;\r\n            } else {\r\n                // Creating a new user is complex (requires auth.users insert).\r\n                // For now, we might just show an error or handle it differently.\r\n                // Or we can use a separate 'clients' table if we want to manage non-user clients.\r\n                // But for now, let's assume we are editing existing users.\r\n                throw new Error('Creación de nuevos usuarios debe hacerse desde el registro.');\r\n            }\r\n            this.router.navigate(['/admin/clients']);\r\n        } catch (e: any) {\r\n            this.error.set(e.message);\r\n        } finally {\r\n            this.saving.set(false);\r\n        }\r\n    }\r\n}\r\n", "<div class=\"max-w-4xl mx-auto text-base-content\">\r\n    <div class=\"flex items-center gap-4 mb-6\">\r\n        <a routerLink=\"/admin/clients\" class=\"btn btn-circle btn-ghost text-base-content\">\r\n            <i class=\"fas fa-arrow-left\"></i>\r\n        </a>\r\n        <h1 class=\"text-2xl font-bold text-green-600\">{{ id ? 'Editar' : 'Nuevo' }} Cliente</h1>\r\n    </div>\r\n\r\n    <form (ngSubmit)=\"save()\">\r\n        <div class=\"bg-base-100 p-6 rounded-xl shadow-sm border border-base-200 mb-6 text-base-content\">\r\n            @if (error()) {\r\n            <div class=\"alert alert-error mb-6\">\r\n                <i class=\"fas fa-exclamation-circle\"></i>\r\n                <span>{{ error() }}</span>\r\n            </div>\r\n            }\r\n\r\n            <div class=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                <div>\r\n                    <label class=\"block text-sm font-medium text-base-content mb-1.5\">Nombre</label>\r\n                    <input type=\"text\" [(ngModel)]=\"form().first_name\" name=\"first_name\" class=\"w-full bg-base-100 text-base-content border border-base-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 transition-all duration-200 ease-in-out shadow-sm hover:border-base-content/40\"\r\n                        required>\r\n                </div>\r\n                <div>\r\n                    <label class=\"block text-sm font-medium text-base-content mb-1.5\">Apellido</label>\r\n                    <input type=\"text\" [(ngModel)]=\"form().last_name\" name=\"last_name\" class=\"w-full bg-base-100 text-base-content border border-base-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 transition-all duration-200 ease-in-out shadow-sm hover:border-base-content/40\"\r\n                        required>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"mt-4\">\r\n                <label class=\"block text-sm font-medium text-base-content mb-1.5\">Email</label>\r\n                <input type=\"email\" [(ngModel)]=\"form().email\" name=\"email\" class=\"w-full bg-base-100 text-base-content border border-base-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 transition-all duration-200 ease-in-out shadow-sm hover:border-base-content/40\" [disabled]=\"!!id\">\r\n            </div>\r\n\r\n            <div class=\"grid grid-cols-1 md:grid-cols-2 gap-6 mt-4\">\r\n                <div>\r\n                    <label class=\"block text-sm font-medium text-base-content mb-1.5\">Celular</label>\r\n                    <input type=\"text\" [(ngModel)]=\"form().phone\" name=\"phone\" class=\"w-full bg-base-100 text-base-content border border-base-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 transition-all duration-200 ease-in-out shadow-sm hover:border-base-content/40\">\r\n                </div>\r\n                <div>\r\n                    <label class=\"block text-sm font-medium text-base-content mb-1.5\">DNI</label>\r\n                    <input type=\"text\" [(ngModel)]=\"form().dni\" name=\"dni\" class=\"w-full bg-base-100 text-base-content border border-base-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 transition-all duration-200 ease-in-out shadow-sm hover:border-base-content/40\">\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"mt-4\">\r\n                <label class=\"block text-sm font-medium text-base-content mb-1.5\">Dirección</label>\r\n                <input type=\"text\" [(ngModel)]=\"form().address\" name=\"address\" class=\"w-full bg-base-100 text-base-content border border-base-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 transition-all duration-200 ease-in-out shadow-sm hover:border-base-content/40\">\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"flex justify-end gap-4 mt-6\">\r\n            <a routerLink=\"/admin/clients\" class=\"btn btn-ghost\">Cancelar</a>\r\n            <button type=\"submit\" class=\"btn btn-primary px-8\" [disabled]=\"saving()\">\r\n                @if (saving()) {\r\n                <span class=\"loading loading-spinner loading-xs mr-2\"></span>\r\n                }\r\n                Guardar\r\n            </button>\r\n        </div>\r\n    </form>\r\n</div>"],
  "mappings": "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",
  "names": []
}
