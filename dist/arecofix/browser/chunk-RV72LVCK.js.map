{
  "version": 3,
  "sources": ["src/app/admin/courses/admin-courses-page.ts"],
  "sourcesContent": ["import { Component, inject, OnInit, signal, ChangeDetectorRef } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { RouterLink } from '@angular/router';\r\nimport { CoursesService, Course } from '@app/core/services/courses.service';\r\n\r\n@Component({\r\n  selector: 'app-admin-courses-page',\r\n  standalone: true,\r\n  imports: [CommonModule, RouterLink],\r\n  template: `\r\n    <div class=\"flex justify-between items-center mb-6\">\r\n      <h2 class=\"text-2xl font-bold text-green-600\">Administrar Cursos</h2>\r\n      <a routerLink=\"/admin/courses/new\" class=\"btn btn-primary\">\r\n        <i class=\"fas fa-plus mr-2\"></i> Nuevo Curso\r\n      </a>\r\n    </div>\r\n    \r\n    <div class=\"overflow-x-auto bg-base-100 rounded-lg shadow text-base-content\">\r\n      <table class=\"table w-full\">\r\n        <thead>\r\n          <tr class=\"text-base-content\">\r\n            <th>Imagen</th>\r\n            <th>Título</th>\r\n            <th>Precio</th>\r\n            <th>Nivel</th>\r\n            <th>Estado</th>\r\n            <th>Acciones</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          @for (course of courses(); track course.id) {\r\n            <tr>\r\n              <td>\r\n                <div class=\"avatar\">\r\n                  <div class=\"mask mask-squircle w-12 h-12\">\r\n                    <img [src]=\"getImageSrc(course.image_url)\" \r\n                         [alt]=\"course.title\"\r\n                         (error)=\"handleImageError($event)\" />\r\n                  </div>\r\n                </div>\r\n              </td>\r\n              <td>\r\n                <div class=\"font-bold\">{{course.title}}</div>\r\n                <div class=\"text-sm opacity-50\">{{course.slug}}</div>\r\n              </td>\r\n              <td>\r\n                {{course.price | currency}}\r\n                <br/>\r\n                @if (course.sale_price) {\r\n                  <span class=\"text-xs text-green-600\">\r\n                    Oferta: {{course.sale_price | currency}}\r\n                  </span>\r\n                }\r\n              </td>\r\n              <td>{{course.level}}</td>\r\n              <td>\r\n                <div class=\"badge\" [class.badge-success]=\"course.is_active\" [class.badge-ghost]=\"!course.is_active\">\r\n                  {{course.is_active ? 'Activo' : 'Inactivo'}}\r\n                </div>\r\n              </td>\r\n              <td>\r\n                <div class=\"flex gap-2\">\r\n                  <a [routerLink]=\"['/admin/courses', course.id]\" class=\"btn btn-sm btn-square btn-ghost text-blue-600\">\r\n                    <i class=\"fas fa-edit\"></i>\r\n                  </a>\r\n                  <button (click)=\"deleteCourse(course)\" class=\"btn btn-sm btn-square btn-ghost text-red-600\">\r\n                    <i class=\"fas fa-trash\"></i>\r\n                  </button>\r\n                </div>\r\n              </td>\r\n            </tr>\r\n          }\r\n          @if (courses().length === 0 && !loading()) {\r\n            <tr>\r\n              <td colspan=\"6\" class=\"text-center py-8 text-gray-500\">\r\n                No hay cursos registrados.\r\n              </td>\r\n            </tr>\r\n          }\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n    \r\n    @if (loading()) {\r\n      <div class=\"flex justify-center py-8\">\r\n        <span class=\"loading loading-spinner loading-lg\"></span>\r\n      </div>\r\n    }\r\n    `\r\n})\r\nexport class AdminCoursesPage implements OnInit {\r\n  private coursesService = inject(CoursesService);\r\n  private cdr = inject(ChangeDetectorRef);\r\n  \r\n  courses = signal<Course[]>([]);\r\n  loading = signal(true);\r\n\r\n  ngOnInit() {\r\n    this.loadCourses();\r\n  }\r\n\r\n  loadCourses() {\r\n    this.loading.set(true);\r\n    this.coursesService.getCourses().subscribe({\r\n      next: (response) => {\r\n        this.courses.set(response.data || []);\r\n        this.loading.set(false);\r\n        this.cdr.markForCheck();\r\n      },\r\n      error: (err) => {\r\n        console.error('Error loading courses', err);\r\n        this.loading.set(false);\r\n        this.cdr.markForCheck();\r\n      }\r\n    });\r\n  }\r\n\r\n  async deleteCourse(course: Course) {\r\n    if (!confirm(`¿Estás seguro de eliminar el curso \"${course.title}\"?`)) return;\r\n\r\n    this.coursesService.deleteCourse(course.id).subscribe({\r\n      next: () => {\r\n        this.courses.update(current => current.filter(c => c.id !== course.id));\r\n        this.cdr.markForCheck();\r\n      },\r\n      error: (err) => alert('Error al eliminar el curso: ' + err.message)\r\n    });\r\n  }\r\n\r\n  handleImageError(event: any) {\r\n    event.target.src = '/assets/img/cursos/1.jpg'; // Fallback to a valid image with absolute path\r\n  }\r\n\r\n  getImageSrc(url: string | null): string {\r\n    if (!url) return 'assets/placeholder.png'; // Handled by || in template, but good practice\r\n    if (url.startsWith('http') || url.startsWith('/')) {\r\n      return url;\r\n    }\r\n    return '/' + url;\r\n  }\r\n}\r\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiDkB,IAAA,yBAAA,GAAA,QAAA,EAAA;AACE,IAAA,iBAAA,CAAA;;AACF,IAAA,uBAAA;;;;AADE,IAAA,oBAAA;AAAA,IAAA,6BAAA,aAAA,sBAAA,GAAA,GAAA,UAAA,UAAA,GAAA,GAAA;;;;;;AAnBR,IAAA,yBAAA,GAAA,IAAA,EAAI,GAAA,IAAA,EACE,GAAA,OAAA,CAAA,EACkB,GAAA,OAAA,CAAA,EACwB,GAAA,OAAA,EAAA;AAGnC,IAAA,qBAAA,SAAA,SAAA,sDAAA,QAAA;AAAA,MAAA,wBAAA,GAAA;AAAA,YAAA,SAAA,wBAAA;AAAA,aAAA,sBAAS,OAAA,iBAAA,MAAA,CAAwB;IAAA,CAAA;AAFtC,IAAA,uBAAA,EAE0C,EACtC,EACF;AAER,IAAA,yBAAA,GAAA,IAAA,EAAI,GAAA,OAAA,EAAA;AACqB,IAAA,iBAAA,CAAA;AAAgB,IAAA,uBAAA;AACvC,IAAA,yBAAA,GAAA,OAAA,EAAA;AAAgC,IAAA,iBAAA,CAAA;AAAe,IAAA,uBAAA,EAAM;AAEvD,IAAA,yBAAA,IAAA,IAAA;AACE,IAAA,iBAAA,EAAA;;AACA,IAAA,oBAAA,IAAA,IAAA;AACA,IAAA,8BAAA,IAAA,iDAAA,GAAA,GAAA,QAAA,EAAA;AAKF,IAAA,uBAAA;AACA,IAAA,yBAAA,IAAA,IAAA;AAAI,IAAA,iBAAA,EAAA;AAAgB,IAAA,uBAAA;AACpB,IAAA,yBAAA,IAAA,IAAA,EAAI,IAAA,OAAA,EAAA;AAEA,IAAA,iBAAA,EAAA;AACF,IAAA,uBAAA,EAAM;AAER,IAAA,yBAAA,IAAA,IAAA,EAAI,IAAA,OAAA,EAAA,EACsB,IAAA,KAAA,EAAA;AAEpB,IAAA,oBAAA,IAAA,KAAA,EAAA;AACF,IAAA,uBAAA;AACA,IAAA,yBAAA,IAAA,UAAA,EAAA;AAAQ,IAAA,qBAAA,SAAA,SAAA,4DAAA;AAAA,YAAA,YAAA,wBAAA,GAAA,EAAA;AAAA,YAAA,SAAA,wBAAA;AAAA,aAAA,sBAAS,OAAA,aAAA,SAAA,CAAoB;IAAA,CAAA;AACnC,IAAA,oBAAA,IAAA,KAAA,EAAA;AACF,IAAA,uBAAA,EAAS,EACL,EACH;;;;;AAlCM,IAAA,oBAAA,CAAA;AAAA,IAAA,qBAAA,OAAA,OAAA,YAAA,UAAA,SAAA,GAAA,uBAAA,EAAqC,OAAA,UAAA,KAAA;AAOvB,IAAA,oBAAA,CAAA;AAAA,IAAA,4BAAA,UAAA,KAAA;AACS,IAAA,oBAAA,CAAA;AAAA,IAAA,4BAAA,UAAA,IAAA;AAGhC,IAAA,oBAAA,CAAA;AAAA,IAAA,6BAAA,KAAA,sBAAA,IAAA,IAAA,UAAA,KAAA,GAAA,GAAA;AAEA,IAAA,oBAAA,CAAA;AAAA,IAAA,wBAAA,UAAA,aAAA,KAAA,EAAA;AAME,IAAA,oBAAA,CAAA;AAAA,IAAA,4BAAA,UAAA,KAAA;AAEiB,IAAA,oBAAA,CAAA;AAAA,IAAA,sBAAA,iBAAA,UAAA,SAAA,EAAwC,eAAA,CAAA,UAAA,SAAA;AACzD,IAAA,oBAAA;AAAA,IAAA,6BAAA,KAAA,UAAA,YAAA,WAAA,YAAA,GAAA;AAKG,IAAA,oBAAA,CAAA;AAAA,IAAA,qBAAA,cAAA,0BAAA,IAAA,KAAA,UAAA,EAAA,CAAA;;;;;AAWT,IAAA,yBAAA,GAAA,IAAA,EAAI,GAAA,MAAA,EAAA;AAEA,IAAA,iBAAA,GAAA,8BAAA;AACF,IAAA,uBAAA,EAAK;;;;;AAQb,IAAA,yBAAA,GAAA,OAAA,CAAA;AACE,IAAA,oBAAA,GAAA,QAAA,EAAA;AACF,IAAA,uBAAA;;;AAIA,IAAO,mBAAP,MAAO,kBAAgB;EACnB,iBAAiB,OAAO,cAAc;EACtC,MAAM,OAAO,iBAAiB;EAEtC,UAAU,OAAiB,CAAA,GAAE,GAAA,YAAA,CAAA,EAAA,WAAA,UAAA,CAAA,IAAA,CAAA,CAAA;EAC7B,UAAU,OAAO,MAAI,GAAA,YAAA,CAAA,EAAA,WAAA,UAAA,CAAA,IAAA,CAAA,CAAA;EAErB,WAAQ;AACN,SAAK,YAAW;EAClB;EAEA,cAAW;AACT,SAAK,QAAQ,IAAI,IAAI;AACrB,SAAK,eAAe,WAAU,EAAG,UAAU;MACzC,MAAM,CAAC,aAAY;AACjB,aAAK,QAAQ,IAAI,SAAS,QAAQ,CAAA,CAAE;AACpC,aAAK,QAAQ,IAAI,KAAK;AACtB,aAAK,IAAI,aAAY;MACvB;MACA,OAAO,CAAC,QAAO;AACb,gBAAQ,MAAM,yBAAyB,GAAG;AAC1C,aAAK,QAAQ,IAAI,KAAK;AACtB,aAAK,IAAI,aAAY;MACvB;KACD;EACH;EAEA,MAAM,aAAa,QAAc;AAC/B,QAAI,CAAC,QAAQ,6CAAuC,OAAO,KAAK,IAAI;AAAG;AAEvE,SAAK,eAAe,aAAa,OAAO,EAAE,EAAE,UAAU;MACpD,MAAM,MAAK;AACT,aAAK,QAAQ,OAAO,aAAW,QAAQ,OAAO,OAAK,EAAE,OAAO,OAAO,EAAE,CAAC;AACtE,aAAK,IAAI,aAAY;MACvB;MACA,OAAO,CAAC,QAAQ,MAAM,iCAAiC,IAAI,OAAO;KACnE;EACH;EAEA,iBAAiB,OAAU;AACzB,UAAM,OAAO,MAAM;EACrB;EAEA,YAAY,KAAkB;AAC5B,QAAI,CAAC;AAAK,aAAO;AACjB,QAAI,IAAI,WAAW,MAAM,KAAK,IAAI,WAAW,GAAG,GAAG;AACjD,aAAO;IACT;AACA,WAAO,MAAM;EACf;;qCAjDW,mBAAgB;EAAA;yEAAhB,mBAAgB,WAAA,CAAA,CAAA,wBAAA,CAAA,GAAA,OAAA,IAAA,MAAA,GAAA,QAAA,CAAA,CAAA,GAAA,QAAA,mBAAA,gBAAA,MAAA,GAAA,CAAA,GAAA,YAAA,aAAA,gBAAA,GAAA,CAAA,cAAA,sBAAA,GAAA,OAAA,aAAA,GAAA,CAAA,GAAA,OAAA,WAAA,MAAA,GAAA,CAAA,GAAA,mBAAA,eAAA,cAAA,UAAA,mBAAA,GAAA,CAAA,GAAA,SAAA,QAAA,GAAA,CAAA,GAAA,mBAAA,GAAA,CAAA,GAAA,QAAA,kBAAA,MAAA,GAAA,CAAA,GAAA,QAAA,GAAA,CAAA,GAAA,QAAA,iBAAA,QAAA,MAAA,GAAA,CAAA,GAAA,SAAA,OAAA,KAAA,GAAA,CAAA,GAAA,WAAA,GAAA,CAAA,GAAA,WAAA,YAAA,GAAA,CAAA,GAAA,WAAA,gBAAA,GAAA,CAAA,GAAA,OAAA,GAAA,CAAA,GAAA,QAAA,OAAA,GAAA,CAAA,GAAA,OAAA,UAAA,cAAA,aAAA,iBAAA,GAAA,YAAA,GAAA,CAAA,GAAA,OAAA,SAAA,GAAA,CAAA,GAAA,OAAA,UAAA,cAAA,aAAA,gBAAA,GAAA,OAAA,GAAA,CAAA,GAAA,OAAA,UAAA,GAAA,CAAA,WAAA,KAAA,GAAA,eAAA,QAAA,eAAA,GAAA,CAAA,GAAA,WAAA,mBAAA,YAAA,CAAA,GAAA,UAAA,SAAA,0BAAA,IAAA,KAAA;AAAA,QAAA,KAAA,GAAA;AAhFzB,MAAA,yBAAA,GAAA,OAAA,CAAA,EAAoD,GAAA,MAAA,CAAA;AACJ,MAAA,iBAAA,GAAA,oBAAA;AAAkB,MAAA,uBAAA;AAChE,MAAA,yBAAA,GAAA,KAAA,CAAA;AACE,MAAA,oBAAA,GAAA,KAAA,CAAA;AAAiC,MAAA,iBAAA,GAAA,eAAA;AACnC,MAAA,uBAAA,EAAI;AAGN,MAAA,yBAAA,GAAA,OAAA,CAAA,EAA6E,GAAA,SAAA,CAAA,EAC/C,GAAA,OAAA,EACnB,GAAA,MAAA,CAAA,EACyB,IAAA,IAAA;AACxB,MAAA,iBAAA,IAAA,QAAA;AAAM,MAAA,uBAAA;AACV,MAAA,yBAAA,IAAA,IAAA;AAAI,MAAA,iBAAA,IAAA,WAAA;AAAM,MAAA,uBAAA;AACV,MAAA,yBAAA,IAAA,IAAA;AAAI,MAAA,iBAAA,IAAA,QAAA;AAAM,MAAA,uBAAA;AACV,MAAA,yBAAA,IAAA,IAAA;AAAI,MAAA,iBAAA,IAAA,OAAA;AAAK,MAAA,uBAAA;AACT,MAAA,yBAAA,IAAA,IAAA;AAAI,MAAA,iBAAA,IAAA,QAAA;AAAM,MAAA,uBAAA;AACV,MAAA,yBAAA,IAAA,IAAA;AAAI,MAAA,iBAAA,IAAA,UAAA;AAAQ,MAAA,uBAAA,EAAK,EACd;AAEP,MAAA,yBAAA,IAAA,OAAA;AACE,MAAA,2BAAA,IAAA,kCAAA,IAAA,IAAA,MAAA,MAAA,UAAA;AA0CA,MAAA,8BAAA,IAAA,0CAAA,GAAA,GAAA,IAAA;AAOF,MAAA,uBAAA,EAAQ,EACF;AAGV,MAAA,8BAAA,IAAA,0CAAA,GAAA,GAAA,OAAA,CAAA;;;AArDM,MAAA,oBAAA,EAAA;AAAA,MAAA,qBAAA,IAAA,QAAA,CAAS;AA0CT,MAAA,oBAAA,CAAA;AAAA,MAAA,wBAAA,IAAA,QAAA,EAAA,WAAA,KAAA,CAAA,IAAA,QAAA,IAAA,KAAA,EAAA;AAWN,MAAA,oBAAA;AAAA,MAAA,wBAAA,IAAA,QAAA,IAAA,KAAA,EAAA;;oBA3EQ,cAAc,YAAU,YAAA,GAAA,eAAA,EAAA,CAAA;;;sEAkFvB,kBAAgB,CAAA;UArF5B;WAAU;MACT,UAAU;MACV,YAAY;MACZ,SAAS,CAAC,cAAc,UAAU;MAClC,UAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;KAgFX;;;;6EACY,kBAAgB,EAAA,WAAA,oBAAA,UAAA,+CAAA,YAAA,GAAA,CAAA;AAAA,GAAA;",
  "names": []
}
