import{a as n}from"./chunk-ZT4MGTUK.js";import{Q as o,V as i}from"./chunk-VQO264VU.js";var c=class e{auth=i(n);supabase=this.auth.getSupabaseClient();async getPosts(){let{data:s,error:t}=await this.supabase.from("posts").select("*").order("created_at",{ascending:!1});if(t)throw t;return s||[]}async getPost(s){let{data:t,error:r}=await this.supabase.from("posts").select("*").eq("id",s).single();if(r)throw r;return t}async createPost(s){let{error:t}=await this.supabase.from("posts").insert(s);if(t)throw t}async updatePost(s,t){let{error:r}=await this.supabase.from("posts").update(t).eq("id",s);if(r)throw r}async deletePost(s){let{error:t}=await this.supabase.from("posts").delete().eq("id",s);if(t)throw t}async uploadImage(s){let t=`posts/${Date.now()}-${s.name}`,{data:r,error:a}=await this.supabase.storage.from("public-assets").upload(t,s);if(a)throw a;let{data:p}=this.supabase.storage.from("public-assets").getPublicUrl(r.path);return p.publicUrl}slugify(s){return s.toString().toLowerCase().trim().replace(/\s+/g,"-").replace(/&/g,"-and-").replace(/[^a-z0-9-]/g,"").replace(/-+/g,"-")}static \u0275fac=function(t){return new(t||e)};static \u0275prov=o({token:e,factory:e.\u0275fac,providedIn:"root"})};export{c as a};
