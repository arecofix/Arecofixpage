import{a as P}from"./chunk-OHJFPZOR.js";import{d as w}from"./chunk-AJRMDIKY.js";import"./chunk-RSKPTTFK.js";import"./chunk-I2U5KM5M.js";import{j as C,m as A}from"./chunk-AKNEBTX5.js";import{Ba as f,Cb as n,Db as m,Ea as l,Fb as b,Qb as h,Ra as g,Tb as _,Ub as S,W as c,bb as u,cb as x,fb as y,gb as v,hb as p,ib as e,jb as t,kb as r,ma as s,ub as E}from"./chunk-MMCFFNKD.js";import"./chunk-VOSPIT4N.js";var k=a=>["/admin/employees",a],N=(a,o)=>o.id;function T(a,o){a&1&&(e(0,"tr")(1,"td",8),n(2,"Cargando..."),t()())}function D(a,o){a&1&&(e(0,"tr")(1,"td",8),n(2,"No hay empleados registrados."),t()())}function M(a,o){if(a&1&&(e(0,"tr")(1,"td")(2,"div",9)(3,"div",10)(4,"div",11),r(5,"img",12),t()(),e(6,"div")(7,"div",13),n(8),t(),e(9,"div",14),n(10),t()()()(),e(11,"td")(12,"div",15),n(13),_(14,"uppercase"),t(),e(15,"div",16),n(16),t()(),e(17,"td")(18,"div",17),n(19),t()(),e(20,"td")(21,"span",18),n(22,"Activo"),t()(),e(23,"td")(24,"a",19),r(25,"i",20),t()()()),a&2){let i=o.$implicit;l(5),p("src",i.avatar_url||"assets/img/default-avatar.png",f),l(3),b("",i.first_name," ",i.last_name),l(2),m(i.email),l(3),m(S(14,8,i.role)),l(3),m(i.job_title||"Sin cargo definido"),l(3),m(i.phone||"N/A"),l(5),p("routerLink",h(10,k,i.id))}}function L(a,o){if(a&1&&y(0,M,26,12,"tr",null,N),a&2){let i=E();v(i.employees())}}var I=class a{auth=c(P);employees=s([],{});loading=s(!0,{});async ngOnInit(){await this.loadEmployees()}async loadEmployees(){this.loading.set(!0);let o=this.auth.getSupabaseClient(),{data:i,error:d}=await o.from("profiles").select("*").in("role",["admin","staff"]).order("created_at",{ascending:!1});i&&this.employees.set(i),this.loading.set(!1)}static \u0275fac=function(i){return new(i||a)};static \u0275cmp=g({type:a,selectors:[["app-admin-employees-page"]],decls:25,vars:1,consts:[[1,"flex","justify-between","items-center","mb-6"],[1,"text-2xl","font-bold","text-gray-800"],["routerLink","/admin/employees/new",1,"btn","btn-primary"],[1,"fas","fa-plus","mr-2"],[1,"bg-white","rounded-lg","shadow","overflow-hidden","text-gray-800"],[1,"overflow-x-auto"],[1,"table","w-full"],[1,"text-gray-800"],["colspan","5",1,"text-center","py-4"],[1,"flex","items-center","gap-3"],[1,"avatar"],[1,"mask","mask-squircle","w-12","h-12"],["alt","Avatar",3,"src"],[1,"font-bold"],[1,"text-sm","opacity-50"],[1,"badge","badge-primary","badge-outline"],[1,"text-xs","mt-1"],[1,"text-sm"],[1,"badge","badge-success"],[1,"btn","btn-sm","btn-ghost",3,"routerLink"],[1,"fas","fa-edit"]],template:function(i,d){i&1&&(e(0,"div",0)(1,"h1",1),n(2,"Empleados"),t(),e(3,"a",2),r(4,"i",3),n(5," Nuevo Empleado "),t()(),e(6,"div",4)(7,"div",5)(8,"table",6)(9,"thead")(10,"tr",7)(11,"th"),n(12,"Empleado"),t(),e(13,"th"),n(14,"Cargo / Rol"),t(),e(15,"th"),n(16,"Contacto"),t(),e(17,"th"),n(18,"Estado"),t(),e(19,"th"),n(20,"Acciones"),t()()(),e(21,"tbody"),u(22,T,3,0,"tr")(23,D,3,0,"tr")(24,L,2,0),t()()()()),i&2&&(l(22),x(d.loading()?22:d.employees().length===0?23:24))},dependencies:[A,w,C],encapsulation:2})};export{I as AdminEmployeesPage};
