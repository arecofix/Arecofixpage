import{a as T}from"./chunk-4FNFMYN4.js";import{a as P,d as A}from"./chunk-4WX2KV2B.js";import"./chunk-QBWIJBVM.js";import"./chunk-BCXBSHNT.js";import{m as D,o as w}from"./chunk-YHPCNF66.js";import{$ as v,Fa as a,Fb as i,Gb as m,Hb as d,Ta as g,W as p,Wb as I,Yb as C,aa as u,eb as f,fb as _,ib as b,jb as S,lb as e,ma as s,mb as t,nb as h,rb as E,vb as y,xb as x}from"./chunk-YBYZLFPG.js";import"./chunk-VOSPIT4N.js";var M=(o,l)=>l.id;function k(o,l){o&1&&(e(0,"div",1),i(1,"Cargando..."),t())}function N(o,l){if(o&1&&(e(0,"tr",16)(1,"td",23),i(2),t(),e(3,"td",14),i(4),t(),e(5,"td",15),i(6),t(),e(7,"td",15),i(8),t()()),o&2){let n=l.$implicit;a(2),m((n.products==null?null:n.products.name)||"Producto eliminado"),a(2),m(n.quantity),a(2),d("$",n.unit_price),a(2),d("$",n.subtotal)}}function $(o,l){if(o&1){let n=E();e(0,"div",2)(1,"div",3)(2,"div")(3,"h1",4),i(4,"Factura"),t(),e(5,"p",5),i(6),t()(),e(7,"div",6)(8,"div",7),i(9,"Arecofix"),t(),e(10,"p",8),i(11,"Servicios Integrales"),t()()(),e(12,"div",9)(13,"div")(14,"h3",10),i(15,"Facturar a:"),t(),e(16,"p"),i(17),t(),e(18,"p",8),i(19),t(),e(20,"p",8),i(21),t()(),e(22,"div",6)(23,"h3",10),i(24,"Detalles:"),t(),e(25,"p"),i(26),I(27,"date"),t(),e(28,"p"),i(29),t()()(),e(30,"table",11)(31,"thead")(32,"tr",12)(33,"th",13),i(34,"Descripci\xF3n"),t(),e(35,"th",14),i(36,"Cant."),t(),e(37,"th",15),i(38,"Precio Unit."),t(),e(39,"th",15),i(40,"Subtotal"),t()()(),e(41,"tbody"),b(42,N,9,4,"tr",16,M),t(),e(44,"tfoot")(45,"tr")(46,"td",17),i(47,"Total"),t(),e(48,"td",18),i(49),t()()()(),e(50,"div",19)(51,"a",20),i(52,"Volver"),t(),e(53,"button",21),y("click",function(){v(n);let c=x();return u(c.print())}),h(54,"i",22),i(55," Imprimir "),t()()()}if(o&2){let n=x();a(6),d("#",n.invoice().invoice_number||"Borrador"),a(11),m(n.invoice().customer_name||"Consumidor Final"),a(2),m(n.invoice().customer_address),a(2),m(n.invoice().customer_dni_cuit),a(5),d("Fecha: ",C(27,7,n.invoice().issued_at,"shortDate")),a(3),d("Tipo: ",n.invoice().type),a(13),S(n.items()),a(7),d("$",n.invoice().total_amount)}}function V(o,l){o&1&&(e(0,"div",1),i(1,"Factura no encontrada"),t())}var F=class o{route=p(P);auth=p(T);invoice=s(null,{});items=s([],{});loading=s(!0,{});async ngOnInit(){let l=this.route.snapshot.paramMap.get("id");if(l){let n=this.auth.getSupabaseClient(),{data:r}=await n.from("invoices").select("*, sales(*)").eq("id",l).single();if(r&&(this.invoice.set(r),r.sales?.id)){let{data:c}=await n.from("sale_items").select("*, products(name)").eq("sale_id",r.sales.id);c&&this.items.set(c)}}this.loading.set(!1)}print(){window.print()}static \u0275fac=function(n){return new(n||o)};static \u0275cmp=g({type:o,selectors:[["app-admin-invoice-detail-page"]],decls:4,vars:1,consts:[[1,"max-w-3xl","mx-auto","bg-white","shadow-lg","rounded-lg","overflow-hidden","my-8","print:shadow-none"],[1,"p-8","text-center"],[1,"p-8"],[1,"flex","justify-between","items-start","mb-8"],[1,"text-3xl","font-bold","text-gray-800"],[1,"text-gray-500","mt-1"],[1,"text-right"],[1,"font-bold","text-xl","text-indigo-600"],[1,"text-sm","text-gray-500"],[1,"grid","grid-cols-2","gap-8","mb-8"],[1,"font-bold","text-gray-700","mb-2"],[1,"w-full","mb-8"],[1,"border-b-2","border-gray-200"],[1,"text-left","py-3"],[1,"text-center","py-3"],[1,"text-right","py-3"],[1,"border-b","border-gray-100"],["colspan","3",1,"text-right","py-4","font-bold"],[1,"text-right","py-4","font-bold","text-xl"],[1,"flex","justify-end","gap-4","print:hidden"],["routerLink","/admin/invoices",1,"btn","btn-ghost"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-print","mr-2"],[1,"py-3"]],template:function(n,r){n&1&&(e(0,"div",0),f(1,k,2,0,"div",1)(2,$,56,10,"div",2)(3,V,2,0,"div",1),t()),n&2&&(a(),_(r.loading()?1:r.invoice()?2:3))},dependencies:[w,A,D],encapsulation:2})};export{F as AdminInvoiceDetailPage};
