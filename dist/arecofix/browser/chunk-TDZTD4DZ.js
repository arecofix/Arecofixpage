import{a as O}from"./chunk-IXZC4Z2Q.js";import{a as y,b as _,c as a,d as N,e as F,h as I,i as w,j as A,k as P,l as q,m as j,n as D,q as R,s as V}from"./chunk-MW2RIO7S.js";import"./chunk-EZQXAHE6.js";import{a as C,c as E,d as S}from"./chunk-VU7SKD6P.js";import"./chunk-FR6EAD4C.js";import"./chunk-X77PN5FN.js";import"./chunk-GLDAN37X.js";import{Aa as f,Bb as i,Da as s,Db as v,Qa as b,V as m,ab as p,bb as g,gb as u,hb as t,ib as e,jb as n,rb as x,tb as h}from"./chunk-VQO264VU.js";import"./chunk-VOSPIT4N.js";function B(d,l){if(d&1&&(t(0,"div",24),n(1,"img",31),e()),d&2){let o,r=h();s(),u("src",(o=r.form.get("image_url"))==null?null:o.value,f)}}function G(d,l){d&1&&n(0,"span",30)}var T=class d{fb=m(R);coursesService=m(O);router=m(E);route=m(C);form;isEditing=!1;courseId=null;saving=!1;constructor(){this.form=this.fb.group({title:["",a.required],slug:["",a.required],description:["",a.required],price:[0,[a.required,a.min(0)]],sale_price:[null],level:["B\xE1sico",a.required],duration:["",a.required],schedule:["",a.required],image_url:["",a.required],is_active:[!0]})}ngOnInit(){this.courseId=this.route.snapshot.paramMap.get("id"),this.courseId&&(this.isEditing=!0,this.loadCourse(this.courseId))}loadCourse(l){this.coursesService.getCourseById(l).subscribe({next:o=>{this.form.patchValue(o)},error:o=>console.error("Error loading course",o)})}save(){if(this.form.invalid)return;this.saving=!0;let l=this.form.value;(this.isEditing&&this.courseId?this.coursesService.updateCourse(this.courseId,l):this.coursesService.createCourse(l)).subscribe({next:()=>{this.saving=!1,this.router.navigate(["/admin/courses"])},error:r=>{console.error("Error saving course",r),alert("Error al guardar: "+r.message),this.saving=!1}})}static \u0275fac=function(o){return new(o||d)};static \u0275cmp=b({type:d,selectors:[["app-admin-course-form-page"]],decls:69,vars:6,consts:[[1,"max-w-4xl","mx-auto"],[1,"flex","justify-between","items-center","mb-6"],[1,"text-2xl","font-bold","text-gray-800"],["routerLink","/admin/courses",1,"btn","btn-ghost"],[1,"fas","fa-arrow-left","mr-2"],[1,"bg-white","rounded-lg","shadow","p-6","space-y-6","text-gray-800",3,"ngSubmit","formGroup"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"form-control"],[1,"label"],["type","text","formControlName","title","placeholder","Ej: Reparaci\xF3n de iPhone",1,"input","input-bordered","bg-white","text-gray-800"],["type","text","formControlName","slug","placeholder","ej: reparacion-iphone",1,"input","input-bordered","bg-white","text-gray-800"],[1,"label","text-xs","text-gray-500"],["formControlName","description","placeholder","Breve resumen del curso...",1,"textarea","textarea-bordered","h-24","bg-white","text-gray-800"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6"],["type","number","formControlName","price",1,"input","input-bordered","bg-white","text-gray-800"],["type","number","formControlName","sale_price",1,"input","input-bordered","bg-white","text-gray-800"],["formControlName","level",1,"select","select-bordered","bg-white","text-gray-800"],["value","B\xE1sico"],["value","Intermedio"],["value","Avanzado"],["value","Todos los niveles"],["type","text","formControlName","duration","placeholder","Ej: 3 meses",1,"input","input-bordered","bg-white","text-gray-800"],["type","text","formControlName","schedule","placeholder","Ej: Lunes 18hs",1,"input","input-bordered","bg-white","text-gray-800"],["type","text","formControlName","image_url","placeholder","https://...",1,"input","input-bordered","bg-white","text-gray-800"],[1,"mt-2"],[1,"label","cursor-pointer","justify-start","gap-4"],[1,"label-text","font-bold"],["type","checkbox","formControlName","is_active",1,"toggle","toggle-success"],[1,"flex","justify-end","gap-4","pt-4","border-t"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"loading","loading-spinner"],["alt","Preview",1,"h-32","rounded","object-cover","border",3,"src"]],template:function(o,r){if(o&1&&(t(0,"div",0)(1,"div",1)(2,"h2",2),i(3),e(),t(4,"a",3),n(5,"i",4),i(6," Volver "),e()(),t(7,"form",5),x("ngSubmit",function(){return r.save()}),t(8,"div",6)(9,"div",7)(10,"label",8),i(11,"T\xEDtulo"),e(),n(12,"input",9),e(),t(13,"div",7)(14,"label",8),i(15,"Slug (URL)"),e(),n(16,"input",10),t(17,"label",11),i(18,"Identificador \xFAnico para la URL"),e()()(),t(19,"div",7)(20,"label",8),i(21,"Descripci\xF3n Corta"),e(),n(22,"textarea",12),e(),t(23,"div",13)(24,"div",7)(25,"label",8),i(26,"Precio"),e(),n(27,"input",14),e(),t(28,"div",7)(29,"label",8),i(30,"Precio Oferta (Opcional)"),e(),n(31,"input",15),e(),t(32,"div",7)(33,"label",8),i(34,"Nivel"),e(),t(35,"select",16)(36,"option",17),i(37,"B\xE1sico"),e(),t(38,"option",18),i(39,"Intermedio"),e(),t(40,"option",19),i(41,"Avanzado"),e(),t(42,"option",20),i(43,"Todos los niveles"),e()()()(),t(44,"div",6)(45,"div",7)(46,"label",8),i(47,"Duraci\xF3n"),e(),n(48,"input",21),e(),t(49,"div",7)(50,"label",8),i(51,"Horario"),e(),n(52,"input",22),e()(),t(53,"div",7)(54,"label",8),i(55,"URL de Imagen"),e(),n(56,"input",23),p(57,B,2,1,"div",24),e(),t(58,"div",7)(59,"label",25)(60,"span",26),i(61,"Curso Activo"),e(),n(62,"input",27),e()(),t(63,"div",28)(64,"a",3),i(65,"Cancelar"),e(),t(66,"button",29),p(67,G,1,0,"span",30),i(68),e()()()()),o&2){let c;s(3),v(" ",r.isEditing?"Editar Curso":"Nuevo Curso"," "),s(4),u("formGroup",r.form),s(50),g((c=r.form.get("image_url"))!=null&&c.value?57:-1),s(9),u("disabled",r.form.invalid||r.saving),s(),g(r.saving?67:-1),s(),v(" ",r.isEditing?"Actualizar":"Crear Curso"," ")}},dependencies:[V,I,j,D,_,w,y,q,N,F,P,A,S],encapsulation:2})};export{T as AdminCourseFormPage};
