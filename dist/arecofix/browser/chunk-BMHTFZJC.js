import{a as A}from"./chunk-V2I26IUK.js";import{d as E}from"./chunk-AICXNJUB.js";import"./chunk-BASCMOWO.js";import"./chunk-AUYAPYBZ.js";import{k as C,n as y}from"./chunk-QSLR4FGB.js";import"./chunk-LAXSCOZR.js";import{Hb as a,Ia as r,Ib as d,Jb as _,Vb as I,Wa as c,X as m,Yb as b,_b as S,gb as p,hb as u,kb as f,lb as v,mb as g,na as s,nb as i,ob as n,pb as x,zb as h}from"./chunk-UMWLAP3G.js";import"./chunk-VOSPIT4N.js";var w=e=>["/admin/invoices",e],F=(e,o)=>o.id;function T(e,o){e&1&&(i(0,"tr")(1,"td",6),a(2,"Cargando..."),n()())}function D(e,o){e&1&&(i(0,"tr")(1,"td",6),a(2,"No hay facturas registradas."),n()())}function N(e,o){if(e&1&&(i(0,"tr")(1,"td"),a(2),b(3,"date"),n(),i(4,"td",7),a(5),n(),i(6,"td"),a(7),n(),i(8,"td",8),a(9),n(),i(10,"td")(11,"a",9),x(12,"i",10),n()()()),e&2){let t=o.$implicit;r(2),d(S(3,5,t.issued_at,"short")),r(3),d(t.invoice_number||"Pendiente"),r(2),d(t.customer_name||"Consumidor Final"),r(2),_("$",t.total_amount),r(2),g("routerLink",I(8,w,t.id))}}function M(e,o){if(e&1&&f(0,N,13,10,"tr",null,F),e&2){let t=h();v(t.invoices())}}var P=class e{auth=m(A);invoices=s([],{});loading=s(!0,{});async ngOnInit(){await this.loadInvoices()}async loadInvoices(){this.loading.set(!0);let o=this.auth.getSupabaseClient(),{data:t,error:l}=await o.from("invoices").select("*, sales(*)").order("issued_at",{ascending:!1});t&&this.invoices.set(t),this.loading.set(!1)}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=c({type:e,selectors:[["app-admin-invoices-page"]],decls:22,vars:1,consts:[[1,"flex","justify-between","items-center","mb-6"],[1,"text-2xl","font-bold","text-gray-800"],[1,"bg-white","rounded-lg","shadow","overflow-hidden","text-gray-800"],[1,"overflow-x-auto"],[1,"table","w-full"],[1,"text-gray-800"],["colspan","5",1,"text-center","py-4"],[1,"font-mono"],[1,"font-bold"],[1,"btn","btn-sm","btn-ghost",3,"routerLink"],[1,"fas","fa-eye"]],template:function(t,l){t&1&&(i(0,"div",0)(1,"h1",1),a(2,"Facturaci\xF3n"),n()(),i(3,"div",2)(4,"div",3)(5,"table",4)(6,"thead")(7,"tr",5)(8,"th"),a(9,"Fecha"),n(),i(10,"th"),a(11,"N\xFAmero"),n(),i(12,"th"),a(13,"Cliente"),n(),i(14,"th"),a(15,"Total"),n(),i(16,"th"),a(17,"Acciones"),n()()(),i(18,"tbody"),p(19,T,3,0,"tr")(20,D,3,0,"tr")(21,M,2,0),n()()()()),t&2&&(r(19),u(l.loading()?19:l.invoices().length===0?20:21))},dependencies:[y,E,C],encapsulation:2})};export{P as AdminInvoicesPage};
