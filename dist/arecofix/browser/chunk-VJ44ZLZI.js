import{a as V}from"./chunk-SLNM2QUP.js";import"./chunk-I4DLVUEL.js";import"./chunk-3YI4VP2H.js";import"./chunk-XVE5GYFQ.js";import{A as M,j as D,l as N}from"./chunk-2IOVCKFA.js";import{$ as v,Ab as n,Bb as l,Dc as T,Hb as w,Lb as b,Nb as c,Oa as y,Ta as s,Tb as A,Vb as r,W as f,Wb as u,Xb as p,aa as _,fb as k,hc as F,lc as E,ma as C,mc as S,sb as d,tb as m,wb as I,xb as P,yb as h,zb as i}from"./chunk-SD6TJRIO.js";import"./chunk-7CGTOI24.js";var j=a=>["/admin/courses",a],L=(a,t)=>t.id;function O(a,t){if(a&1&&(i(0,"span",13),r(1),E(2,"currency"),n()),a&2){let e=c().$implicit;s(),p(" Oferta: ",S(2,1,e.sale_price)," ")}}function q(a,t){if(a&1){let e=w();i(0,"tr")(1,"td")(2,"div",8)(3,"div",9)(4,"img",10),b("error",function(g){v(e);let x=c();return _(x.handleImageError(g))}),n()()()(),i(5,"td")(6,"div",11),r(7),n(),i(8,"div",12),r(9),n()(),i(10,"td"),r(11),E(12,"currency"),l(13,"br"),d(14,O,3,3,"span",13),n(),i(15,"td"),r(16),n(),i(17,"td")(18,"div",14),r(19),n()(),i(20,"td")(21,"div",15)(22,"a",16),l(23,"i",17),n(),i(24,"button",18),b("click",function(){let g=v(e).$implicit,x=c();return _(x.deleteCourse(g))}),l(25,"i",19),n()()()()}if(a&2){let e=t.$implicit,o=c();s(4),h("src",o.getImageSrc(e.image_url),y)("alt",e.title),s(3),u(e.title),s(2),u(e.slug),s(2),p(" ",S(12,13,e.price)," "),s(3),m(e.sale_price?14:-1),s(2),u(e.level),s(2),A("badge-success",e.is_active)("badge-ghost",!e.is_active),s(),p(" ",e.is_active?"Activo":"Inactivo"," "),s(3),h("routerLink",F(15,j,e.id))}}function B(a,t){a&1&&(i(0,"tr")(1,"td",20),r(2," No hay cursos registrados. "),n()())}function R(a,t){a&1&&(i(0,"div",7),l(1,"span",21),n())}var $=class a{coursesService=f(V);cdr=f(T);courses=C([]);loading=C(!0);ngOnInit(){this.loadCourses()}loadCourses(){this.loading.set(!0),this.coursesService.getCourses().subscribe({next:t=>{this.courses.set(t.data||[]),this.loading.set(!1),this.cdr.markForCheck()},error:t=>{console.error("Error loading courses",t),this.loading.set(!1),this.cdr.markForCheck()}})}async deleteCourse(t){confirm(`\xBFEst\xE1s seguro de eliminar el curso "${t.title}"?`)&&this.coursesService.deleteCourse(t.id).subscribe({next:()=>{this.courses.update(e=>e.filter(o=>o.id!==t.id)),this.cdr.markForCheck()},error:e=>alert("Error al eliminar el curso: "+e.message)})}handleImageError(t){t.target.src="/assets/img/cursos/1.jpg"}getImageSrc(t){return t?t.startsWith("http")||t.startsWith("/")?t:"/"+t:"assets/placeholder.png"}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=k({type:a,selectors:[["app-admin-courses-page"]],decls:27,vars:2,consts:[[1,"flex","justify-between","items-center","mb-6"],[1,"text-2xl","font-bold","text-green-600"],["routerLink","/admin/courses/new",1,"btn","btn-primary"],[1,"fas","fa-plus","mr-2"],[1,"overflow-x-auto","bg-base-100","rounded-lg","shadow","text-base-content"],[1,"table","w-full"],[1,"text-base-content"],[1,"flex","justify-center","py-8"],[1,"avatar"],[1,"mask","mask-squircle","w-12","h-12"],[3,"error","src","alt"],[1,"font-bold"],[1,"text-sm","opacity-50"],[1,"text-xs","text-green-600"],[1,"badge"],[1,"flex","gap-2"],[1,"btn","btn-sm","btn-square","btn-ghost","text-blue-600",3,"routerLink"],[1,"fas","fa-edit"],[1,"btn","btn-sm","btn-square","btn-ghost","text-red-600",3,"click"],[1,"fas","fa-trash"],["colspan","6",1,"text-center","py-8","text-gray-500"],[1,"loading","loading-spinner","loading-lg"]],template:function(e,o){e&1&&(i(0,"div",0)(1,"h2",1),r(2,"Administrar Cursos"),n(),i(3,"a",2),l(4,"i",3),r(5," Nuevo Curso "),n()(),i(6,"div",4)(7,"table",5)(8,"thead")(9,"tr",6)(10,"th"),r(11,"Imagen"),n(),i(12,"th"),r(13,"T\xEDtulo"),n(),i(14,"th"),r(15,"Precio"),n(),i(16,"th"),r(17,"Nivel"),n(),i(18,"th"),r(19,"Estado"),n(),i(20,"th"),r(21,"Acciones"),n()()(),i(22,"tbody"),I(23,q,26,17,"tr",null,L),d(25,B,3,0,"tr"),n()()(),d(26,R,2,0,"div",7)),e&2&&(s(23),P(o.courses()),s(2),m(o.courses().length===0&&!o.loading()?25:-1),s(),m(o.loading()?26:-1))},dependencies:[N,M,D],encapsulation:2})};export{$ as AdminCoursesPage};
