import{a as y}from"./chunk-4FNFMYN4.js";import{d as E}from"./chunk-4WX2KV2B.js";import"./chunk-QBWIJBVM.js";import"./chunk-BCXBSHNT.js";import"./chunk-YHPCNF66.js";import{Ca as f,Db as g,Fa as r,Fb as a,Gb as l,Hb as s,Ta as v,Tb as b,W as m,eb as x,fb as h,ib as P,ic as S,jb as _,kb as p,lb as t,mb as i,nb as d,xb as u}from"./chunk-YBYZLFPG.js";import"./chunk-VOSPIT4N.js";var k=n=>["/admin/products",n],w=(n,o)=>o.id;function I(n,o){n&1&&(t(0,"div",4),d(1,"span",7),i())}function A(n,o){if(n&1&&(t(0,"div",5),d(1,"i",8),t(2,"span"),a(3),i()()),n&2){let e=u();r(3),l(e.error)}}function D(n,o){if(n&1&&(t(0,"tr")(1,"td")(2,"div",12)(3,"div",13)(4,"div",14),d(5,"img",15),i()(),t(6,"div")(7,"div",16),a(8),i(),t(9,"div",17),a(10),i()()()(),t(11,"td",16),a(12),i(),t(13,"td")(14,"div",18),a(15),i()(),t(16,"td")(17,"span",18),a(18),i()(),t(19,"td")(20,"a",19),d(21,"i",20),a(22," Editar "),i()()()),n&2){let e=o.$implicit;r(5),p("src",e.image_url||"assets/img/no-image.png",f),r(3),l(e.name),r(2),l(e.slug),r(2),s("$",e.price),r(2),g("badge-warning",e.stock<5)("badge-success",e.stock>=5),r(),s(" ",e.stock," "),r(2),g("badge-success",e.is_active)("badge-ghost",!e.is_active),r(),s(" ",e.is_active?"Activo":"Inactivo"," "),r(2),p("routerLink",b(15,k,e.id))}}function T(n,o){if(n&1&&(t(0,"div",6)(1,"div",9)(2,"table",10)(3,"thead")(4,"tr",11)(5,"th"),a(6,"Producto"),i(),t(7,"th"),a(8,"Precio"),i(),t(9,"th"),a(10,"Stock"),i(),t(11,"th"),a(12,"Estado"),i(),t(13,"th"),a(14,"Acciones"),i()()(),t(15,"tbody"),P(16,D,23,17,"tr",null,w),i()()()()),n&2){let e=u();r(16),_(e.products)}}var C=class n{auth=m(y);cdr=m(S);products=[];loading=!0;error=null;async ngOnInit(){try{let o=this.auth.getSupabaseClient(),{data:e,error:c}=await o.from("products").select("*").order("created_at",{ascending:!1});if(c)throw c;this.products=e||[]}catch(o){this.error=o.message||"Error al cargar productos"}finally{this.loading=!1,this.cdr.markForCheck()}}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=v({type:n,selectors:[["app-admin-products-page"]],decls:9,vars:1,consts:[[1,"flex","justify-between","items-center","mb-6"],[1,"text-2xl","font-bold","text-gray-800"],["routerLink","/admin/products/new",1,"btn","btn-primary"],[1,"fas","fa-plus","mr-2"],[1,"flex","justify-center","py-12"],[1,"alert","alert-error"],[1,"bg-white","rounded-lg","shadow","overflow-hidden","text-gray-800"],[1,"loading","loading-spinner","loading-lg"],[1,"fas","fa-exclamation-circle"],[1,"overflow-x-auto"],[1,"table","w-full"],[1,"text-gray-800"],[1,"flex","items-center","gap-3"],[1,"avatar"],[1,"mask","mask-squircle","w-12","h-12"],["alt","Product",3,"src"],[1,"font-bold"],[1,"text-sm","opacity-50"],[1,"badge"],[1,"btn","btn-sm","btn-ghost",3,"routerLink"],[1,"fas","fa-edit"]],template:function(e,c){e&1&&(t(0,"div",0)(1,"h1",1),a(2,"Productos"),i(),t(3,"a",2),d(4,"i",3),a(5," Nuevo Producto "),i()(),x(6,I,2,0,"div",4)(7,A,4,1,"div",5)(8,T,18,0,"div",6)),e&2&&(r(6),h(c.loading?6:c.error?7:8))},dependencies:[E],encapsulation:2,changeDetection:0})};export{C as AdminProductsPage};
