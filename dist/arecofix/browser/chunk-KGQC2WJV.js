import{a as m}from"./chunk-F4YL3ILH.js";import{B as E,n as p,u as w,v as A,y as D,z as C}from"./chunk-LKDB4EQ3.js";import{A as c,Ba as b,R as S,W as r,ea as y,r as f,t as v,xa as T}from"./chunk-R5MGBMPQ.js";var I="SEO_DATA",R=class n{titleService=r(A);metaService=r(w);router=r(E);activatedRoute=r(C);document=r(y);platformId=r(T);transferState=r(b);constructor(){}initialize(){if(!p(this.platformId)){let t=this.transferState.get(I,null);t&&this.setPageData(t)}this.router.events.pipe(c(t=>t instanceof D),f(()=>this.getContentRoute(this.activatedRoute)),c(t=>t.outlet==="primary"),v(t=>t.data)).subscribe(t=>{if(t.seo){let e=t.seo;this.setPageData(e),p(this.platformId)&&this.transferState.set(I,e)}})}getContentRoute(t){for(;t.firstChild;)t=t.firstChild;return t}setPageData(t){let{title:e,description:i,imageUrl:l,type:j="website",keywords:d,schema:u,url:k,author:h,twitterCard:U="summary_large_image"}=t,s=e.includes("|")||e.includes("Arecofix")?e:`${e} | Arecofix`;this.titleService.setTitle(s),this.metaService.updateTag({name:"description",content:i}),d&&this.metaService.updateTag({name:"keywords",content:d}),h&&this.metaService.updateTag({name:"author",content:h});let o=k||this.router.url,g=o.startsWith("http")?o:`${m.baseUrl}${o}`,a="assets/img/branding/og-services.jpg";if(l&&(a=l),!a.startsWith("http")){let L=a.startsWith("/")?a.substring(1):a;a=`${m.baseUrl}/${L}`}this.metaService.updateTag({property:"og:title",content:s}),this.metaService.updateTag({property:"og:description",content:i}),this.metaService.updateTag({property:"og:type",content:j}),this.metaService.updateTag({property:"og:url",content:g}),this.metaService.updateTag({property:"og:image",content:a}),a.startsWith("https")&&this.metaService.updateTag({property:"og:image:secure_url",content:a}),this.metaService.updateTag({property:"og:site_name",content:"Arecofix"}),this.metaService.updateTag({name:"twitter:card",content:U}),this.metaService.updateTag({name:"twitter:title",content:s}),this.metaService.updateTag({name:"twitter:description",content:i}),this.metaService.updateTag({name:"twitter:image",content:a}),this.setCanonicalUrl(g),u?this.injectJsonLd(u):this.removeJsonLd()}setCanonicalUrl(t){let e=this.document.querySelector('link[rel="canonical"]');e||(e=this.document.createElement("link"),e.setAttribute("rel","canonical"),this.document.head.appendChild(e)),e.setAttribute("href",t)}injectJsonLd(t){let e="json-ld-schema",i=this.document.getElementById(e);i||(i=this.document.createElement("script"),i.id=e,i.type="application/ld+json",this.document.head.appendChild(i)),i.text=JSON.stringify(t)}removeJsonLd(){let t=this.document.getElementById("json-ld-schema");t&&t.remove()}static \u0275fac=function(e){return new(e||n)};static \u0275prov=S({token:n,factory:n.\u0275fac,providedIn:"root"})};export{R as a};
