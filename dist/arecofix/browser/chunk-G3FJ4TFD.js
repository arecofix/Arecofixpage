import{a as A}from"./chunk-2HJVAWWH.js";import{d as w}from"./chunk-SVBX2TBE.js";import"./chunk-WTNLG3BP.js";import"./chunk-EKURLNVA.js";import{j as E,k as S,n as y}from"./chunk-FRHPP2CG.js";import{Ab as b,Cb as a,Db as m,Ea as s,Eb as c,Ra as h,Tb as p,Ub as _,Vb as C,W as u,bb as f,cb as g,fb as x,gb as P,ib as i,jb as t,kb as l,ma as d,ub as v}from"./chunk-MMCFFNKD.js";import"./chunk-VOSPIT4N.js";var D=(n,r)=>r.id;function T(n,r){n&1&&(i(0,"tr")(1,"td",8),a(2,"Cargando..."),t()())}function N(n,r){n&1&&(i(0,"tr")(1,"td",8),a(2,"No hay compras registradas."),t()())}function M(n,r){if(n&1&&(i(0,"tr")(1,"td"),a(2),p(3,"date"),t(),i(4,"td"),a(5),t(),i(6,"td")(7,"span",9),a(8),p(9,"uppercase"),t()(),i(10,"td",10),a(11),t(),l(12,"td"),t()),n&2){let e=r.$implicit;s(2),m(C(3,10,e.created_at,"short")),s(3),m((e.suppliers==null?null:e.suppliers.name)||"Desconocido"),s(2),b("badge-success",e.status==="received")("badge-warning",e.status==="ordered")("badge-error",e.status==="cancelled"),s(),c(" ",_(9,13,e.status)," "),s(3),c("$",e.total_amount)}}function k(n,r){if(n&1&&x(0,M,13,15,"tr",null,D),n&2){let e=v();P(e.purchases())}}var I=class n{auth=u(A);purchases=d([],{});loading=d(!0,{});async ngOnInit(){await this.loadPurchases()}async loadPurchases(){this.loading.set(!0);let r=this.auth.getSupabaseClient(),{data:e,error:o}=await r.from("purchases").select("*, suppliers(name)").order("created_at",{ascending:!1});e&&this.purchases.set(e),this.loading.set(!1)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=h({type:n,selectors:[["app-admin-purchases-page"]],decls:25,vars:1,consts:[[1,"flex","justify-between","items-center","mb-6"],[1,"text-2xl","font-bold","text-gray-800"],["routerLink","/admin/purchases/new",1,"btn","btn-primary"],[1,"fas","fa-plus","mr-2"],[1,"bg-white","rounded-lg","shadow","overflow-hidden","text-gray-800"],[1,"overflow-x-auto"],[1,"table","w-full"],[1,"text-gray-800"],["colspan","5",1,"text-center","py-4"],[1,"badge"],[1,"font-bold"]],template:function(e,o){e&1&&(i(0,"div",0)(1,"h1",1),a(2,"Compras"),t(),i(3,"a",2),l(4,"i",3),a(5," Nueva Compra "),t()(),i(6,"div",4)(7,"div",5)(8,"table",6)(9,"thead")(10,"tr",7)(11,"th"),a(12,"Fecha"),t(),i(13,"th"),a(14,"Proveedor"),t(),i(15,"th"),a(16,"Estado"),t(),i(17,"th"),a(18,"Total"),t(),i(19,"th"),a(20,"Acciones"),t()()(),i(21,"tbody"),f(22,T,3,0,"tr")(23,N,3,0,"tr")(24,k,2,0),t()()()()),e&2&&(s(22),g(o.loading()?22:o.purchases().length===0?23:24))},dependencies:[y,w,E,S],encapsulation:2})};export{I as AdminPurchasesPage};
