import{a as m}from"./chunk-MSD3KBTG.js";import{D as u,T as g,X as b,p,q as o,v as n}from"./chunk-4GKTJ7DD.js";var f=class l{constructor(r){this.authService=r;this.supabase=this.authService.getSupabaseClient()}supabase;processResponse(r,t,e){let s=t||r.length,i=e._per_page>0?e._per_page:s,a=Math.max(1,Math.ceil(s/(i||1)));return{first:1,prev:e._page>1?e._page-1:null,next:e._page<a?e._page+1:null,last:a,pages:a,items:s,data:r}}getData(r){let{_page:t=1,_per_page:e=10}=r,s=(t-1)*e,i=s+e-1;return p(this.supabase.from("categories").select("*",{count:"exact"}).eq("is_active",!0).range(s,i)).pipe(n(({data:a,count:_,error:c})=>{if(c)throw c;return this.processResponse(a||[],_,{_page:t,_per_page:e})}),u(a=>(console.error("Supabase Error:",a),o({first:1,prev:null,next:null,last:1,pages:1,items:0,data:[]}))))}getFeaturedData(){return p(this.supabase.from("categories").select("*",{count:"exact"}).eq("is_active",!0).order("name").limit(100)).pipe(n(({data:e,count:s,error:i})=>{if(i)throw i;return this.processResponse(e||[],s,{_page:1,_per_page:100})}),u(e=>(console.error("Supabase Error:",e),o({first:1,prev:null,next:null,last:1,pages:1,items:0,data:[]}))))}getDataBySlug(r){return p(this.supabase.from("categories").select("*").eq("slug",r).limit(1)).pipe(n(({data:t,error:e})=>{if(e)throw e;return this.processResponse(t||[],t?.length||0,{_page:1,_per_page:1})}),u(t=>(console.error("Supabase Error:",t),o({first:1,prev:null,next:null,last:1,pages:1,items:0,data:[]}))))}getById(r){return!r||r==="null"?o(null):p(this.supabase.from("categories").select("*").eq("id",r).single()).pipe(n(({data:t,error:e})=>{if(e)throw e;return t}),u(t=>(console.error("Supabase Error:",t),o(null))))}static \u0275fac=function(t){return new(t||l)(b(m))};static \u0275prov=g({token:l,factory:l.\u0275fac,providedIn:"root"})};export{f as a};
