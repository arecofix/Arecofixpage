import{b as W,d as X,e as Y,f as ee,g as te,h as ie,i as ne,s as re}from"./chunk-SBGT4JRR.js";import{a as oe}from"./chunk-VIKGVTJW.js";import{a as ae}from"./chunk-JFUTRVJB.js";import{a as se}from"./chunk-HVEZGABD.js";import{b as le,c as ce}from"./chunk-IJS43ZBZ.js";import{d as B}from"./chunk-Z3WVGUK4.js";import{a as de}from"./chunk-YAAVV4UE.js";import{a as K}from"./chunk-LYLVQZHT.js";import"./chunk-FNOMVEKC.js";import{a as J}from"./chunk-W6CDOMGN.js";import"./chunk-VGQVHFGG.js";import"./chunk-FOCRVBU7.js";import"./chunk-NIOBXWFE.js";import{a as G,c as H,d as $,e as U,i as Z}from"./chunk-FNG3N4ES.js";import"./chunk-ZF2WZNXG.js";import{Ab as x,Bb as e,Cb as i,Db as u,Jb as k,K as T,M as q,Nb as d,Pb as s,Qa as N,Va as c,X as v,Xb as a,Yb as C,Zb as S,aa as m,ba as g,ca as f,da as h,hb as z,ic as Q,jc as M,na as b,o as L,u as R,ub as _,v as D,vb as y,vc as O,xb as j,yb as P,zb as w}from"./chunk-J6ZEXR2D.js";import{c as A}from"./chunk-7CGTOI24.js";var ue=r=>["/products/category",r],pe=()=>[1,2,3,4,5],xe=r=>["/products/details",r],F=(r,l)=>l.id;function _e(r,l){if(r&1&&(e(0,"li",9),a(1),i()),r&2){let t,n=s();c(),C((t=n.currentCategory())==null?null:t.name)}}function ye(r,l){if(r&1&&(e(0,"h1",47),a(1),i(),e(2,"p",48),a(3),i()),r&2){let t,n,o=s();c(),S(" ",(t=o.currentCategory())==null?null:t.name," "),c(2),S(" ",((n=o.currentCategory())==null?null:n.description)||"Explora nuestra selecci\xF3n de productos de alta calidad."," ")}}function ve(r,l){r&1&&u(0,"div",49)(1,"div",50)}function fe(r,l){if(r&1){let t=k();e(0,"li")(1,"a",67),d("click",function(){m(t);let o=s(2);return g(o.toggleMobileFilters())}),a(2),i()()}if(r&2){let t=l.$implicit;c(),x("routerLink",M(2,ue,t.slug)),c(),C(t.name)}}function be(r,l){if(r&1){let t=k();e(0,"div",11)(1,"div",51),d("click",function(){m(t);let o=s();return g(o.toggleMobileFilters())}),i(),e(2,"div",52)(3,"div",53)(4,"div",54)(5,"h2",55),a(6,"Filtros"),i(),e(7,"button",56),d("click",function(){m(t);let o=s();return g(o.toggleMobileFilters())}),e(8,"span",25),a(9,"Cerrar men\xFA"),i(),f(),e(10,"svg",57),u(11,"path",58),i()()(),h(),e(12,"form",59)(13,"h3",25),a(14,"Categor\xEDas"),i(),e(15,"ul",60),P(16,fe,3,4,"li",null,F),i(),e(18,"div",61)(19,"h3",62)(20,"span",63),a(21,"Precio"),i()(),e(22,"div",38)(23,"div",39)(24,"input",64),d("ngModelChange",function(o){m(t);let p=s();return g(p.minPriceInput.set(o))}),i(),e(25,"span",41),a(26,"-"),i(),e(27,"input",65),d("ngModelChange",function(o){m(t);let p=s();return g(p.maxPriceInput.set(o))}),i()(),e(28,"button",66),d("click",function(){m(t);let o=s();return g(o.applyPriceFilter())}),a(29,"Aplicar"),i()()()()()()()}if(r&2){let t,n=s();c(16),w((t=n.categoriesListRs.value())==null?null:t.data),c(8),x("ngModel",n.minPriceInput()),c(3),x("ngModel",n.maxPriceInput())}}function Ce(r,l){if(r&1&&(e(0,"h1",14),a(1),i()),r&2){let t,n=s();c(),C((t=n.currentCategory())==null?null:t.name)}}function he(r,l){r&1&&u(0,"div",15)}function Pe(r,l){if(r&1&&(e(0,"li")(1,"a",68),a(2),i()()),r&2){let t=l.$implicit;c(),x("routerLink",M(2,ue,t.slug)),c(),C(t.name)}}function we(r,l){r&1&&u(0,"is-loading")}function ke(r,l){r&1&&(e(0,"div",45)(1,"p",69),a(2,"No se encontraron productos."),i()())}function Se(r,l){r&1&&u(0,"is-error")}function Me(r,l){if(r&1){let t=k();e(0,"product-card",73),d("quickView",function(o){m(t);let p=s(2);return g(p.openQuickView(o))}),i()}if(r&2){let t=l.$implicit,n=l.$index;x("product",t)("isPriority",n<8)}}function Ee(r,l){if(r&1&&(e(0,"div",72),u(1,"pagination",74),i()),r&2){let t=s(2);c(),x("pages",t.productsRs.value().pages)("currentPage",t.paginationService.currentPage())}}function Ve(r,l){if(r&1&&(e(0,"div",70),P(1,Me,1,2,"product-card",71,F),i(),_(3,Ee,2,2,"div",72)),r&2){let t=s();c(),w(t.productsRs.value().data),c(2),y(t.paginationData()?3:-1)}}function Te(r,l){r&1&&(f(),e(0,"svg",91),u(1,"path",98),i())}function Be(r,l){if(r&1){let t=k();e(0,"div",46)(1,"div",75),d("click",function(){m(t);let o=s();return g(o.closeQuickView())}),i(),e(2,"div",76)(3,"div",77)(4,"div",78)(5,"div",79)(6,"button",80),d("click",function(){m(t);let o=s();return g(o.closeQuickView())}),e(7,"span",25),a(8,"Close"),i(),f(),e(9,"svg",81),u(10,"path",58),i()(),h(),e(11,"div",82)(12,"div",83),u(13,"img",84),i(),e(14,"div",85)(15,"h2",86),a(16),i(),e(17,"section",87)(18,"h3",88),a(19,"Product information"),i(),e(20,"p",89),a(21),i(),e(22,"div",90)(23,"h4",25),a(24,"Reviews"),i(),e(25,"div",16)(26,"div",16),P(27,Te,2,0,":svg:svg",91,j),i(),e(29,"p",25),a(30,"5 out of 5 stars"),i(),e(31,"a",92),a(32,"Reviews \u2192"),i()()()(),e(33,"section",93)(34,"p",94),a(35),i(),e(36,"button",95),d("click",function(){m(t);let o=s();return g(o.addToCart(o.quickViewProduct()))}),a(37,"Agregar al Carrito"),i(),e(38,"p",96)(39,"a",97),d("click",function(){m(t);let o=s();return g(o.closeQuickView())}),a(40,"Ver detalles completos"),i()()()()()()()()()()}if(r&2){let t=s();c(13),x("src",t.quickViewProduct().image_url||"assets/img/no-image.png",N)("alt",t.quickViewProduct().name),c(3),C(t.quickViewProduct().name),c(5),S("$",t.quickViewProduct().price),c(6),w(Q(6,pe)),c(8),C(t.quickViewProduct().description),c(4),x("routerLink",M(7,xe,t.quickViewProduct().slug))}}var I=class r{route=v(G);router=v(H);categoryService=v(J);productService=v(de);paginationService=v(oe);cartService=v(K);currentCategory=b(null);minPriceInput=b(null);maxPriceInput=b(null);categoriesListRs=B({stream:()=>this.categoryService.getFeaturedData()});productsRs=B({stream:()=>D([this.route.params.pipe(R(({categorySlug:l})=>l)),this.route.queryParams]).pipe(T(([l,t])=>this.categoryService.getDataBySlug(l).pipe(q(n=>{this.currentCategory.set(n.data?.[0]||null)}),T(n=>{let o=n.data?.[0]?.id;if(!o)return L({first:1,prev:null,next:null,last:1,pages:1,items:0,data:[]});let p=+t._page||1,me=t._sort,ge=t._order,E=t.min_price?+t.min_price:void 0,V=t.max_price?+t.max_price:void 0;return this.minPriceInput()===null&&E&&this.minPriceInput.set(E),this.maxPriceInput()===null&&V&&this.maxPriceInput.set(V),this.productService.getData({category_id:o,_page:p,_sort:me,_order:ge,min_price:E,max_price:V})}))))});paginationData=O(()=>{let l=this.productsRs.value();if(!l)return null;let o=l,{data:t}=o;return A(o,["data"])});isMobileFiltersOpen=b(!1);isQuickViewOpen=b(!1);quickViewProduct=b(null);toggleMobileFilters(){this.isMobileFiltersOpen.update(l=>!l)}openQuickView(l){this.quickViewProduct.set(l),this.isQuickViewOpen.set(!0)}closeQuickView(){this.isQuickViewOpen.set(!1),this.quickViewProduct.set(null)}addToCart(l){this.cartService.addToCart(l),this.closeQuickView()}applyPriceFilter(){this.router.navigate([],{relativeTo:this.route,queryParams:{min_price:this.minPriceInput(),max_price:this.maxPriceInput(),_page:1},queryParamsHandling:"merge"}),this.isMobileFiltersOpen.set(!1)}setSort(l,t="asc"){this.router.navigate([],{relativeTo:this.route,queryParams:{_sort:l,_order:t,_page:1},queryParamsHandling:"merge"})}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=z({type:r,selectors:[["products-by-category-page"]],decls:79,vars:8,consts:[[1,"relative","bg-gray-900","text-white","py-12","mb-8","overflow-hidden"],[1,"absolute","inset-0","opacity-20","bg-linear-to-r","from-blue-900","to-indigo-900"],[1,"absolute","top-0","right-0","-mr-20","-mt-20","w-64","h-64","rounded-full","bg-blue-500","opacity-10","blur-3xl"],[1,"absolute","bottom-0","left-0","-ml-20","-mb-20","w-64","h-64","rounded-full","bg-indigo-500","opacity-10","blur-3xl"],[1,"relative","container","mx-auto","px-4"],[1,"max-w-3xl"],[1,"text-sm","breadcrumbs","text-gray-300","mb-4"],["routerLink","/"],["routerLink","/products"],[1,"font-semibold","text-white"],[1,"bg-white"],["role","dialog","aria-modal","true",1,"relative","z-40","lg:hidden"],[1,"mx-auto","max-w-7xl","px-4","sm:px-6","lg:px-8"],[1,"flex","items-baseline","justify-between","border-b","border-gray-200","pt-12","pb-6"],[1,"text-3xl","md:text-4xl","font-bold","tracking-tight","text-gray-900"],[1,"h-10","w-64","bg-gray-200","rounded","animate-pulse"],[1,"flex","items-center"],[1,"relative","inline-block","text-left","group"],["type","button",1,"group","inline-flex","justify-center","text-sm","font-medium","text-gray-700","hover:text-gray-900"],["viewBox","0 0 20 20","fill","currentColor","aria-hidden","true",1,"-mr-1","ml-1","h-5","w-5","shrink-0","text-gray-400","group-hover:text-gray-500"],["fill-rule","evenodd","d","M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z","clip-rule","evenodd"],[1,"absolute","right-0","z-10","mt-2","w-40","origin-top-right","rounded-md","bg-white","shadow-2xl","ring-1","ring-black/5","focus:outline-none","hidden","group-hover:block","transition-opacity"],[1,"py-1"],[1,"block","w-full","text-left","px-4","py-2","text-sm","text-gray-700","hover:bg-gray-100",3,"click"],["type","button",1,"-m-2","ml-5","p-2","text-gray-400","hover:text-gray-500","sm:ml-7"],[1,"sr-only"],["aria-hidden","true","viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5"],["fill-rule","evenodd","d","M4.25 2A2.25 2.25 0 002 4.25v2.5A2.25 2.25 0 004.25 9h2.5A2.25 2.25 0 009 6.75v-2.5A2.25 2.25 0 006.75 2h-2.5zm0 9A2.25 2.25 0 002 13.25v2.5A2.25 2.25 0 004.25 18h2.5A2.25 2.25 0 009 15.75v-2.5A2.25 2.25 0 006.75 11h-2.5zm9-9A2.25 2.25 0 0011 4.25v2.5A2.25 2.25 0 0013.25 9h2.5A2.25 2.25 0 0018 6.75v-2.5A2.25 2.25 0 0015.75 2h-2.5zm0 9A2.25 2.25 0 0011 13.25v2.5A2.25 2.25 0 0013.25 18h2.5A2.25 2.25 0 0018 15.75v-2.5A2.25 2.25 0 0015.75 11h-2.5z","clip-rule","evenodd"],["type","button",1,"-m-2","ml-4","p-2","text-gray-400","hover:text-gray-500","sm:ml-6","lg:hidden",3,"click"],["fill-rule","evenodd","d","M2.628 1.601C5.028 1.206 7.49 1 10 1s4.973.206 7.372.601a.75.75 0 01.628.74v2.288a2.25 2.25 0 01-.659 1.59l-4.682 4.683a2.25 2.25 0 00-.659 1.59v3.037c0 .684-.31 1.33-.844 1.757l-1.937 1.55A.75.75 0 018 18.25v-5.757a2.25 2.25 0 00-.659-1.591L2.659 6.22A2.25 2.25 0 012 4.629V2.34a.75.75 0 01.628-.74z","clip-rule","evenodd"],["aria-labelledby","products-heading",1,"pt-6","pb-24"],["id","products-heading",1,"sr-only"],[1,"grid","grid-cols-1","gap-x-8","gap-y-10","lg:grid-cols-4"],[1,"hidden","lg:block"],["role","list",1,"space-y-4","border-b","border-gray-200","pb-6","text-sm","font-medium","text-gray-900"],[1,"border-b","border-gray-200","py-6"],[1,"-my-3","flow-root"],[1,"font-medium","text-gray-900"],[1,"pt-6","space-y-4"],[1,"flex","items-center","gap-2"],["type","number","placeholder","Min","name","minPriceDesktop",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","text-sm","bg-white","text-gray-900",3,"ngModelChange","ngModel"],[1,"text-gray-400"],["type","number","placeholder","Max","name","maxPriceDesktop",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","text-sm","bg-white","text-gray-900",3,"ngModelChange","ngModel"],["type","button",1,"w-full","btn","btn-primary","btn-sm","btn-outline",3,"click"],[1,"lg:col-span-3"],[1,"text-center","py-16","bg-white","rounded-xl","border","border-gray-100"],["role","dialog","aria-modal","true",1,"relative","z-3000"],[1,"text-4xl","md:text-5xl","font-bold","mb-4","tracking-tight"],[1,"text-lg","text-gray-300","max-w-2xl","leading-relaxed"],[1,"h-10","w-64","bg-gray-700","rounded","animate-pulse","mb-4"],[1,"h-6","w-96","bg-gray-700","rounded","animate-pulse"],[1,"fixed","inset-0","bg-black/25","transition-opacity",3,"click"],[1,"fixed","inset-0","z-40","flex"],[1,"relative","ml-auto","flex","h-full","w-full","max-w-xs","flex-col","overflow-y-auto","bg-white","py-4","pb-12","shadow-xl","transition-all"],[1,"flex","items-center","justify-between","px-4"],[1,"text-lg","font-medium","text-gray-900"],["type","button",1,"-mr-2","flex","h-10","w-10","items-center","justify-center","rounded-md","bg-white","p-2","text-gray-400",3,"click"],["fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor","aria-hidden","true",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","d","M6 18L18 6M6 6l12 12"],[1,"mt-4","border-t","border-gray-200"],["role","list",1,"px-2","py-3","font-medium","text-gray-900"],[1,"border-t","border-gray-200","px-4","py-6"],[1,"-mx-2","-my-3","flow-root"],[1,"font-medium","text-gray-900","px-2"],["type","number","placeholder","Min","name","minPriceMobile",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","text-sm","bg-white","text-gray-900",3,"ngModelChange","ngModel"],["type","number","placeholder","Max","name","maxPriceMobile",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","text-sm","bg-white","text-gray-900",3,"ngModelChange","ngModel"],["type","button",1,"w-full","btn","btn-primary","btn-sm",3,"click"],["routerLinkActive","text-indigo-600 bg-gray-50",1,"block","px-2","py-3","text-gray-500","hover:text-gray-900",3,"click","routerLink"],["routerLinkActive","text-indigo-600",1,"text-gray-600","hover:text-indigo-600","block",3,"routerLink"],[1,"text-gray-500"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-6"],[3,"product","isPriority"],[1,"mt-12","flex","justify-center"],[3,"quickView","product","isPriority"],[3,"pages","currentPage"],[1,"fixed","inset-0","hidden","md:block","bg-gray-500/75","transition-opacity",3,"click"],[1,"fixed","inset-0","z-10","w-screen","overflow-y-auto"],[1,"flex","min-h-full","items-stretch","justify-center","text-center","md:items-center","md:px-2","lg:px-4"],[1,"flex","w-full","transform","text-left","text-base","transition","md:my-8","md:max-w-2xl","md:px-4","lg:max-w-4xl"],[1,"relative","flex","w-full","items-center","overflow-hidden","bg-white","px-4","pt-14","pb-8","shadow-2xl","sm:px-6","sm:pt-8","md:p-6","lg:p-8","rounded-2xl"],["type","button",1,"absolute","top-4","right-4","text-gray-400","hover:text-gray-500","sm:top-8","sm:right-6","md:top-6","md:right-6","lg:top-8","lg:right-8","z-20",3,"click"],["fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor","aria-hidden","true",1,"size-6"],[1,"grid","w-full","grid-cols-1","items-start","gap-x-6","gap-y-8","sm:grid-cols-12","lg:gap-x-8"],[1,"aspect-2/3","w-full","rounded-lg","bg-gray-100","sm:col-span-4","lg:col-span-5","relative","overflow-hidden"],[1,"absolute","inset-0","size-full","object-cover","object-center",3,"src","alt"],[1,"sm:col-span-8","lg:col-span-7"],[1,"text-2xl","font-bold","text-gray-900","sm:pr-12"],["aria-labelledby","information-heading",1,"mt-2"],["id","information-heading",1,"sr-only"],[1,"text-2xl","text-gray-900"],[1,"mt-6"],["viewBox","0 0 20 20","fill","currentColor","aria-hidden","true",1,"size-5","shrink-0","text-gray-900"],["href","#",1,"ml-3","text-sm","font-medium","text-indigo-600","hover:text-indigo-500"],["aria-labelledby","options-heading",1,"mt-10"],[1,"text-base","text-gray-600","mb-6"],["type","submit",1,"mt-6","flex","w-full","items-center","justify-center","rounded-md","border","border-transparent","bg-indigo-600","px-8","py-3","text-base","font-medium","text-white","hover:bg-indigo-700","focus:ring-2","focus:ring-indigo-500","focus:ring-offset-2","focus:outline-hidden",3,"click"],[1,"mt-6","text-center","text-sm"],[1,"font-medium","text-indigo-600","hover:text-indigo-500",3,"click","routerLink"],["d","M10.868 2.884c-.321-.772-1.415-.772-1.736 0l-1.83 4.401-4.753.381c-.833.067-1.171 1.107-.536 1.651l3.62 3.102-1.106 4.637c-.194.813.691 1.456 1.405 1.02L10 15.591l4.069 2.485c.713.436 1.598-.207 1.404-1.02l-1.106-4.637 3.62-3.102c.635-.544.297-1.584-.536-1.65l-4.752-.382-1.831-4.401Z","clip-rule","evenodd","fill-rule","evenodd"]],template:function(t,n){if(t&1&&(e(0,"div",0),u(1,"div",1)(2,"div",2)(3,"div",3),e(4,"div",4)(5,"div",5)(6,"div",6)(7,"ul")(8,"li")(9,"a",7),a(10,"Inicio"),i()(),e(11,"li")(12,"a",8),a(13,"Productos"),i()(),_(14,_e,2,1,"li",9),i()(),_(15,ye,4,2)(16,ve,2,0),i()()(),e(17,"div",10),_(18,be,30,2,"div",11),e(19,"main",12)(20,"div",13),_(21,Ce,2,1,"h1",14)(22,he,1,0,"div",15),e(23,"div",16)(24,"div",17)(25,"button",18),a(26," Ordenar "),f(),e(27,"svg",19),u(28,"path",20),i()(),h(),e(29,"div",21)(30,"div",22)(31,"button",23),d("click",function(){return n.setSort("view_count","desc")}),a(32,"M\xE1s Populares"),i(),e(33,"button",23),d("click",function(){return n.setSort("rating","desc")}),a(34,"Mejor Calificados"),i(),e(35,"button",23),d("click",function(){return n.setSort("created_at","desc")}),a(36,"M\xE1s Recientes"),i(),e(37,"button",23),d("click",function(){return n.setSort("price","asc")}),a(38,"Precio: Menor a Mayor"),i(),e(39,"button",23),d("click",function(){return n.setSort("price","desc")}),a(40,"Precio: Mayor a Menor"),i()()()(),e(41,"button",24)(42,"span",25),a(43,"Ver cuadr\xEDcula"),i(),f(),e(44,"svg",26),u(45,"path",27),i()(),h(),e(46,"button",28),d("click",function(){return n.toggleMobileFilters()}),e(47,"span",25),a(48,"Filtros"),i(),f(),e(49,"svg",26),u(50,"path",29),i()()()(),h(),e(51,"section",30)(52,"h2",31),a(53,"Products"),i(),e(54,"div",32)(55,"form",33)(56,"h3",25),a(57,"Categor\xEDas"),i(),e(58,"ul",34),P(59,Pe,3,4,"li",null,F),i(),e(61,"div",35)(62,"h3",36)(63,"span",37),a(64,"Precio"),i()(),e(65,"div",38)(66,"div",39)(67,"input",40),d("ngModelChange",function(p){return n.minPriceInput.set(p)}),i(),e(68,"span",41),a(69,"-"),i(),e(70,"input",42),d("ngModelChange",function(p){return n.maxPriceInput.set(p)}),i()(),e(71,"button",43),d("click",function(){return n.applyPriceFilter()}),a(72,"Aplicar"),i()()()(),e(73,"div",44),_(74,we,1,0,"is-loading")(75,ke,3,0,"div",45)(76,Se,1,0,"is-error")(77,Ve,4,1),i()()()()(),_(78,Be,41,9,"div",46)),t&2){let o;c(14),y(n.currentCategory()?14:-1),c(),y(n.currentCategory()?15:16),c(3),y(n.isMobileFiltersOpen()?18:-1),c(3),y(n.currentCategory()?21:22),c(38),w((o=n.categoriesListRs.value())==null?null:o.data),c(8),x("ngModel",n.minPriceInput()),c(3),x("ngModel",n.maxPriceInput()),c(4),y(n.productsRs.isLoading()?74:!n.productsRs.hasValue()||n.productsRs.value().data.length===0?75:n.productsRs.error()?76:77),c(4),y(n.isQuickViewOpen()&&n.quickViewProduct()?78:-1)}},dependencies:[le,ce,se,ae,Z,$,U,re,ie,W,ne,X,Y,te,ee],encapsulation:2,changeDetection:0})},Ke=I;export{I as ProductsByCategoryPage,Ke as default};
