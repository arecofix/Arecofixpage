import{a as F,b as A,d as T,e as N,f as L,g as D,h as k,p as B,r as I}from"./chunk-V4FOMNQO.js";import{a as W}from"./chunk-P6KFP5JI.js";import{a as x,c as E,d as P}from"./chunk-B4MTIIOY.js";import"./chunk-UGUM5KGK.js";import"./chunk-WYMAPANE.js";import{n as C}from"./chunk-2LXWRM6P.js";import"./chunk-LAXSCOZR.js";import{Hb as a,Ia as o,Ib as S,Jb as M,Lb as l,Mb as d,Nb as m,Wa as b,X as f,gb as h,hb as c,mb as _,na as p,nb as t,ob as n,pb as y,xb as w,zb as v}from"./chunk-BLXVCPJI.js";import"./chunk-VOSPIT4N.js";function j(u,s){if(u&1&&(t(0,"div",7),y(1,"i",28),t(2,"span"),a(3),n()()),u&2){let r=v();o(3),S(r.error())}}function q(u,s){u&1&&y(0,"span",27)}var R=class u{route=f(x);router=f(E);auth=f(W);id=null;form=p({name:"",type:"",rubro:"",address:"",cuil:"",email:"",phone:"",is_active:!0},{});loading=p(!0,{});saving=p(!1,{});error=p(null,{});async ngOnInit(){if(this.id=this.route.snapshot.paramMap.get("id"),this.id){let s=this.auth.getSupabaseClient(),{data:r,error:e}=await s.from("suppliers").select("*").eq("id",this.id).single();r&&this.form.set({name:r.name,type:r.type||"",rubro:r.rubro||"",address:r.address||"",cuil:r.tax_id||"",email:r.email||"",phone:r.phone||"",is_active:r.is_active})}this.loading.set(!1)}async save(){this.saving.set(!0),this.error.set(null);let s=this.auth.getSupabaseClient(),r={name:this.form().name,type:this.form().type,rubro:this.form().rubro,address:this.form().address,tax_id:this.form().cuil,email:this.form().email,phone:this.form().phone,is_active:this.form().is_active};try{if(this.id){let{error:e}=await s.from("suppliers").update(r).eq("id",this.id);if(e)throw e}else{let{error:e}=await s.from("suppliers").insert(r);if(e)throw e}this.router.navigate(["/admin/suppliers"])}catch(e){this.error.set(e.message)}finally{this.saving.set(!1)}}static \u0275fac=function(r){return new(r||u)};static \u0275cmp=b({type:u,selectors:[["app-admin-supplier-form-page"]],decls:50,vars:12,consts:[[1,"max-w-4xl","mx-auto","text-gray-800"],[1,"flex","items-center","gap-4","mb-6"],["routerLink","/admin/suppliers",1,"btn","btn-circle","btn-ghost"],[1,"fas","fa-arrow-left"],[1,"text-2xl","font-bold","text-gray-800"],[3,"ngSubmit"],[1,"bg-white","p-6","rounded-xl","shadow-sm","border","border-gray-100","mb-6"],[1,"alert","alert-error","mb-6"],[1,"mb-4"],[1,"block","text-sm","font-medium","text-gray-700","mb-1.5"],["type","text","name","name","required","",1,"w-full","bg-white","text-gray-900","border","border-gray-300","rounded-lg","px-4","py-2","focus:outline-none","focus:ring-2","transition-all","duration-200","ease-in-out","shadow-sm","hover:border-gray-400",3,"ngModelChange","ngModel"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],["type","text","name","type","placeholder","Ej: Mayorista, Fabricante",1,"w-full","bg-white","text-gray-900","border","border-gray-300","rounded-lg","px-4","py-2","focus:outline-none","focus:ring-2","transition-all","duration-200","ease-in-out","shadow-sm","hover:border-gray-400",3,"ngModelChange","ngModel"],["type","text","name","rubro","placeholder","Ej: Electr\xF3nica",1,"w-full","bg-white","text-gray-900","border","border-gray-300","rounded-lg","px-4","py-2","focus:outline-none","focus:ring-2","transition-all","duration-200","ease-in-out","shadow-sm","hover:border-gray-400",3,"ngModelChange","ngModel"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6","mt-4"],["type","text","name","cuil",1,"w-full","bg-white","text-gray-900","border","border-gray-300","rounded-lg","px-4","py-2","focus:outline-none","focus:ring-2","transition-all","duration-200","ease-in-out","shadow-sm","hover:border-gray-400",3,"ngModelChange","ngModel"],["type","text","name","phone",1,"w-full","bg-white","text-gray-900","border","border-gray-300","rounded-lg","px-4","py-2","focus:outline-none","focus:ring-2","transition-all","duration-200","ease-in-out","shadow-sm","hover:border-gray-400",3,"ngModelChange","ngModel"],[1,"mt-4"],["type","email","name","email",1,"w-full","bg-white","text-gray-900","border","border-gray-300","rounded-lg","px-4","py-2","focus:outline-none","focus:ring-2","transition-all","duration-200","ease-in-out","shadow-sm","hover:border-gray-400",3,"ngModelChange","ngModel"],["type","text","name","address",1,"w-full","bg-white","text-gray-900","border","border-gray-300","rounded-lg","px-4","py-2","focus:outline-none","focus:ring-2","transition-all","duration-200","ease-in-out","shadow-sm","hover:border-gray-400",3,"ngModelChange","ngModel"],[1,"mt-6"],[1,"flex","items-center","gap-3","p-3","bg-white","border","border-gray-200","rounded-lg","hover:bg-gray-50","transition-colors","cursor-pointer","w-fit"],["type","checkbox","name","is_active",1,"checkbox","checkbox-primary","h-5","w-5","rounded","border-gray-300",3,"ngModelChange","ngModel"],[1,"font-medium","text-gray-700"],[1,"flex","justify-end","gap-4","mt-6"],["routerLink","/admin/suppliers",1,"btn","btn-ghost"],["type","submit",1,"btn","btn-primary","px-8",3,"disabled"],[1,"loading","loading-spinner","loading-xs","mr-2"],[1,"fas","fa-exclamation-circle"]],template:function(r,e){r&1&&(t(0,"div",0)(1,"div",1)(2,"a",2),y(3,"i",3),n(),t(4,"h1",4),a(5),n()(),t(6,"form",5),w("ngSubmit",function(){return e.save()}),t(7,"div",6),h(8,j,4,1,"div",7),t(9,"div",8)(10,"label",9),a(11,"Nombre"),n(),t(12,"input",10),m("ngModelChange",function(i){return d(e.form().name,i)||(e.form().name=i),i}),n()(),t(13,"div",11)(14,"div")(15,"label",9),a(16,"Tipo"),n(),t(17,"input",12),m("ngModelChange",function(i){return d(e.form().type,i)||(e.form().type=i),i}),n()(),t(18,"div")(19,"label",9),a(20,"Rubro"),n(),t(21,"input",13),m("ngModelChange",function(i){return d(e.form().rubro,i)||(e.form().rubro=i),i}),n()()(),t(22,"div",14)(23,"div")(24,"label",9),a(25,"CUIL/CUIT"),n(),t(26,"input",15),m("ngModelChange",function(i){return d(e.form().cuil,i)||(e.form().cuil=i),i}),n()(),t(27,"div")(28,"label",9),a(29,"Tel\xE9fono"),n(),t(30,"input",16),m("ngModelChange",function(i){return d(e.form().phone,i)||(e.form().phone=i),i}),n()()(),t(31,"div",17)(32,"label",9),a(33,"Email"),n(),t(34,"input",18),m("ngModelChange",function(i){return d(e.form().email,i)||(e.form().email=i),i}),n()(),t(35,"div",17)(36,"label",9),a(37,"Direcci\xF3n"),n(),t(38,"input",19),m("ngModelChange",function(i){return d(e.form().address,i)||(e.form().address=i),i}),n()(),t(39,"div",20)(40,"label",21)(41,"input",22),m("ngModelChange",function(i){return d(e.form().is_active,i)||(e.form().is_active=i),i}),n(),t(42,"span",23),a(43,"Activo"),n()()()(),t(44,"div",24)(45,"a",25),a(46,"Cancelar"),n(),t(47,"button",26),h(48,q,1,0,"span",27),a(49," Guardar "),n()()()()),r&2&&(o(5),M("",e.id?"Editar":"Nuevo"," Proveedor"),o(3),c(e.error()?8:-1),o(4),l("ngModel",e.form().name),o(5),l("ngModel",e.form().type),o(4),l("ngModel",e.form().rubro),o(5),l("ngModel",e.form().cuil),o(4),l("ngModel",e.form().phone),o(4),l("ngModel",e.form().email),o(4),l("ngModel",e.form().address),o(3),l("ngModel",e.form().is_active),o(6),_("disabled",e.saving()),o(),c(e.saving()?48:-1))},dependencies:[C,I,k,A,F,T,N,B,D,L,P],encapsulation:2})};export{R as AdminSupplierFormPage};
