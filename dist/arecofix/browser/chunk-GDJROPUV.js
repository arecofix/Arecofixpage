import{a as F}from"./chunk-GV4BHUR2.js";import"./chunk-ZT4MGTUK.js";import{d as I}from"./chunk-VKJMBSB6.js";import"./chunk-7QORBSNT.js";import"./chunk-QGSRP5SS.js";import{k as D}from"./chunk-KW2FFXRI.js";import{$ as _,Aa as h,Bb as a,Cb as m,Da as o,Db as y,Pb as k,Qa as E,Sb as A,Ub as w,V as p,_ as u,ab as f,bb as g,eb as S,ec as T,fb as C,gb as x,hb as e,ib as i,jb as l,nb as P,rb as v,tb as s,zb as b}from"./chunk-VQO264VU.js";import"./chunk-VOSPIT4N.js";var N=n=>[n],$=(n,r)=>r.id;function O(n,r){n&1&&(e(0,"div",6),l(1,"div",10),e(2,"p"),a(3,"Cargando entradas..."),i()())}function R(n,r){if(n&1){let t=P();e(0,"div",7),l(1,"i",11),e(2,"p"),a(3),i(),e(4,"button",12),v("click",function(){u(t);let c=s();return _(c.loadPosts())}),a(5,"Reintentar"),i()()}if(n&2){let t=s();o(3),m(t.error)}}function z(n,r){n&1&&(e(0,"div",8),l(1,"i",13),e(2,"h3"),a(3,"No hay entradas"),i(),e(4,"p"),a(5,"Comienza creando tu primera entrada para el blog."),i(),e(6,"a",3),a(7,"Crear Entrada"),i()())}function B(n,r){if(n&1&&l(0,"img",16),n&2){let t=s().$implicit;x("src",t.image_url,h)("alt",t.title)}}function M(n,r){if(n&1){let t=P();e(0,"tr")(1,"td")(2,"div",15),f(3,B,1,2,"img",16),e(4,"span",17),a(5),i()()(),e(6,"td"),a(7),i(),e(8,"td")(9,"span",18),a(10),i()(),e(11,"td"),a(12),A(13,"date"),i(),e(14,"td",19)(15,"a",20),l(16,"i",21),i(),e(17,"button",22),v("click",function(){let c=u(t).$implicit,L=s(2);return _(L.deletePost(c.id))}),l(18,"i",23),i()()()}if(n&2){let t=r.$implicit;o(3),g(t.image_url?3:-1),o(2),m(t.title),o(2),m(t.slug),o(2),b("active",t.published)("inactive",!t.published),o(),y(" ",t.published?"Publicado":"Borrador"," "),o(2),m(w(13,10,t.created_at,"mediumDate")),o(3),x("routerLink",k(13,N,t.id))}}function j(n,r){if(n&1&&(e(0,"div",9)(1,"table",14)(2,"thead")(3,"tr")(4,"th"),a(5,"T\xEDtulo"),i(),e(6,"th"),a(7,"Slug"),i(),e(8,"th"),a(9,"Estado"),i(),e(10,"th"),a(11,"Fecha"),i(),e(12,"th"),a(13,"Acciones"),i()()(),e(14,"tbody"),S(15,M,19,15,"tr",null,$),i()()()),n&2){let t=s();o(15),C(t.posts)}}var V=class n{postService=p(F);cdr=p(T);posts=[];loading=!0;error=null;async ngOnInit(){this.loadPosts()}async loadPosts(){try{this.loading=!0,this.posts=await this.postService.getPosts()}catch(r){this.error=r.message||"Error al cargar entradas"}finally{this.loading=!1,this.cdr.markForCheck()}}async deletePost(r){if(confirm("\xBFEst\xE1s seguro de eliminar esta entrada?"))try{await this.postService.deletePost(r),await this.loadPosts()}catch(t){alert("Error al eliminar: "+t.message)}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=E({type:n,selectors:[["app-admin-posts-page"]],decls:15,vars:1,consts:[[1,"admin-header"],[1,"header-content"],[1,"header-actions"],["routerLink","new",1,"btn-primary"],[1,"fas","fa-plus"],[1,"admin-content"],[1,"loading-state"],[1,"error-state"],[1,"empty-state"],[1,"table-container"],[1,"spinner"],[1,"fas","fa-exclamation-circle"],[1,"btn-secondary",3,"click"],[1,"fas","fa-newspaper"],[1,"admin-table"],[1,"product-info"],[1,"product-thumb",3,"src","alt"],[1,"product-name"],[1,"status-badge"],[1,"actions-cell"],["title","Editar",1,"btn-icon",3,"routerLink"],[1,"fas","fa-edit"],["title","Eliminar",1,"btn-icon","delete",3,"click"],[1,"fas","fa-trash"]],template:function(t,d){t&1&&(e(0,"div",0)(1,"div",1)(2,"h1"),a(3,"Entradas"),i(),e(4,"p"),a(5,"Gestiona las entradas del blog"),i()(),e(6,"div",2)(7,"a",3),l(8,"i",4),a(9," Nueva Entrada "),i()()(),e(10,"div",5),f(11,O,4,0,"div",6)(12,R,6,1,"div",7)(13,z,8,0,"div",8)(14,j,17,0,"div",9),i()),t&2&&(o(11),g(d.loading?11:d.error?12:d.posts.length===0?13:14))},dependencies:[I,D],encapsulation:2,changeDetection:0})};export{V as AdminPostsPage};
