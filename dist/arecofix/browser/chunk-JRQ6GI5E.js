import{a as I}from"./chunk-XHIVR7GK.js";import{a as N}from"./chunk-6KLMDNRR.js";import{a as k}from"./chunk-F5WBDNED.js";import"./chunk-F4YL3ILH.js";import{B as T,l as F}from"./chunk-RVT6AV4G.js";import{$ as u,Ab as n,Bb as a,Cb as d,Ib as S,Mb as w,Ob as l,Pa as v,Ua as o,Vb as y,W as s,Xb as r,Yb as _,Zb as B,aa as x,fc as A,gb as h,jc as P,ma as g,p as m,tb as p,ub as f,xb as C,yb as E,zb as b}from"./chunk-G4WDTWI7.js";import"./chunk-7CGTOI24.js";var R=e=>["/admin/brands",e],j=(e,i)=>i.id;function V(e,i){e&1&&(n(0,"tr")(1,"td",8),r(2,"Cargando..."),a()())}function $(e,i){e&1&&(n(0,"tr")(1,"td",8),r(2,"No hay marcas registradas."),a()())}function z(e,i){if(e&1&&d(0,"img",10),e&2){let t=l().$implicit;b("alt",A(t.name))("src",t.logo_url,v)}}function O(e,i){e&1&&(n(0,"div",11),d(1,"i",17),a())}function U(e,i){if(e&1){let t=S();n(0,"tr",9)(1,"td"),p(2,z,1,3,"img",10)(3,O,2,0,"div",11),a(),n(4,"td")(5,"div",12),r(6),a(),n(7,"div",13),r(8),a()(),n(9,"td")(10,"button",14),w("click",function(){let L=u(t).$implicit,D=l(2);return x(D.toggleStatus(L))}),r(11),a()(),n(12,"td")(13,"a",15),d(14,"i",16),a()()()}if(e&2){let t=i.$implicit;o(2),f(t.logo_url?2:3),o(4),_(t.name),o(2),_(t.slug),o(2),y("badge-success",t.is_active)("badge-error",!t.is_active),o(),B(" ",t.is_active?"Activo":"Inactivo"," "),o(2),b("routerLink",P(9,R,t.id))}}function q(e,i){if(e&1&&C(0,U,15,11,"tr",9,j),e&2){let t=l();E(t.brands())}}var M=class e{brandRepo=s(N);logger=s(k);notification=s(I);brands=g([]);loading=g(!0);async ngOnInit(){await this.loadBrands()}async loadBrands(){this.loading.set(!0);try{let i=await m(this.brandRepo.getAll({column:"name",ascending:!0}));this.brands.set(i)}catch(i){this.logger.error("Failed to load brands",i),this.notification.showError("Error al cargar las marcas")}finally{this.loading.set(!1)}}async toggleStatus(i){try{await m(this.brandRepo.update(i.id,{is_active:!i.is_active})),await this.loadBrands(),this.notification.showSuccess("Estado actualizado correctamente")}catch(t){this.logger.error("Failed to toggle brand status",t),this.notification.showError("Error al actualizar el estado")}}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=h({type:e,selectors:[["app-admin-brands-page"]],decls:23,vars:1,consts:[[1,"flex","justify-between","items-center","mb-6"],[1,"text-2xl","font-bold","text-green-600"],["routerLink","/admin/brands/new",1,"btn","btn-primary"],[1,"fas","fa-plus","mr-2"],[1,"bg-base-100","rounded-lg","shadow","overflow-hidden","text-base-content"],[1,"overflow-x-auto"],[1,"table","w-full"],[1,"text-base-content","font-bold"],["colspan","4",1,"text-center","py-4","text-base-content/70"],[1,"hover:bg-base-200/50"],[1,"w-10","h-10","object-contain",3,"src","alt"],[1,"w-10","h-10","bg-base-200","rounded","flex","items-center","justify-center","text-base-content/50"],[1,"font-bold"],[1,"text-sm","opacity-50"],[1,"badge",3,"click"],[1,"btn","btn-sm","btn-ghost","hover:bg-base-300",3,"routerLink"],[1,"fas","fa-edit"],[1,"fas","fa-image"]],template:function(t,c){t&1&&(n(0,"div",0)(1,"h1",1),r(2,"Marcas"),a(),n(3,"a",2),d(4,"i",3),r(5," Nueva Marca "),a()(),n(6,"div",4)(7,"div",5)(8,"table",6)(9,"thead")(10,"tr",7)(11,"th"),r(12,"Logo"),a(),n(13,"th"),r(14,"Nombre"),a(),n(15,"th"),r(16,"Estado"),a(),n(17,"th"),r(18,"Acciones"),a()()(),n(19,"tbody"),p(20,V,3,0,"tr")(21,$,3,0,"tr")(22,q,2,0),a()()()()),t&2&&(o(20),f(c.loading()?20:c.brands().length===0?21:22))},dependencies:[F,T],encapsulation:2})};export{M as AdminBrandsPage};
