import{F as Ml,Ra as Li,S as Pl,V as El,Ya as Al,e as Sl,ia as _r,ja as Cl,sa as Ol,va as Tl}from"./chunk-BLXVCPJI.js";import{a as Ls,b as Ns}from"./chunk-VOSPIT4N.js";var b=typeof window<"u"?window:void 0,Ct=typeof globalThis<"u"?globalThis:b,Pc=Array.prototype,Dl=Pc.forEach,Il=Pc.indexOf,It=Ct?.navigator,E=Ct?.document,Et=Ct?.location,Ir=Ct?.fetch,Fr=Ct!=null&&Ct.XMLHttpRequest&&"withCredentials"in new Ct.XMLHttpRequest?Ct.XMLHttpRequest:void 0,Fl=Ct?.AbortController,Pt=It?.userAgent,F=b??{},ie={DEBUG:!1,LIB_VERSION:"1.297.2"};function Rl(i,t,e,s,n,r,o){try{var a=i[r](o),l=a.value}catch(c){return void e(c)}a.done?t(l):Promise.resolve(l).then(s,n)}function Ll(i){return function(){var t=this,e=arguments;return new Promise(function(s,n){var r=i.apply(t,e);function o(l){Rl(r,s,n,o,a,"next",l)}function a(l){Rl(r,s,n,o,a,"throw",l)}o(void 0)})}}function T(){return T=Object.assign?Object.assign.bind():function(i){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var s in e)({}).hasOwnProperty.call(e,s)&&(i[s]=e[s])}return i},T.apply(null,arguments)}function Ec(i,t){if(i==null)return{};var e={};for(var s in i)if({}.hasOwnProperty.call(i,s)){if(t.indexOf(s)!==-1)continue;e[s]=i[s]}return e}var yp=["amazonbot","amazonproductbot","app.hypefactors.com","applebot","archive.org_bot","awariobot","backlinksextendedbot","baiduspider","bingbot","bingpreview","chrome-lighthouse","dataforseobot","deepscan","duckduckbot","facebookexternal","facebookcatalog","http://yandex.com/bots","hubspot","ia_archiver","leikibot","linkedinbot","meta-externalagent","mj12bot","msnbot","nessus","petalbot","pinterest","prerender","rogerbot","screaming frog","sebot-wa","sitebulb","slackbot","slurp","trendictionbot","turnitin","twitterbot","vercel-screenshot","vercelbot","yahoo! slurp","yandexbot","zoombot","bot.htm","bot.php","(bot;","bot/","crawler","ahrefsbot","ahrefssiteaudit","semrushbot","siteauditbot","splitsignalbot","gptbot","oai-searchbot","chatgpt-user","perplexitybot","better uptime bot","sentryuptimebot","uptimerobot","headlesschrome","cypress","google-hoteladsverifier","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleother","google-cloudvertexbot","googleweblight","mediapartners-google","storebot-google","google-inspectiontool","bytespider"],Nl=function(i,t){if(t===void 0&&(t=[]),!i)return!1;var e=i.toLowerCase();return yp.concat(t).some(s=>{var n=s.toLowerCase();return e.indexOf(n)!==-1})},wp=["$snapshot","$pageview","$pageleave","$set","survey dismissed","survey sent","survey shown","$identify","$groupidentify","$create_alias","$$client_ingestion_warning","$web_experiment_applied","$feature_enrollment_update","$feature_flag_called"];function $(i,t){return i.indexOf(t)!==-1}var gn=function(i){return i.trim()},Rr=function(i){return i.replace(/^\$/,"")},kp=Array.isArray,Cc=Object.prototype,Oc=Cc.hasOwnProperty,mn=Cc.toString,K=kp||function(i){return mn.call(i)==="[object Array]"},ye=i=>typeof i=="function",_t=i=>i===Object(i)&&!K(i),ii=i=>{if(_t(i)){for(var t in i)if(Oc.call(i,t))return!1;return!0}return!1},P=i=>i===void 0,dt=i=>mn.call(i)=="[object String]",Lr=i=>dt(i)&&i.trim().length===0,oe=i=>i===null,tt=i=>P(i)||oe(i),Yt=i=>mn.call(i)=="[object Number]",we=i=>mn.call(i)==="[object Boolean]",Sp=i=>i instanceof FormData,Mp=i=>$(wp,i);function Nr(i){return i===null||typeof i!="object"}function Gs(i,t){return Object.prototype.toString.call(i)==="[object "+t+"]"}function Tc(i){return!P(Event)&&(function(t,e){try{return t instanceof e}catch{return!1}})(i,Event)}var Pp=[!0,"true",1,"1","yes"],vr=i=>$(Pp,i),Ep=[!1,"false",0,"0","no"];function Vt(i,t,e,s,n){return t>e&&(s.warn("min cannot be greater than max."),t=e),Yt(i)?i>e?(s.warn(" cannot be  greater than max: "+e+". Using max value instead."),e):i<t?(s.warn(" cannot be less than min: "+t+". Using min value instead."),t):i:(s.warn(" must be a number. using max or fallback. max: "+e+", fallback: "+n),Vt(n||e,t,e,s))}var $r=class{constructor(t){this.t={},this.i=t.i,this.o=Vt(t.bucketSize,0,100,t.h),this.m=Vt(t.refillRate,0,this.o,t.h),this.$=Vt(t.refillInterval,0,864e5,t.h)}S(t,e){var s=e-t.lastAccess,n=Math.floor(s/this.$);if(n>0){var r=n*this.m;t.tokens=Math.min(t.tokens+r,this.o),t.lastAccess=t.lastAccess+n*this.$}}consumeRateLimit(t){var e,s=Date.now(),n=String(t),r=this.t[n];return r?this.S(r,s):(r={tokens:this.o,lastAccess:s},this.t[n]=r),r.tokens===0||(r.tokens--,r.tokens===0&&((e=this.i)==null||e.call(this,t)),r.tokens===0)}stop(){this.t={}}},$s,$l,br,Cp=i=>i instanceof Error;function Op(i){var t=globalThis._posthogChunkIds;if(t){var e=Object.keys(t);return br&&e.length===$l||($l=e.length,br=e.reduce((s,n)=>{$s||($s={});var r=$s[n];if(r)s[r[0]]=r[1];else for(var o=i(n),a=o.length-1;a>=0;a--){var l=o[a],c=l?.filename,h=t[n];if(c&&h){s[c]=h,$s[n]=[c,h];break}}return s},{})),br}}var Br=class{constructor(t,e,s){s===void 0&&(s=[]),this.coercers=t,this.stackParser=e,this.modifiers=s}buildFromUnknown(t,e){e===void 0&&(e={});var s=e&&e.mechanism||{handled:!0,type:"generic"},n=this.buildCoercingContext(s,e,0).apply(t),r=this.buildParsingContext(),o=this.parseStacktrace(n,r);return{$exception_list:this.convertToExceptionList(o,s),$exception_level:"error"}}modifyFrames(t){var e=this;return Ll(function*(){for(var s of t)s.stacktrace&&s.stacktrace.frames&&K(s.stacktrace.frames)&&(s.stacktrace.frames=yield e.applyModifiers(s.stacktrace.frames));return t})()}coerceFallback(t){var e;return{type:"Error",value:"Unknown error",stack:(e=t.syntheticException)==null?void 0:e.stack,synthetic:!0}}parseStacktrace(t,e){var s,n;return t.cause!=null&&(s=this.parseStacktrace(t.cause,e)),t.stack!=""&&t.stack!=null&&(n=this.applyChunkIds(this.stackParser(t.stack,t.synthetic?1:0),e.chunkIdMap)),T({},t,{cause:s,stack:n})}applyChunkIds(t,e){return t.map(s=>(s.filename&&e&&(s.chunk_id=e[s.filename]),s))}applyCoercers(t,e){for(var s of this.coercers)if(s.match(t))return s.coerce(t,e);return this.coerceFallback(e)}applyModifiers(t){var e=this;return Ll(function*(){var s=t;for(var n of e.modifiers)s=yield n(s);return s})()}convertToExceptionList(t,e){var s,n,r,o={type:t.type,value:t.value,mechanism:{type:(s=e.type)!==null&&s!==void 0?s:"generic",handled:(n=e.handled)===null||n===void 0||n,synthetic:(r=t.synthetic)!==null&&r!==void 0&&r}};t.stack&&(o.stacktrace={type:"raw",frames:t.stack});var a=[o];return t.cause!=null&&a.push(...this.convertToExceptionList(t.cause,T({},e,{handled:!0}))),a}buildParsingContext(){return{chunkIdMap:Op(this.stackParser)}}buildCoercingContext(t,e,s){s===void 0&&(s=0);var n=(r,o)=>{if(o<=4){var a=this.buildCoercingContext(t,e,o);return this.applyCoercers(r,a)}};return T({},e,{syntheticException:s==0?e.syntheticException:void 0,mechanism:t,apply:r=>n(r,s),next:r=>n(r,s+1)})}},oi="?";function zr(i,t,e,s,n){var r={platform:i,filename:t,function:e==="<anonymous>"?oi:e,in_app:!0};return P(s)||(r.lineno=s),P(n)||(r.colno=n),r}var Ac=(i,t)=>{var e=i.indexOf("safari-extension")!==-1,s=i.indexOf("safari-web-extension")!==-1;return e||s?[i.indexOf("@")!==-1?i.split("@")[0]:oi,e?"safari-extension:"+t:"safari-web-extension:"+t]:[i,t]},Tp=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,Ap=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Dp=/\((\S*)(?::(\d+))(?::(\d+))\)/,Ip=(i,t)=>{var e=Tp.exec(i);if(e){var[,s,n,r]=e;return zr(t,s,oi,+n,+r)}var o=Ap.exec(i);if(o){if(o[2]&&o[2].indexOf("eval")===0){var a=Dp.exec(o[2]);a&&(o[2]=a[1],o[3]=a[2],o[4]=a[3])}var[l,c]=Ac(o[1]||oi,o[2]);return zr(t,c,l,o[3]?+o[3]:void 0,o[4]?+o[4]:void 0)}},Fp=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Rp=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Lp=(i,t)=>{var e=Fp.exec(i);if(e){if(e[3]&&e[3].indexOf(" > eval")>-1){var s=Rp.exec(e[3]);s&&(e[1]=e[1]||"eval",e[3]=s[1],e[4]=s[2],e[5]="")}var n=e[3],r=e[1]||oi;return[r,n]=Ac(r,n),zr(t,n,r,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}},Bl=/\(error: (.*)\)/,zl=50;function Np(i){for(var t=arguments.length,e=new Array(t>1?t-1:0),s=1;s<t;s++)e[s-1]=arguments[s];return function(n,r){r===void 0&&(r=0);for(var o=[],a=n.split(`
`),l=r;l<a.length;l++){var c=a[l];if(!(c.length>1024)){var h=Bl.test(c)?c.replace(Bl,"$1"):c;if(!h.match(/\S*Error: /)){for(var u of e){var d=u(h,i);if(d){o.push(d);break}}if(o.length>=zl)break}}}return(function(f){if(!f.length)return[];var p=Array.from(f);return p.reverse(),p.slice(0,zl).map(g=>{return T({},g,{filename:g.filename||(m=p,m[m.length-1]||{}).filename,function:g.function||oi});var m})})(o)}}var jr=class{match(t){return this.isDOMException(t)||this.isDOMError(t)}coerce(t,e){var s=dt(t.stack);return{type:this.getType(t),value:this.getValue(t),stack:s?t.stack:void 0,cause:t.cause?e.next(t.cause):void 0,synthetic:!1}}getType(t){return this.isDOMError(t)?"DOMError":"DOMException"}getValue(t){var e=t.name||(this.isDOMError(t)?"DOMError":"DOMException");return t.message?e+": "+t.message:e}isDOMException(t){return Gs(t,"DOMException")}isDOMError(t){return Gs(t,"DOMError")}},Hr=class{match(t){return(e=>e instanceof Error)(t)}coerce(t,e){return{type:this.getType(t),value:this.getMessage(t,e),stack:this.getStack(t),cause:t.cause?e.next(t.cause):void 0,synthetic:!1}}getType(t){return t.name||t.constructor.name}getMessage(t,e){var s=t.message;return s.error&&typeof s.error.message=="string"?String(s.error.message):String(s)}getStack(t){return t.stacktrace||t.stack||void 0}},Wr=class{constructor(){}match(t){return Gs(t,"ErrorEvent")&&t.error!=null}coerce(t,e){var s,n=e.apply(t.error);return n||{type:"ErrorEvent",value:t.message,stack:(s=e.syntheticException)==null?void 0:s.stack,synthetic:!0}}},$p=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i,Vr=class{match(t){return typeof t=="string"}coerce(t,e){var s,[n,r]=this.getInfos(t);return{type:n??"Error",value:r??t,stack:(s=e.syntheticException)==null?void 0:s.stack,synthetic:!0}}getInfos(t){var e="Error",s=t,n=t.match($p);return n&&(e=n[1],s=n[2]),[e,s]}},Bp=["fatal","error","warning","log","info","debug"];function Dc(i,t){t===void 0&&(t=40);var e=Object.keys(i);if(e.sort(),!e.length)return"[object has no keys]";for(var s=e.length;s>0;s--){var n=e.slice(0,s).join(", ");if(!(n.length>t))return s===e.length||n.length<=t?n:n.slice(0,t)+"..."}return""}var Ur=class{match(t){return typeof t=="object"&&t!==null}coerce(t,e){var s,n=this.getErrorPropertyFromObject(t);return n?e.apply(n):{type:this.getType(t),value:this.getValue(t),stack:(s=e.syntheticException)==null?void 0:s.stack,level:this.isSeverityLevel(t.level)?t.level:"error",synthetic:!0}}getType(t){return Tc(t)?t.constructor.name:"Error"}getValue(t){if("name"in t&&typeof t.name=="string"){var e="'"+t.name+"' captured as exception";return"message"in t&&typeof t.message=="string"&&(e+=" with message: '"+t.message+"'"),e}if("message"in t&&typeof t.message=="string")return t.message;var s=this.getObjectClassName(t);return(s&&s!=="Object"?"'"+s+"'":"Object")+" captured as exception with keys: "+Dc(t)}isSeverityLevel(t){return dt(t)&&!Lr(t)&&Bp.indexOf(t)>=0}getErrorPropertyFromObject(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e)){var s=t[e];if(Cp(s))return s}}getObjectClassName(t){try{var e=Object.getPrototypeOf(t);return e?e.constructor.name:void 0}catch{return}}},qr=class{match(t){return Tc(t)}coerce(t,e){var s,n=t.constructor.name;return{type:n,value:n+" captured as exception with keys: "+Dc(t),stack:(s=e.syntheticException)==null?void 0:s.stack,synthetic:!0}}},Yr=class{match(t){return Nr(t)}coerce(t,e){var s;return{type:"Error",value:"Primitive value captured as exception: "+String(t),stack:(s=e.syntheticException)==null?void 0:s.stack,synthetic:!0}}},Gr=class{match(t){return Gs(t,"PromiseRejectionEvent")}coerce(t,e){var s,n=this.getUnhandledRejectionReason(t);return Nr(n)?{type:"UnhandledRejection",value:"Non-Error promise rejection captured with value: "+String(n),stack:(s=e.syntheticException)==null?void 0:s.stack,synthetic:!0}:e.apply(n)}getUnhandledRejectionReason(t){if(Nr(t))return t;try{if("reason"in t)return t.reason;if("detail"in t&&"reason"in t.detail)return t.detail.reason}catch{}return t}},Ic=function(i,t){var{debugEnabled:e}=t===void 0?{}:t,s={k:function(n){if(b&&(ie.DEBUG||F.POSTHOG_DEBUG||e)&&!P(b.console)&&b.console){for(var r=("__rrweb_original__"in b.console[n])?b.console[n].__rrweb_original__:b.console[n],o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];r(i,...a)}},info:function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];s.k("log",...r)},warn:function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];s.k("warn",...r)},error:function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];s.k("error",...r)},critical:function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];console.error(i,...r)},uninitializedWarning:n=>{s.error("You must initialize PostHog before calling "+n)},createLogger:(n,r)=>Ic(i+" "+n,r)};return s},C=Ic("[PostHog.js]"),ft=C.createLogger,zp=ft("[ExternalScriptsLoader]"),jl=(i,t,e)=>{if(i.config.disable_external_dependency_loading)return zp.warn(t+" was requested but loading of external scripts is disabled."),e("Loading of external scripts is disabled");var s=E?.querySelectorAll("script");if(s){for(var n,r=function(){if(s[o].src===t){var l=s[o];return l.__posthog_loading_callback_fired?{v:e()}:(l.addEventListener("load",c=>{l.__posthog_loading_callback_fired=!0,e(void 0,c)}),l.onerror=c=>e(c),{v:void 0})}},o=0;o<s.length;o++)if(n=r())return n.v}var a=()=>{if(!E)return e("document not found");var l=E.createElement("script");if(l.type="text/javascript",l.crossOrigin="anonymous",l.src=t,l.onload=u=>{l.__posthog_loading_callback_fired=!0,e(void 0,u)},l.onerror=u=>e(u),i.config.prepare_external_dependency_script&&(l=i.config.prepare_external_dependency_script(l)),!l)return e("prepare_external_dependency_script returned null");var c,h=E.querySelectorAll("body > script");h.length>0?(c=h[0].parentNode)==null||c.insertBefore(l,h[0]):E.body.appendChild(l)};E!=null&&E.body?a():E?.addEventListener("DOMContentLoaded",a)};F.__PosthogExtensions__=F.__PosthogExtensions__||{},F.__PosthogExtensions__.loadExternalDependency=(i,t,e)=>{var s="/static/"+t+".js?v="+i.version;if(t==="remote-config"&&(s="/array/"+i.config.token+"/config.js"),t==="toolbar"){var n=3e5;s=s+"&t="+Math.floor(Date.now()/n)*n}var r=i.requestRouter.endpointFor("assets",s);jl(i,r,e)},F.__PosthogExtensions__.loadSiteApp=(i,t,e)=>{var s=i.requestRouter.endpointFor("api",t);jl(i,s,e)};var Xs={};function ke(i,t,e){if(K(i)){if(Dl&&i.forEach===Dl)i.forEach(t,e);else if("length"in i&&i.length===+i.length){for(var s=0,n=i.length;s<n;s++)if(s in i&&t.call(e,i[s],s)===Xs)return}}}function X(i,t,e){if(!tt(i)){if(K(i))return ke(i,t,e);if(Sp(i)){for(var s of i.entries())if(t.call(e,s[1],s[0])===Xs)return}else for(var n in i)if(Oc.call(i,n)&&t.call(e,i[n],n)===Xs)return}}var lt=function(i){for(var t=arguments.length,e=new Array(t>1?t-1:0),s=1;s<t;s++)e[s-1]=arguments[s];return ke(e,function(n){for(var r in n)n[r]!==void 0&&(i[r]=n[r])}),i},hi=function(i){for(var t=arguments.length,e=new Array(t>1?t-1:0),s=1;s<t;s++)e[s-1]=arguments[s];return ke(e,function(n){ke(n,function(r){i.push(r)})}),i};function Us(i){for(var t=Object.keys(i),e=t.length,s=new Array(e);e--;)s[e]=[t[e],i[t[e]]];return s}var Hl=function(i){try{return i()}catch{return}},jp=function(i){return function(){try{for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];return i.apply(this,e)}catch(n){C.critical("Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A."),C.critical(n)}}},Vo=function(i){var t={};return X(i,function(e,s){(dt(e)&&e.length>0||Yt(e))&&(t[s]=e)}),t};function Hp(i,t){return e=i,s=r=>dt(r)&&!oe(t)?r.slice(0,t):r,n=new Set,(function r(o,a){return o!==Object(o)?s?s(o,a):o:n.has(o)?void 0:(n.add(o),K(o)?(l=[],ke(o,c=>{l.push(r(c))})):(l={},X(o,(c,h)=>{n.has(c)||(l[h]=r(c,h))})),l);var l})(e);var e,s,n}var Wp=["herokuapp.com","vercel.app","netlify.app"];function Vp(i){var t=i?.hostname;if(!dt(t))return!1;var e=t.split(".").slice(-2).join(".");for(var s of Wp)if(e===s)return!1;return!0}function Fc(i,t){for(var e=0;e<i.length;e++)if(t(i[e]))return i[e]}function ct(i,t,e,s){var{capture:n=!1,passive:r=!0}=s??{};i?.addEventListener(t,e,{capture:n,passive:r})}var Rc="$people_distinct_id",Ui="__alias",qi="__timers",Wl="$autocapture_disabled_server_side",Xr="$heatmaps_enabled_server_side",Vl="$exception_capture_enabled_server_side",Kr="$error_tracking_suppression_rules",Ul="$error_tracking_capture_extension_exceptions",ql="$web_vitals_enabled_server_side",Lc="$dead_clicks_enabled_server_side",Yl="$web_vitals_allowed_metrics",xr="$session_recording_remote_config",Ks="$sesid",Nc="$session_is_sampled",si="$enabled_feature_flags",Yi="$early_access_features",Jr="$feature_flag_details",Gi="$stored_person_properties",We="$stored_group_properties",Zr="$surveys",Bs="$surveys_activated",Js="$flag_call_reported",se="$user_state",Qr="$client_session_props",to="$capture_rate_limit",eo="$initial_campaign_params",io="$initial_referrer_info",Zs="$initial_person_info",Qs="$epp",$c="__POSTHOG_TOOLBAR__",Ni="$posthog_cookieless",Up=[Rc,Ui,"__cmpns",qi,"$session_recording_enabled_server_side",Xr,Ks,si,Kr,se,Yi,Jr,We,Gi,Zr,Js,Qr,to,eo,io,Qs,Zs];function Gl(i){return i instanceof Element&&(i.id===$c||!(i.closest==null||!i.closest(".toolbar-global-fade-container")))}function _n(i){return!!i&&i.nodeType===1}function Se(i,t){return!!i&&!!i.tagName&&i.tagName.toLowerCase()===t.toLowerCase()}function Bc(i){return!!i&&i.nodeType===3}function zc(i){return!!i&&i.nodeType===11}function Uo(i){return i?gn(i).split(/\s+/):[]}function Xl(i){var t=b?.location.href;return!!(t&&i&&i.some(e=>t.match(e)))}function tn(i){var t="";switch(typeof i.className){case"string":t=i.className;break;case"object":t=(i.className&&"baseVal"in i.className?i.className.baseVal:null)||i.getAttribute("class")||"";break;default:t=""}return Uo(t)}function jc(i){return tt(i)?null:gn(i).split(/(\s+)/).filter(t=>es(t)).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)}function as(i){var t="";return so(i)&&!qc(i)&&i.childNodes&&i.childNodes.length&&X(i.childNodes,function(e){var s;Bc(e)&&e.textContent&&(t+=(s=jc(e.textContent))!==null&&s!==void 0?s:"")}),gn(t)}function Hc(i){return P(i.target)?i.srcElement||null:(t=i.target)!=null&&t.shadowRoot?i.composedPath()[0]||null:i.target||null;var t}var qo=["a","button","form","input","select","textarea","label"];function Wc(i,t){if(P(t))return!0;var e,s=function(r){if(t.some(o=>r.matches(o)))return{v:!0}};for(var n of i)if(e=s(n))return e.v;return!1}function Vc(i){var t=i.parentNode;return!(!t||!_n(t))&&t}var qp=["next","previous","prev",">","<"],Kl=10,Jl=[".ph-no-rageclick",".ph-no-capture"];function Yp(i,t){if(!b||Yo(i))return!1;var e,s,n;if(we(t)?(e=!!t&&Jl,s=void 0):(e=(n=t?.css_selector_ignorelist)!==null&&n!==void 0?n:Jl,s=t?.content_ignorelist),e===!1)return!1;var{targetElementList:r}=Uc(i,!1);return!(function(o,a){if(o===!1||P(o))return!1;var l;if(o===!0)l=qp;else{if(!K(o))return!1;if(o.length>Kl)return C.error("[PostHog] content_ignorelist array cannot exceed "+Kl+" items. Use css_selector_ignorelist for more complex matching."),!1;l=o.map(c=>c.toLowerCase())}return a.some(c=>{var{safeText:h,ariaLabel:u}=c;return l.some(d=>h.includes(d)||u.includes(d))})})(s,r.map(o=>{var a;return{safeText:as(o).toLowerCase(),ariaLabel:((a=o.getAttribute("aria-label"))==null?void 0:a.toLowerCase().trim())||""}}))&&!Wc(r,e)}var Yo=i=>!i||Se(i,"html")||!_n(i),Uc=(i,t)=>{if(!b||Yo(i))return{parentIsUsefulElement:!1,targetElementList:[]};for(var e=!1,s=[i],n=i;n.parentNode&&!Se(n,"body");)if(zc(n.parentNode))s.push(n.parentNode.host),n=n.parentNode.host;else{var r=Vc(n);if(!r)break;if(t||qo.indexOf(r.tagName.toLowerCase())>-1)e=!0;else{var o=b.getComputedStyle(r);o&&o.getPropertyValue("cursor")==="pointer"&&(e=!0)}s.push(r),n=r}return{parentIsUsefulElement:e,targetElementList:s}};function Gp(i,t,e,s,n){var r,o,a,l;if(e===void 0&&(e=void 0),!b||Yo(i)||(r=e)!=null&&r.url_allowlist&&!Xl(e.url_allowlist)||(o=e)!=null&&o.url_ignorelist&&Xl(e.url_ignorelist))return!1;if((a=e)!=null&&a.dom_event_allowlist){var c=e.dom_event_allowlist;if(c&&!c.some(p=>t.type===p))return!1}var{parentIsUsefulElement:h,targetElementList:u}=Uc(i,s);if(!(function(p,g){var m=g?.element_allowlist;if(P(m))return!0;var _,v=function(w){if(m.some(x=>w.tagName.toLowerCase()===x))return{v:!0}};for(var y of p)if(_=v(y))return _.v;return!1})(u,e)||!Wc(u,(l=e)==null?void 0:l.css_selector_allowlist))return!1;var d=b.getComputedStyle(i);if(d&&d.getPropertyValue("cursor")==="pointer"&&t.type==="click")return!0;var f=i.tagName.toLowerCase();switch(f){case"html":return!1;case"form":return(n||["submit"]).indexOf(t.type)>=0;case"input":case"select":case"textarea":return(n||["change","click"]).indexOf(t.type)>=0;default:return h?(n||["click"]).indexOf(t.type)>=0:(n||["click"]).indexOf(t.type)>=0&&(qo.indexOf(f)>-1||i.getAttribute("contenteditable")==="true")}}function so(i){for(var t=i;t.parentNode&&!Se(t,"body");t=t.parentNode){var e=tn(t);if($(e,"ph-sensitive")||$(e,"ph-no-capture"))return!1}if($(tn(i),"ph-include"))return!0;var s=i.type||"";if(dt(s))switch(s.toLowerCase()){case"hidden":case"password":return!1}var n=i.name||i.id||"";return!(dt(n)&&/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(n.replace(/[^a-zA-Z0-9]/g,"")))}function qc(i){return!!(Se(i,"input")&&!["button","checkbox","submit","reset"].includes(i.type)||Se(i,"select")||Se(i,"textarea")||i.getAttribute("contenteditable")==="true")}var Yc="(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11})",Xp=new RegExp("^(?:"+Yc+")$"),Kp=new RegExp(Yc),Gc="\\d{3}-?\\d{2}-?\\d{4}",Jp=new RegExp("^("+Gc+")$"),Zp=new RegExp("("+Gc+")");function es(i,t){return t===void 0&&(t=!0),!(tt(i)||dt(i)&&(i=gn(i),(t?Xp:Kp).test((i||"").replace(/[- ]/g,""))||(t?Jp:Zp).test(i)))}function Xc(i){var t=as(i);return es(t=(t+" "+Kc(i)).trim())?t:""}function Kc(i){var t="";return i&&i.childNodes&&i.childNodes.length&&X(i.childNodes,function(e){var s;if(e&&((s=e.tagName)==null?void 0:s.toLowerCase())==="span")try{var n=as(e);t=(t+" "+n).trim(),e.childNodes&&e.childNodes.length&&(t=(t+" "+Kc(e)).trim())}catch(r){C.error("[AutoCapture]",r)}}),t}function Qp(i){return(function(t){var e=t.map(s=>{var n,r,o="";if(s.tag_name&&(o+=s.tag_name),s.attr_class)for(var a of(s.attr_class.sort(),s.attr_class))o+="."+a.replace(/"/g,"");var l=T({},s.text?{text:s.text}:{},{"nth-child":(n=s.nth_child)!==null&&n!==void 0?n:0,"nth-of-type":(r=s.nth_of_type)!==null&&r!==void 0?r:0},s.href?{href:s.href}:{},s.attr_id?{attr_id:s.attr_id}:{},s.attributes),c={};return Us(l).sort((h,u)=>{var[d]=h,[f]=u;return d.localeCompare(f)}).forEach(h=>{var[u,d]=h;return c[Zl(u.toString())]=Zl(d.toString())}),o+=":",o+=Us(c).map(h=>{var[u,d]=h;return u+'="'+d+'"'}).join("")});return e.join(";")})((function(t){return t.map(e=>{var s,n,r={text:(s=e.$el_text)==null?void 0:s.slice(0,400),tag_name:e.tag_name,href:(n=e.attr__href)==null?void 0:n.slice(0,2048),attr_class:tg(e),attr_id:e.attr__id,nth_child:e.nth_child,nth_of_type:e.nth_of_type,attributes:{}};return Us(e).filter(o=>{var[a]=o;return a.indexOf("attr__")===0}).forEach(o=>{var[a,l]=o;return r.attributes[a]=l}),r})})(i))}function Zl(i){return i.replace(/"|\\"/g,'\\"')}function tg(i){var t=i.attr__class;return t?K(t)?t:Uo(t):void 0}var en=class{constructor(t){this.disabled=t===!1;var e=_t(t)?t:{};this.thresholdPx=e.threshold_px||30,this.timeoutMs=e.timeout_ms||1e3,this.clickCount=e.click_count||3,this.clicks=[]}isRageClick(t,e,s){if(this.disabled)return!1;var n=this.clicks[this.clicks.length-1];if(n&&Math.abs(t-n.x)+Math.abs(e-n.y)<this.thresholdPx&&s-n.timestamp<this.timeoutMs){if(this.clicks.push({x:t,y:e,timestamp:s}),this.clicks.length===this.clickCount)return!0}else this.clicks=[{x:t,y:e,timestamp:s}];return!1}},yr="$copy_autocapture",re=(function(i){return i.GZipJS="gzip-js",i.Base64="base64",i})({});var sn=i=>{var t=E?.createElement("a");return P(t)?null:(t.href=i,t)},eg=function(i,t){var e,s;t===void 0&&(t="&");var n=[];return X(i,function(r,o){P(r)||P(o)||o==="undefined"||(e=encodeURIComponent((a=>a instanceof File)(r)?r.name:r.toString()),s=encodeURIComponent(o),n[n.length]=s+"="+e)}),n.join(t)},nn=function(i,t){for(var e,s=((i.split("#")[0]||"").split(/\?(.*)/)[1]||"").replace(/^\?+/g,"").split("&"),n=0;n<s.length;n++){var r=s[n].split("=");if(r[0]===t){e=r;break}}if(!K(e)||e.length<2)return"";var o=e[1];try{o=decodeURIComponent(o)}catch{C.error("Skipping decoding for malformed query param: "+o)}return o.replace(/\+/g," ")},ls=function(i,t,e){if(!i||!t||!t.length)return i;for(var s=i.split("#"),n=s[0]||"",r=s[1],o=n.split("?"),a=o[1],l=o[0],c=(a||"").split("&"),h=[],u=0;u<c.length;u++){var d=c[u].split("=");K(d)&&(t.includes(d[0])?h.push(d[0]+"="+e):h.push(c[u]))}var f=l;return a!=null&&(f+="?"+h.join("&")),r!=null&&(f+="#"+r),f},rn=function(i,t){var e=i.match(new RegExp(t+"=([^&]*)"));return e?e[1]:null},Ql=ft("[AutoCapture]");function wr(i,t){return t.length>i?t.slice(0,i)+"...":t}function ig(i){if(i.previousElementSibling)return i.previousElementSibling;var t=i;do t=t.previousSibling;while(t&&!_n(t));return t}function sg(i,t,e,s){var n=i.tagName.toLowerCase(),r={tag_name:n};qo.indexOf(n)>-1&&!e&&(n.toLowerCase()==="a"||n.toLowerCase()==="button"?r.$el_text=wr(1024,Xc(i)):r.$el_text=wr(1024,as(i)));var o=tn(i);o.length>0&&(r.classes=o.filter(function(h){return h!==""})),X(i.attributes,function(h){var u;if((!qc(i)||["name","id","class","aria-label"].indexOf(h.name)!==-1)&&(s==null||!s.includes(h.name))&&!t&&es(h.value)&&(u=h.name,!dt(u)||u.substring(0,10)!=="_ngcontent"&&u.substring(0,7)!=="_nghost")){var d=h.value;h.name==="class"&&(d=Uo(d).join(" ")),r["attr__"+h.name]=wr(1024,d)}});for(var a=1,l=1,c=i;c=ig(c);)a++,c.tagName===i.tagName&&l++;return r.nth_child=a,r.nth_of_type=l,r}function ng(i,t){for(var e,s,{e:n,maskAllElementAttributes:r,maskAllText:o,elementAttributeIgnoreList:a,elementsChainAsString:l}=t,c=[i],h=i;h.parentNode&&!Se(h,"body");)zc(h.parentNode)?(c.push(h.parentNode.host),h=h.parentNode.host):(c.push(h.parentNode),h=h.parentNode);var u,d=[],f={},p=!1,g=!1;if(X(c,w=>{var x=so(w);w.tagName.toLowerCase()==="a"&&(p=w.getAttribute("href"),p=x&&p&&es(p)&&p),$(tn(w),"ph-no-capture")&&(g=!0),d.push(sg(w,r,o,a));var S=(function(M){if(!so(M))return{};var k={};return X(M.attributes,function(O){if(O.name&&O.name.indexOf("data-ph-capture-attribute")===0){var A=O.name.replace("data-ph-capture-attribute-",""),D=O.value;A&&D&&es(D)&&(k[A]=D)}}),k})(w);lt(f,S)}),g)return{props:{},explicitNoCapture:g};if(o||(i.tagName.toLowerCase()==="a"||i.tagName.toLowerCase()==="button"?d[0].$el_text=Xc(i):d[0].$el_text=as(i)),p){var m,_;d[0].attr__href=p;var v=(m=sn(p))==null?void 0:m.host,y=b==null||(_=b.location)==null?void 0:_.host;v&&y&&v!==y&&(u=p)}return{props:lt({$event_type:n.type,$ce_version:1},l?{}:{$elements:d},{$elements_chain:Qp(d)},(e=d[0])!=null&&e.$el_text?{$el_text:(s=d[0])==null?void 0:s.$el_text}:{},u&&n.type==="click"?{$external_click_url:u}:{},f)}}var no=class{constructor(t){this.P=!1,this.T=null,this.I=!1,this.instance=t,this.rageclicks=new en(t.config.rageclick),this.R=null}get F(){var t,e,s=_t(this.instance.config.autocapture)?this.instance.config.autocapture:{};return s.url_allowlist=(t=s.url_allowlist)==null?void 0:t.map(n=>new RegExp(n)),s.url_ignorelist=(e=s.url_ignorelist)==null?void 0:e.map(n=>new RegExp(n)),s}C(){if(this.isBrowserSupported()){if(b&&E){var t=s=>{s=s||b?.event;try{this.O(s)}catch(n){Ql.error("Failed to capture event",n)}};if(ct(E,"submit",t,{capture:!0}),ct(E,"change",t,{capture:!0}),ct(E,"click",t,{capture:!0}),this.F.capture_copied_text){var e=s=>{s=s||b?.event,this.O(s,yr)};ct(E,"copy",e,{capture:!0}),ct(E,"cut",e,{capture:!0})}}}else Ql.info("Disabling Automatic Event Collection because this browser is not supported")}startIfEnabled(){this.isEnabled&&!this.P&&(this.C(),this.P=!0)}onRemoteConfig(t){t.elementsChainAsString&&(this.I=t.elementsChainAsString),this.instance.persistence&&this.instance.persistence.register({[Wl]:!!t.autocapture_opt_out}),this.T=!!t.autocapture_opt_out,this.startIfEnabled()}setElementSelectors(t){this.R=t}getElementSelectors(t){var e,s=[];return(e=this.R)==null||e.forEach(n=>{var r=E?.querySelectorAll(n);r?.forEach(o=>{t===o&&s.push(n)})}),s}get isEnabled(){var t,e,s=(t=this.instance.persistence)==null?void 0:t.props[Wl],n=this.T;if(oe(n)&&!we(s)&&!this.instance.M())return!1;var r=(e=this.T)!==null&&e!==void 0?e:!!s;return!!this.instance.config.autocapture&&!r}O(t,e){if(e===void 0&&(e="$autocapture"),this.isEnabled){var s,n=Hc(t);Bc(n)&&(n=n.parentNode||null),e==="$autocapture"&&t.type==="click"&&t instanceof MouseEvent&&this.instance.config.rageclick&&(s=this.rageclicks)!=null&&s.isRageClick(t.clientX,t.clientY,t.timeStamp||new Date().getTime())&&Yp(n,this.instance.config.rageclick)&&this.O(t,"$rageclick");var r=e===yr;if(n&&Gp(n,t,this.F,r,r?["copy","cut"]:void 0)){var{props:o,explicitNoCapture:a}=ng(n,{e:t,maskAllElementAttributes:this.instance.config.mask_all_element_attributes,maskAllText:this.instance.config.mask_all_text,elementAttributeIgnoreList:this.F.element_attribute_ignorelist,elementsChainAsString:this.I});if(a)return!1;var l=this.getElementSelectors(n);if(l&&l.length>0&&(o.$element_selectors=l),e===yr){var c,h=jc(b==null||(c=b.getSelection())==null?void 0:c.toString()),u=t.type||"clipboard";if(!h)return!1;o.$selected_content=h,o.$copy_type=u}return this.instance.capture(e,o),!0}}}isBrowserSupported(){return ye(E?.querySelectorAll)}};Math.trunc||(Math.trunc=function(i){return i<0?Math.ceil(i):Math.floor(i)}),Number.isInteger||(Number.isInteger=function(i){return Yt(i)&&isFinite(i)&&Math.floor(i)===i});var tc="0123456789abcdef",ro=class i{constructor(t){if(this.bytes=t,t.length!==16)throw new TypeError("not 128-bit length")}static fromFieldsV7(t,e,s,n){if(!Number.isInteger(t)||!Number.isInteger(e)||!Number.isInteger(s)||!Number.isInteger(n)||t<0||e<0||s<0||n<0||t>0xffffffffffff||e>4095||s>1073741823||n>4294967295)throw new RangeError("invalid field value");var r=new Uint8Array(16);return r[0]=t/Math.pow(2,40),r[1]=t/Math.pow(2,32),r[2]=t/Math.pow(2,24),r[3]=t/Math.pow(2,16),r[4]=t/Math.pow(2,8),r[5]=t,r[6]=112|e>>>8,r[7]=e,r[8]=128|s>>>24,r[9]=s>>>16,r[10]=s>>>8,r[11]=s,r[12]=n>>>24,r[13]=n>>>16,r[14]=n>>>8,r[15]=n,new i(r)}toString(){for(var t="",e=0;e<this.bytes.length;e++)t=t+tc.charAt(this.bytes[e]>>>4)+tc.charAt(15&this.bytes[e]),e!==3&&e!==5&&e!==7&&e!==9||(t+="-");if(t.length!==36)throw new Error("Invalid UUIDv7 was generated");return t}clone(){return new i(this.bytes.slice(0))}equals(t){return this.compareTo(t)===0}compareTo(t){for(var e=0;e<16;e++){var s=this.bytes[e]-t.bytes[e];if(s!==0)return Math.sign(s)}return 0}},oo=class{constructor(){this.A=0,this.D=0,this.j=new ao}generate(){var t=this.generateOrAbort();if(P(t)){this.A=0;var e=this.generateOrAbort();if(P(e))throw new Error("Could not generate UUID after timestamp reset");return e}return t}generateOrAbort(){var t=Date.now();if(t>this.A)this.A=t,this.L();else{if(!(t+1e4>this.A))return;this.D++,this.D>4398046511103&&(this.A++,this.L())}return ro.fromFieldsV7(this.A,Math.trunc(this.D/Math.pow(2,30)),this.D&Math.pow(2,30)-1,this.j.nextUint32())}L(){this.D=1024*this.j.nextUint32()+(1023&this.j.nextUint32())}},ec,Jc=i=>{if(typeof UUIDV7_DENY_WEAK_RNG<"u"&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");for(var t=0;t<i.length;t++)i[t]=65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random());return i};b&&!P(b.crypto)&&crypto.getRandomValues&&(Jc=i=>crypto.getRandomValues(i));var ao=class{constructor(){this.N=new Uint32Array(8),this.U=1/0}nextUint32(){return this.U>=this.N.length&&(Jc(this.N),this.U=0),this.N[this.U++]}},xe=()=>rg().toString(),rg=()=>(ec||(ec=new oo)).generate(),$i="",og=/[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i;function ag(i,t){if(t){var e=(function(n,r){if(r===void 0&&(r=E),$i)return $i;if(!r||["localhost","127.0.0.1"].includes(n))return"";for(var o=n.split("."),a=Math.min(o.length,8),l="dmn_chk_"+xe();!$i&&a--;){var c=o.slice(a).join("."),h=l+"=1;domain=."+c+";path=/";r.cookie=h+";max-age=3",r.cookie.includes(l)&&(r.cookie=h+";max-age=0",$i=c)}return $i})(i);if(!e){var s=(n=>{var r=n.match(og);return r?r[0]:""})(i);s!==e&&C.info("Warning: cookie subdomain discovery mismatch",s,e),e=s}return e?"; domain=."+e:""}return""}var qt={H:()=>!!E,B:function(i){C.error("cookieStore error: "+i)},q:function(i){if(E){try{for(var t=i+"=",e=E.cookie.split(";").filter(r=>r.length),s=0;s<e.length;s++){for(var n=e[s];n.charAt(0)==" ";)n=n.substring(1,n.length);if(n.indexOf(t)===0)return decodeURIComponent(n.substring(t.length,n.length))}}catch{}return null}},W:function(i){var t;try{t=JSON.parse(qt.q(i))||{}}catch{}return t},G:function(i,t,e,s,n){if(E)try{var r="",o="",a=ag(E.location.hostname,s);if(e){var l=new Date;l.setTime(l.getTime()+24*e*60*60*1e3),r="; expires="+l.toUTCString()}n&&(o="; secure");var c=i+"="+encodeURIComponent(JSON.stringify(t))+r+"; SameSite=Lax; path=/"+a+o;return c.length>3686.4&&C.warn("cookieStore warning: large cookie, len="+c.length),E.cookie=c,c}catch{return}},V:function(i,t){if(E!=null&&E.cookie)try{qt.G(i,"",-1,t)}catch{return}}},kr=null,st={H:function(){if(!oe(kr))return kr;var i=!0;if(P(b))i=!1;else try{var t="__mplssupport__";st.G(t,"xyz"),st.q(t)!=='"xyz"'&&(i=!1),st.V(t)}catch{i=!1}return i||C.error("localStorage unsupported; falling back to cookie store"),kr=i,i},B:function(i){C.error("localStorage error: "+i)},q:function(i){try{return b?.localStorage.getItem(i)}catch(t){st.B(t)}return null},W:function(i){try{return JSON.parse(st.q(i))||{}}catch{}return null},G:function(i,t){try{b?.localStorage.setItem(i,JSON.stringify(t))}catch(e){st.B(e)}},V:function(i){try{b?.localStorage.removeItem(i)}catch(t){st.B(t)}}},lg=["distinct_id",Ks,Nc,Qs,Zs],zs=T({},st,{W:function(i){try{var t={};try{t=qt.W(i)||{}}catch{}var e=lt(t,JSON.parse(st.q(i)||"{}"));return st.G(i,e),e}catch{}return null},G:function(i,t,e,s,n,r){try{st.G(i,t,void 0,void 0,r);var o={};lg.forEach(a=>{t[a]&&(o[a]=t[a])}),Object.keys(o).length&&qt.G(i,o,e,s,n,r)}catch(a){st.B(a)}},V:function(i,t){try{b?.localStorage.removeItem(i),qt.V(i,t)}catch(e){st.B(e)}}}),js={},cg={H:function(){return!0},B:function(i){C.error("memoryStorage error: "+i)},q:function(i){return js[i]||null},W:function(i){return js[i]||null},G:function(i,t){js[i]=t},V:function(i){delete js[i]}},je=null,mt={H:function(){if(!oe(je))return je;if(je=!0,P(b))je=!1;else try{var i="__support__";mt.G(i,"xyz"),mt.q(i)!=='"xyz"'&&(je=!1),mt.V(i)}catch{je=!1}return je},B:function(i){C.error("sessionStorage error: ",i)},q:function(i){try{return b?.sessionStorage.getItem(i)}catch(t){mt.B(t)}return null},W:function(i){try{return JSON.parse(mt.q(i))||null}catch{}return null},G:function(i,t){try{b?.sessionStorage.setItem(i,JSON.stringify(t))}catch(e){mt.B(e)}},V:function(i){try{b?.sessionStorage.removeItem(i)}catch(t){mt.B(t)}}},ne=(function(i){return i[i.PENDING=-1]="PENDING",i[i.DENIED=0]="DENIED",i[i.GRANTED=1]="GRANTED",i})({}),lo=class{constructor(t){this._instance=t}get F(){return this._instance.config}get consent(){return this.J()?ne.DENIED:this.K}isOptedOut(){return this.F.cookieless_mode==="always"||this.consent===ne.DENIED||this.consent===ne.PENDING&&(this.F.opt_out_capturing_by_default||this.F.cookieless_mode==="on_reject")}isOptedIn(){return!this.isOptedOut()}isExplicitlyOptedOut(){return this.consent===ne.DENIED}optInOut(t){this.Y.G(this.X,t?1:0,this.F.cookie_expiration,this.F.cross_subdomain_cookie,this.F.secure_cookie)}reset(){this.Y.V(this.X,this.F.cross_subdomain_cookie)}get X(){var{token:t,opt_out_capturing_cookie_prefix:e,consent_persistence_name:s}=this._instance.config;return s||(e?e+t:"__ph_opt_in_out_"+t)}get K(){var t=this.Y.q(this.X);return vr(t)?ne.GRANTED:$(Ep,t)?ne.DENIED:ne.PENDING}get Y(){if(!this.Z){var t=this.F.opt_out_capturing_persistence_type;this.Z=t==="localStorage"?st:qt;var e=t==="localStorage"?qt:st;e.q(this.X)&&(this.Z.q(this.X)||this.optInOut(vr(e.q(this.X))),e.V(this.X,this.F.cross_subdomain_cookie))}return this.Z}J(){return!!this.F.respect_dnt&&!!Fc([It?.doNotTrack,It?.msDoNotTrack,F.doNotTrack],t=>vr(t))}},Hs=ft("[Dead Clicks]"),hg=()=>!0,ug=i=>{var t,e=!((t=i.instance.persistence)==null||!t.get_property(Lc)),s=i.instance.config.capture_dead_clicks;return we(s)?s:e},on=class{get lazyLoadedDeadClicksAutocapture(){return this.tt}constructor(t,e,s){this.instance=t,this.isEnabled=e,this.onCapture=s,this.startIfEnabled()}onRemoteConfig(t){this.instance.persistence&&this.instance.persistence.register({[Lc]:t?.captureDeadClicks}),this.startIfEnabled()}startIfEnabled(){this.isEnabled(this)&&this.it(()=>{this.et()})}it(t){var e,s;(e=F.__PosthogExtensions__)!=null&&e.initDeadClicksAutocapture&&t(),(s=F.__PosthogExtensions__)==null||s.loadExternalDependency==null||s.loadExternalDependency(this.instance,"dead-clicks-autocapture",n=>{n?Hs.error("failed to load script",n):t()})}et(){var t;if(E){if(!this.tt&&(t=F.__PosthogExtensions__)!=null&&t.initDeadClicksAutocapture){var e=_t(this.instance.config.capture_dead_clicks)?this.instance.config.capture_dead_clicks:{};e.__onCapture=this.onCapture,this.tt=F.__PosthogExtensions__.initDeadClicksAutocapture(this.instance,e),this.tt.start(E),Hs.info("starting...")}}else Hs.error("`document` not found. Cannot start.")}stop(){this.tt&&(this.tt.stop(),this.tt=void 0,Hs.info("stopping..."))}},Bi=ft("[ExceptionAutocapture]"),co=class{constructor(t){var e,s,n;this.rt=()=>{var r;if(b&&this.isEnabled&&(r=F.__PosthogExtensions__)!=null&&r.errorWrappingFunctions){var o=F.__PosthogExtensions__.errorWrappingFunctions.wrapOnError,a=F.__PosthogExtensions__.errorWrappingFunctions.wrapUnhandledRejection,l=F.__PosthogExtensions__.errorWrappingFunctions.wrapConsoleError;try{!this.st&&this.F.capture_unhandled_errors&&(this.st=o(this.captureException.bind(this))),!this.nt&&this.F.capture_unhandled_rejections&&(this.nt=a(this.captureException.bind(this))),!this.ot&&this.F.capture_console_errors&&(this.ot=l(this.captureException.bind(this)))}catch(c){Bi.error("failed to start",c),this.lt()}}},this._instance=t,this.ut=!((e=this._instance.persistence)==null||!e.props[Vl]),this.F=this.ht(),this.dt=new $r({refillRate:(s=this._instance.config.error_tracking.__exceptionRateLimiterRefillRate)!==null&&s!==void 0?s:1,bucketSize:(n=this._instance.config.error_tracking.__exceptionRateLimiterBucketSize)!==null&&n!==void 0?n:10,refillInterval:1e4,h:Bi}),this.startIfEnabled()}ht(){var t=this._instance.config.capture_exceptions,e={capture_unhandled_errors:!1,capture_unhandled_rejections:!1,capture_console_errors:!1};return _t(t)?e=T({},e,t):(P(t)?this.ut:t)&&(e=T({},e,{capture_unhandled_errors:!0,capture_unhandled_rejections:!0})),e}get isEnabled(){return this.F.capture_console_errors||this.F.capture_unhandled_errors||this.F.capture_unhandled_rejections}startIfEnabled(){this.isEnabled&&(Bi.info("enabled"),this.it(this.rt))}it(t){var e,s;(e=F.__PosthogExtensions__)!=null&&e.errorWrappingFunctions&&t(),(s=F.__PosthogExtensions__)==null||s.loadExternalDependency==null||s.loadExternalDependency(this._instance,"exception-autocapture",n=>{if(n)return Bi.error("failed to load script",n);t()})}lt(){var t,e,s;(t=this.st)==null||t.call(this),this.st=void 0,(e=this.nt)==null||e.call(this),this.nt=void 0,(s=this.ot)==null||s.call(this),this.ot=void 0}onRemoteConfig(t){var e=t.autocaptureExceptions;this.ut=!!e||!1,this.F=this.ht(),this._instance.persistence&&this._instance.persistence.register({[Vl]:this.ut}),this.startIfEnabled()}captureException(t){var e,s,n=(e=t==null||(s=t.$exception_list)==null||(s=s[0])==null?void 0:s.type)!==null&&e!==void 0?e:"Exception";this.dt.consumeRateLimit(n)?Bi.info("Skipping exception capture because of client rate limiting.",{exception:n}):this._instance.exceptions.sendExceptionEvent(t)}};function ic(i,t,e){try{if(!(t in i))return()=>{};var s=i[t],n=e(s);return ye(n)&&(n.prototype=n.prototype||{},Object.defineProperties(n,{__posthog_wrapped__:{enumerable:!1,value:!0}})),i[t]=n,()=>{i[t]=s}}catch{return()=>{}}}var ho=class{constructor(t){var e;this._instance=t,this.vt=(b==null||(e=b.location)==null?void 0:e.pathname)||""}get isEnabled(){return this._instance.config.capture_pageview==="history_change"}startIfEnabled(){this.isEnabled&&(C.info("History API monitoring enabled, starting..."),this.monitorHistoryChanges())}stop(){this.ct&&this.ct(),this.ct=void 0,C.info("History API monitoring stopped")}monitorHistoryChanges(){var t,e;if(b&&b.history){var s=this;(t=b.history.pushState)!=null&&t.__posthog_wrapped__||ic(b.history,"pushState",n=>function(r,o,a){n.call(this,r,o,a),s.ft("pushState")}),(e=b.history.replaceState)!=null&&e.__posthog_wrapped__||ic(b.history,"replaceState",n=>function(r,o,a){n.call(this,r,o,a),s.ft("replaceState")}),this.gt()}}ft(t){try{var e,s=b==null||(e=b.location)==null?void 0:e.pathname;if(!s)return;s!==this.vt&&this.isEnabled&&this._instance.capture("$pageview",{navigation_type:t}),this.vt=s}catch(n){C.error("Error capturing "+t+" pageview",n)}}gt(){if(!this.ct){var t=()=>{this.ft("popstate")};ct(b,"popstate",t),this.ct=()=>{b&&b.removeEventListener("popstate",t)}}}},Sr=ft("[SegmentIntegration]");function dg(i,t){var e=i.config.segment;if(!e)return t();(function(s,n){var r=s.config.segment;if(!r)return n();var o=l=>{var c=()=>l.anonymousId()||xe();s.config.get_device_id=c,l.id()&&(s.register({distinct_id:l.id(),$device_id:c()}),s.persistence.set_property(se,"identified")),n()},a=r.user();"then"in a&&ye(a.then)?a.then(l=>o(l)):o(a)})(i,()=>{e.register((s=>{Promise&&Promise.resolve||Sr.warn("This browser does not have Promise support, and can not use the segment integration");var n=(r,o)=>{if(!o)return r;r.event.userId||r.event.anonymousId===s.get_distinct_id()||(Sr.info("No userId set, resetting PostHog"),s.reset()),r.event.userId&&r.event.userId!==s.get_distinct_id()&&(Sr.info("UserId set, identifying with PostHog"),s.identify(r.event.userId));var a=s.calculateEventProperties(o,r.event.properties);return r.event.properties=Object.assign({},a,r.event.properties),r};return{name:"PostHog JS",type:"enrichment",version:"1.0.0",isLoaded:()=>!0,load:()=>Promise.resolve(),track:r=>n(r,r.event.event),page:r=>n(r,"$pageview"),identify:r=>n(r,"$identify"),screen:r=>n(r,"$screen")}})(i)).then(()=>{t()})})}var Zc="posthog-js";function Qc(i,t){var{organization:e,projectId:s,prefix:n,severityAllowList:r=["error"],sendExceptionsToPostHog:o=!0}=t===void 0?{}:t;return a=>{var l,c,h,u,d;if(!(r==="*"||r.includes(a.level))||!i.__loaded)return a;a.tags||(a.tags={});var f=i.requestRouter.endpointFor("ui","/project/"+i.config.token+"/person/"+i.get_distinct_id());a.tags["PostHog Person URL"]=f,i.sessionRecordingStarted()&&(a.tags["PostHog Recording URL"]=i.get_session_replay_url({withTimestamp:!0}));var p=((l=a.exception)==null?void 0:l.values)||[],g=p.map(_=>T({},_,{stacktrace:_.stacktrace?T({},_.stacktrace,{type:"raw",frames:(_.stacktrace.frames||[]).map(v=>T({},v,{platform:"web:javascript"}))}):void 0})),m={$exception_message:((c=p[0])==null?void 0:c.value)||a.message,$exception_type:(h=p[0])==null?void 0:h.type,$exception_level:a.level,$exception_list:g,$sentry_event_id:a.event_id,$sentry_exception:a.exception,$sentry_exception_message:((u=p[0])==null?void 0:u.value)||a.message,$sentry_exception_type:(d=p[0])==null?void 0:d.type,$sentry_tags:a.tags};return e&&s&&(m.$sentry_url=(n||"https://sentry.io/organizations/")+e+"/issues/?project="+s+"&query="+a.event_id),o&&i.exceptions.sendExceptionEvent(m),a}}var uo=class{constructor(t,e,s,n,r,o){this.name=Zc,this.setupOnce=function(a){a(Qc(t,{organization:e,projectId:s,prefix:n,severityAllowList:r,sendExceptionsToPostHog:o==null||o}))}}},fg=b!=null&&b.location?rn(b.location.hash,"__posthog")||rn(location.hash,"state"):null,sc="_postHogToolbarParams",nc=ft("[Toolbar]"),be=(function(i){return i[i.UNINITIALIZED=0]="UNINITIALIZED",i[i.LOADING=1]="LOADING",i[i.LOADED=2]="LOADED",i})(be||{}),fo=class{constructor(t){this.instance=t}_t(t){F.ph_toolbar_state=t}yt(){var t;return(t=F.ph_toolbar_state)!==null&&t!==void 0?t:be.UNINITIALIZED}maybeLoadToolbar(t,e,s){if(t===void 0&&(t=void 0),e===void 0&&(e=void 0),s===void 0&&(s=void 0),!b||!E)return!1;t=t??b.location,s=s??b.history;try{if(!e){try{b.localStorage.setItem("test","test"),b.localStorage.removeItem("test")}catch{return!1}e=b?.localStorage}var n,r=fg||rn(t.hash,"__posthog")||rn(t.hash,"state"),o=r?Hl(()=>JSON.parse(atob(decodeURIComponent(r))))||Hl(()=>JSON.parse(decodeURIComponent(r))):null;return o&&o.action==="ph_authorize"?((n=o).source="url",n&&Object.keys(n).length>0&&(o.desiredHash?t.hash=o.desiredHash:s?s.replaceState(s.state,"",t.pathname+t.search):t.hash="")):((n=JSON.parse(e.getItem(sc)||"{}")).source="localstorage",delete n.userIntent),!(!n.token||this.instance.config.token!==n.token)&&(this.loadToolbar(n),!0)}catch{return!1}}bt(t){var e=F.ph_load_toolbar||F.ph_load_editor;!tt(e)&&ye(e)?e(t,this.instance):nc.warn("No toolbar load function found")}loadToolbar(t){var e=!(E==null||!E.getElementById($c));if(!b||e)return!1;var s=this.instance.requestRouter.region==="custom"&&this.instance.config.advanced_disable_toolbar_metrics,n=T({token:this.instance.config.token},t,{apiURL:this.instance.requestRouter.endpointFor("ui")},s?{instrument:!1}:{});if(b.localStorage.setItem(sc,JSON.stringify(T({},n,{source:void 0}))),this.yt()===be.LOADED)this.bt(n);else if(this.yt()===be.UNINITIALIZED){var r;this._t(be.LOADING),(r=F.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this.instance,"toolbar",o=>{if(o)return nc.error("[Toolbar] Failed to load",o),void this._t(be.UNINITIALIZED);this._t(be.LOADED),this.bt(n)}),ct(b,"turbolinks:load",()=>{this._t(be.UNINITIALIZED),this.loadToolbar(n)})}return!0}wt(t){return this.loadToolbar(t)}maybeLoadEditor(t,e,s){return t===void 0&&(t=void 0),e===void 0&&(e=void 0),s===void 0&&(s=void 0),this.maybeLoadToolbar(t,e,s)}},pg=ft("[TracingHeaders]"),po=class{constructor(t){this.xt=void 0,this.$t=void 0,this.rt=()=>{var e,s;P(this.xt)&&((e=F.__PosthogExtensions__)==null||(e=e.tracingHeadersPatchFns)==null||e._patchXHR(this._instance.config.__add_tracing_headers||[],this._instance.get_distinct_id(),this._instance.sessionManager)),P(this.$t)&&((s=F.__PosthogExtensions__)==null||(s=s.tracingHeadersPatchFns)==null||s._patchFetch(this._instance.config.__add_tracing_headers||[],this._instance.get_distinct_id(),this._instance.sessionManager))},this._instance=t}it(t){var e,s;(e=F.__PosthogExtensions__)!=null&&e.tracingHeadersPatchFns&&t(),(s=F.__PosthogExtensions__)==null||s.loadExternalDependency==null||s.loadExternalDependency(this._instance,"tracing-headers",n=>{if(n)return pg.error("failed to load script",n);t()})}startIfEnabledOrStop(){var t,e;this._instance.config.__add_tracing_headers?this.it(this.rt):((t=this.xt)==null||t.call(this),(e=this.$t)==null||e.call(this),this.xt=void 0,this.$t=void 0)}},Rt="Mobile",an="iOS",Ut="Android",is="Tablet",th=Ut+" "+is,eh="iPad",ih="Apple",sh=ih+" Watch",ss="Safari",ai="BlackBerry",nh="Samsung",rh=nh+"Browser",oh=nh+" Internet",Ve="Chrome",gg=Ve+" OS",ah=Ve+" "+an,Go="Internet Explorer",lh=Go+" "+Rt,Xo="Opera",mg=Xo+" Mini",Ko="Edge",ch="Microsoft "+Ko,ni="Firefox",hh=ni+" "+an,ns="Nintendo",rs="PlayStation",ri="Xbox",uh=Ut+" "+Rt,dh=Rt+" "+ss,Xi="Windows",go=Xi+" Phone",rc="Nokia",mo="Ouya",fh="Generic",_g=fh+" "+Rt.toLowerCase(),ph=fh+" "+is.toLowerCase(),_o="Konqueror",St="(\\d+(\\.\\d+)?)",Mr=new RegExp("Version/"+St),vg=new RegExp(ri,"i"),bg=new RegExp(rs+" \\w+","i"),xg=new RegExp(ns+" \\w+","i"),Jo=new RegExp(ai+"|PlayBook|BB10","i"),yg={"NT3.51":"NT 3.11","NT4.0":"NT 4.0","5.0":"2000",5.1:"XP",5.2:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1",6.4:"10","10.0":"10"},wg=(i,t)=>t&&$(t,ih)||(function(e){return $(e,ss)&&!$(e,Ve)&&!$(e,Ut)})(i),gh=function(i,t){return t=t||"",$(i," OPR/")&&$(i,"Mini")?mg:$(i," OPR/")?Xo:Jo.test(i)?ai:$(i,"IE"+Rt)||$(i,"WPDesktop")?lh:$(i,rh)?oh:$(i,Ko)||$(i,"Edg/")?ch:$(i,"FBIOS")?"Facebook "+Rt:$(i,"UCWEB")||$(i,"UCBrowser")?"UC Browser":$(i,"CriOS")?ah:$(i,"CrMo")||$(i,Ve)?Ve:$(i,Ut)&&$(i,ss)?uh:$(i,"FxiOS")?hh:$(i.toLowerCase(),_o.toLowerCase())?_o:wg(i,t)?$(i,Rt)?dh:ss:$(i,ni)?ni:$(i,"MSIE")||$(i,"Trident/")?Go:$(i,"Gecko")?ni:""},kg={[lh]:[new RegExp("rv:"+St)],[ch]:[new RegExp(Ko+"?\\/"+St)],[Ve]:[new RegExp("("+Ve+"|CrMo)\\/"+St)],[ah]:[new RegExp("CriOS\\/"+St)],"UC Browser":[new RegExp("(UCBrowser|UCWEB)\\/"+St)],[ss]:[Mr],[dh]:[Mr],[Xo]:[new RegExp("(Opera|OPR)\\/"+St)],[ni]:[new RegExp(ni+"\\/"+St)],[hh]:[new RegExp("FxiOS\\/"+St)],[_o]:[new RegExp("Konqueror[:/]?"+St,"i")],[ai]:[new RegExp(ai+" "+St),Mr],[uh]:[new RegExp("android\\s"+St,"i")],[oh]:[new RegExp(rh+"\\/"+St)],[Go]:[new RegExp("(rv:|MSIE )"+St)],Mozilla:[new RegExp("rv:"+St)]},Sg=function(i,t){var e=gh(i,t),s=kg[e];if(P(s))return null;for(var n=0;n<s.length;n++){var r=s[n],o=i.match(r);if(o)return parseFloat(o[o.length-2])}return null},oc=[[new RegExp(ri+"; "+ri+" (.*?)[);]","i"),i=>[ri,i&&i[1]||""]],[new RegExp(ns,"i"),[ns,""]],[new RegExp(rs,"i"),[rs,""]],[Jo,[ai,""]],[new RegExp(Xi,"i"),(i,t)=>{if(/Phone/.test(t)||/WPDesktop/.test(t))return[go,""];if(new RegExp(Rt).test(t)&&!/IEMobile\b/.test(t))return[Xi+" "+Rt,""];var e=/Windows NT ([0-9.]+)/i.exec(t);if(e&&e[1]){var s=e[1],n=yg[s]||"";return/arm/i.test(t)&&(n="RT"),[Xi,n]}return[Xi,""]}],[/((iPhone|iPad|iPod).*?OS (\d+)_(\d+)_?(\d+)?|iPhone)/,i=>{if(i&&i[3]){var t=[i[3],i[4],i[5]||"0"];return[an,t.join(".")]}return[an,""]}],[/(watch.*\/(\d+\.\d+\.\d+)|watch os,(\d+\.\d+),)/i,i=>{var t="";return i&&i.length>=3&&(t=P(i[2])?i[3]:i[2]),["watchOS",t]}],[new RegExp("("+Ut+" (\\d+)\\.(\\d+)\\.?(\\d+)?|"+Ut+")","i"),i=>{if(i&&i[2]){var t=[i[2],i[3],i[4]||"0"];return[Ut,t.join(".")]}return[Ut,""]}],[/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i,i=>{var t=["Mac OS X",""];if(i&&i[1]){var e=[i[1],i[2],i[3]||"0"];t[1]=e.join(".")}return t}],[/Mac/i,["Mac OS X",""]],[/CrOS/,[gg,""]],[/Linux|debian/i,["Linux",""]]],ac=function(i){return xg.test(i)?ns:bg.test(i)?rs:vg.test(i)?ri:new RegExp(mo,"i").test(i)?mo:new RegExp("("+go+"|WPDesktop)","i").test(i)?go:/iPad/.test(i)?eh:/iPod/.test(i)?"iPod Touch":/iPhone/.test(i)?"iPhone":/(watch)(?: ?os[,/]|\d,\d\/)[\d.]+/i.test(i)?sh:Jo.test(i)?ai:/(kobo)\s(ereader|touch)/i.test(i)?"Kobo":new RegExp(rc,"i").test(i)?rc:/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i.test(i)||/(kf[a-z]+)( bui|\)).+silk\//i.test(i)?"Kindle Fire":/(Android|ZTE)/i.test(i)?!new RegExp(Rt).test(i)||/(9138B|TB782B|Nexus [97]|pixel c|HUAWEISHT|BTV|noble nook|smart ultra 6)/i.test(i)?/pixel[\daxl ]{1,6}/i.test(i)&&!/pixel c/i.test(i)||/(huaweimed-al00|tah-|APA|SM-G92|i980|zte|U304AA)/i.test(i)||/lmy47v/i.test(i)&&!/QTAQZ3/i.test(i)?Ut:th:Ut:new RegExp("(pda|"+Rt+")","i").test(i)?_g:new RegExp(is,"i").test(i)&&!new RegExp(is+" pc","i").test(i)?ph:""},Ws="https?://(.*)",ui=["gclid","gclsrc","dclid","gbraid","wbraid","fbclid","msclkid","twclid","li_fat_id","igshid","ttclid","rdt_cid","epik","qclid","sccid","irclid","_kx"],Mg=hi(["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gad_source","mc_cid"],ui),cs="<masked>",Pg=["li_fat_id"];function mh(i,t,e){if(!E)return{};var s,n=t?hi([],ui,e||[]):[],r=_h(ls(E.URL,n,cs),i),o=(s={},X(Pg,function(a){var l=qt.q(a);s[a]=l||null}),s);return lt(o,r)}function _h(i,t){var e=Mg.concat(t||[]),s={};return X(e,function(n){var r=nn(i,n);s[n]=r||null}),s}function vh(i){var t=(function(r){return r?r.search(Ws+"google.([^/?]*)")===0?"google":r.search(Ws+"bing.com")===0?"bing":r.search(Ws+"yahoo.com")===0?"yahoo":r.search(Ws+"duckduckgo.com")===0?"duckduckgo":null:null})(i),e=t!="yahoo"?"q":"p",s={};if(!oe(t)){s.$search_engine=t;var n=E?nn(E.referrer,e):"";n.length&&(s.ph_keyword=n)}return s}function lc(){return navigator.language||navigator.userLanguage}function bh(){return E?.referrer||"$direct"}function xh(i,t){var e=i?hi([],ui,t||[]):[],s=Et?.href.substring(0,1e3);return{r:bh().substring(0,1e3),u:s?ls(s,e,cs):void 0}}function yh(i){var t,{r:e,u:s}=i,n={$referrer:e,$referring_domain:e==null?void 0:e=="$direct"?"$direct":(t=sn(e))==null?void 0:t.host};if(s){n.$current_url=s;var r=sn(s);n.$host=r?.host,n.$pathname=r?.pathname;var o=_h(s);lt(n,o)}if(e){var a=vh(e);lt(n,a)}return n}function wh(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch{return}}function Eg(){try{return new Date().getTimezoneOffset()}catch{return}}function Cg(i,t){if(!Pt)return{};var e,s,n,r=i?hi([],ui,t||[]):[],[o,a]=(function(l){for(var c=0;c<oc.length;c++){var[h,u]=oc[c],d=h.exec(l),f=d&&(ye(u)?u(d,l):u);if(f)return f}return["",""]})(Pt);return lt(Vo({$os:o,$os_version:a,$browser:gh(Pt,navigator.vendor),$device:ac(Pt),$device_type:(s=Pt,n=ac(s),n===eh||n===th||n==="Kobo"||n==="Kindle Fire"||n===ph?is:n===ns||n===ri||n===rs||n===mo?"Console":n===sh?"Wearable":n?Rt:"Desktop"),$timezone:wh(),$timezone_offset:Eg()}),{$current_url:ls(Et?.href,r,cs),$host:Et?.host,$pathname:Et?.pathname,$raw_user_agent:Pt.length>1e3?Pt.substring(0,997)+"...":Pt,$browser_version:Sg(Pt,navigator.vendor),$browser_language:lc(),$browser_language_prefix:(e=lc(),typeof e=="string"?e.split("-")[0]:void 0),$screen_height:b?.screen.height,$screen_width:b?.screen.width,$viewport_height:b?.innerHeight,$viewport_width:b?.innerWidth,$lib:"web",$lib_version:ie.LIB_VERSION,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:Date.now()/1e3})}var me=ft("[Web Vitals]"),cc=9e5,vo=class{constructor(t){var e;this.Et=!1,this.P=!1,this.N={url:void 0,metrics:[],firstMetricTimestamp:void 0},this.St=()=>{clearTimeout(this.kt),this.N.metrics.length!==0&&(this._instance.capture("$web_vitals",this.N.metrics.reduce((s,n)=>T({},s,{["$web_vitals_"+n.name+"_event"]:T({},n),["$web_vitals_"+n.name+"_value"]:n.value}),{})),this.N={url:void 0,metrics:[],firstMetricTimestamp:void 0})},this.Pt=s=>{var n,r=(n=this._instance.sessionManager)==null?void 0:n.checkAndGetSessionAndWindowId(!0);if(P(r))me.error("Could not read session ID. Dropping metrics!");else{this.N=this.N||{url:void 0,metrics:[],firstMetricTimestamp:void 0};var o=this.Tt();P(o)||(tt(s?.name)||tt(s?.value)?me.error("Invalid metric received",s):this.It&&s.value>=this.It?me.error("Ignoring metric with value >= "+this.It,s):(this.N.url!==o&&(this.St(),this.kt=setTimeout(this.St,this.flushToCaptureTimeoutMs)),P(this.N.url)&&(this.N.url=o),this.N.firstMetricTimestamp=P(this.N.firstMetricTimestamp)?Date.now():this.N.firstMetricTimestamp,s.attribution&&s.attribution.interactionTargetElement&&(s.attribution.interactionTargetElement=void 0),this.N.metrics.push(T({},s,{$current_url:o,$session_id:r.sessionId,$window_id:r.windowId,timestamp:Date.now()})),this.N.metrics.length===this.allowedMetrics.length&&this.St()))}},this.rt=()=>{var s,n,r,o,a=F.__PosthogExtensions__;P(a)||P(a.postHogWebVitalsCallbacks)||({onLCP:s,onCLS:n,onFCP:r,onINP:o}=a.postHogWebVitalsCallbacks),s&&n&&r&&o?(this.allowedMetrics.indexOf("LCP")>-1&&s(this.Pt.bind(this)),this.allowedMetrics.indexOf("CLS")>-1&&n(this.Pt.bind(this)),this.allowedMetrics.indexOf("FCP")>-1&&r(this.Pt.bind(this)),this.allowedMetrics.indexOf("INP")>-1&&o(this.Pt.bind(this)),this.P=!0):me.error("web vitals callbacks not loaded - not starting")},this._instance=t,this.Et=!((e=this._instance.persistence)==null||!e.props[ql]),this.startIfEnabled()}get allowedMetrics(){var t,e,s=_t(this._instance.config.capture_performance)?(t=this._instance.config.capture_performance)==null?void 0:t.web_vitals_allowed_metrics:void 0;return P(s)?((e=this._instance.persistence)==null?void 0:e.props[Yl])||["CLS","FCP","INP","LCP"]:s}get flushToCaptureTimeoutMs(){return(_t(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals_delayed_flush_ms:void 0)||5e3}get It(){var t=_t(this._instance.config.capture_performance)&&Yt(this._instance.config.capture_performance.__web_vitals_max_value)?this._instance.config.capture_performance.__web_vitals_max_value:cc;return 0<t&&t<=6e4?cc:t}get isEnabled(){var t=Et?.protocol;if(t!=="http:"&&t!=="https:")return me.info("Web Vitals are disabled on non-http/https protocols"),!1;var e=_t(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals:we(this._instance.config.capture_performance)?this._instance.config.capture_performance:void 0;return we(e)?e:this.Et}startIfEnabled(){this.isEnabled&&!this.P&&(me.info("enabled, starting..."),this.it(this.rt))}onRemoteConfig(t){var e=_t(t.capturePerformance)&&!!t.capturePerformance.web_vitals,s=_t(t.capturePerformance)?t.capturePerformance.web_vitals_allowed_metrics:void 0;this._instance.persistence&&(this._instance.persistence.register({[ql]:e}),this._instance.persistence.register({[Yl]:s})),this.Et=e,this.startIfEnabled()}it(t){var e,s;(e=F.__PosthogExtensions__)!=null&&e.postHogWebVitalsCallbacks&&t(),(s=F.__PosthogExtensions__)==null||s.loadExternalDependency==null||s.loadExternalDependency(this._instance,"web-vitals",n=>{n?me.error("failed to load script",n):t()})}Tt(){var t=b?b.location.href:void 0;if(t){var e=this._instance.config.mask_personal_data_properties,s=this._instance.config.custom_personal_data_properties,n=e?hi([],ui,s||[]):[];return ls(t,n,cs)}me.error("Could not determine current URL")}},Og=ft("[Heatmaps]");function hc(i){return _t(i)&&"clientX"in i&&"clientY"in i&&Yt(i.clientX)&&Yt(i.clientY)}var bo=class{constructor(t){var e;this.Et=!1,this.P=!1,this.Rt=null,this.instance=t,this.Et=!((e=this.instance.persistence)==null||!e.props[Xr]),this.rageclicks=new en(t.config.rageclick)}get flushIntervalMilliseconds(){var t=5e3;return _t(this.instance.config.capture_heatmaps)&&this.instance.config.capture_heatmaps.flush_interval_milliseconds&&(t=this.instance.config.capture_heatmaps.flush_interval_milliseconds),t}get isEnabled(){return P(this.instance.config.capture_heatmaps)?P(this.instance.config.enable_heatmaps)?this.Et:this.instance.config.enable_heatmaps:this.instance.config.capture_heatmaps!==!1}startIfEnabled(){if(this.isEnabled){if(this.P)return;Og.info("starting..."),this.Ft(),this.Ct()}else{var t;clearInterval((t=this.Rt)!==null&&t!==void 0?t:void 0),this.Ot(),this.getAndClearBuffer()}}onRemoteConfig(t){var e=!!t.heatmaps;this.instance.persistence&&this.instance.persistence.register({[Xr]:e}),this.Et=e,this.startIfEnabled()}getAndClearBuffer(){var t=this.N;return this.N=void 0,t}Mt(t){this.At(t.originalEvent,"deadclick")}Ct(){this.Rt&&clearInterval(this.Rt),this.Rt=(function(t){return t?.visibilityState==="visible"})(E)?setInterval(this.Dt.bind(this),this.flushIntervalMilliseconds):null}Ft(){b&&E&&(this.jt=this.Dt.bind(this),ct(b,"beforeunload",this.jt),this.Lt=t=>this.At(t||b?.event),ct(E,"click",this.Lt,{capture:!0}),this.Nt=t=>this.Ut(t||b?.event),ct(E,"mousemove",this.Nt,{capture:!0}),this.zt=new on(this.instance,hg,this.Mt.bind(this)),this.zt.startIfEnabled(),this.Ht=this.Ct.bind(this),ct(E,"visibilitychange",this.Ht),this.P=!0)}Ot(){var t;b&&E&&(this.jt&&b.removeEventListener("beforeunload",this.jt),this.Lt&&E.removeEventListener("click",this.Lt,{capture:!0}),this.Nt&&E.removeEventListener("mousemove",this.Nt,{capture:!0}),this.Ht&&E.removeEventListener("visibilitychange",this.Ht),clearTimeout(this.Bt),(t=this.zt)==null||t.stop(),this.P=!1)}qt(t,e){var s=this.instance.scrollManager.scrollY(),n=this.instance.scrollManager.scrollX(),r=this.instance.scrollManager.scrollElement(),o=(function(a,l,c){for(var h=a;h&&_n(h)&&!Se(h,"body");){if(h===c)return!1;if($(l,b?.getComputedStyle(h).position))return!0;h=Vc(h)}return!1})(Hc(t),["fixed","sticky"],r);return{x:t.clientX+(o?0:n),y:t.clientY+(o?0:s),target_fixed:o,type:e}}At(t,e){var s;if(e===void 0&&(e="click"),!Gl(t.target)&&hc(t)){var n=this.qt(t,e);(s=this.rageclicks)!=null&&s.isRageClick(t.clientX,t.clientY,new Date().getTime())&&this.Wt(T({},n,{type:"rageclick"})),this.Wt(n)}}Ut(t){!Gl(t.target)&&hc(t)&&(clearTimeout(this.Bt),this.Bt=setTimeout(()=>{this.Wt(this.qt(t,"mousemove"))},500))}Wt(t){if(b){var e=b.location.href,s=this.instance.config.mask_personal_data_properties,n=this.instance.config.custom_personal_data_properties,r=s?hi([],ui,n||[]):[],o=ls(e,r,cs);this.N=this.N||{},this.N[o]||(this.N[o]=[]),this.N[o].push(t)}}Dt(){this.N&&!ii(this.N)&&this.instance.capture("$$heatmap",{$heatmap_data:this.getAndClearBuffer()})}},xo=class{constructor(t){this._instance=t}doPageView(t,e){var s,n=this.Gt(t,e);return this.Vt={pathname:(s=b?.location.pathname)!==null&&s!==void 0?s:"",pageViewId:e,timestamp:t},this._instance.scrollManager.resetContext(),n}doPageLeave(t){var e;return this.Gt(t,(e=this.Vt)==null?void 0:e.pageViewId)}doEvent(){var t;return{$pageview_id:(t=this.Vt)==null?void 0:t.pageViewId}}Gt(t,e){var s=this.Vt;if(!s)return{$pageview_id:e};var n={$pageview_id:e,$prev_pageview_id:s.pageViewId},r=this._instance.scrollManager.getContext();if(r&&!this._instance.config.disable_scroll_properties){var{maxScrollHeight:o,lastScrollY:a,maxScrollY:l,maxContentHeight:c,lastContentY:h,maxContentY:u}=r;if(!(P(o)||P(a)||P(l)||P(c)||P(h)||P(u))){o=Math.ceil(o),a=Math.ceil(a),l=Math.ceil(l),c=Math.ceil(c),h=Math.ceil(h),u=Math.ceil(u);var d=o<=1?1:Vt(a/o,0,1,C),f=o<=1?1:Vt(l/o,0,1,C),p=c<=1?1:Vt(h/c,0,1,C),g=c<=1?1:Vt(u/c,0,1,C);n=lt(n,{$prev_pageview_last_scroll:a,$prev_pageview_last_scroll_percentage:d,$prev_pageview_max_scroll:l,$prev_pageview_max_scroll_percentage:f,$prev_pageview_last_content:h,$prev_pageview_last_content_percentage:p,$prev_pageview_max_content:u,$prev_pageview_max_content_percentage:g})}}return s.pathname&&(n.$prev_pageview_pathname=s.pathname),s.timestamp&&(n.$prev_pageview_duration=(t.getTime()-s.timestamp.getTime())/1e3),n}},Lt=Uint8Array,Mt=Uint16Array,li=Uint32Array,Zo=new Lt([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Qo=new Lt([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),uc=new Lt([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),kh=function(i,t){for(var e=new Mt(31),s=0;s<31;++s)e[s]=t+=1<<i[s-1];var n=new li(e[30]);for(s=1;s<30;++s)for(var r=e[s];r<e[s+1];++r)n[r]=r-e[s]<<5|s;return[e,n]},Sh=kh(Zo,2),Tg=Sh[0],yo=Sh[1];Tg[28]=258,yo[258]=28;for(wo=kh(Qo,0)[1],ln=new Mt(32768),J=0;J<32768;++J)_e=(43690&J)>>>1|(21845&J)<<1,_e=(61680&(_e=(52428&_e)>>>2|(13107&_e)<<2))>>>4|(3855&_e)<<4,ln[J]=((65280&_e)>>>8|(255&_e)<<8)>>>1;var _e,wo,ln,J,Zi=function(i,t,e){for(var s=i.length,n=0,r=new Mt(t);n<s;++n)++r[i[n]-1];var o,a=new Mt(t);for(n=0;n<t;++n)a[n]=a[n-1]+r[n-1]<<1;if(e){o=new Mt(1<<t);var l=15-t;for(n=0;n<s;++n)if(i[n])for(var c=n<<4|i[n],h=t-i[n],u=a[i[n]-1]++<<h,d=u|(1<<h)-1;u<=d;++u)o[ln[u]>>>l]=c}else for(o=new Mt(s),n=0;n<s;++n)o[n]=ln[a[i[n]-1]++]>>>15-i[n];return o},Ue=new Lt(288);for(J=0;J<144;++J)Ue[J]=8;for(J=144;J<256;++J)Ue[J]=9;for(J=256;J<280;++J)Ue[J]=7;for(J=280;J<288;++J)Ue[J]=8;var cn=new Lt(32);for(J=0;J<32;++J)cn[J]=5;var Ag=Zi(Ue,9,0),Dg=Zi(cn,5,0),Mh=function(i){return(i/8>>0)+(7&i&&1)},Ph=function(i,t,e){(e==null||e>i.length)&&(e=i.length);var s=new(i instanceof Mt?Mt:i instanceof li?li:Lt)(e-t);return s.set(i.subarray(t,e)),s},ee=function(i,t,e){e<<=7&t;var s=t/8>>0;i[s]|=e,i[s+1]|=e>>>8},zi=function(i,t,e){e<<=7&t;var s=t/8>>0;i[s]|=e,i[s+1]|=e>>>8,i[s+2]|=e>>>16},Pr=function(i,t){for(var e=[],s=0;s<i.length;++s)i[s]&&e.push({s,f:i[s]});var n=e.length,r=e.slice();if(!n)return[new Lt(0),0];if(n==1){var o=new Lt(e[0].s+1);return o[e[0].s]=1,[o,1]}e.sort(function(x,S){return x.f-S.f}),e.push({s:-1,f:25001});var a=e[0],l=e[1],c=0,h=1,u=2;for(e[0]={s:-1,f:a.f+l.f,l:a,r:l};h!=n-1;)a=e[e[c].f<e[u].f?c++:u++],l=e[c!=h&&e[c].f<e[u].f?c++:u++],e[h++]={s:-1,f:a.f+l.f,l:a,r:l};var d=r[0].s;for(s=1;s<n;++s)r[s].s>d&&(d=r[s].s);var f=new Mt(d+1),p=ko(e[h-1],f,0);if(p>t){s=0;var g=0,m=p-t,_=1<<m;for(r.sort(function(x,S){return f[S.s]-f[x.s]||x.f-S.f});s<n;++s){var v=r[s].s;if(!(f[v]>t))break;g+=_-(1<<p-f[v]),f[v]=t}for(g>>>=m;g>0;){var y=r[s].s;f[y]<t?g-=1<<t-f[y]++-1:++s}for(;s>=0&&g;--s){var w=r[s].s;f[w]==t&&(--f[w],++g)}p=t}return[new Lt(f),p]},ko=function(i,t,e){return i.s==-1?Math.max(ko(i.l,t,e+1),ko(i.r,t,e+1)):t[i.s]=e},dc=function(i){for(var t=i.length;t&&!i[--t];);for(var e=new Mt(++t),s=0,n=i[0],r=1,o=function(l){e[s++]=l},a=1;a<=t;++a)if(i[a]==n&&a!=t)++r;else{if(!n&&r>2){for(;r>138;r-=138)o(32754);r>2&&(o(r>10?r-11<<5|28690:r-3<<5|12305),r=0)}else if(r>3){for(o(n),--r;r>6;r-=6)o(8304);r>2&&(o(r-3<<5|8208),r=0)}for(;r--;)o(n);r=1,n=i[a]}return[e.subarray(0,s),t]},ji=function(i,t){for(var e=0,s=0;s<t.length;++s)e+=i[s]*t[s];return e},So=function(i,t,e){var s=e.length,n=Mh(t+2);i[n]=255&s,i[n+1]=s>>>8,i[n+2]=255^i[n],i[n+3]=255^i[n+1];for(var r=0;r<s;++r)i[n+r+4]=e[r];return 8*(n+4+s)},fc=function(i,t,e,s,n,r,o,a,l,c,h){ee(t,h++,e),++n[256];for(var u=Pr(n,15),d=u[0],f=u[1],p=Pr(r,15),g=p[0],m=p[1],_=dc(d),v=_[0],y=_[1],w=dc(g),x=w[0],S=w[1],M=new Mt(19),k=0;k<v.length;++k)M[31&v[k]]++;for(k=0;k<x.length;++k)M[31&x[k]]++;for(var O=Pr(M,7),A=O[0],D=O[1],I=19;I>4&&!A[uc[I-1]];--I);var U,it,L,j,H=c+5<<3,ut=ji(n,Ue)+ji(r,cn)+o,q=ji(n,d)+ji(r,g)+o+14+3*I+ji(M,A)+(2*M[16]+3*M[17]+7*M[18]);if(H<=ut&&H<=q)return So(t,h,i.subarray(l,l+c));if(ee(t,h,1+(q<ut)),h+=2,q<ut){U=Zi(d,f,0),it=d,L=Zi(g,m,0),j=g;var kt=Zi(A,D,0);for(ee(t,h,y-257),ee(t,h+5,S-1),ee(t,h+10,I-4),h+=14,k=0;k<I;++k)ee(t,h+3*k,A[uc[k]]);h+=3*I;for(var zt=[v,x],rt=0;rt<2;++rt){var gt=zt[rt];for(k=0;k<gt.length;++k){var at=31&gt[k];ee(t,h,kt[at]),h+=A[at],at>15&&(ee(t,h,gt[k]>>>5&127),h+=gt[k]>>>12)}}}else U=Ag,it=Ue,L=Dg,j=cn;for(k=0;k<a;++k)if(s[k]>255){at=s[k]>>>18&31,zi(t,h,U[at+257]),h+=it[at+257],at>7&&(ee(t,h,s[k]>>>23&31),h+=Zo[at]);var Ft=31&s[k];zi(t,h,L[Ft]),h+=j[Ft],Ft>3&&(zi(t,h,s[k]>>>5&8191),h+=Qo[Ft])}else zi(t,h,U[s[k]]),h+=it[s[k]];return zi(t,h,U[256]),h+it[256]},Ig=new li([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Fg=(function(){for(var i=new li(256),t=0;t<256;++t){for(var e=t,s=9;--s;)e=(1&e&&3988292384)^e>>>1;i[t]=e}return i})(),Rg=function(i,t,e,s,n){return(function(r,o,a,l,c,h){var u=r.length,d=new Lt(l+u+5*(1+Math.floor(u/7e3))+c),f=d.subarray(l,d.length-c),p=0;if(!o||u<8)for(var g=0;g<=u;g+=65535){var m=g+65535;m<u?p=So(f,p,r.subarray(g,m)):(f[g]=h,p=So(f,p,r.subarray(g,u)))}else{for(var _=Ig[o-1],v=_>>>13,y=8191&_,w=(1<<a)-1,x=new Mt(32768),S=new Mt(w+1),M=Math.ceil(a/3),k=2*M,O=function(mr){return(r[mr]^r[mr+1]<<M^r[mr+2]<<k)&w},A=new li(25e3),D=new Mt(288),I=new Mt(32),U=0,it=0,L=(g=0,0),j=0,H=0;g<u;++g){var ut=O(g),q=32767&g,kt=S[ut];if(x[q]=kt,S[ut]=q,j<=g){var zt=u-g;if((U>7e3||L>24576)&&zt>423){p=fc(r,f,0,A,D,I,it,L,H,g-H,p),L=U=it=0,H=g;for(var rt=0;rt<286;++rt)D[rt]=0;for(rt=0;rt<30;++rt)I[rt]=0}var gt=2,at=0,Ft=y,yt=q-kt&32767;if(zt>2&&ut==O(g-yt))for(var _p=Math.min(v,zt)-1,vp=Math.min(32767,g),bp=Math.min(258,zt);yt<=vp&&--Ft&&q!=kt;){if(r[g+gt]==r[g+gt-yt]){for(var ge=0;ge<bp&&r[g+ge]==r[g+ge-yt];++ge);if(ge>gt){if(gt=ge,at=yt,ge>_p)break;var xp=Math.min(yt,ge-2),xl=0;for(rt=0;rt<xp;++rt){var gr=g-yt+rt+32768&32767,yl=gr-x[gr]+32768&32767;yl>xl&&(xl=yl,kt=gr)}}}yt+=(q=kt)-(kt=x[q])+32768&32767}if(at){A[L++]=268435456|yo[gt]<<18|wo[at];var wl=31&yo[gt],kl=31&wo[at];it+=Zo[wl]+Qo[kl],++D[257+wl],++I[kl],j=g+gt,++U}else A[L++]=r[g],++D[r[g]]}}p=fc(r,f,h,A,D,I,it,L,H,g-H,p)}return Ph(d,0,l+Mh(p)+c)})(i,t.level==null?6:t.level,t.mem==null?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(i.length)))):12+t.mem,e,s,!0)},Er=function(i,t,e){for(;e;++t)i[t]=e,e>>>=8};function Lg(i,t){t===void 0&&(t={});var e=(function(){var a=4294967295;return{p:function(l){for(var c=a,h=0;h<l.length;++h)c=Fg[255&c^l[h]]^c>>>8;a=c},d:function(){return 4294967295^a}}})(),s=i.length;e.p(i);var n,r=Rg(i,t,10+((n=t).filename&&n.filename.length+1||0),8),o=r.length;return(function(a,l){var c=l.filename;if(a[0]=31,a[1]=139,a[2]=8,a[8]=l.level<2?4:l.level==9?2:0,a[9]=3,l.mtime!=0&&Er(a,4,Math.floor(new Date(l.mtime||Date.now())/1e3)),c){a[3]=8;for(var h=0;h<=c.length;++h)a[h+10]=c.charCodeAt(h)}})(r,t),Er(r,o-8,e.d()),Er(r,o-4,s),r}var Ng=function(i){var t,e,s,n,r="";for(t=e=0,s=(i=(i+"").replace(/\r\n/g,`
`).replace(/\r/g,`
`)).length,n=0;n<s;n++){var o=i.charCodeAt(n),a=null;o<128?e++:a=o>127&&o<2048?String.fromCharCode(o>>6|192,63&o|128):String.fromCharCode(o>>12|224,o>>6&63|128,63&o|128),oe(a)||(e>t&&(r+=i.substring(t,e)),r+=a,t=e=n+1)}return e>t&&(r+=i.substring(t,i.length)),r},$g=!!Fr||!!Ir,pc="text/plain",hn=function(i,t,e){var s;e===void 0&&(e=!0);var[n,r]=i.split("?"),o=T({},t),a=(s=r?.split("&").map(c=>{var h,[u,d]=c.split("="),f=e&&(h=o[u])!==null&&h!==void 0?h:d;return delete o[u],u+"="+f}))!==null&&s!==void 0?s:[],l=eg(o);return l&&a.push(l),n+"?"+a.join("&")},Ki=(i,t)=>JSON.stringify(i,(e,s)=>typeof s=="bigint"?s.toString():s,t),Cr=i=>{var{data:t,compression:e}=i;if(t){if(e===re.GZipJS){var s=Lg((function(l,c){var h=l.length;if(typeof TextEncoder<"u")return new TextEncoder().encode(l);for(var u=new Lt(l.length+(l.length>>>1)),d=0,f=function(_){u[d++]=_},p=0;p<h;++p){if(d+5>u.length){var g=new Lt(d+8+(h-p<<1));g.set(u),u=g}var m=l.charCodeAt(p);m<128||c?f(m):m<2048?(f(192|m>>>6),f(128|63&m)):m>55295&&m<57344?(f(240|(m=65536+(1047552&m)|1023&l.charCodeAt(++p))>>>18),f(128|m>>>12&63),f(128|m>>>6&63),f(128|63&m)):(f(224|m>>>12),f(128|m>>>6&63),f(128|63&m))}return Ph(u,0,d)})(Ki(t)),{mtime:0}),n=new Blob([s],{type:pc});return{contentType:pc,body:n,estimatedSize:n.size}}if(e===re.Base64){var r=(function(l){var c,h,u,d,f,p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",g=0,m=0,_="",v=[];if(!l)return l;l=Ng(l);do c=(f=l.charCodeAt(g++)<<16|l.charCodeAt(g++)<<8|l.charCodeAt(g++))>>18&63,h=f>>12&63,u=f>>6&63,d=63&f,v[m++]=p.charAt(c)+p.charAt(h)+p.charAt(u)+p.charAt(d);while(g<l.length);switch(_=v.join(""),l.length%3){case 1:_=_.slice(0,-2)+"==";break;case 2:_=_.slice(0,-1)+"="}return _})(Ki(t)),o=(l=>"data="+encodeURIComponent(typeof l=="string"?l:Ki(l)))(r);return{contentType:"application/x-www-form-urlencoded",body:o,estimatedSize:new Blob([o]).size}}var a=Ki(t);return{contentType:"application/json",body:a,estimatedSize:new Blob([a]).size}}},qs=[];Ir&&qs.push({transport:"fetch",method:i=>{var t,e,{contentType:s,body:n,estimatedSize:r}=(t=Cr(i))!==null&&t!==void 0?t:{},o=new Headers;X(i.headers,function(h,u){o.append(u,h)}),s&&o.append("Content-Type",s);var a=i.url,l=null;if(Fl){var c=new Fl;l={signal:c.signal,timeout:setTimeout(()=>c.abort(),i.timeout)}}Ir(a,T({method:i?.method||"GET",headers:o,keepalive:i.method==="POST"&&(r||0)<52428.8,body:n,signal:(e=l)==null?void 0:e.signal},i.fetchOptions)).then(h=>h.text().then(u=>{var d={statusCode:h.status,text:u};if(h.status===200)try{d.json=JSON.parse(u)}catch(f){C.error(f)}i.callback==null||i.callback(d)})).catch(h=>{C.error(h),i.callback==null||i.callback({statusCode:0,text:h})}).finally(()=>l?clearTimeout(l.timeout):null)}}),Fr&&qs.push({transport:"XHR",method:i=>{var t,e=new Fr;e.open(i.method||"GET",i.url,!0);var{contentType:s,body:n}=(t=Cr(i))!==null&&t!==void 0?t:{};X(i.headers,function(r,o){e.setRequestHeader(o,r)}),s&&e.setRequestHeader("Content-Type",s),i.timeout&&(e.timeout=i.timeout),i.disableXHRCredentials||(e.withCredentials=!0),e.onreadystatechange=()=>{if(e.readyState===4){var r={statusCode:e.status,text:e.responseText};if(e.status===200)try{r.json=JSON.parse(e.responseText)}catch{}i.callback==null||i.callback(r)}},e.send(n)}}),It!=null&&It.sendBeacon&&qs.push({transport:"sendBeacon",method:i=>{var t=hn(i.url,{beacon:"1"});try{var e,{contentType:s,body:n}=(e=Cr(i))!==null&&e!==void 0?e:{},r=typeof n=="string"?new Blob([n],{type:s}):n;It.sendBeacon(t,r)}catch{}}});var ci=function(i,t){if(!(function(e){try{new RegExp(e)}catch{return!1}return!0})(t))return!1;try{return new RegExp(t).test(i)}catch{return!1}};function gc(i,t,e){return Ki({distinct_id:i,userPropertiesToSet:t,userPropertiesToSetOnce:e})}var Eh={exact:(i,t)=>t.some(e=>i.some(s=>e===s)),is_not:(i,t)=>t.every(e=>i.every(s=>e!==s)),regex:(i,t)=>t.some(e=>i.some(s=>ci(e,s))),not_regex:(i,t)=>t.every(e=>i.every(s=>!ci(e,s))),icontains:(i,t)=>t.map(Vs).some(e=>i.map(Vs).some(s=>e.includes(s))),not_icontains:(i,t)=>t.map(Vs).every(e=>i.map(Vs).every(s=>!e.includes(s)))},Vs=i=>i.toLowerCase(),Or=ft("[Error tracking]"),Mo=class{constructor(t){var e,s;this.Jt=[],this.Kt=new Br([new jr,new Gr,new Wr,new Hr,new qr,new Ur,new Vr,new Yr],Np("web:javascript",Ip,Lp)),this._instance=t,this.Jt=(e=(s=this._instance.persistence)==null?void 0:s.get_property(Kr))!==null&&e!==void 0?e:[]}onRemoteConfig(t){var e,s,n,r=(e=(s=t.errorTracking)==null?void 0:s.suppressionRules)!==null&&e!==void 0?e:[],o=(n=t.errorTracking)==null?void 0:n.captureExtensionExceptions;this.Jt=r,this._instance.persistence&&this._instance.persistence.register({[Kr]:this.Jt,[Ul]:o})}get Yt(){var t,e=!!this._instance.get_property(Ul),s=this._instance.config.error_tracking.captureExtensionExceptions;return(t=s??e)!==null&&t!==void 0&&t}buildProperties(t,e){return this.Kt.buildFromUnknown(t,{syntheticException:e?.syntheticException,mechanism:{handled:e?.handled}})}sendExceptionEvent(t){var e=t.$exception_list;if(this.Xt(e)){if(this.Qt(e))return void Or.info("Skipping exception capture because a suppression rule matched");if(!this.Yt&&this.Zt(e))return void Or.info("Skipping exception capture because it was thrown by an extension");if(!this._instance.config.error_tracking.__capturePostHogExceptions&&this.ti(e))return void Or.info("Skipping exception capture because it was thrown by the PostHog SDK")}return this._instance.capture("$exception",t,{_noTruncate:!0,_batchKey:"exceptionEvent"})}Qt(t){if(t.length===0)return!1;var e=t.reduce((s,n)=>{var{type:r,value:o}=n;return dt(r)&&r.length>0&&s.$exception_types.push(r),dt(o)&&o.length>0&&s.$exception_values.push(o),s},{$exception_types:[],$exception_values:[]});return this.Jt.some(s=>{var n=s.values.map(r=>{var o,a=Eh[r.operator],l=K(r.value)?r.value:[r.value],c=(o=e[r.key])!==null&&o!==void 0?o:[];return l.length>0&&a(l,c)});return s.type==="OR"?n.some(Boolean):n.every(Boolean)})}Zt(t){return t.flatMap(e=>{var s,n;return(s=(n=e.stacktrace)==null?void 0:n.frames)!==null&&s!==void 0?s:[]}).some(e=>e.filename&&e.filename.startsWith("chrome-extension://"))}ti(t){if(t.length>0){var e,s,n,r,o=(e=(s=t[0].stacktrace)==null?void 0:s.frames)!==null&&e!==void 0?e:[],a=o[o.length-1];return(n=a==null||(r=a.filename)==null?void 0:r.includes("posthog.com/static"))!==null&&n!==void 0&&n}return!1}Xt(t){return!tt(t)&&K(t)}},jt=ft("[FeatureFlags]"),Hi=ft("[FeatureFlags]",{debugEnabled:!0}),Tr="$active_feature_flags",ti="$override_feature_flags",mc="$feature_flag_payloads",Wi="$override_feature_flag_payloads",_c="$feature_flag_request_id",vc=i=>{var t={};for(var[e,s]of Us(i||{}))s&&(t[e]=s);return t},Bg=i=>{var t=i.flags;return t?(i.featureFlags=Object.fromEntries(Object.keys(t).map(e=>{var s;return[e,(s=t[e].variant)!==null&&s!==void 0?s:t[e].enabled]})),i.featureFlagPayloads=Object.fromEntries(Object.keys(t).filter(e=>t[e].enabled).filter(e=>{var s;return(s=t[e].metadata)==null?void 0:s.payload}).map(e=>{var s;return[e,(s=t[e].metadata)==null?void 0:s.payload]}))):jt.warn("Using an older version of the feature flags endpoint. Please upgrade your PostHog server to the latest version"),i},zg=(function(i){return i.FeatureFlags="feature_flags",i.Recordings="recordings",i})({}),Po=class{constructor(t){this.ii=!1,this.ei=!1,this.ri=!1,this.si=!1,this.ni=!1,this.oi=!1,this.ai=!1,this._instance=t,this.featureFlagEventHandlers=[]}li(){var t=this._instance.config.evaluation_environments;return t!=null&&t.length?t.filter(e=>{var s=e&&typeof e=="string"&&e.trim().length>0;return s||jt.error("Invalid evaluation environment found:",e,"Expected non-empty string"),s}):[]}ui(){return this.li().length>0}flags(){if(this._instance.config.__preview_remote_config)this.oi=!0;else{var t=!this.hi&&(this._instance.config.advanced_disable_feature_flags||this._instance.config.advanced_disable_feature_flags_on_first_load);this.di({disableFlags:t})}}get hasLoadedFlags(){return this.ei}getFlags(){return Object.keys(this.getFlagVariants())}getFlagsWithDetails(){var t=this._instance.get_property(Jr),e=this._instance.get_property(ti),s=this._instance.get_property(Wi);if(!s&&!e)return t||{};var n=lt({},t||{}),r=[...new Set([...Object.keys(s||{}),...Object.keys(e||{})])];for(var o of r){var a,l,c=n[o],h=e?.[o],u=P(h)?(a=c?.enabled)!==null&&a!==void 0&&a:!!h,d=P(h)?c.variant:typeof h=="string"?h:void 0,f=s?.[o],p=T({},c,{enabled:u,variant:u?d??c?.variant:void 0});u!==c?.enabled&&(p.original_enabled=c?.enabled),d!==c?.variant&&(p.original_variant=c?.variant),f&&(p.metadata=T({},c?.metadata,{payload:f,original_payload:c==null||(l=c.metadata)==null?void 0:l.payload})),n[o]=p}return this.ii||(jt.warn(" Overriding feature flag details!",{flagDetails:t,overriddenPayloads:s,finalDetails:n}),this.ii=!0),n}getFlagVariants(){var t=this._instance.get_property(si),e=this._instance.get_property(ti);if(!e)return t||{};for(var s=lt({},t),n=Object.keys(e),r=0;r<n.length;r++)s[n[r]]=e[n[r]];return this.ii||(jt.warn(" Overriding feature flags!",{enabledFlags:t,overriddenFlags:e,finalFlags:s}),this.ii=!0),s}getFlagPayloads(){var t=this._instance.get_property(mc),e=this._instance.get_property(Wi);if(!e)return t||{};for(var s=lt({},t||{}),n=Object.keys(e),r=0;r<n.length;r++)s[n[r]]=e[n[r]];return this.ii||(jt.warn(" Overriding feature flag payloads!",{flagPayloads:t,overriddenPayloads:e,finalPayloads:s}),this.ii=!0),s}reloadFeatureFlags(){this.si||this._instance.config.advanced_disable_feature_flags||this.hi||(this.hi=setTimeout(()=>{this.di()},5))}vi(){clearTimeout(this.hi),this.hi=void 0}ensureFlagsLoaded(){this.ei||this.ri||this.hi||this.reloadFeatureFlags()}setAnonymousDistinctId(t){this.$anon_distinct_id=t}setReloadingPaused(t){this.si=t}di(t){var e;if(this.vi(),!this._instance.M())if(this.ri)this.ni=!0;else{var s={token:this._instance.config.token,distinct_id:this._instance.get_distinct_id(),groups:this._instance.getGroups(),$anon_distinct_id:this.$anon_distinct_id,person_properties:T({},((e=this._instance.persistence)==null?void 0:e.get_initial_props())||{},this._instance.get_property(Gi)||{}),group_properties:this._instance.get_property(We)};(t!=null&&t.disableFlags||this._instance.config.advanced_disable_feature_flags)&&(s.disable_flags=!0),this.ui()&&(s.evaluation_environments=this.li());var n=this._instance.config.__preview_remote_config,r=n?"/flags/?v=2":"/flags/?v=2&config=true",o=this._instance.config.advanced_only_evaluate_survey_feature_flags?"&only_evaluate_survey_feature_flags=true":"",a=this._instance.requestRouter.endpointFor("flags",r+o);n&&(s.timezone=wh()),this.ri=!0,this._instance.ci({method:"POST",url:a,data:s,compression:this._instance.config.disable_compression?void 0:re.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:l=>{var c,h,u=!0;if(l.statusCode===200&&(this.ni||(this.$anon_distinct_id=void 0),u=!1),this.ri=!1,this.oi||(this.oi=!0,this._instance.fi((h=l.json)!==null&&h!==void 0?h:{})),!s.disable_flags||this.ni)if(this.ai=!u,l.json&&(c=l.json.quotaLimited)!=null&&c.includes(zg.FeatureFlags))jt.warn("You have hit your feature flags quota limit, and will not be able to load feature flags until the quota is reset.  Please visit https://posthog.com/docs/billing/limits-alerts to learn more.");else{var d;s.disable_flags||this.receivedFeatureFlags((d=l.json)!==null&&d!==void 0?d:{},u),this.ni&&(this.ni=!1,this.di())}}})}}getFeatureFlag(t,e){if(e===void 0&&(e={}),this.ei||this.getFlags()&&this.getFlags().length>0){var s=this.getFlagVariants()[t],n=""+s,r=this._instance.get_property(_c)||void 0,o=this._instance.get_property(Js)||{};if((e.send_event||!("send_event"in e))&&(!(t in o)||!o[t].includes(n))){var a,l,c,h,u,d,f,p,g;K(o[t])?o[t].push(n):o[t]=[n],(a=this._instance.persistence)==null||a.register({[Js]:o});var m=this.getFeatureFlagDetails(t),_={$feature_flag:t,$feature_flag_response:s,$feature_flag_payload:this.getFeatureFlagPayload(t)||null,$feature_flag_request_id:r,$feature_flag_bootstrapped_response:((l=this._instance.config.bootstrap)==null||(l=l.featureFlags)==null?void 0:l[t])||null,$feature_flag_bootstrapped_payload:((c=this._instance.config.bootstrap)==null||(c=c.featureFlagPayloads)==null?void 0:c[t])||null,$used_bootstrap_value:!this.ai};P(m==null||(h=m.metadata)==null?void 0:h.version)||(_.$feature_flag_version=m.metadata.version);var v,y=(u=m==null||(d=m.reason)==null?void 0:d.description)!==null&&u!==void 0?u:m==null||(f=m.reason)==null?void 0:f.code;y&&(_.$feature_flag_reason=y),m!=null&&(p=m.metadata)!=null&&p.id&&(_.$feature_flag_id=m.metadata.id),P(m?.original_variant)&&P(m?.original_enabled)||(_.$feature_flag_original_response=P(m.original_variant)?m.original_enabled:m.original_variant),m!=null&&(g=m.metadata)!=null&&g.original_payload&&(_.$feature_flag_original_payload=m==null||(v=m.metadata)==null?void 0:v.original_payload),this._instance.capture("$feature_flag_called",_)}return s}jt.warn('getFeatureFlag for key "'+t+`" failed. Feature flags didn't load in time.`)}getFeatureFlagDetails(t){return this.getFlagsWithDetails()[t]}getFeatureFlagPayload(t){return this.getFlagPayloads()[t]}getRemoteConfigPayload(t,e){var s=this._instance.config.token,n={distinct_id:this._instance.get_distinct_id(),token:s};this.ui()&&(n.evaluation_environments=this.li()),this._instance.ci({method:"POST",url:this._instance.requestRouter.endpointFor("flags","/flags/?v=2&config=true"),data:n,compression:this._instance.config.disable_compression?void 0:re.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:r=>{var o,a=(o=r.json)==null?void 0:o.featureFlagPayloads;e(a?.[t]||void 0)}})}isFeatureEnabled(t,e){if(e===void 0&&(e={}),this.ei||this.getFlags()&&this.getFlags().length>0){var s=this.getFeatureFlag(t,e);return P(s)?void 0:!!s}jt.warn('isFeatureEnabled for key "'+t+`" failed. Feature flags didn't load in time.`)}addFeatureFlagsHandler(t){this.featureFlagEventHandlers.push(t)}removeFeatureFlagsHandler(t){this.featureFlagEventHandlers=this.featureFlagEventHandlers.filter(e=>e!==t)}receivedFeatureFlags(t,e){if(this._instance.persistence){this.ei=!0;var s=this.getFlagVariants(),n=this.getFlagPayloads(),r=this.getFlagsWithDetails();(function(o,a,l,c,h){l===void 0&&(l={}),c===void 0&&(c={}),h===void 0&&(h={});var u=Bg(o),d=u.flags,f=u.featureFlags,p=u.featureFlagPayloads;if(f){var g=o.requestId;if(K(f)){jt.warn("v1 of the feature flags endpoint is deprecated. Please use the latest version.");var m={};if(f)for(var _=0;_<f.length;_++)m[f[_]]=!0;a&&a.register({[Tr]:f,[si]:m})}else{var v=f,y=p,w=d;o.errorsWhileComputingFlags&&(v=T({},l,v),y=T({},c,y),w=T({},h,w)),a&&a.register(T({[Tr]:Object.keys(vc(v)),[si]:v||{},[mc]:y||{},[Jr]:w||{}},g?{[_c]:g}:{}))}}})(t,this._instance.persistence,s,n,r),this.pi(e)}}override(t,e){e===void 0&&(e=!1),jt.warn("override is deprecated. Please use overrideFeatureFlags instead."),this.overrideFeatureFlags({flags:t,suppressWarning:e})}overrideFeatureFlags(t){if(!this._instance.__loaded||!this._instance.persistence)return jt.uninitializedWarning("posthog.featureFlags.overrideFeatureFlags");if(t===!1)return this._instance.persistence.unregister(ti),this._instance.persistence.unregister(Wi),this.pi(),Hi.info("All overrides cleared");if(t&&typeof t=="object"&&("flags"in t||"payloads"in t)){var e,s=t;if(this.ii=!!((e=s.suppressWarning)!==null&&e!==void 0&&e),"flags"in s){if(s.flags===!1)this._instance.persistence.unregister(ti),Hi.info("Flag overrides cleared");else if(s.flags){if(K(s.flags)){for(var n={},r=0;r<s.flags.length;r++)n[s.flags[r]]=!0;this._instance.persistence.register({[ti]:n})}else this._instance.persistence.register({[ti]:s.flags});Hi.info("Flag overrides set",{flags:s.flags})}}return"payloads"in s&&(s.payloads===!1?(this._instance.persistence.unregister(Wi),Hi.info("Payload overrides cleared")):s.payloads&&(this._instance.persistence.register({[Wi]:s.payloads}),Hi.info("Payload overrides set",{payloads:s.payloads}))),void this.pi()}this.pi()}onFeatureFlags(t){if(this.addFeatureFlagsHandler(t),this.ei){var{flags:e,flagVariants:s}=this.gi();t(e,s)}return()=>this.removeFeatureFlagsHandler(t)}updateEarlyAccessFeatureEnrollment(t,e,s){var n,r=(this._instance.get_property(Yi)||[]).find(c=>c.flagKey===t),o={["$feature_enrollment/"+t]:e},a={$feature_flag:t,$feature_enrollment:e,$set:o};r&&(a.$early_access_feature_name=r.name),s&&(a.$feature_enrollment_stage=s),this._instance.capture("$feature_enrollment_update",a),this.setPersonPropertiesForFlags(o,!1);var l=T({},this.getFlagVariants(),{[t]:e});(n=this._instance.persistence)==null||n.register({[Tr]:Object.keys(vc(l)),[si]:l}),this.pi()}getEarlyAccessFeatures(t,e,s){e===void 0&&(e=!1);var n=this._instance.get_property(Yi),r=s?"&"+s.map(o=>"stage="+o).join("&"):"";if(n&&!e)return t(n);this._instance.ci({url:this._instance.requestRouter.endpointFor("api","/api/early_access_features/?token="+this._instance.config.token+r),method:"GET",callback:o=>{var a,l;if(o.json){var c=o.json.earlyAccessFeatures;return(a=this._instance.persistence)==null||a.unregister(Yi),(l=this._instance.persistence)==null||l.register({[Yi]:c}),t(c)}}})}gi(){var t=this.getFlags(),e=this.getFlagVariants();return{flags:t.filter(s=>e[s]),flagVariants:Object.keys(e).filter(s=>e[s]).reduce((s,n)=>(s[n]=e[n],s),{})}}pi(t){var{flags:e,flagVariants:s}=this.gi();this.featureFlagEventHandlers.forEach(n=>n(e,s,{errorsLoading:t}))}setPersonPropertiesForFlags(t,e){e===void 0&&(e=!0);var s=this._instance.get_property(Gi)||{};this._instance.register({[Gi]:T({},s,t)}),e&&this._instance.reloadFeatureFlags()}resetPersonPropertiesForFlags(){this._instance.unregister(Gi)}setGroupPropertiesForFlags(t,e){e===void 0&&(e=!0);var s=this._instance.get_property(We)||{};Object.keys(s).length!==0&&Object.keys(s).forEach(n=>{s[n]=T({},s[n],t[n]),delete t[n]}),this._instance.register({[We]:T({},s,t)}),e&&this._instance.reloadFeatureFlags()}resetGroupPropertiesForFlags(t){if(t){var e=this._instance.get_property(We)||{};this._instance.register({[We]:T({},e,{[t]:{}})})}else this._instance.unregister(We)}reset(){this.ei=!1,this.ri=!1,this.si=!1,this.ni=!1,this.oi=!1,this.ai=!1,this.$anon_distinct_id=void 0,this.vi(),this.ii=!1}},jg=["cookie","localstorage","localstorage+cookie","sessionstorage","memory"],Qi=class{constructor(t,e){this.F=t,this.props={},this.mi=!1,this.yi=(s=>{var n="";return s.token&&(n=s.token.replace(/\+/g,"PL").replace(/\//g,"SL").replace(/=/g,"EQ")),s.persistence_name?"ph_"+s.persistence_name:"ph_"+n+"_posthog"})(t),this.Y=this.bi(t),this.load(),t.debug&&C.info("Persistence loaded",t.persistence,T({},this.props)),this.update_config(t,t,e),this.save()}isDisabled(){return!!this.wi}bi(t){jg.indexOf(t.persistence.toLowerCase())===-1&&(C.critical("Unknown persistence type "+t.persistence+"; falling back to localStorage+cookie"),t.persistence="localStorage+cookie");var e=t.persistence.toLowerCase();return e==="localstorage"&&st.H()?st:e==="localstorage+cookie"&&zs.H()?zs:e==="sessionstorage"&&mt.H()?mt:e==="memory"?cg:e==="cookie"?qt:zs.H()?zs:qt}properties(){var t={};return X(this.props,function(e,s){if(s===si&&_t(e))for(var n=Object.keys(e),r=0;r<n.length;r++)t["$feature/"+n[r]]=e[n[r]];else a=s,l=!1,(oe(o=Up)?l:Il&&o.indexOf===Il?o.indexOf(a)!=-1:(X(o,function(c){if(l||(l=c===a))return Xs}),l))||(t[s]=e);var o,a,l}),t}load(){if(!this.wi){var t=this.Y.W(this.yi);t&&(this.props=lt({},t))}}save(){this.wi||this.Y.G(this.yi,this.props,this.xi,this.$i,this.Ei,this.F.debug)}remove(){this.Y.V(this.yi,!1),this.Y.V(this.yi,!0)}clear(){this.remove(),this.props={}}register_once(t,e,s){if(_t(t)){P(e)&&(e="None"),this.xi=P(s)?this.Si:s;var n=!1;if(X(t,(r,o)=>{this.props.hasOwnProperty(o)&&this.props[o]!==e||(this.props[o]=r,n=!0)}),n)return this.save(),!0}return!1}register(t,e){if(_t(t)){this.xi=P(e)?this.Si:e;var s=!1;if(X(t,(n,r)=>{t.hasOwnProperty(r)&&this.props[r]!==n&&(this.props[r]=n,s=!0)}),s)return this.save(),!0}return!1}unregister(t){t in this.props&&(delete this.props[t],this.save())}update_campaign_params(){if(!this.mi){var t=mh(this.F.custom_campaign_params,this.F.mask_personal_data_properties,this.F.custom_personal_data_properties);ii(Vo(t))||this.register(t),this.mi=!0}}update_search_keyword(){var t;this.register((t=E?.referrer)?vh(t):{})}update_referrer_info(){var t;this.register_once({$referrer:bh(),$referring_domain:E!=null&&E.referrer&&((t=sn(E.referrer))==null?void 0:t.host)||"$direct"},void 0)}set_initial_person_info(){this.props[eo]||this.props[io]||this.register_once({[Zs]:xh(this.F.mask_personal_data_properties,this.F.custom_personal_data_properties)},void 0)}get_initial_props(){var t={};X([io,eo],o=>{var a=this.props[o];a&&X(a,function(l,c){t["$initial_"+Rr(c)]=l})});var e,s,n=this.props[Zs];if(n){var r=(e=yh(n),s={},X(e,function(o,a){s["$initial_"+Rr(a)]=o}),s);lt(t,r)}return t}safe_merge(t){return X(this.props,function(e,s){s in t||(t[s]=e)}),t}update_config(t,e,s){if(this.Si=this.xi=t.cookie_expiration,this.set_disabled(t.disable_persistence||!!s),this.set_cross_subdomain(t.cross_subdomain_cookie),this.set_secure(t.secure_cookie),t.persistence!==e.persistence){var n=this.bi(t),r=this.props;this.clear(),this.Y=n,this.props=r,this.save()}}set_disabled(t){this.wi=t,this.wi?this.remove():this.save()}set_cross_subdomain(t){t!==this.$i&&(this.$i=t,this.remove(),this.save())}set_secure(t){t!==this.Ei&&(this.Ei=t,this.remove(),this.save())}set_event_timer(t,e){var s=this.props[qi]||{};s[t]=e,this.props[qi]=s,this.save()}remove_event_timer(t){var e=(this.props[qi]||{})[t];return P(e)||(delete this.props[qi][t],this.save()),e}get_property(t){return this.props[t]}set_property(t,e){this.props[t]=e,this.save()}},Uw=(function(i){return i.Button="button",i.Tab="tab",i.Selector="selector",i})({}),qw=(function(i){return i.TopLeft="top_left",i.TopRight="top_right",i.TopCenter="top_center",i.MiddleLeft="middle_left",i.MiddleRight="middle_right",i.MiddleCenter="middle_center",i.Left="left",i.Center="center",i.Right="right",i.NextToTrigger="next_to_trigger",i})({}),Yw=(function(i){return i.Top="top",i.Left="left",i.Right="right",i.Bottom="bottom",i})({}),Ar=(function(i){return i.Popover="popover",i.API="api",i.Widget="widget",i.ExternalSurvey="external_survey",i})({}),Gw=(function(i){return i.Open="open",i.MultipleChoice="multiple_choice",i.SingleChoice="single_choice",i.Rating="rating",i.Link="link",i})({}),Xw=(function(i){return i.NextQuestion="next_question",i.End="end",i.ResponseBased="response_based",i.SpecificQuestion="specific_question",i})({}),Kw=(function(i){return i.Once="once",i.Recurring="recurring",i.Always="always",i})({}),Ys=(function(i){return i.SHOWN="survey shown",i.DISMISSED="survey dismissed",i.SENT="survey sent",i})({}),bc=(function(i){return i.SURVEY_ID="$survey_id",i.SURVEY_NAME="$survey_name",i.SURVEY_RESPONSE="$survey_response",i.SURVEY_ITERATION="$survey_iteration",i.SURVEY_ITERATION_START_DATE="$survey_iteration_start_date",i.SURVEY_PARTIALLY_COMPLETED="$survey_partially_completed",i.SURVEY_SUBMISSION_ID="$survey_submission_id",i.SURVEY_QUESTIONS="$survey_questions",i.SURVEY_COMPLETED="$survey_completed",i})({}),Ch=(function(i){return i.Popover="popover",i.Inline="inline",i})({}),os=class{constructor(){this.ki={},this.ki={}}on(t,e){return this.ki[t]||(this.ki[t]=[]),this.ki[t].push(e),()=>{this.ki[t]=this.ki[t].filter(s=>s!==e)}}emit(t,e){for(var s of this.ki[t]||[])s(e);for(var n of this.ki["*"]||[])n(t,e)}},Eo=class i{constructor(t){this.Pi=new os,this.Ti=(e,s)=>this.Ii(e,s)&&this.Ri(e,s)&&this.Fi(e,s),this.Ii=(e,s)=>s==null||!s.event||e?.event===s?.event,this._instance=t,this.Ci=new Set,this.Oi=new Set}init(){var t;if(!P((t=this._instance)==null?void 0:t.Mi)){var e;(e=this._instance)==null||e.Mi((s,n)=>{this.on(s,n)})}}register(t){var e,s;if(!P((e=this._instance)==null?void 0:e.Mi)&&(t.forEach(o=>{var a,l;(a=this.Oi)==null||a.add(o),(l=o.steps)==null||l.forEach(c=>{var h;(h=this.Ci)==null||h.add(c?.event||"")})}),(s=this._instance)!=null&&s.autocapture)){var n,r=new Set;t.forEach(o=>{var a;(a=o.steps)==null||a.forEach(l=>{l!=null&&l.selector&&r.add(l?.selector)})}),(n=this._instance)==null||n.autocapture.setElementSelectors(r)}}on(t,e){var s;e!=null&&t.length!=0&&(this.Ci.has(t)||this.Ci.has(e?.event))&&this.Oi&&((s=this.Oi)==null?void 0:s.size)>0&&this.Oi.forEach(n=>{this.Ai(e,n)&&this.Pi.emit("actionCaptured",n.name)})}Di(t){this.onAction("actionCaptured",e=>t(e))}Ai(t,e){if(e?.steps==null)return!1;for(var s of e.steps)if(this.Ti(t,s))return!0;return!1}onAction(t,e){return this.Pi.on(t,e)}Ri(t,e){if(e!=null&&e.url){var s,n=t==null||(s=t.properties)==null?void 0:s.$current_url;if(!n||typeof n!="string"||!i.ji(n,e?.url,e?.url_matching||"contains"))return!1}return!0}static ji(t,e,s){switch(s){case"regex":return!!b&&ci(t,e);case"exact":return e===t;case"contains":var n=i.Li(e).replace(/_/g,".").replace(/%/g,".*");return ci(t,n);default:return!1}}static Li(t){return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}Fi(t,e){if((e!=null&&e.href||e!=null&&e.tag_name||e!=null&&e.text)&&!this.Ni(t).some(r=>!(e!=null&&e.href&&!i.ji(r.href||"",e?.href,e?.href_matching||"exact"))&&(e==null||!e.tag_name||r.tag_name===e?.tag_name)&&!(e!=null&&e.text&&!i.ji(r.text||"",e?.text,e?.text_matching||"exact")&&!i.ji(r.$el_text||"",e?.text,e?.text_matching||"exact"))))return!1;if(e!=null&&e.selector){var s,n=t==null||(s=t.properties)==null?void 0:s.$element_selectors;if(!n||!n.includes(e?.selector))return!1}return!0}Ni(t){return t?.properties.$elements==null?[]:t?.properties.$elements}},V=ft("[Surveys]"),Co="seenSurvey_",Hg=(i,t)=>{var e="$survey_"+t+"/"+i.id;return i.current_iteration&&i.current_iteration>0&&(e="$survey_"+t+"/"+i.id+"/"+i.current_iteration),e},xc=i=>{var t=""+Co+i.id;return i.current_iteration&&i.current_iteration>0&&(t=""+Co+i.id+"_"+i.current_iteration),t},Wg=[Ar.Popover,Ar.Widget,Ar.API],Vg={ignoreConditions:!1,ignoreDelay:!1,displayType:Ch.Popover},Oo=class{constructor(t){this._instance=t,this.Ui=new Map,this.zi=new Map}register(t){var e;P((e=this._instance)==null?void 0:e.Mi)||(this.Hi(t),this.Bi(t))}Bi(t){var e=t.filter(s=>{var n,r;return((n=s.conditions)==null?void 0:n.actions)&&((r=s.conditions)==null||(r=r.actions)==null||(r=r.values)==null?void 0:r.length)>0});e.length!==0&&(this.qi==null&&(this.qi=new Eo(this._instance),this.qi.init(),this.qi.Di(s=>{this.onAction(s)})),e.forEach(s=>{var n,r,o,a,l;s.conditions&&(n=s.conditions)!=null&&n.actions&&(r=s.conditions)!=null&&(r=r.actions)!=null&&r.values&&((o=s.conditions)==null||(o=o.actions)==null||(o=o.values)==null?void 0:o.length)>0&&((a=this.qi)==null||a.register(s.conditions.actions.values),(l=s.conditions)==null||(l=l.actions)==null||(l=l.values)==null||l.forEach(c=>{if(c&&c.name){var h=this.zi.get(c.name);h&&h.push(s.id),this.zi.set(c.name,h||[s.id])}}))}))}Hi(t){var e;t.filter(s=>{var n,r;return((n=s.conditions)==null?void 0:n.events)&&((r=s.conditions)==null||(r=r.events)==null||(r=r.values)==null?void 0:r.length)>0}).length!==0&&((e=this._instance)==null||e.Mi((s,n)=>{this.onEvent(s,n)}),t.forEach(s=>{var n;(n=s.conditions)==null||(n=n.events)==null||(n=n.values)==null||n.forEach(r=>{if(r&&r.name){var o=this.Ui.get(r.name);o&&o.push(s.id),this.Ui.set(r.name,o||[s.id])}})}))}onEvent(t,e){var s,n,r=((s=this._instance)==null||(s=s.persistence)==null?void 0:s.props[Bs])||[];if(Ys.SHOWN===t&&e&&r.length>0){var o;V.info("survey event matched, removing survey from activated surveys",{event:t,eventPayload:e,existingActivatedSurveys:r});var a=e==null||(o=e.properties)==null?void 0:o.$survey_id;if(a){var l=r.indexOf(a);l>=0&&(r.splice(l,1),this.Wi(r))}}else if(this.Ui.has(t)){V.info("survey event name matched",{event:t,eventPayload:e,surveys:this.Ui.get(t)});var c=[];(n=this._instance)==null||n.getSurveys(u=>{c=u.filter(d=>{var f;return(f=this.Ui.get(t))==null?void 0:f.includes(d.id)})});var h=c.filter(u=>{var d,f=(d=u.conditions)==null||(d=d.events)==null||(d=d.values)==null?void 0:d.find(p=>p.name===t);return!!f&&(!f.propertyFilters||Object.entries(f.propertyFilters).every(p=>{var g,[m,_]=p,v=e==null||(g=e.properties)==null?void 0:g[m];if(P(v)||oe(v))return!1;var y=[String(v)],w=Eh[_.operator];return w?w(_.values,y):(V.warn("Unknown property comparison operator: "+_.operator),!1)}))});this.Wi(r.concat(h.map(u=>u.id)||[]))}}onAction(t){var e,s=((e=this._instance)==null||(e=e.persistence)==null?void 0:e.props[Bs])||[];this.zi.has(t)&&this.Wi(s.concat(this.zi.get(t)||[]))}Wi(t){var e;V.info("updating activated surveys",{activatedSurveys:t}),(e=this._instance)==null||(e=e.persistence)==null||e.register({[Bs]:[...new Set(t)]})}getSurveys(){var t,e=(t=this._instance)==null||(t=t.persistence)==null?void 0:t.props[Bs];return e||[]}getEventToSurveys(){return this.Ui}Gi(){return this.qi}},To=class{constructor(t){this.Vi=void 0,this._surveyManager=null,this.Ji=!1,this.Ki=!1,this.Yi=[],this._instance=t,this._surveyEventReceiver=null}onRemoteConfig(t){if(!this._instance.config.disable_surveys){var e=t.surveys;if(tt(e))return V.warn("Flags not loaded yet. Not loading surveys.");var s=K(e);this.Vi=s?e.length>0:e,V.info("flags response received, isSurveysEnabled: "+this.Vi),this.loadIfEnabled()}}reset(){localStorage.removeItem("lastSeenSurveyDate");for(var t=[],e=0;e<localStorage.length;e++){var s=localStorage.key(e);(s!=null&&s.startsWith(Co)||s!=null&&s.startsWith("inProgressSurvey_"))&&t.push(s)}t.forEach(n=>localStorage.removeItem(n))}loadIfEnabled(){if(!this._surveyManager)if(this.Ki)V.info("Already initializing surveys, skipping...");else if(this._instance.config.disable_surveys)V.info("Disabled. Not loading surveys.");else if(this._instance.config.cookieless_mode&&this._instance.consent.isOptedOut())V.info("Not loading surveys in cookieless mode without consent.");else{var t=F?.__PosthogExtensions__;if(t){if(!P(this.Vi)||this._instance.config.advanced_enable_surveys){var e=this.Vi||this._instance.config.advanced_enable_surveys;this.Ki=!0;try{var s=t.generateSurveys;if(s)return void this.Xi(s,e);var n=t.loadExternalDependency;if(!n)return void this.Qi("PostHog loadExternalDependency extension not found.");n(this._instance,"surveys",r=>{r||!t.generateSurveys?this.Qi("Could not load surveys script",r):this.Xi(t.generateSurveys,e)})}catch(r){throw this.Qi("Error initializing surveys",r),r}finally{this.Ki=!1}}}else V.error("PostHog Extensions not found.")}}Xi(t,e){this._surveyManager=t(this._instance,e),this._surveyEventReceiver=new Oo(this._instance),V.info("Surveys loaded successfully"),this.Zi({isLoaded:!0})}Qi(t,e){V.error(t,e),this.Zi({isLoaded:!1,error:t})}onSurveysLoaded(t){return this.Yi.push(t),this._surveyManager&&this.Zi({isLoaded:!0}),()=>{this.Yi=this.Yi.filter(e=>e!==t)}}getSurveys(t,e){if(e===void 0&&(e=!1),this._instance.config.disable_surveys)return V.info("Disabled. Not loading surveys."),t([]);var s=this._instance.get_property(Zr);if(s&&!e)return t(s,{isLoaded:!0});if(this.Ji)return t([],{isLoaded:!1,error:"Surveys are already being loaded"});try{this.Ji=!0,this._instance.ci({url:this._instance.requestRouter.endpointFor("api","/api/surveys/?token="+this._instance.config.token),method:"GET",timeout:this._instance.config.surveys_request_timeout_ms,callback:n=>{var r;this.Ji=!1;var o=n.statusCode;if(o!==200||!n.json){var a="Surveys API could not be loaded, status: "+o;return V.error(a),t([],{isLoaded:!1,error:a})}var l,c=n.json.surveys||[],h=c.filter(u=>(function(d){return!(!d.start_date||d.end_date)})(u)&&((function(d){var f;return!((f=d.conditions)==null||(f=f.events)==null||(f=f.values)==null||!f.length)})(u)||(function(d){var f;return!((f=d.conditions)==null||(f=f.actions)==null||(f=f.values)==null||!f.length)})(u)));return h.length>0&&((l=this._surveyEventReceiver)==null||l.register(h)),(r=this._instance.persistence)==null||r.register({[Zr]:c}),t(c,{isLoaded:!0})}})}catch(n){throw this.Ji=!1,n}}Zi(t){for(var e of this.Yi)try{if(!t.isLoaded)return e([],t);this.getSurveys(e)}catch(s){V.error("Error in survey callback",s)}}getActiveMatchingSurveys(t,e){if(e===void 0&&(e=!1),!tt(this._surveyManager))return this._surveyManager.getActiveMatchingSurveys(t,e);V.warn("init was not called")}te(t){var e=null;return this.getSurveys(s=>{var n;e=(n=s.find(r=>r.id===t))!==null&&n!==void 0?n:null}),e}ie(t){if(tt(this._surveyManager))return{eligible:!1,reason:"SDK is not enabled or survey functionality is not yet loaded"};var e=typeof t=="string"?this.te(t):t;return e?this._surveyManager.checkSurveyEligibility(e):{eligible:!1,reason:"Survey not found"}}canRenderSurvey(t){if(tt(this._surveyManager))return V.warn("init was not called"),{visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"};var e=this.ie(t);return{visible:e.eligible,disabledReason:e.reason}}canRenderSurveyAsync(t,e){return tt(this._surveyManager)?(V.warn("init was not called"),Promise.resolve({visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"})):new Promise(s=>{this.getSurveys(n=>{var r,o=(r=n.find(l=>l.id===t))!==null&&r!==void 0?r:null;if(o){var a=this.ie(o);s({visible:a.eligible,disabledReason:a.reason})}else s({visible:!1,disabledReason:"Survey not found"})},e)})}renderSurvey(t,e){var s;if(tt(this._surveyManager))V.warn("init was not called");else{var n=typeof t=="string"?this.te(t):t;if(n!=null&&n.id)if(Wg.includes(n.type)){var r=E?.querySelector(e);if(r)return(s=n.appearance)!=null&&s.surveyPopupDelaySeconds?(V.info("Rendering survey "+n.id+" with delay of "+n.appearance.surveyPopupDelaySeconds+" seconds"),void setTimeout(()=>{var o,a;V.info("Rendering survey "+n.id+" with delay of "+((o=n.appearance)==null?void 0:o.surveyPopupDelaySeconds)+" seconds"),(a=this._surveyManager)==null||a.renderSurvey(n,r),V.info("Survey "+n.id+" rendered")},1e3*n.appearance.surveyPopupDelaySeconds)):void this._surveyManager.renderSurvey(n,r);V.warn("Survey element not found")}else V.warn("Surveys of type "+n.type+" cannot be rendered in the app");else V.warn("Survey not found")}}displaySurvey(t,e){var s;if(tt(this._surveyManager))V.warn("init was not called");else{var n=this.te(t);if(n){var r=n;if((s=n.appearance)!=null&&s.surveyPopupDelaySeconds&&e.ignoreDelay&&(r=T({},n,{appearance:T({},n.appearance,{surveyPopupDelaySeconds:0})})),e.ignoreConditions===!1){var o=this.canRenderSurvey(n);if(!o.visible)return void V.warn("Survey is not eligible to be displayed: ",o.disabledReason)}e.displayType!==Ch.Inline?this._surveyManager.handlePopoverSurvey(r):this.renderSurvey(r,e.selector)}else V.warn("Survey not found")}}},yc=ft("[RateLimiter]"),Ao=class{constructor(t){var e,s;this.serverLimits={},this.lastEventRateLimited=!1,this.checkForLimiting=n=>{var r=n.text;if(r&&r.length)try{(JSON.parse(r).quota_limited||[]).forEach(o=>{yc.info((o||"events")+" is quota limited."),this.serverLimits[o]=new Date().getTime()+6e4})}catch(o){return void yc.warn('could not rate limit - continuing. Error: "'+o?.message+'"',{text:r})}},this.instance=t,this.captureEventsPerSecond=((e=t.config.rate_limiting)==null?void 0:e.events_per_second)||10,this.captureEventsBurstLimit=Math.max(((s=t.config.rate_limiting)==null?void 0:s.events_burst_limit)||10*this.captureEventsPerSecond,this.captureEventsPerSecond),this.lastEventRateLimited=this.clientRateLimitContext(!0).isRateLimited}clientRateLimitContext(t){var e,s,n;t===void 0&&(t=!1);var r=new Date().getTime(),o=(e=(s=this.instance.persistence)==null?void 0:s.get_property(to))!==null&&e!==void 0?e:{tokens:this.captureEventsBurstLimit,last:r};o.tokens+=(r-o.last)/1e3*this.captureEventsPerSecond,o.last=r,o.tokens>this.captureEventsBurstLimit&&(o.tokens=this.captureEventsBurstLimit);var a=o.tokens<1;return a||t||(o.tokens=Math.max(0,o.tokens-1)),!a||this.lastEventRateLimited||t||this.instance.capture("$$client_ingestion_warning",{$$client_ingestion_warning_message:"posthog-js client rate limited. Config is set to "+this.captureEventsPerSecond+" events per second and "+this.captureEventsBurstLimit+" events burst limit."},{skip_client_rate_limiting:!0}),this.lastEventRateLimited=a,(n=this.instance.persistence)==null||n.set_property(to,o),{isRateLimited:a,remainingTokens:o.tokens}}isServerRateLimited(t){var e=this.serverLimits[t||"events"]||!1;return e!==!1&&new Date().getTime()<e}},He=ft("[RemoteConfig]"),Do=class{constructor(t){this._instance=t}get remoteConfig(){var t;return(t=F._POSTHOG_REMOTE_CONFIG)==null||(t=t[this._instance.config.token])==null?void 0:t.config}ee(t){var e,s;(e=F.__PosthogExtensions__)!=null&&e.loadExternalDependency?(s=F.__PosthogExtensions__)==null||s.loadExternalDependency==null||s.loadExternalDependency(this._instance,"remote-config",()=>t(this.remoteConfig)):(He.error("PostHog Extensions not found. Cannot load remote config."),t())}re(t){this._instance.ci({method:"GET",url:this._instance.requestRouter.endpointFor("assets","/array/"+this._instance.config.token+"/config"),callback:e=>{t(e.json)}})}load(){try{if(this.remoteConfig)return He.info("Using preloaded remote config",this.remoteConfig),void this.fi(this.remoteConfig);if(this._instance.M())return void He.warn("Remote config is disabled. Falling back to local config.");this.ee(t=>{if(!t)return He.info("No config found after loading remote JS config. Falling back to JSON."),void this.re(e=>{this.fi(e)});this.fi(t)})}catch(t){He.error("Error loading remote config",t)}}fi(t){t?this._instance.config.__preview_remote_config?(this._instance.fi(t),t.hasFeatureFlags!==!1&&this._instance.featureFlags.ensureFlagsLoaded()):He.info("__preview_remote_config is disabled. Logging config instead",t):He.error("Failed to fetch remote config from PostHog.")}},Io=3e3,Fo=class{constructor(t,e){this.se=!0,this.ne=[],this.oe=Vt(e?.flush_interval_ms||Io,250,5e3,C.createLogger("flush interval"),Io),this.ae=t}enqueue(t){this.ne.push(t),this.le||this.ue()}unload(){this.he();var t=this.ne.length>0?this.de():{},e=Object.values(t);[...e.filter(s=>s.url.indexOf("/e")===0),...e.filter(s=>s.url.indexOf("/e")!==0)].map(s=>{this.ae(T({},s,{transport:"sendBeacon"}))})}enable(){this.se=!1,this.ue()}ue(){var t=this;this.se||(this.le=setTimeout(()=>{if(this.he(),this.ne.length>0){var e=this.de(),s=function(){var r=e[n],o=new Date().getTime();r.data&&K(r.data)&&X(r.data,a=>{a.offset=Math.abs(a.timestamp-o),delete a.timestamp}),t.ae(r)};for(var n in e)s()}},this.oe))}he(){clearTimeout(this.le),this.le=void 0}de(){var t={};return X(this.ne,e=>{var s,n=e,r=(n?n.batchKey:null)||n.url;P(t[r])&&(t[r]=T({},n,{data:[]})),(s=t[r].data)==null||s.push(n.data)}),this.ne=[],t}},Ug=["retriesPerformedSoFar"],Ro=class{constructor(t){this.ve=!1,this.ce=3e3,this.ne=[],this._instance=t,this.ne=[],this.fe=!0,!P(b)&&"onLine"in b.navigator&&(this.fe=b.navigator.onLine,this.pe=()=>{this.fe=!0,this.Dt()},this.ge=()=>{this.fe=!1},ct(b,"online",this.pe),ct(b,"offline",this.ge))}get length(){return this.ne.length}retriableRequest(t){var{retriesPerformedSoFar:e}=t,s=Ec(t,Ug);Yt(e)&&e>0&&(s.url=hn(s.url,{retry_count:e})),this._instance.ci(T({},s,{callback:n=>{n.statusCode!==200&&(n.statusCode<400||n.statusCode>=500)&&(e??0)<10?this._e(T({retriesPerformedSoFar:e},s)):s.callback==null||s.callback(n)}}))}_e(t){var e=t.retriesPerformedSoFar||0;t.retriesPerformedSoFar=e+1;var s=(function(o){var a=3e3*Math.pow(2,o),l=a/2,c=Math.min(18e5,a),h=(Math.random()-.5)*(c-l);return Math.ceil(c+h)})(e),n=Date.now()+s;this.ne.push({retryAt:n,requestOptions:t});var r="Enqueued failed request for retry in "+s;navigator.onLine||(r+=" (Browser is offline)"),C.warn(r),this.ve||(this.ve=!0,this.me())}me(){if(this.ye&&clearTimeout(this.ye),this.ne.length===0)return this.ve=!1,void(this.ye=void 0);this.ye=setTimeout(()=>{this.fe&&this.ne.length>0&&this.Dt(),this.me()},this.ce)}Dt(){var t=Date.now(),e=[],s=this.ne.filter(r=>r.retryAt<t||(e.push(r),!1));if(this.ne=e,s.length>0)for(var{requestOptions:n}of s)this.retriableRequest(n)}unload(){for(var{requestOptions:t}of(this.ye&&(clearTimeout(this.ye),this.ye=void 0),this.ve=!1,P(b)||(this.pe&&(b.removeEventListener("online",this.pe),this.pe=void 0),this.ge&&(b.removeEventListener("offline",this.ge),this.ge=void 0)),this.ne))try{this._instance.ci(T({},t,{transport:"sendBeacon"}))}catch(e){C.error(e)}this.ne=[]}},Lo=class{constructor(t){this.be=()=>{var e,s,n,r;this.we||(this.we={});var o=this.scrollElement(),a=this.scrollY(),l=o?Math.max(0,o.scrollHeight-o.clientHeight):0,c=a+(o?.clientHeight||0),h=o?.scrollHeight||0;this.we.lastScrollY=Math.ceil(a),this.we.maxScrollY=Math.max(a,(e=this.we.maxScrollY)!==null&&e!==void 0?e:0),this.we.maxScrollHeight=Math.max(l,(s=this.we.maxScrollHeight)!==null&&s!==void 0?s:0),this.we.lastContentY=c,this.we.maxContentY=Math.max(c,(n=this.we.maxContentY)!==null&&n!==void 0?n:0),this.we.maxContentHeight=Math.max(h,(r=this.we.maxContentHeight)!==null&&r!==void 0?r:0)},this._instance=t}getContext(){return this.we}resetContext(){var t=this.we;return setTimeout(this.be,0),t}startMeasuringScrollPosition(){ct(b,"scroll",this.be,{capture:!0}),ct(b,"scrollend",this.be,{capture:!0}),ct(b,"resize",this.be)}scrollElement(){if(!this._instance.config.scroll_root_selector)return b?.document.documentElement;var t=K(this._instance.config.scroll_root_selector)?this._instance.config.scroll_root_selector:[this._instance.config.scroll_root_selector];for(var e of t){var s=b?.document.querySelector(e);if(s)return s}}scrollY(){if(this._instance.config.scroll_root_selector){var t=this.scrollElement();return t&&t.scrollTop||0}return b&&(b.scrollY||b.pageYOffset||b.document.documentElement.scrollTop)||0}scrollX(){if(this._instance.config.scroll_root_selector){var t=this.scrollElement();return t&&t.scrollLeft||0}return b&&(b.scrollX||b.pageXOffset||b.document.documentElement.scrollLeft)||0}},qg=i=>xh(i?.config.mask_personal_data_properties,i?.config.custom_personal_data_properties),un=class{constructor(t,e,s,n){this.xe=r=>{var o=this.$e();if(!o||o.sessionId!==r){var a={sessionId:r,props:this.Ee(this._instance)};this.Se.register({[Qr]:a})}},this._instance=t,this.ke=e,this.Se=s,this.Ee=n||qg,this.ke.onSessionId(this.xe)}$e(){return this.Se.props[Qr]}getSetOnceProps(){var t,e=(t=this.$e())==null?void 0:t.props;return e?"r"in e?yh(e):{$referring_domain:e.referringDomain,$pathname:e.initialPathName,utm_source:e.utm_source,utm_campaign:e.utm_campaign,utm_medium:e.utm_medium,utm_content:e.utm_content,utm_term:e.utm_term}:{}}getSessionProps(){var t={};return X(Vo(this.getSetOnceProps()),(e,s)=>{s==="$current_url"&&(s="url"),t["$session_entry_"+Rr(s)]=e}),t}},Dr=ft("[SessionId]"),dn=class{on(t,e){return this.Pe.on(t,e)}constructor(t,e,s){var n;if(this.Te=[],this.Ie=void 0,this.Pe=new os,this.Re=(h,u)=>Math.abs(h-u)>this.sessionTimeoutMs,!t.persistence)throw new Error("SessionIdManager requires a PostHogPersistence instance");if(t.config.cookieless_mode==="always")throw new Error('SessionIdManager cannot be used with cookieless_mode="always"');this.F=t.config,this.Se=t.persistence,this.Fe=void 0,this.Ce=void 0,this._sessionStartTimestamp=null,this._sessionActivityTimestamp=null,this.Oe=e||xe,this.Me=s||xe;var r=this.F.persistence_name||this.F.token,o=this.F.session_idle_timeout_seconds||1800;if(this._sessionTimeoutMs=1e3*Vt(o,60,36e3,Dr.createLogger("session_idle_timeout_seconds"),1800),t.register({$configured_session_timeout_ms:this._sessionTimeoutMs}),this.Ae(),this.De="ph_"+r+"_window_id",this.je="ph_"+r+"_primary_window_exists",this.Le()){var a=mt.W(this.De),l=mt.W(this.je);a&&!l?this.Fe=a:mt.V(this.De),mt.G(this.je,!0)}if((n=this.F.bootstrap)!=null&&n.sessionID)try{var c=(h=>{var u=h.replace(/-/g,"");if(u.length!==32)throw new Error("Not a valid UUID");if(u[12]!=="7")throw new Error("Not a UUIDv7");return parseInt(u.substring(0,12),16)})(this.F.bootstrap.sessionID);this.Ne(this.F.bootstrap.sessionID,new Date().getTime(),c)}catch(h){Dr.error("Invalid sessionID in bootstrap",h)}this.Ue()}get sessionTimeoutMs(){return this._sessionTimeoutMs}onSessionId(t){return P(this.Te)&&(this.Te=[]),this.Te.push(t),this.Ce&&t(this.Ce,this.Fe),()=>{this.Te=this.Te.filter(e=>e!==t)}}Le(){return this.F.persistence!=="memory"&&!this.Se.wi&&mt.H()}ze(t){t!==this.Fe&&(this.Fe=t,this.Le()&&mt.G(this.De,t))}He(){return this.Fe?this.Fe:this.Le()?mt.W(this.De):null}Ne(t,e,s){t===this.Ce&&e===this._sessionActivityTimestamp&&s===this._sessionStartTimestamp||(this._sessionStartTimestamp=s,this._sessionActivityTimestamp=e,this.Ce=t,this.Se.register({[Ks]:[e,t,s]}))}Be(){if(this.Ce&&this._sessionActivityTimestamp&&this._sessionStartTimestamp)return[this._sessionActivityTimestamp,this.Ce,this._sessionStartTimestamp];var t=this.Se.props[Ks];return K(t)&&t.length===2&&t.push(t[0]),t||[0,null,0]}resetSessionId(){this.Ne(null,null,null)}destroy(){clearTimeout(this.qe),this.qe=void 0,this.Ie&&b&&(b.removeEventListener("beforeunload",this.Ie,{capture:!1}),this.Ie=void 0),this.Te=[]}Ue(){this.Ie=()=>{this.Le()&&mt.V(this.je)},ct(b,"beforeunload",this.Ie,{capture:!1})}checkAndGetSessionAndWindowId(t,e){if(t===void 0&&(t=!1),e===void 0&&(e=null),this.F.cookieless_mode==="always")throw new Error('checkAndGetSessionAndWindowId should not be called with cookieless_mode="always"');var s=e||new Date().getTime(),[n,r,o]=this.Be(),a=this.He(),l=Yt(o)&&o>0&&Math.abs(s-o)>864e5,c=!1,h=!r,u=!h&&!t&&this.Re(s,n);h||u||l?(r=this.Oe(),a=this.Me(),Dr.info("new session ID generated",{sessionId:r,windowId:a,changeReason:{noSessionId:h,activityTimeout:u,sessionPastMaximumLength:l}}),o=s,c=!0):a||(a=this.Me(),c=!0);var d=n===0||!t||l?s:n,f=o===0?new Date().getTime():o;return this.ze(a),this.Ne(r,d,f),t||this.Ae(),c&&this.Te.forEach(p=>p(r,a,c?{noSessionId:h,activityTimeout:u,sessionPastMaximumLength:l}:void 0)),{sessionId:r,windowId:a,sessionStartTimestamp:f,changeReason:c?{noSessionId:h,activityTimeout:u,sessionPastMaximumLength:l}:void 0,lastActivityTimestamp:n}}Ae(){clearTimeout(this.qe),this.qe=setTimeout(()=>{var[t]=this.Be();if(this.Re(new Date().getTime(),t)){var e=this.Ce;this.resetSessionId(),this.Pe.emit("forcedIdleReset",{idleSessionId:e})}},1.1*this.sessionTimeoutMs)}},Yg=["$set_once","$set"],ve=ft("[SiteApps]"),No=class{constructor(t){this._instance=t,this.We=[],this.apps={}}get isEnabled(){return!!this._instance.config.opt_in_site_apps}Ge(t,e){if(e){var s=this.globalsForEvent(e);this.We.push(s),this.We.length>1e3&&(this.We=this.We.slice(10))}}get siteAppLoaders(){var t;return(t=F._POSTHOG_REMOTE_CONFIG)==null||(t=t[this._instance.config.token])==null?void 0:t.siteApps}init(){if(this.isEnabled){var t=this._instance.Mi(this.Ge.bind(this));this.Ve=()=>{t(),this.We=[],this.Ve=void 0}}}globalsForEvent(t){var e,s,n,r,o,a,l;if(!t)throw new Error("Event payload is required");var c={},h=this._instance.get_property("$groups")||[],u=this._instance.get_property("$stored_group_properties")||{};for(var[d,f]of Object.entries(u))c[d]={id:h[d],type:d,properties:f};var{$set_once:p,$set:g}=t;return{event:T({},Ec(t,Yg),{properties:T({},t.properties,g?{$set:T({},(e=(s=t.properties)==null?void 0:s.$set)!==null&&e!==void 0?e:{},g)}:{},p?{$set_once:T({},(n=(r=t.properties)==null?void 0:r.$set_once)!==null&&n!==void 0?n:{},p)}:{}),elements_chain:(o=(a=t.properties)==null?void 0:a.$elements_chain)!==null&&o!==void 0?o:"",distinct_id:(l=t.properties)==null?void 0:l.distinct_id}),person:{properties:this._instance.get_property("$stored_person_properties")},groups:c}}setupSiteApp(t){var e=this.apps[t.id],s=()=>{var a;!e.errored&&this.We.length&&(ve.info("Processing "+this.We.length+" events for site app with id "+t.id),this.We.forEach(l=>e.processEvent==null?void 0:e.processEvent(l)),e.processedBuffer=!0),Object.values(this.apps).every(l=>l.processedBuffer||l.errored)&&((a=this.Ve)==null||a.call(this))},n=!1,r=a=>{e.errored=!a,e.loaded=!0,ve.info("Site app with id "+t.id+" "+(a?"loaded":"errored")),n&&s()};try{var{processEvent:o}=t.init({posthog:this._instance,callback:a=>{r(a)}});o&&(e.processEvent=o),n=!0}catch(a){ve.error("Error while initializing PostHog app with config id "+t.id,a),r(!1)}if(n&&e.loaded)try{s()}catch(a){ve.error("Error while processing buffered events PostHog app with config id "+t.id,a),e.errored=!0}}Je(){var t=this.siteAppLoaders||[];for(var e of t)this.apps[e.id]={id:e.id,loaded:!1,errored:!1,processedBuffer:!1};for(var s of t)this.setupSiteApp(s)}Ke(t){if(Object.keys(this.apps).length!==0){var e=this.globalsForEvent(t);for(var s of Object.values(this.apps))try{s.processEvent==null||s.processEvent(e)}catch(n){ve.error("Error while processing event "+t.event+" for site app "+s.id,n)}}}onRemoteConfig(t){var e,s,n,r=this;if((e=this.siteAppLoaders)!=null&&e.length)return this.isEnabled?(this.Je(),void this._instance.on("eventCaptured",c=>this.Ke(c))):void ve.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.');if((s=this.Ve)==null||s.call(this),(n=t.siteApps)!=null&&n.length)if(this.isEnabled){var o=function(c){var h;F["__$$ph_site_app_"+c]=r._instance,(h=F.__PosthogExtensions__)==null||h.loadSiteApp==null||h.loadSiteApp(r._instance,l,u=>{if(u)return ve.error("Error while initializing PostHog app with config id "+c,u)})};for(var{id:a,url:l}of t.siteApps)o(a)}else ve.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.')}},Oh=function(i,t){if(!i)return!1;var e=i.userAgent;if(e&&Nl(e,t))return!0;try{var s=i?.userAgentData;if(s!=null&&s.brands&&s.brands.some(n=>Nl(n?.brand,t)))return!0}catch{}return!!i.webdriver},Ji=(function(i){return i.US="us",i.EU="eu",i.CUSTOM="custom",i})({}),wc="i.posthog.com",$o=class{constructor(t){this.Ye={},this.instance=t}get apiHost(){var t=this.instance.config.api_host.trim().replace(/\/$/,"");return t==="https://app.posthog.com"?"https://us.i.posthog.com":t}get flagsApiHost(){var t=this.instance.config.flags_api_host;return t?t.trim().replace(/\/$/,""):this.apiHost}get uiHost(){var t,e=(t=this.instance.config.ui_host)==null?void 0:t.replace(/\/$/,"");return e||(e=this.apiHost.replace("."+wc,".posthog.com")),e==="https://app.posthog.com"?"https://us.posthog.com":e}get region(){return this.Ye[this.apiHost]||(/https:\/\/(app|us|us-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.Ye[this.apiHost]=Ji.US:/https:\/\/(eu|eu-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.Ye[this.apiHost]=Ji.EU:this.Ye[this.apiHost]=Ji.CUSTOM),this.Ye[this.apiHost]}endpointFor(t,e){if(e===void 0&&(e=""),e&&(e=e[0]==="/"?e:"/"+e),t==="ui")return this.uiHost+e;if(t==="flags")return this.flagsApiHost+e;if(this.region===Ji.CUSTOM)return this.apiHost+e;var s=wc+e;switch(t){case"assets":return"https://"+this.region+"-assets."+s;case"api":return"https://"+this.region+"."+s}}},Gg={icontains:(i,t)=>!!b&&t.href.toLowerCase().indexOf(i.toLowerCase())>-1,not_icontains:(i,t)=>!!b&&t.href.toLowerCase().indexOf(i.toLowerCase())===-1,regex:(i,t)=>!!b&&ci(t.href,i),not_regex:(i,t)=>!!b&&!ci(t.href,i),exact:(i,t)=>t.href===i,is_not:(i,t)=>t.href!==i},Bo=class i{constructor(t){var e=this;this.getWebExperimentsAndEvaluateDisplayLogic=function(s){s===void 0&&(s=!1),e.getWebExperiments(n=>{i.Xe("retrieved web experiments from the server"),e.Qe=new Map,n.forEach(r=>{if(r.feature_flag_key){var o;e.Qe&&(i.Xe("setting flag key ",r.feature_flag_key," to web experiment ",r),(o=e.Qe)==null||o.set(r.feature_flag_key,r));var a=e._instance.getFeatureFlag(r.feature_flag_key);dt(a)&&r.variants[a]&&e.Ze(r.name,a,r.variants[a].transforms)}else if(r.variants)for(var l in r.variants){var c=r.variants[l];i.tr(c)&&e.Ze(r.name,l,c.transforms)}})},s)},this._instance=t,this._instance.onFeatureFlags(s=>{this.onFeatureFlags(s)})}onFeatureFlags(t){if(this._is_bot())i.Xe("Refusing to render web experiment since the viewer is a likely bot");else if(!this._instance.config.disable_web_experiments){if(tt(this.Qe))return this.Qe=new Map,this.loadIfEnabled(),void this.previewWebExperiment();i.Xe("applying feature flags",t),t.forEach(e=>{var s;if(this.Qe&&(s=this.Qe)!=null&&s.has(e)){var n,r=this._instance.getFeatureFlag(e),o=(n=this.Qe)==null?void 0:n.get(e);r&&o!=null&&o.variants[r]&&this.Ze(o.name,r,o.variants[r].transforms)}})}}previewWebExperiment(){var t=i.getWindowLocation();if(t!=null&&t.search){var e=nn(t?.search,"__experiment_id"),s=nn(t?.search,"__experiment_variant");e&&s&&(i.Xe("previewing web experiments "+e+" && "+s),this.getWebExperiments(n=>{this.ir(parseInt(e),s,n)},!1,!0))}}loadIfEnabled(){this._instance.config.disable_web_experiments||this.getWebExperimentsAndEvaluateDisplayLogic()}getWebExperiments(t,e,s){if(this._instance.config.disable_web_experiments&&!s)return t([]);var n=this._instance.get_property("$web_experiments");if(n&&!e)return t(n);this._instance.ci({url:this._instance.requestRouter.endpointFor("api","/api/web_experiments/?token="+this._instance.config.token),method:"GET",callback:r=>{if(r.statusCode!==200||!r.json)return t([]);var o=r.json.experiments||[];return t(o)}})}ir(t,e,s){var n=s.filter(r=>r.id===t);n&&n.length>0&&(i.Xe("Previewing web experiment ["+n[0].name+"] with variant ["+e+"]"),this.Ze(n[0].name,e,n[0].variants[e].transforms))}static tr(t){return!tt(t.conditions)&&i.er(t)&&i.rr(t)}static er(t){var e;if(tt(t.conditions)||tt((e=t.conditions)==null?void 0:e.url))return!0;var s,n,r,o=i.getWindowLocation();return!!o&&((s=t.conditions)==null||!s.url||Gg[(n=(r=t.conditions)==null?void 0:r.urlMatchType)!==null&&n!==void 0?n:"icontains"](t.conditions.url,o))}static getWindowLocation(){return b?.location}static rr(t){var e;if(tt(t.conditions)||tt((e=t.conditions)==null?void 0:e.utm))return!0;var s=mh();if(s.utm_source){var n,r,o,a,l,c,h,u,d=(n=t.conditions)==null||(n=n.utm)==null||!n.utm_campaign||((r=t.conditions)==null||(r=r.utm)==null?void 0:r.utm_campaign)==s.utm_campaign,f=(o=t.conditions)==null||(o=o.utm)==null||!o.utm_source||((a=t.conditions)==null||(a=a.utm)==null?void 0:a.utm_source)==s.utm_source,p=(l=t.conditions)==null||(l=l.utm)==null||!l.utm_medium||((c=t.conditions)==null||(c=c.utm)==null?void 0:c.utm_medium)==s.utm_medium,g=(h=t.conditions)==null||(h=h.utm)==null||!h.utm_term||((u=t.conditions)==null||(u=u.utm)==null?void 0:u.utm_term)==s.utm_term;return d&&p&&g&&f}return!1}static Xe(t){for(var e=arguments.length,s=new Array(e>1?e-1:0),n=1;n<e;n++)s[n-1]=arguments[n];C.info("[WebExperiments] "+t,s)}Ze(t,e,s){this._is_bot()?i.Xe("Refusing to render web experiment since the viewer is a likely bot"):e!=="control"?s.forEach(n=>{if(n.selector){var r;i.Xe("applying transform of variant "+e+" for experiment "+t+" ",n);var o=(r=document)==null?void 0:r.querySelectorAll(n.selector);o?.forEach(a=>{var l=a;n.html&&(l.innerHTML=n.html),n.css&&l.setAttribute("style",n.css)})}}):i.Xe("Control variants leave the page unmodified.")}_is_bot(){return It&&this._instance?Oh(It,this._instance.config.custom_blocked_useragents):void 0}},Xg=ft("[PostHog ExternalIntegrations]"),Kg={intercom:"intercom-integration",crispChat:"crisp-chat-integration"},zo=class{constructor(t){this._instance=t}it(t,e){var s;(s=F.__PosthogExtensions__)==null||s.loadExternalDependency==null||s.loadExternalDependency(this._instance,t,n=>{if(n)return Xg.error("failed to load script",n);e()})}startIfEnabledOrStop(){var t=this,e=function(o){var a,l,c;!n||(a=F.__PosthogExtensions__)!=null&&(a=a.integrations)!=null&&a[o]||t.it(Kg[o],()=>{var h;(h=F.__PosthogExtensions__)==null||(h=h.integrations)==null||(h=h[o])==null||h.start(t._instance)}),!n&&(l=F.__PosthogExtensions__)!=null&&(l=l.integrations)!=null&&l[o]&&((c=F.__PosthogExtensions__)==null||(c=c.integrations)==null||(c=c[o])==null||c.stop())};for(var[s,n]of Object.entries((r=this._instance.config.integrations)!==null&&r!==void 0?r:{})){var r;e(s)}}},jo="[SessionRecording]",Vi=ft(jo),fn=class{get started(){var t;return!((t=this.sr)==null||!t.isStarted)}get status(){return this.sr?this.sr.status:this.nr&&!this.ar?"disabled":"lazy_loading"}constructor(t){if(this._forceAllowLocalhostNetworkCapture=!1,this.nr=!1,this.lr=void 0,this._instance=t,!this._instance.sessionManager)throw Vi.error("started without valid sessionManager"),new Error(jo+" started without valid sessionManager. This is a bug.");if(this._instance.config.cookieless_mode==="always")throw new Error(jo+' cannot be used with cookieless_mode="always"')}get ar(){var t,e=!((t=this._instance.get_property(xr))==null||!t.enabled),s=!this._instance.config.disable_session_recording,n=this._instance.config.disable_session_recording||this._instance.consent.isOptedOut();return b&&e&&s&&!n}startIfEnabledOrStop(t){var e;if(!this.ar||(e=this.sr)==null||!e.isStarted){var s=!P(Object.assign)&&!P(Array.from);this.ar&&s?(this.ur(t),Vi.info("starting")):this.stopRecording()}}ur(t){var e,s,n;this.ar&&(F!=null&&(e=F.__PosthogExtensions__)!=null&&(e=e.rrweb)!=null&&e.record&&(s=F.__PosthogExtensions__)!=null&&s.initSessionRecording?this.hr(t):(n=F.__PosthogExtensions__)==null||n.loadExternalDependency==null||n.loadExternalDependency(this._instance,this.dr,r=>{if(r)return Vi.error("could not load recorder",r);this.hr(t)}))}stopRecording(){var t,e;(t=this.lr)==null||t.call(this),this.lr=void 0,(e=this.sr)==null||e.stop()}vr(){var t;(t=this._instance.persistence)==null||t.unregister(Nc)}cr(t){if(this._instance.persistence){var e,s,n=this._instance.persistence,r=()=>{var o=t.sessionRecording===!1?void 0:t.sessionRecording,a=o?.sampleRate,l=tt(a)?null:parseFloat(a);tt(l)&&this.vr();var c=o?.minimumDurationMilliseconds;n.register({[xr]:T({enabled:!!o},o,{networkPayloadCapture:T({capturePerformance:t.capturePerformance},o?.networkPayloadCapture),canvasRecording:{enabled:o?.recordCanvas,fps:o?.canvasFps,quality:o?.canvasQuality},sampleRate:l,minimumDurationMilliseconds:P(c)?null:c,endpoint:o?.endpoint,triggerMatchType:o?.triggerMatchType,masking:o?.masking,urlTriggers:o?.urlTriggers})})};r(),(e=this.lr)==null||e.call(this),this.lr=(s=this._instance.sessionManager)==null?void 0:s.onSessionId(r)}}onRemoteConfig(t){"sessionRecording"in t?t.sessionRecording!==!1?(this.cr(t),this.nr=!0,this.startIfEnabledOrStop()):this.nr=!0:Vi.info("skipping remote config with no sessionRecording",t)}log(t,e){var s;e===void 0&&(e="log"),(s=this.sr)!=null&&s.log?this.sr.log(t,e):Vi.warn("log called before recorder was ready")}get dr(){var t,e,s=(t=this._instance)==null||(t=t.persistence)==null?void 0:t.get_property(xr);return(s==null||(e=s.scriptConfig)==null?void 0:e.script)||"lazy-recorder"}hr(t){var e,s;if((e=F.__PosthogExtensions__)==null||!e.initSessionRecording)throw Error("Called on script loaded before session recording is available");this.sr||(this.sr=(s=F.__PosthogExtensions__)==null?void 0:s.initSessionRecording(this._instance),this.sr._forceAllowLocalhostNetworkCapture=this._forceAllowLocalhostNetworkCapture),this.sr.start(t)}onRRwebEmit(t){var e;(e=this.sr)==null||e.onRRwebEmit==null||e.onRRwebEmit(t)}overrideLinkedFlag(){var t,e;this.sr||(e=this._instance.persistence)==null||e.register({$replay_override_linked_flag:!0}),(t=this.sr)==null||t.overrideLinkedFlag()}overrideSampling(){var t,e;this.sr||(e=this._instance.persistence)==null||e.register({$replay_override_sampling:!0}),(t=this.sr)==null||t.overrideSampling()}overrideTrigger(t){var e,s;this.sr||(s=this._instance.persistence)==null||s.register({[t==="url"?"$replay_override_url_trigger":"$replay_override_event_trigger"]:!0}),(e=this.sr)==null||e.overrideTrigger(t)}get sdkDebugProperties(){var t;return((t=this.sr)==null?void 0:t.sdkDebugProperties)||{$recording_status:this.status}}tryAddCustomEvent(t,e){var s;return!((s=this.sr)==null||!s.tryAddCustomEvent(t,e))}},ts={},Ho=()=>{},ei="posthog",Th=!$g&&Pt?.indexOf("MSIE")===-1&&Pt?.indexOf("Mozilla")===-1,kc=i=>{var t;return T({api_host:"https://us.i.posthog.com",flags_api_host:null,ui_host:null,token:"",autocapture:!0,cross_subdomain_cookie:Vp(E?.location),persistence:"localStorage+cookie",persistence_name:"",loaded:Ho,save_campaign_params:!0,custom_campaign_params:[],custom_blocked_useragents:[],save_referrer:!0,capture_pageleave:"if_capture_pageview",defaults:i??"unset",__preview_deferred_init_extensions:!1,debug:Et&&dt(Et?.search)&&Et.search.indexOf("__posthog_debug=true")!==-1||!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_web_experiments:!0,disable_surveys:!1,disable_surveys_automatic_display:!1,disable_external_dependency_loading:!1,enable_recording_console_log:void 0,secure_cookie:(b==null||(t=b.location)==null?void 0:t.protocol)==="https:",ip:!1,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_useragent_filter:!1,opt_out_capturing_persistence_type:"localStorage",consent_persistence_name:null,opt_out_capturing_cookie_prefix:null,opt_in_site_apps:!1,property_denylist:[],respect_dnt:!1,sanitize_properties:null,request_headers:{},request_batching:!0,properties_string_max_length:65535,mask_all_element_attributes:!1,mask_all_text:!1,mask_personal_data_properties:!1,custom_personal_data_properties:[],advanced_disable_flags:!1,advanced_disable_decide:!1,advanced_disable_feature_flags:!1,advanced_disable_feature_flags_on_first_load:!1,advanced_only_evaluate_survey_feature_flags:!1,advanced_enable_surveys:!1,advanced_disable_toolbar_metrics:!1,feature_flag_request_timeout_ms:3e3,surveys_request_timeout_ms:1e4,on_request_error:e=>{var s="Bad HTTP status: "+e.statusCode+" "+e.text;C.error(s)},get_device_id:e=>e,capture_performance:void 0,name:"posthog",bootstrap:{},disable_compression:!1,session_idle_timeout_seconds:1800,person_profiles:"identified_only",before_send:void 0,request_queue_config:{flush_interval_ms:Io},error_tracking:{},_onCapture:Ho,__preview_eager_load_replay:!1},(e=>({rageclick:!(e&&e>="2025-11-30")||{content_ignorelist:!0},capture_pageview:!(e&&e>="2025-05-24")||"history_change",session_recording:e&&e>="2025-11-30"?{strictMinimumDuration:!0}:{}}))(i))},Sc=i=>{var t={};P(i.process_person)||(t.person_profiles=i.process_person),P(i.xhr_headers)||(t.request_headers=i.xhr_headers),P(i.cookie_name)||(t.persistence_name=i.cookie_name),P(i.disable_cookie)||(t.disable_persistence=i.disable_cookie),P(i.store_google)||(t.save_campaign_params=i.store_google),P(i.verbose)||(t.debug=i.verbose);var e=lt({},t,i);return K(i.property_blacklist)&&(P(i.property_denylist)?e.property_denylist=i.property_blacklist:K(i.property_denylist)?e.property_denylist=[...i.property_blacklist,...i.property_denylist]:C.error("Invalid value for property_denylist config: "+i.property_denylist)),e},Wo=class{constructor(){this.__forceAllowLocalhost=!1}get pr(){return this.__forceAllowLocalhost}set pr(t){C.error("WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`"),this.__forceAllowLocalhost=t}},pn=class i{get decideEndpointWasHit(){var t,e;return(t=(e=this.featureFlags)==null?void 0:e.hasLoadedFlags)!==null&&t!==void 0&&t}get flagsEndpointWasHit(){var t,e;return(t=(e=this.featureFlags)==null?void 0:e.hasLoadedFlags)!==null&&t!==void 0&&t}constructor(){this.webPerformance=new Wo,this.gr=!1,this.version=ie.LIB_VERSION,this._r=new os,this._calculate_event_properties=this.calculateEventProperties.bind(this),this.config=kc(),this.SentryIntegration=uo,this.sentryIntegration=t=>(function(e,s){var n=Qc(e,s);return{name:Zc,processEvent:r=>n(r)}})(this,t),this.__request_queue=[],this.__loaded=!1,this.analyticsDefaultEndpoint="/e/",this.mr=!1,this.yr=null,this.br=null,this.wr=null,this.featureFlags=new Po(this),this.toolbar=new fo(this),this.scrollManager=new Lo(this),this.pageViewManager=new xo(this),this.surveys=new To(this),this.experiments=new Bo(this),this.exceptions=new Mo(this),this.rateLimiter=new Ao(this),this.requestRouter=new $o(this),this.consent=new lo(this),this.externalIntegrations=new zo(this),this.people={set:(t,e,s)=>{var n=dt(t)?{[t]:e}:t;this.setPersonProperties(n),s?.({})},set_once:(t,e,s)=>{var n=dt(t)?{[t]:e}:t;this.setPersonProperties(void 0,n),s?.({})}},this.on("eventCaptured",t=>C.info('send "'+t?.event+'"',t))}init(t,e,s){if(s&&s!==ei){var n,r=(n=ts[s])!==null&&n!==void 0?n:new i;return r._init(t,e,s),ts[s]=r,ts[ei][s]=r,r}return this._init(t,e,s)}_init(t,e,s){var n;if(e===void 0&&(e={}),P(t)||Lr(t))return C.critical("PostHog was initialized without a token. This likely indicates a misconfiguration. Please check the first argument passed to posthog.init()"),this;if(this.__loaded)return console.warn("[PostHog.js]","You have already initialized PostHog! Re-initializing is a no-op"),this;this.__loaded=!0,this.config={},e.debug=this.$r(e.debug),this.Er=e,this.Sr=[],e.person_profiles&&(this.br=e.person_profiles),this.set_config(lt({},kc(e.defaults),Sc(e),{name:s,token:t})),this.config.on_xhr_error&&C.error("on_xhr_error is deprecated. Use on_request_error instead"),this.compression=e.disable_compression?void 0:re.GZipJS;var r=this.kr();this.persistence=new Qi(this.config,r),this.sessionPersistence=this.config.persistence==="sessionStorage"||this.config.persistence==="memory"?this.persistence:new Qi(T({},this.config,{persistence:"sessionStorage"}),r);var o=T({},this.persistence.props),a=T({},this.sessionPersistence.props);this.register({$initialization_time:new Date().toISOString()}),this.Pr=new Fo(v=>this.Tr(v),this.config.request_queue_config),this.Ir=new Ro(this),this.__request_queue=[];var l=this.config.cookieless_mode==="always"||this.config.cookieless_mode==="on_reject"&&this.consent.isExplicitlyOptedOut();if(l||(this.sessionManager=new dn(this),this.sessionPropsManager=new un(this,this.sessionManager,this.persistence)),this.config.__preview_deferred_init_extensions?(C.info("Deferring extension initialization to improve startup performance"),setTimeout(()=>{this.Rr(l)},0)):(C.info("Initializing extensions synchronously"),this.Rr(l)),ie.DEBUG=ie.DEBUG||this.config.debug,ie.DEBUG&&C.info("Starting in debug mode",{this:this,config:e,thisC:T({},this.config),p:o,s:a}),((n=e.bootstrap)==null?void 0:n.distinctID)!==void 0){var c,h,u=this.config.get_device_id(xe()),d=(c=e.bootstrap)!=null&&c.isIdentifiedID?u:e.bootstrap.distinctID;this.persistence.set_property(se,(h=e.bootstrap)!=null&&h.isIdentifiedID?"identified":"anonymous"),this.register({distinct_id:e.bootstrap.distinctID,$device_id:d})}if(this.Fr()){var f,p,g=Object.keys(((f=e.bootstrap)==null?void 0:f.featureFlags)||{}).filter(v=>{var y;return!((y=e.bootstrap)==null||(y=y.featureFlags)==null||!y[v])}).reduce((v,y)=>{var w;return v[y]=((w=e.bootstrap)==null||(w=w.featureFlags)==null?void 0:w[y])||!1,v},{}),m=Object.keys(((p=e.bootstrap)==null?void 0:p.featureFlagPayloads)||{}).filter(v=>g[v]).reduce((v,y)=>{var w,x;return(w=e.bootstrap)!=null&&(w=w.featureFlagPayloads)!=null&&w[y]&&(v[y]=(x=e.bootstrap)==null||(x=x.featureFlagPayloads)==null?void 0:x[y]),v},{});this.featureFlags.receivedFeatureFlags({featureFlags:g,featureFlagPayloads:m})}if(l)this.register_once({distinct_id:Ni,$device_id:null},"");else if(!this.get_distinct_id()){var _=this.config.get_device_id(xe());this.register_once({distinct_id:_,$device_id:_},""),this.persistence.set_property(se,"anonymous")}return ct(b,"onpagehide"in self?"pagehide":"unload",this._handle_unload.bind(this),{passive:!1}),this.toolbar.maybeLoadToolbar(),e.segment?dg(this,()=>this.Cr()):this.Cr(),ye(this.config._onCapture)&&this.config._onCapture!==Ho&&(C.warn("onCapture is deprecated. Please use `before_send` instead"),this.on("eventCaptured",v=>this.config._onCapture(v.event,v))),this.config.ip&&C.warn('The `ip` config option has NO EFFECT AT ALL and has been deprecated. Use a custom transformation or "Discard IP data" project setting instead. See https://posthog.com/tutorials/web-redact-properties#hiding-customer-ip-address for more information.'),this}Rr(t){var e=performance.now();this.historyAutocapture=new ho(this),this.historyAutocapture.startIfEnabled();var s=[];s.push(()=>{new po(this).startIfEnabledOrStop()}),s.push(()=>{var n;this.siteApps=new No(this),(n=this.siteApps)==null||n.init()}),t||s.push(()=>{this.sessionRecording=new fn(this),this.sessionRecording.startIfEnabledOrStop()}),this.config.disable_scroll_properties||s.push(()=>{this.scrollManager.startMeasuringScrollPosition()}),s.push(()=>{this.autocapture=new no(this),this.autocapture.startIfEnabled()}),s.push(()=>{this.surveys.loadIfEnabled()}),s.push(()=>{this.heatmaps=new bo(this),this.heatmaps.startIfEnabled()}),s.push(()=>{this.webVitalsAutocapture=new vo(this)}),s.push(()=>{this.exceptionObserver=new co(this),this.exceptionObserver.startIfEnabled()}),s.push(()=>{this.deadClicksAutocapture=new on(this,ug),this.deadClicksAutocapture.startIfEnabled()}),s.push(()=>{if(this.Or){var n=this.Or;this.Or=void 0,this.fi(n)}}),this.Mr(s,e)}Mr(t,e){for(;t.length>0;){if(this.config.__preview_deferred_init_extensions&&performance.now()-e>=30&&t.length>0)return void setTimeout(()=>{this.Mr(t,e)},0);var s=t.shift();if(s)try{s()}catch(r){C.error("Error initializing extension:",r)}}var n=Math.round(performance.now()-e);this.register_for_session({$sdk_debug_extensions_init_method:this.config.__preview_deferred_init_extensions?"deferred":"synchronous",$sdk_debug_extensions_init_time_ms:n}),this.config.__preview_deferred_init_extensions&&C.info("PostHog extensions initialized ("+n+"ms)")}fi(t){var e,s,n,r,o,a,l,c;if(!E||!E.body)return C.info("document not ready yet, trying again in 500 milliseconds..."),void setTimeout(()=>{this.fi(t)},500);this.config.__preview_deferred_init_extensions&&(this.Or=t),this.compression=void 0,t.supportedCompression&&!this.config.disable_compression&&(this.compression=$(t.supportedCompression,re.GZipJS)?re.GZipJS:$(t.supportedCompression,re.Base64)?re.Base64:void 0),(e=t.analytics)!=null&&e.endpoint&&(this.analyticsDefaultEndpoint=t.analytics.endpoint),this.set_config({person_profiles:this.br?this.br:"identified_only"}),(s=this.siteApps)==null||s.onRemoteConfig(t),(n=this.sessionRecording)==null||n.onRemoteConfig(t),(r=this.autocapture)==null||r.onRemoteConfig(t),(o=this.heatmaps)==null||o.onRemoteConfig(t),this.surveys.onRemoteConfig(t),(a=this.webVitalsAutocapture)==null||a.onRemoteConfig(t),(l=this.exceptionObserver)==null||l.onRemoteConfig(t),this.exceptions.onRemoteConfig(t),(c=this.deadClicksAutocapture)==null||c.onRemoteConfig(t)}Cr(){try{this.config.loaded(this)}catch(t){C.critical("`loaded` function failed",t)}this.Ar(),this.config.capture_pageview&&setTimeout(()=>{(this.consent.isOptedIn()||this.config.cookieless_mode==="always")&&this.Dr()},1),new Do(this).load(),this.featureFlags.flags()}Ar(){var t;this.is_capturing()&&this.config.request_batching&&((t=this.Pr)==null||t.enable())}_dom_loaded(){this.is_capturing()&&ke(this.__request_queue,t=>this.Tr(t)),this.__request_queue=[],this.Ar()}_handle_unload(){var t,e;this.config.request_batching?(this.jr()&&this.capture("$pageleave"),(t=this.Pr)==null||t.unload(),(e=this.Ir)==null||e.unload()):this.jr()&&this.capture("$pageleave",null,{transport:"sendBeacon"})}ci(t){this.__loaded&&(Th?this.__request_queue.push(t):this.rateLimiter.isServerRateLimited(t.batchKey)||(t.transport=t.transport||this.config.api_transport,t.url=hn(t.url,{ip:this.config.ip?1:0}),t.headers=T({},this.config.request_headers),t.compression=t.compression==="best-available"?this.compression:t.compression,t.disableXHRCredentials=this.config.__preview_disable_xhr_credentials,this.config.__preview_disable_beacon&&(t.disableTransport=["sendBeacon"]),t.fetchOptions=t.fetchOptions||this.config.fetch_options,(e=>{var s,n,r,o=T({},e);o.timeout=o.timeout||6e4,o.url=hn(o.url,{_:new Date().getTime().toString(),ver:ie.LIB_VERSION,compression:o.compression});var a=(s=o.transport)!==null&&s!==void 0?s:"fetch",l=qs.filter(h=>!o.disableTransport||!h.transport||!o.disableTransport.includes(h.transport)),c=(n=(r=Fc(l,h=>h.transport===a))==null?void 0:r.method)!==null&&n!==void 0?n:l[0].method;if(!c)throw new Error("No available transport method");c(o)})(T({},t,{callback:e=>{var s,n;this.rateLimiter.checkForLimiting(e),e.statusCode>=400&&((s=(n=this.config).on_request_error)==null||s.call(n,e)),t.callback==null||t.callback(e)}}))))}Tr(t){this.Ir?this.Ir.retriableRequest(t):this.ci(t)}_execute_array(t){var e,s=[],n=[],r=[];ke(t,a=>{a&&(e=a[0],K(e)?r.push(a):ye(a)?a.call(this):K(a)&&e==="alias"?s.push(a):K(a)&&e.indexOf("capture")!==-1&&ye(this[e])?r.push(a):n.push(a))});var o=function(a,l){ke(a,function(c){if(K(c[0])){var h=l;X(c,function(u){h=h[u[0]].apply(h,u.slice(1))})}else this[c[0]].apply(this,c.slice(1))},l)};o(s,this),o(n,this),o(r,this)}Fr(){var t,e;return((t=this.config.bootstrap)==null?void 0:t.featureFlags)&&Object.keys((e=this.config.bootstrap)==null?void 0:e.featureFlags).length>0||!1}push(t){this._execute_array([t])}capture(t,e,s){var n;if(this.__loaded&&this.persistence&&this.sessionPersistence&&this.Pr){if(this.is_capturing())if(!P(t)&&dt(t)){var r=!this.config.opt_out_useragent_filter&&this._is_bot();if(!(r&&!this.config.__preview_capture_bot_pageviews)){var o=s!=null&&s.skip_client_rate_limiting?void 0:this.rateLimiter.clientRateLimitContext();if(o==null||!o.isRateLimited){e!=null&&e.$current_url&&!dt(e?.$current_url)&&(C.error("Invalid `$current_url` property provided to `posthog.capture`. Input must be a string. Ignoring provided value."),e==null||delete e.$current_url),this.sessionPersistence.update_search_keyword(),this.config.save_campaign_params&&this.sessionPersistence.update_campaign_params(),this.config.save_referrer&&this.sessionPersistence.update_referrer_info(),(this.config.save_campaign_params||this.config.save_referrer)&&this.persistence.set_initial_person_info();var a=new Date,l=s?.timestamp||a,c=xe(),h={uuid:c,event:t,properties:this.calculateEventProperties(t,e||{},l,c)};t==="$pageview"&&this.config.__preview_capture_bot_pageviews&&r&&(h.event="$bot_pageview",h.properties.$browser_type="bot"),o&&(h.properties.$lib_rate_limit_remaining_tokens=o.remainingTokens),s?.$set&&(h.$set=s?.$set);var u,d=this.Lr(s?.$set_once);if(d&&(h.$set_once=d),(h=Hp(h,s!=null&&s._noTruncate?null:this.config.properties_string_max_length)).timestamp=l,P(s?.timestamp)||(h.properties.$event_time_override_provided=!0,h.properties.$event_time_override_system_time=a),t===Ys.DISMISSED||t===Ys.SENT){var f=e?.[bc.SURVEY_ID],p=e?.[bc.SURVEY_ITERATION];u={id:f,current_iteration:p},localStorage.getItem(xc(u))||localStorage.setItem(xc(u),"true"),h.$set=T({},h.$set,{[Hg({id:f,current_iteration:p},t===Ys.SENT?"responded":"dismissed")]:!0})}var g=T({},h.properties.$set,h.$set);if(ii(g)||this.setPersonPropertiesForFlags(g),!tt(this.config.before_send)){var m=this.Nr(h);if(!m)return;h=m}this._r.emit("eventCaptured",h);var _={method:"POST",url:(n=s?._url)!==null&&n!==void 0?n:this.requestRouter.endpointFor("api",this.analyticsDefaultEndpoint),data:h,compression:"best-available",batchKey:s?._batchKey};return!this.config.request_batching||s&&(s==null||!s._batchKey)||s!=null&&s.send_instantly?this.Tr(_):this.Pr.enqueue(_),h}C.critical("This capture call is ignored due to client rate limiting.")}}else C.error("No event name provided to posthog.capture")}else C.uninitializedWarning("posthog.capture")}Mi(t){return this.on("eventCaptured",e=>t(e.event,e))}calculateEventProperties(t,e,s,n,r){if(s=s||new Date,!this.persistence||!this.sessionPersistence)return e;var o=r?void 0:this.persistence.remove_event_timer(t),a=T({},e);if(a.token=this.config.token,a.$config_defaults=this.config.defaults,(this.config.cookieless_mode=="always"||this.config.cookieless_mode=="on_reject"&&this.consent.isExplicitlyOptedOut())&&(a.$cookieless_mode=!0),t==="$snapshot"){var l=T({},this.persistence.properties(),this.sessionPersistence.properties());return a.distinct_id=l.distinct_id,(!dt(a.distinct_id)&&!Yt(a.distinct_id)||Lr(a.distinct_id))&&C.error("Invalid distinct_id for replay event. This indicates a bug in your implementation"),a}var c,h=Cg(this.config.mask_personal_data_properties,this.config.custom_personal_data_properties);if(this.sessionManager){var{sessionId:u,windowId:d}=this.sessionManager.checkAndGetSessionAndWindowId(r,s.getTime());a.$session_id=u,a.$window_id=d}this.sessionPropsManager&&lt(a,this.sessionPropsManager.getSessionProps());try{var f;this.sessionRecording&&lt(a,this.sessionRecording.sdkDebugProperties),a.$sdk_debug_retry_queue_size=(f=this.Ir)==null?void 0:f.length}catch(_){a.$sdk_debug_error_capturing_properties=String(_)}if(this.requestRouter.region===Ji.CUSTOM&&(a.$lib_custom_api_host=this.config.api_host),c=t!=="$pageview"||r?t!=="$pageleave"||r?this.pageViewManager.doEvent():this.pageViewManager.doPageLeave(s):this.pageViewManager.doPageView(s,n),a=lt(a,c),t==="$pageview"&&E&&(a.title=E.title),!P(o)){var p=s.getTime()-o;a.$duration=parseFloat((p/1e3).toFixed(3))}Pt&&this.config.opt_out_useragent_filter&&(a.$browser_type=this._is_bot()?"bot":"browser"),(a=lt({},h,this.persistence.properties(),this.sessionPersistence.properties(),a)).$is_identified=this._isIdentified(),K(this.config.property_denylist)?X(this.config.property_denylist,function(_){delete a[_]}):C.error("Invalid value for property_denylist config: "+this.config.property_denylist+" or property_blacklist config: "+this.config.property_blacklist);var g=this.config.sanitize_properties;g&&(C.error("sanitize_properties is deprecated. Use before_send instead"),a=g(a,t));var m=this.Ur();return a.$process_person_profile=m,m&&!r&&this.zr("_calculate_event_properties"),a}Lr(t){var e;if(!this.persistence||!this.Ur()||this.gr)return t;var s=this.persistence.get_initial_props(),n=(e=this.sessionPropsManager)==null?void 0:e.getSetOnceProps(),r=lt({},s,n||{},t||{}),o=this.config.sanitize_properties;return o&&(C.error("sanitize_properties is deprecated. Use before_send instead"),r=o(r,"$set_once")),this.gr=!0,ii(r)?void 0:r}register(t,e){var s;(s=this.persistence)==null||s.register(t,e)}register_once(t,e,s){var n;(n=this.persistence)==null||n.register_once(t,e,s)}register_for_session(t){var e;(e=this.sessionPersistence)==null||e.register(t)}unregister(t){var e;(e=this.persistence)==null||e.unregister(t)}unregister_for_session(t){var e;(e=this.sessionPersistence)==null||e.unregister(t)}Hr(t,e){this.register({[t]:e})}getFeatureFlag(t,e){return this.featureFlags.getFeatureFlag(t,e)}getFeatureFlagPayload(t){var e=this.featureFlags.getFeatureFlagPayload(t);try{return JSON.parse(e)}catch{return e}}isFeatureEnabled(t,e){return this.featureFlags.isFeatureEnabled(t,e)}reloadFeatureFlags(){this.featureFlags.reloadFeatureFlags()}updateEarlyAccessFeatureEnrollment(t,e,s){this.featureFlags.updateEarlyAccessFeatureEnrollment(t,e,s)}getEarlyAccessFeatures(t,e,s){return e===void 0&&(e=!1),this.featureFlags.getEarlyAccessFeatures(t,e,s)}on(t,e){return this._r.on(t,e)}onFeatureFlags(t){return this.featureFlags.onFeatureFlags(t)}onSurveysLoaded(t){return this.surveys.onSurveysLoaded(t)}onSessionId(t){var e,s;return(e=(s=this.sessionManager)==null?void 0:s.onSessionId(t))!==null&&e!==void 0?e:()=>{}}getSurveys(t,e){e===void 0&&(e=!1),this.surveys.getSurveys(t,e)}getActiveMatchingSurveys(t,e){e===void 0&&(e=!1),this.surveys.getActiveMatchingSurveys(t,e)}renderSurvey(t,e){this.surveys.renderSurvey(t,e)}displaySurvey(t,e){e===void 0&&(e=Vg),this.surveys.displaySurvey(t,e)}canRenderSurvey(t){return this.surveys.canRenderSurvey(t)}canRenderSurveyAsync(t,e){return e===void 0&&(e=!1),this.surveys.canRenderSurveyAsync(t,e)}identify(t,e,s){if(!this.__loaded||!this.persistence)return C.uninitializedWarning("posthog.identify");if(Yt(t)&&(t=t.toString(),C.warn("The first argument to posthog.identify was a number, but it should be a string. It has been converted to a string.")),t)if(["distinct_id","distinctid"].includes(t.toLowerCase()))C.critical('The string "'+t+'" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.');else if(t!==Ni){if(this.zr("posthog.identify")){var n=this.get_distinct_id();if(this.register({$user_id:t}),!this.get_property("$device_id")){var r=n;this.register_once({$had_persisted_distinct_id:!0,$device_id:r},"")}t!==n&&t!==this.get_property(Ui)&&(this.unregister(Ui),this.register({distinct_id:t}));var o=(this.persistence.get_property(se)||"anonymous")==="anonymous";t!==n&&o?(this.persistence.set_property(se,"identified"),this.setPersonPropertiesForFlags(T({},s||{},e||{}),!1),this.capture("$identify",{distinct_id:t,$anon_distinct_id:n},{$set:e||{},$set_once:s||{}}),this.wr=gc(t,e,s),this.featureFlags.setAnonymousDistinctId(n)):(e||s)&&this.setPersonProperties(e,s),t!==n&&(this.reloadFeatureFlags(),this.unregister(Js))}}else C.critical('The string "'+Ni+'" was set in posthog.identify which indicates an error. This ID is only used as a sentinel value.');else C.error("Unique user id has not been set in posthog.identify")}setPersonProperties(t,e){if((t||e)&&this.zr("posthog.setPersonProperties")){var s=gc(this.get_distinct_id(),t,e);this.wr!==s?(this.setPersonPropertiesForFlags(T({},e||{},t||{})),this.capture("$set",{$set:t||{},$set_once:e||{}}),this.wr=s):C.info("A duplicate setPersonProperties call was made with the same properties. It has been ignored.")}}group(t,e,s){if(t&&e){if(this.zr("posthog.group")){var n=this.getGroups();n[t]!==e&&this.resetGroupPropertiesForFlags(t),this.register({$groups:T({},n,{[t]:e})}),s&&(this.capture("$groupidentify",{$group_type:t,$group_key:e,$group_set:s}),this.setGroupPropertiesForFlags({[t]:s})),n[t]===e||s||this.reloadFeatureFlags()}}else C.error("posthog.group requires a group type and group key")}resetGroups(){this.register({$groups:{}}),this.resetGroupPropertiesForFlags(),this.reloadFeatureFlags()}setPersonPropertiesForFlags(t,e){e===void 0&&(e=!0),this.featureFlags.setPersonPropertiesForFlags(t,e)}resetPersonPropertiesForFlags(){this.featureFlags.resetPersonPropertiesForFlags()}setGroupPropertiesForFlags(t,e){e===void 0&&(e=!0),this.zr("posthog.setGroupPropertiesForFlags")&&this.featureFlags.setGroupPropertiesForFlags(t,e)}resetGroupPropertiesForFlags(t){this.featureFlags.resetGroupPropertiesForFlags(t)}reset(t){var e,s,n,r;if(C.info("reset"),!this.__loaded)return C.uninitializedWarning("posthog.reset");var o=this.get_property("$device_id");if(this.consent.reset(),(e=this.persistence)==null||e.clear(),(s=this.sessionPersistence)==null||s.clear(),this.surveys.reset(),this.featureFlags.reset(),(n=this.persistence)==null||n.set_property(se,"anonymous"),(r=this.sessionManager)==null||r.resetSessionId(),this.wr=null,this.config.cookieless_mode==="always")this.register_once({distinct_id:Ni,$device_id:null},"");else{var a=this.config.get_device_id(xe());this.register_once({distinct_id:a,$device_id:t?a:o},"")}this.register({$last_posthog_reset:new Date().toISOString()},1)}get_distinct_id(){return this.get_property("distinct_id")}getGroups(){return this.get_property("$groups")||{}}get_session_id(){var t,e;return(t=(e=this.sessionManager)==null?void 0:e.checkAndGetSessionAndWindowId(!0).sessionId)!==null&&t!==void 0?t:""}get_session_replay_url(t){if(!this.sessionManager)return"";var{sessionId:e,sessionStartTimestamp:s}=this.sessionManager.checkAndGetSessionAndWindowId(!0),n=this.requestRouter.endpointFor("ui","/project/"+this.config.token+"/replay/"+e);if(t!=null&&t.withTimestamp&&s){var r,o=(r=t.timestampLookBack)!==null&&r!==void 0?r:10;if(!s)return n;n+="?t="+Math.max(Math.floor((new Date().getTime()-s)/1e3)-o,0)}return n}alias(t,e){return t===this.get_property(Rc)?(C.critical("Attempting to create alias for existing People user - aborting."),-2):this.zr("posthog.alias")?(P(e)&&(e=this.get_distinct_id()),t!==e?(this.Hr(Ui,t),this.capture("$create_alias",{alias:t,distinct_id:e})):(C.warn("alias matches current distinct_id - skipping api call."),this.identify(t),-1)):void 0}set_config(t){var e=T({},this.config);if(_t(t)){var s,n,r,o,a;lt(this.config,Sc(t));var l=this.kr();(s=this.persistence)==null||s.update_config(this.config,e,l),this.sessionPersistence=this.config.persistence==="sessionStorage"||this.config.persistence==="memory"?this.persistence:new Qi(T({},this.config,{persistence:"sessionStorage"}),l);var c=this.$r(this.config.debug);we(c)&&(this.config.debug=c),we(this.config.debug)&&(this.config.debug?(ie.DEBUG=!0,st.H()&&st.G("ph_debug","true"),C.info("set_config",{config:t,oldConfig:e,newConfig:T({},this.config)})):(ie.DEBUG=!1,st.H()&&st.V("ph_debug"))),(n=this.sessionRecording)==null||n.startIfEnabledOrStop(),(r=this.autocapture)==null||r.startIfEnabled(),(o=this.heatmaps)==null||o.startIfEnabled(),this.surveys.loadIfEnabled(),this.Br(),(a=this.externalIntegrations)==null||a.startIfEnabledOrStop()}}startSessionRecording(t){var e=t===!0,s={sampling:e||!(t==null||!t.sampling),linked_flag:e||!(t==null||!t.linked_flag),url_trigger:e||!(t==null||!t.url_trigger),event_trigger:e||!(t==null||!t.event_trigger)};if(Object.values(s).some(Boolean)){var n,r,o,a,l;(n=this.sessionManager)==null||n.checkAndGetSessionAndWindowId(),s.sampling&&((r=this.sessionRecording)==null||r.overrideSampling()),s.linked_flag&&((o=this.sessionRecording)==null||o.overrideLinkedFlag()),s.url_trigger&&((a=this.sessionRecording)==null||a.overrideTrigger("url")),s.event_trigger&&((l=this.sessionRecording)==null||l.overrideTrigger("event"))}this.set_config({disable_session_recording:!1})}stopSessionRecording(){this.set_config({disable_session_recording:!0})}sessionRecordingStarted(){var t;return!((t=this.sessionRecording)==null||!t.started)}captureException(t,e){var s=new Error("PostHog syntheticException"),n=this.exceptions.buildProperties(t,{handled:!0,syntheticException:s});return this.exceptions.sendExceptionEvent(T({},n,e))}loadToolbar(t){return this.toolbar.loadToolbar(t)}get_property(t){var e;return(e=this.persistence)==null?void 0:e.props[t]}getSessionProperty(t){var e;return(e=this.sessionPersistence)==null?void 0:e.props[t]}toString(){var t,e=(t=this.config.name)!==null&&t!==void 0?t:ei;return e!==ei&&(e=ei+"."+e),e}_isIdentified(){var t,e;return((t=this.persistence)==null?void 0:t.get_property(se))==="identified"||((e=this.sessionPersistence)==null?void 0:e.get_property(se))==="identified"}Ur(){var t,e;return!(this.config.person_profiles==="never"||this.config.person_profiles==="identified_only"&&!this._isIdentified()&&ii(this.getGroups())&&((t=this.persistence)==null||(t=t.props)==null||!t[Ui])&&((e=this.persistence)==null||(e=e.props)==null||!e[Qs]))}jr(){return this.config.capture_pageleave===!0||this.config.capture_pageleave==="if_capture_pageview"&&(this.config.capture_pageview===!0||this.config.capture_pageview==="history_change")}createPersonProfile(){this.Ur()||this.zr("posthog.createPersonProfile")&&this.setPersonProperties({},{})}zr(t){return this.config.person_profiles==="never"?(C.error(t+' was called, but process_person is set to "never". This call will be ignored.'),!1):(this.Hr(Qs,!0),!0)}kr(){if(this.config.cookieless_mode==="always")return!0;var t=this.consent.isOptedOut(),e=this.config.opt_out_persistence_by_default||this.config.cookieless_mode==="on_reject";return this.config.disable_persistence||t&&!!e}Br(){var t,e,s,n,r=this.kr();return((t=this.persistence)==null?void 0:t.wi)!==r&&((s=this.persistence)==null||s.set_disabled(r)),((e=this.sessionPersistence)==null?void 0:e.wi)!==r&&((n=this.sessionPersistence)==null||n.set_disabled(r)),r}opt_in_capturing(t){if(this.config.cookieless_mode!=="always"){var e,s;this.config.cookieless_mode==="on_reject"&&this.consent.isExplicitlyOptedOut()&&(this.reset(!0),(e=this.sessionManager)==null||e.destroy(),this.sessionManager=new dn(this),this.persistence&&(this.sessionPropsManager=new un(this,this.sessionManager,this.persistence)),this.sessionRecording=new fn(this),this.sessionRecording.startIfEnabledOrStop()),this.consent.optInOut(!0),this.Br(),this.Ar(),this.config.cookieless_mode=="on_reject"&&this.surveys.loadIfEnabled(),(P(t?.captureEventName)||t!=null&&t.captureEventName)&&this.capture((s=t?.captureEventName)!==null&&s!==void 0?s:"$opt_in",t?.captureProperties,{send_instantly:!0}),this.config.capture_pageview&&this.Dr()}else C.warn('Consent opt in/out is not valid with cookieless_mode="always" and will be ignored')}opt_out_capturing(){var t,e;this.config.cookieless_mode!=="always"?(this.config.cookieless_mode==="on_reject"&&this.consent.isOptedIn()&&this.reset(!0),this.consent.optInOut(!1),this.Br(),this.config.cookieless_mode==="on_reject"&&(this.register({distinct_id:Ni,$device_id:null}),(t=this.sessionManager)==null||t.destroy(),this.sessionManager=void 0,this.sessionPropsManager=void 0,(e=this.sessionRecording)==null||e.stopRecording(),this.sessionRecording=void 0,this.Dr())):C.warn('Consent opt in/out is not valid with cookieless_mode="always" and will be ignored')}has_opted_in_capturing(){return this.consent.isOptedIn()}has_opted_out_capturing(){return this.consent.isOptedOut()}get_explicit_consent_status(){var t=this.consent.consent;return t===ne.GRANTED?"granted":t===ne.DENIED?"denied":"pending"}is_capturing(){return this.config.cookieless_mode==="always"||(this.config.cookieless_mode==="on_reject"?this.consent.isExplicitlyOptedOut()||this.consent.isOptedIn():!this.has_opted_out_capturing())}clear_opt_in_out_capturing(){this.consent.reset(),this.Br()}_is_bot(){return It?Oh(It,this.config.custom_blocked_useragents):void 0}Dr(){E&&(E.visibilityState==="visible"?this.mr||(this.mr=!0,this.capture("$pageview",{title:E.title},{send_instantly:!0}),this.yr&&(E.removeEventListener("visibilitychange",this.yr),this.yr=null)):this.yr||(this.yr=this.Dr.bind(this),ct(E,"visibilitychange",this.yr)))}debug(t){t===!1?(b?.console.log("You've disabled debug mode."),this.set_config({debug:!1})):(b?.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),this.set_config({debug:!0}))}M(){var t,e,s,n,r,o,a,l=this.Er||{};return"advanced_disable_flags"in l?!!l.advanced_disable_flags:this.config.advanced_disable_flags!==!1?!!this.config.advanced_disable_flags:this.config.advanced_disable_decide===!0?(C.warn("Config field 'advanced_disable_decide' is deprecated. Please use 'advanced_disable_flags' instead. The old field will be removed in a future major version."),!0):(s="advanced_disable_decide",n=!1,r=C,o=(e="advanced_disable_flags")in(t=l)&&!P(t[e]),a=s in t&&!P(t[s]),o?t[e]:a?(r&&r.warn("Config field '"+s+"' is deprecated. Please use '"+e+"' instead. The old field will be removed in a future major version."),t[s]):n)}Nr(t){if(tt(this.config.before_send))return t;var e=K(this.config.before_send)?this.config.before_send:[this.config.before_send],s=t;for(var n of e){if(s=n(s),tt(s)){var r="Event '"+t.event+"' was rejected in beforeSend function";return Mp(t.event)?C.warn(r+". This can cause unexpected behavior."):C.info(r),null}s.properties&&!ii(s.properties)||C.warn("Event '"+t.event+"' has no properties after beforeSend function, this is likely an error.")}return s}getPageViewId(){var t;return(t=this.pageViewManager.Vt)==null?void 0:t.pageViewId}captureTraceFeedback(t,e){this.capture("$ai_feedback",{$ai_trace_id:String(t),$ai_feedback_text:e})}captureTraceMetric(t,e,s){this.capture("$ai_metric",{$ai_trace_id:String(t),$ai_metric_name:e,$ai_metric_value:String(s)})}$r(t){var e=we(t)&&!t,s=st.H()&&st.q("ph_debug")==="true";return!e&&(!!s||t)}};(function(i,t){for(var e=0;e<t.length;e++)i.prototype[t[e]]=jp(i.prototype[t[e]])})(pn,["identify"]);var Mc,Jw=(Mc=ts[ei]=new pn,(function(){function i(){i.done||(i.done=!0,Th=!1,X(ts,function(t){t._dom_loaded()}))}E!=null&&E.addEventListener?E.readyState==="complete"?i():ct(E,"DOMContentLoaded",i,{capture:!1}):b&&C.error("Browser doesn't support `document.addEventListener` so PostHog couldn't be initialized")})(),Mc);function ds(i){return i+.5|0}var Me=(i,t,e)=>Math.max(Math.min(i,e),t);function hs(i){return Me(ds(i*2.55),0,255)}function Pe(i){return Me(ds(i*255),0,255)}function ae(i){return Me(ds(i/2.55)/100,0,1)}function Ah(i){return Me(ds(i*100),0,100)}var Nt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},ea=[..."0123456789ABCDEF"],Jg=i=>ea[i&15],Zg=i=>ea[(i&240)>>4]+ea[i&15],vn=i=>(i&240)>>4===(i&15),Qg=i=>vn(i.r)&&vn(i.g)&&vn(i.b)&&vn(i.a);function tm(i){var t=i.length,e;return i[0]==="#"&&(t===4||t===5?e={r:255&Nt[i[1]]*17,g:255&Nt[i[2]]*17,b:255&Nt[i[3]]*17,a:t===5?Nt[i[4]]*17:255}:(t===7||t===9)&&(e={r:Nt[i[1]]<<4|Nt[i[2]],g:Nt[i[3]]<<4|Nt[i[4]],b:Nt[i[5]]<<4|Nt[i[6]],a:t===9?Nt[i[7]]<<4|Nt[i[8]]:255})),e}var em=(i,t)=>i<255?t(i):"";function im(i){var t=Qg(i)?Jg:Zg;return i?"#"+t(i.r)+t(i.g)+t(i.b)+em(i.a,t):void 0}var sm=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Rh(i,t,e){let s=t*Math.min(e,1-e),n=(r,o=(r+i/30)%12)=>e-s*Math.max(Math.min(o-3,9-o,1),-1);return[n(0),n(8),n(4)]}function nm(i,t,e){let s=(n,r=(n+i/60)%6)=>e-e*t*Math.max(Math.min(r,4-r,1),0);return[s(5),s(3),s(1)]}function rm(i,t,e){let s=Rh(i,1,.5),n;for(t+e>1&&(n=1/(t+e),t*=n,e*=n),n=0;n<3;n++)s[n]*=1-t-e,s[n]+=t;return s}function om(i,t,e,s,n){return i===n?(t-e)/s+(t<e?6:0):t===n?(e-i)/s+2:(i-t)/s+4}function ia(i){let e=i.r/255,s=i.g/255,n=i.b/255,r=Math.max(e,s,n),o=Math.min(e,s,n),a=(r+o)/2,l,c,h;return r!==o&&(h=r-o,c=a>.5?h/(2-r-o):h/(r+o),l=om(e,s,n,h,r),l=l*60+.5),[l|0,c||0,a]}function sa(i,t,e,s){return(Array.isArray(t)?i(t[0],t[1],t[2]):i(t,e,s)).map(Pe)}function na(i,t,e){return sa(Rh,i,t,e)}function am(i,t,e){return sa(rm,i,t,e)}function lm(i,t,e){return sa(nm,i,t,e)}function Lh(i){return(i%360+360)%360}function cm(i){let t=sm.exec(i),e=255,s;if(!t)return;t[5]!==s&&(e=t[6]?hs(+t[5]):Pe(+t[5]));let n=Lh(+t[2]),r=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?s=am(n,r,o):t[1]==="hsv"?s=lm(n,r,o):s=na(n,r,o),{r:s[0],g:s[1],b:s[2],a:e}}function hm(i,t){var e=ia(i);e[0]=Lh(e[0]+t),e=na(e),i.r=e[0],i.g=e[1],i.b=e[2]}function um(i){if(!i)return;let t=ia(i),e=t[0],s=Ah(t[1]),n=Ah(t[2]);return i.a<255?`hsla(${e}, ${s}%, ${n}%, ${ae(i.a)})`:`hsl(${e}, ${s}%, ${n}%)`}var Dh={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Ih={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function dm(){let i={},t=Object.keys(Ih),e=Object.keys(Dh),s,n,r,o,a;for(s=0;s<t.length;s++){for(o=a=t[s],n=0;n<e.length;n++)r=e[n],a=a.replace(r,Dh[r]);r=parseInt(Ih[o],16),i[a]=[r>>16&255,r>>8&255,r&255]}return i}var bn;function fm(i){bn||(bn=dm(),bn.transparent=[0,0,0,0]);let t=bn[i.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}var pm=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function gm(i){let t=pm.exec(i),e=255,s,n,r;if(t){if(t[7]!==s){let o=+t[7];e=t[8]?hs(o):Me(o*255,0,255)}return s=+t[1],n=+t[3],r=+t[5],s=255&(t[2]?hs(s):Me(s,0,255)),n=255&(t[4]?hs(n):Me(n,0,255)),r=255&(t[6]?hs(r):Me(r,0,255)),{r:s,g:n,b:r,a:e}}}function mm(i){return i&&(i.a<255?`rgba(${i.r}, ${i.g}, ${i.b}, ${ae(i.a)})`:`rgb(${i.r}, ${i.g}, ${i.b})`)}var ta=i=>i<=.0031308?i*12.92:Math.pow(i,1/2.4)*1.055-.055,di=i=>i<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4);function _m(i,t,e){let s=di(ae(i.r)),n=di(ae(i.g)),r=di(ae(i.b));return{r:Pe(ta(s+e*(di(ae(t.r))-s))),g:Pe(ta(n+e*(di(ae(t.g))-n))),b:Pe(ta(r+e*(di(ae(t.b))-r))),a:i.a+e*(t.a-i.a)}}function xn(i,t,e){if(i){let s=ia(i);s[t]=Math.max(0,Math.min(s[t]+s[t]*e,t===0?360:1)),s=na(s),i.r=s[0],i.g=s[1],i.b=s[2]}}function Nh(i,t){return i&&Object.assign(t||{},i)}function Fh(i){var t={r:0,g:0,b:0,a:255};return Array.isArray(i)?i.length>=3&&(t={r:i[0],g:i[1],b:i[2],a:255},i.length>3&&(t.a=Pe(i[3]))):(t=Nh(i,{r:0,g:0,b:0,a:1}),t.a=Pe(t.a)),t}function vm(i){return i.charAt(0)==="r"?gm(i):cm(i)}var us=class i{constructor(t){if(t instanceof i)return t;let e=typeof t,s;e==="object"?s=Fh(t):e==="string"&&(s=tm(t)||fm(t)||vm(t)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var t=Nh(this._rgb);return t&&(t.a=ae(t.a)),t}set rgb(t){this._rgb=Fh(t)}rgbString(){return this._valid?mm(this._rgb):void 0}hexString(){return this._valid?im(this._rgb):void 0}hslString(){return this._valid?um(this._rgb):void 0}mix(t,e){if(t){let s=this.rgb,n=t.rgb,r,o=e===r?.5:e,a=2*o-1,l=s.a-n.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;r=1-c,s.r=255&c*s.r+r*n.r+.5,s.g=255&c*s.g+r*n.g+.5,s.b=255&c*s.b+r*n.b+.5,s.a=o*s.a+(1-o)*n.a,this.rgb=s}return this}interpolate(t,e){return t&&(this._rgb=_m(this._rgb,t._rgb,e)),this}clone(){return new i(this.rgb)}alpha(t){return this._rgb.a=Pe(t),this}clearer(t){let e=this._rgb;return e.a*=1-t,this}greyscale(){let t=this._rgb,e=ds(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){let e=this._rgb;return e.a*=1+t,this}negate(){let t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return xn(this._rgb,2,t),this}darken(t){return xn(this._rgb,2,-t),this}saturate(t){return xn(this._rgb,1,t),this}desaturate(t){return xn(this._rgb,1,-t),this}rotate(t){return hm(this._rgb,t),this}};function Kt(){}var Gh=(()=>{let i=0;return()=>i++})();function N(i){return i==null}function Z(i){if(Array.isArray&&Array.isArray(i))return!0;let t=Object.prototype.toString.call(i);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function B(i){return i!==null&&Object.prototype.toString.call(i)==="[object Object]"}function nt(i){return(typeof i=="number"||i instanceof Number)&&isFinite(+i)}function Ot(i,t){return nt(i)?i:t}function R(i,t){return typeof i>"u"?t:i}var Xh=(i,t)=>typeof i=="string"&&i.endsWith("%")?parseFloat(i)/100:+i/t,la=(i,t)=>typeof i=="string"&&i.endsWith("%")?parseFloat(i)/100*t:+i;function Y(i,t,e){if(i&&typeof i.call=="function")return i.apply(e,t)}function W(i,t,e,s){let n,r,o;if(Z(i))if(r=i.length,s)for(n=r-1;n>=0;n--)t.call(e,i[n],n);else for(n=0;n<r;n++)t.call(e,i[n],n);else if(B(i))for(o=Object.keys(i),r=o.length,n=0;n<r;n++)t.call(e,i[o[n]],o[n])}function gs(i,t){let e,s,n,r;if(!i||!t||i.length!==t.length)return!1;for(e=0,s=i.length;e<s;++e)if(n=i[e],r=t[e],n.datasetIndex!==r.datasetIndex||n.index!==r.index)return!1;return!0}function Sn(i){if(Z(i))return i.map(Sn);if(B(i)){let t=Object.create(null),e=Object.keys(i),s=e.length,n=0;for(;n<s;++n)t[e[n]]=Sn(i[e[n]]);return t}return i}function Kh(i){return["__proto__","prototype","constructor"].indexOf(i)===-1}function bm(i,t,e,s){if(!Kh(i))return;let n=t[i],r=e[i];B(n)&&B(r)?pi(n,r,s):t[i]=Sn(r)}function pi(i,t,e){let s=Z(t)?t:[t],n=s.length;if(!B(i))return i;e=e||{};let r=e.merger||bm,o;for(let a=0;a<n;++a){if(o=s[a],!B(o))continue;let l=Object.keys(o);for(let c=0,h=l.length;c<h;++c)r(l[c],i,o,e)}return i}function mi(i,t){return pi(i,t,{merger:xm})}function xm(i,t,e){if(!Kh(i))return;let s=t[i],n=e[i];B(s)&&B(n)?mi(s,n):Object.prototype.hasOwnProperty.call(t,i)||(t[i]=Sn(n))}var $h={"":i=>i,x:i=>i.x,y:i=>i.y};function ym(i){let t=i.split("."),e=[],s="";for(let n of t)s+=n,s.endsWith("\\")?s=s.slice(0,-1)+".":(e.push(s),s="");return e}function wm(i){let t=ym(i);return e=>{for(let s of t){if(s==="")break;e=e&&e[s]}return e}}function he(i,t){return($h[t]||($h[t]=wm(t)))(i)}function Cn(i){return i.charAt(0).toUpperCase()+i.slice(1)}var _i=i=>typeof i<"u",le=i=>typeof i=="function",ca=(i,t)=>{if(i.size!==t.size)return!1;for(let e of i)if(!t.has(e))return!1;return!0};function Jh(i){return i.type==="mouseup"||i.type==="click"||i.type==="contextmenu"}var z=Math.PI,Q=2*z,km=Q+z,Mn=Number.POSITIVE_INFINITY,Sm=z/180,ot=z/2,qe=z/4,Bh=z*2/3,ce=Math.log10,Ht=Math.sign;function vi(i,t,e){return Math.abs(i-t)<e}function ha(i){let t=Math.round(i);i=vi(i,t,i/1e3)?t:i;let e=Math.pow(10,Math.floor(ce(i))),s=i/e;return(s<=1?1:s<=2?2:s<=5?5:10)*e}function Zh(i){let t=[],e=Math.sqrt(i),s;for(s=1;s<e;s++)i%s===0&&(t.push(s),t.push(i/s));return e===(e|0)&&t.push(e),t.sort((n,r)=>n-r).pop(),t}function Mm(i){return typeof i=="symbol"||typeof i=="object"&&i!==null&&!(Symbol.toPrimitive in i||"toString"in i||"valueOf"in i)}function Xe(i){return!Mm(i)&&!isNaN(parseFloat(i))&&isFinite(i)}function Qh(i,t){let e=Math.round(i);return e-t<=i&&e+t>=i}function ua(i,t,e){let s,n,r;for(s=0,n=i.length;s<n;s++)r=i[s][e],isNaN(r)||(t.min=Math.min(t.min,r),t.max=Math.max(t.max,r))}function $t(i){return i*(z/180)}function On(i){return i*(180/z)}function da(i){if(!nt(i))return;let t=1,e=0;for(;Math.round(i*t)/t!==i;)t*=10,e++;return e}function fa(i,t){let e=t.x-i.x,s=t.y-i.y,n=Math.sqrt(e*e+s*s),r=Math.atan2(s,e);return r<-.5*z&&(r+=Q),{angle:r,distance:n}}function Pn(i,t){return Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2))}function Pm(i,t){return(i-t+km)%Q-z}function vt(i){return(i%Q+Q)%Q}function bi(i,t,e,s){let n=vt(i),r=vt(t),o=vt(e),a=vt(r-n),l=vt(o-n),c=vt(n-r),h=vt(n-o);return n===r||n===o||s&&r===o||a>l&&c<h}function pt(i,t,e){return Math.max(t,Math.min(e,i))}function tu(i){return pt(i,-32768,32767)}function Jt(i,t,e,s=1e-6){return i>=Math.min(t,e)-s&&i<=Math.max(t,e)+s}function Tn(i,t,e){e=e||(o=>i[o]<t);let s=i.length-1,n=0,r;for(;s-n>1;)r=n+s>>1,e(r)?n=r:s=r;return{lo:n,hi:s}}var Gt=(i,t,e,s)=>Tn(i,e,s?n=>{let r=i[n][t];return r<e||r===e&&i[n+1][t]===e}:n=>i[n][t]<e),eu=(i,t,e)=>Tn(i,e,s=>i[s][t]>=e);function iu(i,t,e){let s=0,n=i.length;for(;s<n&&i[s]<t;)s++;for(;n>s&&i[n-1]>e;)n--;return s>0||n<i.length?i.slice(s,n):i}var su=["push","pop","shift","splice","unshift"];function nu(i,t){if(i._chartjs){i._chartjs.listeners.push(t);return}Object.defineProperty(i,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),su.forEach(e=>{let s="_onData"+Cn(e),n=i[e];Object.defineProperty(i,e,{configurable:!0,enumerable:!1,value(...r){let o=n.apply(this,r);return i._chartjs.listeners.forEach(a=>{typeof a[s]=="function"&&a[s](...r)}),o}})})}function pa(i,t){let e=i._chartjs;if(!e)return;let s=e.listeners,n=s.indexOf(t);n!==-1&&s.splice(n,1),!(s.length>0)&&(su.forEach(r=>{delete i[r]}),delete i._chartjs)}function ga(i){let t=new Set(i);return t.size===i.length?i:Array.from(t)}var ma=(function(){return typeof window>"u"?function(i){return i()}:window.requestAnimationFrame})();function _a(i,t){let e=[],s=!1;return function(...n){e=n,s||(s=!0,ma.call(window,()=>{s=!1,i.apply(t,e)}))}}function ru(i,t){let e;return function(...s){return t?(clearTimeout(e),e=setTimeout(i,t,s)):i.apply(this,s),t}}var An=i=>i==="start"?"left":i==="end"?"right":"center",bt=(i,t,e)=>i==="start"?t:i==="end"?e:(t+e)/2,ou=(i,t,e,s)=>i===(s?"left":"right")?e:i==="center"?(t+e)/2:t;function va(i,t,e){let s=t.length,n=0,r=s;if(i._sorted){let{iScale:o,vScale:a,_parsed:l}=i,c=i.dataset&&i.dataset.options?i.dataset.options.spanGaps:null,h=o.axis,{min:u,max:d,minDefined:f,maxDefined:p}=o.getUserBounds();if(f){if(n=Math.min(Gt(l,h,u).lo,e?s:Gt(t,h,o.getPixelForValue(u)).lo),c){let g=l.slice(0,n+1).reverse().findIndex(m=>!N(m[a.axis]));n-=Math.max(0,g)}n=pt(n,0,s-1)}if(p){let g=Math.max(Gt(l,o.axis,d,!0).hi+1,e?0:Gt(t,h,o.getPixelForValue(d),!0).hi+1);if(c){let m=l.slice(g-1).findIndex(_=>!N(_[a.axis]));g+=Math.max(0,m)}r=pt(g,n,s)-n}else r=s-n}return{start:n,count:r}}function ba(i){let{xScale:t,yScale:e,_scaleRanges:s}=i,n={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!s)return i._scaleRanges=n,!0;let r=s.xmin!==t.min||s.xmax!==t.max||s.ymin!==e.min||s.ymax!==e.max;return Object.assign(s,n),r}var yn=i=>i===0||i===1,zh=(i,t,e)=>-(Math.pow(2,10*(i-=1))*Math.sin((i-t)*Q/e)),jh=(i,t,e)=>Math.pow(2,-10*i)*Math.sin((i-t)*Q/e)+1,fi={linear:i=>i,easeInQuad:i=>i*i,easeOutQuad:i=>-i*(i-2),easeInOutQuad:i=>(i/=.5)<1?.5*i*i:-.5*(--i*(i-2)-1),easeInCubic:i=>i*i*i,easeOutCubic:i=>(i-=1)*i*i+1,easeInOutCubic:i=>(i/=.5)<1?.5*i*i*i:.5*((i-=2)*i*i+2),easeInQuart:i=>i*i*i*i,easeOutQuart:i=>-((i-=1)*i*i*i-1),easeInOutQuart:i=>(i/=.5)<1?.5*i*i*i*i:-.5*((i-=2)*i*i*i-2),easeInQuint:i=>i*i*i*i*i,easeOutQuint:i=>(i-=1)*i*i*i*i+1,easeInOutQuint:i=>(i/=.5)<1?.5*i*i*i*i*i:.5*((i-=2)*i*i*i*i+2),easeInSine:i=>-Math.cos(i*ot)+1,easeOutSine:i=>Math.sin(i*ot),easeInOutSine:i=>-.5*(Math.cos(z*i)-1),easeInExpo:i=>i===0?0:Math.pow(2,10*(i-1)),easeOutExpo:i=>i===1?1:-Math.pow(2,-10*i)+1,easeInOutExpo:i=>yn(i)?i:i<.5?.5*Math.pow(2,10*(i*2-1)):.5*(-Math.pow(2,-10*(i*2-1))+2),easeInCirc:i=>i>=1?i:-(Math.sqrt(1-i*i)-1),easeOutCirc:i=>Math.sqrt(1-(i-=1)*i),easeInOutCirc:i=>(i/=.5)<1?-.5*(Math.sqrt(1-i*i)-1):.5*(Math.sqrt(1-(i-=2)*i)+1),easeInElastic:i=>yn(i)?i:zh(i,.075,.3),easeOutElastic:i=>yn(i)?i:jh(i,.075,.3),easeInOutElastic(i){return yn(i)?i:i<.5?.5*zh(i*2,.1125,.45):.5+.5*jh(i*2-1,.1125,.45)},easeInBack(i){return i*i*((1.70158+1)*i-1.70158)},easeOutBack(i){return(i-=1)*i*((1.70158+1)*i+1.70158)+1},easeInOutBack(i){let t=1.70158;return(i/=.5)<1?.5*(i*i*(((t*=1.525)+1)*i-t)):.5*((i-=2)*i*(((t*=1.525)+1)*i+t)+2)},easeInBounce:i=>1-fi.easeOutBounce(1-i),easeOutBounce(i){return i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375},easeInOutBounce:i=>i<.5?fi.easeInBounce(i*2)*.5:fi.easeOutBounce(i*2-1)*.5+.5};function xa(i){if(i&&typeof i=="object"){let t=i.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function ya(i){return xa(i)?i:new us(i)}function ra(i){return xa(i)?i:new us(i).saturate(.5).darken(.1).hexString()}var Em=["x","y","borderWidth","radius","tension"],Cm=["color","borderColor","backgroundColor"];function Om(i){i.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),i.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),i.set("animations",{colors:{type:"color",properties:Cm},numbers:{type:"number",properties:Em}}),i.describe("animations",{_fallback:"animation"}),i.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function Tm(i){i.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}var Hh=new Map;function Am(i,t){t=t||{};let e=i+JSON.stringify(t),s=Hh.get(e);return s||(s=new Intl.NumberFormat(i,t),Hh.set(e,s)),s}function xi(i,t,e){return Am(t,e).format(i)}var au={values(i){return Z(i)?i:""+i},numeric(i,t,e){if(i===0)return"0";let s=this.chart.options.locale,n,r=i;if(e.length>1){let c=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(c<1e-4||c>1e15)&&(n="scientific"),r=Dm(i,e)}let o=ce(Math.abs(r)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:n,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),xi(i,s,l)},logarithmic(i,t,e){if(i===0)return"0";let s=e[t].significand||i/Math.pow(10,Math.floor(ce(i)));return[1,2,3,5,10,15].includes(s)||t>.8*e.length?au.numeric.call(this,i,t,e):""}};function Dm(i,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&i!==Math.floor(i)&&(e=i-Math.floor(i)),e}var ms={formatters:au};function Im(i){i.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:ms.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),i.route("scale.ticks","color","","color"),i.route("scale.grid","color","","borderColor"),i.route("scale.border","color","","borderColor"),i.route("scale.title","color","","color"),i.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),i.describe("scales",{_fallback:"scale"}),i.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}var Oe=Object.create(null),Dn=Object.create(null);function fs(i,t){if(!t)return i;let e=t.split(".");for(let s=0,n=e.length;s<n;++s){let r=e[s];i=i[r]||(i[r]=Object.create(null))}return i}function oa(i,t,e){return typeof t=="string"?pi(fs(i,t),e):pi(fs(i,""),t)}var aa=class{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,n)=>ra(n.backgroundColor),this.hoverBorderColor=(s,n)=>ra(n.borderColor),this.hoverColor=(s,n)=>ra(n.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return oa(this,t,e)}get(t){return fs(this,t)}describe(t,e){return oa(Dn,t,e)}override(t,e){return oa(Oe,t,e)}route(t,e,s,n){let r=fs(this,t),o=fs(this,s),a="_"+e;Object.defineProperties(r,{[a]:{value:r[e],writable:!0},[e]:{enumerable:!0,get(){let l=this[a],c=o[n];return B(l)?Object.assign({},c,l):R(l,c)},set(l){this[a]=l}}})}apply(t){t.forEach(e=>e(this))}},G=new aa({_scriptable:i=>!i.startsWith("on"),_indexable:i=>i!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Om,Tm,Im]);function Fm(i){return!i||N(i.size)||N(i.family)?null:(i.style?i.style+" ":"")+(i.weight?i.weight+" ":"")+i.size+"px "+i.family}function ps(i,t,e,s,n){let r=t[n];return r||(r=t[n]=i.measureText(n).width,e.push(n)),r>s&&(s=r),s}function lu(i,t,e,s){s=s||{};let n=s.data=s.data||{},r=s.garbageCollect=s.garbageCollect||[];s.font!==t&&(n=s.data={},r=s.garbageCollect=[],s.font=t),i.save(),i.font=t;let o=0,a=e.length,l,c,h,u,d;for(l=0;l<a;l++)if(u=e[l],u!=null&&!Z(u))o=ps(i,n,r,o,u);else if(Z(u))for(c=0,h=u.length;c<h;c++)d=u[c],d!=null&&!Z(d)&&(o=ps(i,n,r,o,d));i.restore();let f=r.length/2;if(f>e.length){for(l=0;l<f;l++)delete n[r[l]];r.splice(0,f)}return o}function Te(i,t,e){let s=i.currentDevicePixelRatio,n=e!==0?Math.max(e/2,.5):0;return Math.round((t-n)*s)/s+n}function wa(i,t){!t&&!i||(t=t||i.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,i.width,i.height),t.restore())}function In(i,t,e,s){ka(i,t,e,s,null)}function ka(i,t,e,s,n){let r,o,a,l,c,h,u,d,f=t.pointStyle,p=t.rotation,g=t.radius,m=(p||0)*Sm;if(f&&typeof f=="object"&&(r=f.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){i.save(),i.translate(e,s),i.rotate(m),i.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),i.restore();return}if(!(isNaN(g)||g<=0)){switch(i.beginPath(),f){default:n?i.ellipse(e,s,n/2,g,0,0,Q):i.arc(e,s,g,0,Q),i.closePath();break;case"triangle":h=n?n/2:g,i.moveTo(e+Math.sin(m)*h,s-Math.cos(m)*g),m+=Bh,i.lineTo(e+Math.sin(m)*h,s-Math.cos(m)*g),m+=Bh,i.lineTo(e+Math.sin(m)*h,s-Math.cos(m)*g),i.closePath();break;case"rectRounded":c=g*.516,l=g-c,o=Math.cos(m+qe)*l,u=Math.cos(m+qe)*(n?n/2-c:l),a=Math.sin(m+qe)*l,d=Math.sin(m+qe)*(n?n/2-c:l),i.arc(e-u,s-a,c,m-z,m-ot),i.arc(e+d,s-o,c,m-ot,m),i.arc(e+u,s+a,c,m,m+ot),i.arc(e-d,s+o,c,m+ot,m+z),i.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*g,h=n?n/2:l,i.rect(e-h,s-l,2*h,2*l);break}m+=qe;case"rectRot":u=Math.cos(m)*(n?n/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(n?n/2:g),i.moveTo(e-u,s-a),i.lineTo(e+d,s-o),i.lineTo(e+u,s+a),i.lineTo(e-d,s+o),i.closePath();break;case"crossRot":m+=qe;case"cross":u=Math.cos(m)*(n?n/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(n?n/2:g),i.moveTo(e-u,s-a),i.lineTo(e+u,s+a),i.moveTo(e+d,s-o),i.lineTo(e-d,s+o);break;case"star":u=Math.cos(m)*(n?n/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(n?n/2:g),i.moveTo(e-u,s-a),i.lineTo(e+u,s+a),i.moveTo(e+d,s-o),i.lineTo(e-d,s+o),m+=qe,u=Math.cos(m)*(n?n/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(n?n/2:g),i.moveTo(e-u,s-a),i.lineTo(e+u,s+a),i.moveTo(e+d,s-o),i.lineTo(e-d,s+o);break;case"line":o=n?n/2:Math.cos(m)*g,a=Math.sin(m)*g,i.moveTo(e-o,s-a),i.lineTo(e+o,s+a);break;case"dash":i.moveTo(e,s),i.lineTo(e+Math.cos(m)*(n?n/2:g),s+Math.sin(m)*g);break;case!1:i.closePath();break}i.fill(),t.borderWidth>0&&i.stroke()}}function Xt(i,t,e){return e=e||.5,!t||i&&i.x>t.left-e&&i.x<t.right+e&&i.y>t.top-e&&i.y<t.bottom+e}function _s(i,t){i.save(),i.beginPath(),i.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),i.clip()}function vs(i){i.restore()}function cu(i,t,e,s,n){if(!t)return i.lineTo(e.x,e.y);if(n==="middle"){let r=(t.x+e.x)/2;i.lineTo(r,t.y),i.lineTo(r,e.y)}else n==="after"!=!!s?i.lineTo(t.x,e.y):i.lineTo(e.x,t.y);i.lineTo(e.x,e.y)}function hu(i,t,e,s){if(!t)return i.lineTo(e.x,e.y);i.bezierCurveTo(s?t.cp1x:t.cp2x,s?t.cp1y:t.cp2y,s?e.cp2x:e.cp1x,s?e.cp2y:e.cp1y,e.x,e.y)}function Rm(i,t){t.translation&&i.translate(t.translation[0],t.translation[1]),N(t.rotation)||i.rotate(t.rotation),t.color&&(i.fillStyle=t.color),t.textAlign&&(i.textAlign=t.textAlign),t.textBaseline&&(i.textBaseline=t.textBaseline)}function Lm(i,t,e,s,n){if(n.strikethrough||n.underline){let r=i.measureText(s),o=t-r.actualBoundingBoxLeft,a=t+r.actualBoundingBoxRight,l=e-r.actualBoundingBoxAscent,c=e+r.actualBoundingBoxDescent,h=n.strikethrough?(l+c)/2:c;i.strokeStyle=i.fillStyle,i.beginPath(),i.lineWidth=n.decorationWidth||2,i.moveTo(o,h),i.lineTo(a,h),i.stroke()}}function Nm(i,t){let e=i.fillStyle;i.fillStyle=t.color,i.fillRect(t.left,t.top,t.width,t.height),i.fillStyle=e}function Ae(i,t,e,s,n,r={}){let o=Z(t)?t:[t],a=r.strokeWidth>0&&r.strokeColor!=="",l,c;for(i.save(),i.font=n.string,Rm(i,r),l=0;l<o.length;++l)c=o[l],r.backdrop&&Nm(i,r.backdrop),a&&(r.strokeColor&&(i.strokeStyle=r.strokeColor),N(r.strokeWidth)||(i.lineWidth=r.strokeWidth),i.strokeText(c,e,s,r.maxWidth)),i.fillText(c,e,s,r.maxWidth),Lm(i,e,s,c,r),s+=Number(n.lineHeight);i.restore()}function yi(i,t){let{x:e,y:s,w:n,h:r,radius:o}=t;i.arc(e+o.topLeft,s+o.topLeft,o.topLeft,1.5*z,z,!0),i.lineTo(e,s+r-o.bottomLeft),i.arc(e+o.bottomLeft,s+r-o.bottomLeft,o.bottomLeft,z,ot,!0),i.lineTo(e+n-o.bottomRight,s+r),i.arc(e+n-o.bottomRight,s+r-o.bottomRight,o.bottomRight,ot,0,!0),i.lineTo(e+n,s+o.topRight),i.arc(e+n-o.topRight,s+o.topRight,o.topRight,0,-ot,!0),i.lineTo(e+o.topLeft,s)}var $m=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Bm=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function zm(i,t){let e=(""+i).match($m);if(!e||e[1]==="normal")return t*1.2;switch(i=+e[2],e[3]){case"px":return i;case"%":i/=100;break}return t*i}var jm=i=>+i||0;function Fn(i,t){let e={},s=B(t),n=s?Object.keys(t):t,r=B(i)?s?o=>R(i[o],i[t[o]]):o=>i[o]:()=>i;for(let o of n)e[o]=jm(r(o));return e}function Sa(i){return Fn(i,{top:"y",right:"x",bottom:"y",left:"x"})}function De(i){return Fn(i,["topLeft","topRight","bottomLeft","bottomRight"])}function xt(i){let t=Sa(i);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function ht(i,t){i=i||{},t=t||G.font;let e=R(i.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let s=R(i.style,t.style);s&&!(""+s).match(Bm)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);let n={family:R(i.family,t.family),lineHeight:zm(R(i.lineHeight,t.lineHeight),e),size:e,style:s,weight:R(i.weight,t.weight),string:""};return n.string=Fm(n),n}function wi(i,t,e,s){let n=!0,r,o,a;for(r=0,o=i.length;r<o;++r)if(a=i[r],a!==void 0&&(t!==void 0&&typeof a=="function"&&(a=a(t),n=!1),e!==void 0&&Z(a)&&(a=a[e%a.length],n=!1),a!==void 0))return s&&!n&&(s.cacheable=!1),a}function uu(i,t,e){let{min:s,max:n}=i,r=la(t,(n-s)/2),o=(a,l)=>e&&a===0?0:a+l;return{min:o(s,-Math.abs(r)),max:o(n,r)}}function ue(i,t){return Object.assign(Object.create(i),t)}function Rn(i,t=[""],e,s,n=()=>i[0]){let r=e||i;typeof s>"u"&&(s=pu("_fallback",i));let o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:i,_rootScopes:r,_fallback:s,_getTarget:n,override:a=>Rn([a,...i],t,r,s)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete i[0][l],!0},get(a,l){return du(a,l,()=>Xm(l,t,i,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(i[0])},has(a,l){return Vh(a).includes(l)},ownKeys(a){return Vh(a)},set(a,l,c){let h=a._storage||(a._storage=n());return a[l]=h[l]=c,delete a._keys,!0}})}function Ge(i,t,e,s){let n={_cacheable:!1,_proxy:i,_context:t,_subProxy:e,_stack:new Set,_descriptors:Ma(i,s),setContext:r=>Ge(i,r,e,s),override:r=>Ge(i.override(r),t,e,s)};return new Proxy(n,{deleteProperty(r,o){return delete r[o],delete i[o],!0},get(r,o,a){return du(r,o,()=>Wm(r,o,a))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(i,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(i,o)},getPrototypeOf(){return Reflect.getPrototypeOf(i)},has(r,o){return Reflect.has(i,o)},ownKeys(){return Reflect.ownKeys(i)},set(r,o,a){return i[o]=a,delete r[o],!0}})}function Ma(i,t={scriptable:!0,indexable:!0}){let{_scriptable:e=t.scriptable,_indexable:s=t.indexable,_allKeys:n=t.allKeys}=i;return{allKeys:n,scriptable:e,indexable:s,isScriptable:le(e)?e:()=>e,isIndexable:le(s)?s:()=>s}}var Hm=(i,t)=>i?i+Cn(t):t,Pa=(i,t)=>B(t)&&i!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function du(i,t,e){if(Object.prototype.hasOwnProperty.call(i,t)||t==="constructor")return i[t];let s=e();return i[t]=s,s}function Wm(i,t,e){let{_proxy:s,_context:n,_subProxy:r,_descriptors:o}=i,a=s[t];return le(a)&&o.isScriptable(t)&&(a=Vm(t,a,i,e)),Z(a)&&a.length&&(a=Um(t,a,i,o.isIndexable)),Pa(t,a)&&(a=Ge(a,n,r&&r[t],o)),a}function Vm(i,t,e,s){let{_proxy:n,_context:r,_subProxy:o,_stack:a}=e;if(a.has(i))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+i);a.add(i);let l=t(r,o||s);return a.delete(i),Pa(i,l)&&(l=Ea(n._scopes,n,i,l)),l}function Um(i,t,e,s){let{_proxy:n,_context:r,_subProxy:o,_descriptors:a}=e;if(typeof r.index<"u"&&s(i))return t[r.index%t.length];if(B(t[0])){let l=t,c=n._scopes.filter(h=>h!==l);t=[];for(let h of l){let u=Ea(c,n,i,h);t.push(Ge(u,r,o&&o[i],a))}}return t}function fu(i,t,e){return le(i)?i(t,e):i}var qm=(i,t)=>i===!0?t:typeof i=="string"?he(t,i):void 0;function Ym(i,t,e,s,n){for(let r of t){let o=qm(e,r);if(o){i.add(o);let a=fu(o._fallback,e,n);if(typeof a<"u"&&a!==e&&a!==s)return a}else if(o===!1&&typeof s<"u"&&e!==s)return null}return!1}function Ea(i,t,e,s){let n=t._rootScopes,r=fu(t._fallback,e,s),o=[...i,...n],a=new Set;a.add(s);let l=Wh(a,o,e,r||e,s);return l===null||typeof r<"u"&&r!==e&&(l=Wh(a,o,r,l,s),l===null)?!1:Rn(Array.from(a),[""],n,r,()=>Gm(t,e,s))}function Wh(i,t,e,s,n){for(;e;)e=Ym(i,t,e,s,n);return e}function Gm(i,t,e){let s=i._getTarget();t in s||(s[t]={});let n=s[t];return Z(n)&&B(e)?e:n||{}}function Xm(i,t,e,s){let n;for(let r of t)if(n=pu(Hm(r,i),e),typeof n<"u")return Pa(i,n)?Ea(e,s,i,n):n}function pu(i,t){for(let e of t){if(!e)continue;let s=e[i];if(typeof s<"u")return s}}function Vh(i){let t=i._keys;return t||(t=i._keys=Km(i._scopes)),t}function Km(i){let t=new Set;for(let e of i)for(let s of Object.keys(e).filter(n=>!n.startsWith("_")))t.add(s);return Array.from(t)}function Ca(i,t,e,s){let{iScale:n}=i,{key:r="r"}=this._parsing,o=new Array(s),a,l,c,h;for(a=0,l=s;a<l;++a)c=a+e,h=t[c],o[a]={r:n.parse(he(h,r),c)};return o}var Jm=Number.EPSILON||1e-14,gi=(i,t)=>t<i.length&&!i[t].skip&&i[t],gu=i=>i==="x"?"y":"x";function Zm(i,t,e,s){let n=i.skip?t:i,r=t,o=e.skip?t:e,a=Pn(r,n),l=Pn(o,r),c=a/(a+l),h=l/(a+l);c=isNaN(c)?0:c,h=isNaN(h)?0:h;let u=s*c,d=s*h;return{previous:{x:r.x-u*(o.x-n.x),y:r.y-u*(o.y-n.y)},next:{x:r.x+d*(o.x-n.x),y:r.y+d*(o.y-n.y)}}}function Qm(i,t,e){let s=i.length,n,r,o,a,l,c=gi(i,0);for(let h=0;h<s-1;++h)if(l=c,c=gi(i,h+1),!(!l||!c)){if(vi(t[h],0,Jm)){e[h]=e[h+1]=0;continue}n=e[h]/t[h],r=e[h+1]/t[h],a=Math.pow(n,2)+Math.pow(r,2),!(a<=9)&&(o=3/Math.sqrt(a),e[h]=n*o*t[h],e[h+1]=r*o*t[h])}}function t_(i,t,e="x"){let s=gu(e),n=i.length,r,o,a,l=gi(i,0);for(let c=0;c<n;++c){if(o=a,a=l,l=gi(i,c+1),!a)continue;let h=a[e],u=a[s];o&&(r=(h-o[e])/3,a[`cp1${e}`]=h-r,a[`cp1${s}`]=u-r*t[c]),l&&(r=(l[e]-h)/3,a[`cp2${e}`]=h+r,a[`cp2${s}`]=u+r*t[c])}}function e_(i,t="x"){let e=gu(t),s=i.length,n=Array(s).fill(0),r=Array(s),o,a,l,c=gi(i,0);for(o=0;o<s;++o)if(a=l,l=c,c=gi(i,o+1),!!l){if(c){let h=c[t]-l[t];n[o]=h!==0?(c[e]-l[e])/h:0}r[o]=a?c?Ht(n[o-1])!==Ht(n[o])?0:(n[o-1]+n[o])/2:n[o-1]:n[o]}Qm(i,n,r),t_(i,r,t)}function wn(i,t,e){return Math.max(Math.min(i,e),t)}function i_(i,t){let e,s,n,r,o,a=Xt(i[0],t);for(e=0,s=i.length;e<s;++e)o=r,r=a,a=e<s-1&&Xt(i[e+1],t),r&&(n=i[e],o&&(n.cp1x=wn(n.cp1x,t.left,t.right),n.cp1y=wn(n.cp1y,t.top,t.bottom)),a&&(n.cp2x=wn(n.cp2x,t.left,t.right),n.cp2y=wn(n.cp2y,t.top,t.bottom)))}function mu(i,t,e,s,n){let r,o,a,l;if(t.spanGaps&&(i=i.filter(c=>!c.skip)),t.cubicInterpolationMode==="monotone")e_(i,n);else{let c=s?i[i.length-1]:i[0];for(r=0,o=i.length;r<o;++r)a=i[r],l=Zm(c,a,i[Math.min(r+1,o-(s?0:1))%o],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}t.capBezierPoints&&i_(i,e)}function Ln(){return typeof window<"u"&&typeof document<"u"}function Nn(i){let t=i.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function En(i,t,e){let s;return typeof i=="string"?(s=parseInt(i,10),i.indexOf("%")!==-1&&(s=s/100*t.parentNode[e])):s=i,s}var $n=i=>i.ownerDocument.defaultView.getComputedStyle(i,null);function s_(i,t){return $n(i).getPropertyValue(t)}var n_=["top","right","bottom","left"];function Ye(i,t,e){let s={};e=e?"-"+e:"";for(let n=0;n<4;n++){let r=n_[n];s[r]=parseFloat(i[t+"-"+r+e])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}var r_=(i,t,e)=>(i>0||t>0)&&(!e||!e.shadowRoot);function o_(i,t){let e=i.touches,s=e&&e.length?e[0]:i,{offsetX:n,offsetY:r}=s,o=!1,a,l;if(r_(n,r,i.target))a=n,l=r;else{let c=t.getBoundingClientRect();a=s.clientX-c.left,l=s.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Ie(i,t){if("native"in i)return i;let{canvas:e,currentDevicePixelRatio:s}=t,n=$n(e),r=n.boxSizing==="border-box",o=Ye(n,"padding"),a=Ye(n,"border","width"),{x:l,y:c,box:h}=o_(i,e),u=o.left+(h&&a.left),d=o.top+(h&&a.top),{width:f,height:p}=t;return r&&(f-=o.width+a.width,p-=o.height+a.height),{x:Math.round((l-u)/f*e.width/s),y:Math.round((c-d)/p*e.height/s)}}function a_(i,t,e){let s,n;if(t===void 0||e===void 0){let r=i&&Nn(i);if(!r)t=i.clientWidth,e=i.clientHeight;else{let o=r.getBoundingClientRect(),a=$n(r),l=Ye(a,"border","width"),c=Ye(a,"padding");t=o.width-c.width-l.width,e=o.height-c.height-l.height,s=En(a.maxWidth,r,"clientWidth"),n=En(a.maxHeight,r,"clientHeight")}}return{width:t,height:e,maxWidth:s||Mn,maxHeight:n||Mn}}var Ce=i=>Math.round(i*10)/10;function _u(i,t,e,s){let n=$n(i),r=Ye(n,"margin"),o=En(n.maxWidth,i,"clientWidth")||Mn,a=En(n.maxHeight,i,"clientHeight")||Mn,l=a_(i,t,e),{width:c,height:h}=l;if(n.boxSizing==="content-box"){let d=Ye(n,"border","width"),f=Ye(n,"padding");c-=f.width+d.width,h-=f.height+d.height}return c=Math.max(0,c-r.width),h=Math.max(0,s?c/s:h-r.height),c=Ce(Math.min(c,o,l.maxWidth)),h=Ce(Math.min(h,a,l.maxHeight)),c&&!h&&(h=Ce(c/2)),(t!==void 0||e!==void 0)&&s&&l.height&&h>l.height&&(h=l.height,c=Ce(Math.floor(h*s))),{width:c,height:h}}function Oa(i,t,e){let s=t||1,n=Ce(i.height*s),r=Ce(i.width*s);i.height=Ce(i.height),i.width=Ce(i.width);let o=i.canvas;return o.style&&(e||!o.style.height&&!o.style.width)&&(o.style.height=`${i.height}px`,o.style.width=`${i.width}px`),i.currentDevicePixelRatio!==s||o.height!==n||o.width!==r?(i.currentDevicePixelRatio=s,o.height=n,o.width=r,i.ctx.setTransform(s,0,0,s,0,0),!0):!1}var vu=(function(){let i=!1;try{let t={get passive(){return i=!0,!1}};Ln()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return i})();function Ta(i,t){let e=s_(i,t),s=e&&e.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function Ee(i,t,e,s){return{x:i.x+e*(t.x-i.x),y:i.y+e*(t.y-i.y)}}function bu(i,t,e,s){return{x:i.x+e*(t.x-i.x),y:s==="middle"?e<.5?i.y:t.y:s==="after"?e<1?i.y:t.y:e>0?t.y:i.y}}function xu(i,t,e,s){let n={x:i.cp2x,y:i.cp2y},r={x:t.cp1x,y:t.cp1y},o=Ee(i,n,e),a=Ee(n,r,e),l=Ee(r,t,e),c=Ee(o,a,e),h=Ee(a,l,e);return Ee(c,h,e)}var l_=function(i,t){return{x(e){return i+i+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,s){return e-s},leftForLtr(e,s){return e-s}}},c_=function(){return{x(i){return i},setWidth(i){},textAlign(i){return i},xPlus(i,t){return i+t},leftForLtr(i,t){return i}}};function Ke(i,t,e){return i?l_(t,e):c_()}function Aa(i,t){let e,s;(t==="ltr"||t==="rtl")&&(e=i.canvas.style,s=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),i.prevTextDirection=s)}function Da(i,t){t!==void 0&&(delete i.prevTextDirection,i.canvas.style.setProperty("direction",t[0],t[1]))}function yu(i){return i==="angle"?{between:bi,compare:Pm,normalize:vt}:{between:Jt,compare:(t,e)=>t-e,normalize:t=>t}}function Uh({start:i,end:t,count:e,loop:s,style:n}){return{start:i%e,end:t%e,loop:s&&(t-i+1)%e===0,style:n}}function h_(i,t,e){let{property:s,start:n,end:r}=e,{between:o,normalize:a}=yu(s),l=t.length,{start:c,end:h,loop:u}=i,d,f;if(u){for(c+=l,h+=l,d=0,f=l;d<f&&o(a(t[c%l][s]),n,r);++d)c--,h--;c%=l,h%=l}return h<c&&(h+=l),{start:c,end:h,loop:u,style:i.style}}function Ia(i,t,e){if(!e)return[i];let{property:s,start:n,end:r}=e,o=t.length,{compare:a,between:l,normalize:c}=yu(s),{start:h,end:u,loop:d,style:f}=h_(i,t,e),p=[],g=!1,m=null,_,v,y,w=()=>l(n,y,_)&&a(n,y)!==0,x=()=>a(r,_)===0||l(r,y,_),S=()=>g||w(),M=()=>!g||x();for(let k=h,O=h;k<=u;++k)v=t[k%o],!v.skip&&(_=c(v[s]),_!==y&&(g=l(_,n,r),m===null&&S()&&(m=a(_,n)===0?k:O),m!==null&&M()&&(p.push(Uh({start:m,end:k,loop:d,count:o,style:f})),m=null),O=k,y=_));return m!==null&&p.push(Uh({start:m,end:u,loop:d,count:o,style:f})),p}function Fa(i,t){let e=[],s=i.segments;for(let n=0;n<s.length;n++){let r=Ia(s[n],i.points,t);r.length&&e.push(...r)}return e}function u_(i,t,e,s){let n=0,r=t-1;if(e&&!s)for(;n<t&&!i[n].skip;)n++;for(;n<t&&i[n].skip;)n++;for(n%=t,e&&(r+=n);r>n&&i[r%t].skip;)r--;return r%=t,{start:n,end:r}}function d_(i,t,e,s){let n=i.length,r=[],o=t,a=i[t],l;for(l=t+1;l<=e;++l){let c=i[l%n];c.skip||c.stop?a.skip||(s=!1,r.push({start:t%n,end:(l-1)%n,loop:s}),t=o=c.stop?l:null):(o=l,a.skip&&(t=l)),a=c}return o!==null&&r.push({start:t%n,end:o%n,loop:s}),r}function wu(i,t){let e=i.points,s=i.options.spanGaps,n=e.length;if(!n)return[];let r=!!i._loop,{start:o,end:a}=u_(e,n,r,s);if(s===!0)return qh(i,[{start:o,end:a,loop:r}],e,t);let l=a<o?a+n:a,c=!!i._fullLoop&&o===0&&a===n-1;return qh(i,d_(e,o,l,c),e,t)}function qh(i,t,e,s){return!s||!s.setContext||!e?t:f_(i,t,e,s)}function f_(i,t,e,s){let n=i._chart.getContext(),r=Yh(i.options),{_datasetIndex:o,options:{spanGaps:a}}=i,l=e.length,c=[],h=r,u=t[0].start,d=u;function f(p,g,m,_){let v=a?-1:1;if(p!==g){for(p+=l;e[p%l].skip;)p-=v;for(;e[g%l].skip;)g+=v;p%l!==g%l&&(c.push({start:p%l,end:g%l,loop:m,style:_}),h=_,u=g%l)}}for(let p of t){u=a?u:p.start;let g=e[u%l],m;for(d=u+1;d<=p.end;d++){let _=e[d%l];m=Yh(s.setContext(ue(n,{type:"segment",p0:g,p1:_,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:o}))),p_(m,h)&&f(u,d-1,p.loop,h),g=_,h=m}u<d-1&&f(u,d-1,p.loop,h)}return c}function Yh(i){return{backgroundColor:i.backgroundColor,borderCapStyle:i.borderCapStyle,borderDash:i.borderDash,borderDashOffset:i.borderDashOffset,borderJoinStyle:i.borderJoinStyle,borderWidth:i.borderWidth,borderColor:i.borderColor}}function p_(i,t){if(!t)return!1;let e=[],s=function(n,r){return xa(r)?(e.includes(r)||e.push(r),e.indexOf(r)):r};return JSON.stringify(i,s)!==JSON.stringify(t,s)}function kn(i,t,e){return i.options.clip?i[e]:t[e]}function g_(i,t){let{xScale:e,yScale:s}=i;return e&&s?{left:kn(e,t,"left"),right:kn(e,t,"right"),top:kn(s,t,"top"),bottom:kn(s,t,"bottom")}:t}function Ra(i,t){let e=t._clip;if(e.disabled)return!1;let s=g_(t,i.chartArea);return{left:e.left===!1?0:s.left-(e.left===!0?0:e.left),right:e.right===!1?i.width:s.right+(e.right===!0?0:e.right),top:e.top===!1?0:s.top-(e.top===!0?0:e.top),bottom:e.bottom===!1?i.height:s.bottom+(e.bottom===!0?0:e.bottom)}}var Ya=class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,s,n){let r=e.listeners[n],o=e.duration;r.forEach(a=>a({chart:t,initial:e.initial,numSteps:o,currentStep:Math.min(s-e.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=ma.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((s,n)=>{if(!s.running||!s.items.length)return;let r=s.items,o=r.length-1,a=!1,l;for(;o>=0;--o)l=r[o],l._active?(l._total>s.duration&&(s.duration=l._total),l.tick(t),a=!0):(r[o]=r[r.length-1],r.pop());a&&(n.draw(),this._notify(n,s,t,"progress")),r.length||(s.running=!1,this._notify(n,s,t,"complete"),s.initial=!1),e+=r.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){let e=this._charts,s=e.get(t);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,s)),s}listen(t,e,s){this._getAnims(t).listeners[e].push(s)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){let e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((s,n)=>Math.max(s,n._duration),0),this._refresh())}running(t){if(!this._running)return!1;let e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){let e=this._charts.get(t);if(!e||!e.items.length)return;let s=e.items,n=s.length-1;for(;n>=0;--n)s[n].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}},de=new Ya,ku="transparent",m_={boolean(i,t,e){return e>.5?t:i},color(i,t,e){let s=ya(i||ku),n=s.valid&&ya(t||ku);return n&&n.valid?n.mix(s,e).hexString():t},number(i,t,e){return i+(t-i)*e}},Ga=class{constructor(t,e,s,n){let r=e[s];n=wi([t.to,n,r,t.from]);let o=wi([t.from,r,n]);this._active=!0,this._fn=t.fn||m_[t.type||typeof o],this._easing=fi[t.easing]||fi.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=s,this._from=o,this._to=n,this._promises=void 0}active(){return this._active}update(t,e,s){if(this._active){this._notify(!1);let n=this._target[this._prop],r=s-this._start,o=this._duration-r;this._start=s,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=wi([t.to,e,n,t.from]),this._from=wi([t.from,n,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){let e=t-this._start,s=this._duration,n=this._prop,r=this._from,o=this._loop,a=this._to,l;if(this._active=r!==a&&(o||e<s),!this._active){this._target[n]=a,this._notify(!0);return}if(e<0){this._target[n]=r;return}l=e/s%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[n]=this._fn(r,a,l)}wait(){let t=this._promises||(this._promises=[]);return new Promise((e,s)=>{t.push({res:e,rej:s})})}_notify(t){let e=t?"res":"rej",s=this._promises||[];for(let n=0;n<s.length;n++)s[n][e]()}},Yn=class{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!B(t))return;let e=Object.keys(G.animation),s=this._properties;Object.getOwnPropertyNames(t).forEach(n=>{let r=t[n];if(!B(r))return;let o={};for(let a of e)o[a]=r[a];(Z(r.properties)&&r.properties||[n]).forEach(a=>{(a===n||!s.has(a))&&s.set(a,o)})})}_animateOptions(t,e){let s=e.options,n=v_(t,s);if(!n)return[];let r=this._createAnimations(n,s);return s.$shared&&__(t.options.$animations,s).then(()=>{t.options=s},()=>{}),r}_createAnimations(t,e){let s=this._properties,n=[],r=t.$animations||(t.$animations={}),o=Object.keys(e),a=Date.now(),l;for(l=o.length-1;l>=0;--l){let c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){n.push(...this._animateOptions(t,e));continue}let h=e[c],u=r[c],d=s.get(c);if(u)if(d&&u.active()){u.update(d,h,a);continue}else u.cancel();if(!d||!d.duration){t[c]=h;continue}r[c]=u=new Ga(d,t,c,h),n.push(u)}return n}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}let s=this._createAnimations(t,e);if(s.length)return de.add(this._chart,s),!0}};function __(i,t){let e=[],s=Object.keys(t);for(let n=0;n<s.length;n++){let r=i[s[n]];r&&r.active()&&e.push(r.wait())}return Promise.all(e)}function v_(i,t){if(!t)return;let e=i.options;if(!e){i.options=t;return}return e.$shared&&(i.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function Su(i,t){let e=i&&i.options||{},s=e.reverse,n=e.min===void 0?t:0,r=e.max===void 0?t:0;return{start:s?r:n,end:s?n:r}}function b_(i,t,e){if(e===!1)return!1;let s=Su(i,e),n=Su(t,e);return{top:n.end,right:s.end,bottom:n.start,left:s.start}}function x_(i){let t,e,s,n;return B(i)?(t=i.top,e=i.right,s=i.bottom,n=i.left):t=e=s=n=i,{top:t,right:e,bottom:s,left:n,disabled:i===!1}}function kd(i,t){let e=[],s=i._getSortedDatasetMetas(t),n,r;for(n=0,r=s.length;n<r;++n)e.push(s[n].index);return e}function Mu(i,t,e,s={}){let n=i.keys,r=s.mode==="single",o,a,l,c;if(t===null)return;let h=!1;for(o=0,a=n.length;o<a;++o){if(l=+n[o],l===e){if(h=!0,s.all)continue;break}c=i.values[l],nt(c)&&(r||t===0||Ht(t)===Ht(c))&&(t+=c)}return!h&&!s.all?0:t}function y_(i,t){let{iScale:e,vScale:s}=t,n=e.axis==="x"?"x":"y",r=s.axis==="x"?"x":"y",o=Object.keys(i),a=new Array(o.length),l,c,h;for(l=0,c=o.length;l<c;++l)h=o[l],a[l]={[n]:h,[r]:i[h]};return a}function La(i,t){let e=i&&i.options.stacked;return e||e===void 0&&t.stack!==void 0}function w_(i,t,e){return`${i.id}.${t.id}.${e.stack||e.type}`}function k_(i){let{min:t,max:e,minDefined:s,maxDefined:n}=i.getUserBounds();return{min:s?t:Number.NEGATIVE_INFINITY,max:n?e:Number.POSITIVE_INFINITY}}function S_(i,t,e){let s=i[t]||(i[t]={});return s[e]||(s[e]={})}function Pu(i,t,e,s){for(let n of t.getMatchingVisibleMetas(s).reverse()){let r=i[n.index];if(e&&r>0||!e&&r<0)return n.index}return null}function Eu(i,t){let{chart:e,_cachedMeta:s}=i,n=e._stacks||(e._stacks={}),{iScale:r,vScale:o,index:a}=s,l=r.axis,c=o.axis,h=w_(r,o,s),u=t.length,d;for(let f=0;f<u;++f){let p=t[f],{[l]:g,[c]:m}=p,_=p._stacks||(p._stacks={});d=_[c]=S_(n,h,g),d[a]=m,d._top=Pu(d,o,!0,s.type),d._bottom=Pu(d,o,!1,s.type);let v=d._visualValues||(d._visualValues={});v[a]=m}}function Na(i,t){let e=i.scales;return Object.keys(e).filter(s=>e[s].axis===t).shift()}function M_(i,t){return ue(i,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function P_(i,t,e){return ue(i,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function bs(i,t){let e=i.controller.index,s=i.vScale&&i.vScale.axis;if(s){t=t||i._parsed;for(let n of t){let r=n._stacks;if(!r||r[s]===void 0||r[s][e]===void 0)return;delete r[s][e],r[s]._visualValues!==void 0&&r[s]._visualValues[e]!==void 0&&delete r[s]._visualValues[e]}}}var $a=i=>i==="reset"||i==="none",Cu=(i,t)=>t?i:Object.assign({},i),E_=(i,t,e)=>i&&!t.hidden&&t._stacked&&{keys:kd(e,!0),values:null},Re=(()=>{class i{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,s){this.chart=e,this._ctx=e.ctx,this.index=s,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){let e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=La(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&bs(this._cachedMeta),this.index=e}linkScales(){let e=this.chart,s=this._cachedMeta,n=this.getDataset(),r=(d,f,p,g)=>d==="x"?f:d==="r"?g:p,o=s.xAxisID=R(n.xAxisID,Na(e,"x")),a=s.yAxisID=R(n.yAxisID,Na(e,"y")),l=s.rAxisID=R(n.rAxisID,Na(e,"r")),c=s.indexAxis,h=s.iAxisID=r(c,o,a,l),u=s.vAxisID=r(c,a,o,l);s.xScale=this.getScaleForId(o),s.yScale=this.getScaleForId(a),s.rScale=this.getScaleForId(l),s.iScale=this.getScaleForId(h),s.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){let s=this._cachedMeta;return e===s.iScale?s.vScale:s.iScale}reset(){this._update("reset")}_destroy(){let e=this._cachedMeta;this._data&&pa(this._data,this),e._stacked&&bs(e)}_dataCheck(){let e=this.getDataset(),s=e.data||(e.data=[]),n=this._data;if(B(s)){let r=this._cachedMeta;this._data=y_(s,r)}else if(n!==s){if(n){pa(n,this);let r=this._cachedMeta;bs(r),r._parsed=[]}s&&Object.isExtensible(s)&&nu(s,this),this._syncList=[],this._data=s}}addElements(){let e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){let s=this._cachedMeta,n=this.getDataset(),r=!1;this._dataCheck();let o=s._stacked;s._stacked=La(s.vScale,s),s.stack!==n.stack&&(r=!0,bs(s),s.stack=n.stack),this._resyncElements(e),(r||o!==s._stacked)&&(Eu(this,s._parsed),s._stacked=La(s.vScale,s))}configure(){let e=this.chart.config,s=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),s,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,s){let{_cachedMeta:n,_data:r}=this,{iScale:o,_stacked:a}=n,l=o.axis,c=e===0&&s===r.length?!0:n._sorted,h=e>0&&n._parsed[e-1],u,d,f;if(this._parsing===!1)n._parsed=r,n._sorted=!0,f=r;else{Z(r[e])?f=this.parseArrayData(n,r,e,s):B(r[e])?f=this.parseObjectData(n,r,e,s):f=this.parsePrimitiveData(n,r,e,s);let p=()=>d[l]===null||h&&d[l]<h[l];for(u=0;u<s;++u)n._parsed[u+e]=d=f[u],c&&(p()&&(c=!1),h=d);n._sorted=c}a&&Eu(this,f)}parsePrimitiveData(e,s,n,r){let{iScale:o,vScale:a}=e,l=o.axis,c=a.axis,h=o.getLabels(),u=o===a,d=new Array(r),f,p,g;for(f=0,p=r;f<p;++f)g=f+n,d[f]={[l]:u||o.parse(h[g],g),[c]:a.parse(s[g],g)};return d}parseArrayData(e,s,n,r){let{xScale:o,yScale:a}=e,l=new Array(r),c,h,u,d;for(c=0,h=r;c<h;++c)u=c+n,d=s[u],l[c]={x:o.parse(d[0],u),y:a.parse(d[1],u)};return l}parseObjectData(e,s,n,r){let{xScale:o,yScale:a}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,h=new Array(r),u,d,f,p;for(u=0,d=r;u<d;++u)f=u+n,p=s[f],h[u]={x:o.parse(he(p,l),f),y:a.parse(he(p,c),f)};return h}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,s,n){let r=this.chart,o=this._cachedMeta,a=s[e.axis],l={keys:kd(r,!0),values:s._stacks[e.axis]._visualValues};return Mu(l,a,o.index,{mode:n})}updateRangeFromParsed(e,s,n,r){let o=n[s.axis],a=o===null?NaN:o,l=r&&n._stacks[s.axis];r&&l&&(r.values=l,a=Mu(r,o,this._cachedMeta.index)),e.min=Math.min(e.min,a),e.max=Math.max(e.max,a)}getMinMax(e,s){let n=this._cachedMeta,r=n._parsed,o=n._sorted&&e===n.iScale,a=r.length,l=this._getOtherScale(e),c=E_(s,n,this.chart),h={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:d}=k_(l),f,p;function g(){p=r[f];let m=p[l.axis];return!nt(p[e.axis])||u>m||d<m}for(f=0;f<a&&!(!g()&&(this.updateRangeFromParsed(h,e,p,c),o));++f);if(o){for(f=a-1;f>=0;--f)if(!g()){this.updateRangeFromParsed(h,e,p,c);break}}return h}getAllParsedValues(e){let s=this._cachedMeta._parsed,n=[],r,o,a;for(r=0,o=s.length;r<o;++r)a=s[r][e.axis],nt(a)&&n.push(a);return n}getMaxOverflow(){return!1}getLabelAndValue(e){let s=this._cachedMeta,n=s.iScale,r=s.vScale,o=this.getParsed(e);return{label:n?""+n.getLabelForValue(o[n.axis]):"",value:r?""+r.getLabelForValue(o[r.axis]):""}}_update(e){let s=this._cachedMeta;this.update(e||"default"),s._clip=x_(R(this.options.clip,b_(s.xScale,s.yScale,this.getMaxOverflow())))}update(e){}draw(){let e=this._ctx,s=this.chart,n=this._cachedMeta,r=n.data||[],o=s.chartArea,a=[],l=this._drawStart||0,c=this._drawCount||r.length-l,h=this.options.drawActiveElementsOnTop,u;for(n.dataset&&n.dataset.draw(e,o,l,c),u=l;u<l+c;++u){let d=r[u];d.hidden||(d.active&&h?a.push(d):d.draw(e,o))}for(u=0;u<a.length;++u)a[u].draw(e,o)}getStyle(e,s){let n=s?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,s,n){let r=this.getDataset(),o;if(e>=0&&e<this._cachedMeta.data.length){let a=this._cachedMeta.data[e];o=a.$context||(a.$context=P_(this.getContext(),e,a)),o.parsed=this.getParsed(e),o.raw=r.data[e],o.index=o.dataIndex=e}else o=this.$context||(this.$context=M_(this.chart.getContext(),this.index)),o.dataset=r,o.index=o.datasetIndex=this.index;return o.active=!!s,o.mode=n,o}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,s){return this._resolveElementOptions(this.dataElementType.id,s,e)}_resolveElementOptions(e,s="default",n){let r=s==="active",o=this._cachedDataOpts,a=e+"-"+s,l=o[a],c=this.enableOptionSharing&&_i(n);if(l)return Cu(l,c);let h=this.chart.config,u=h.datasetElementScopeKeys(this._type,e),d=r?[`${e}Hover`,"hover",e,""]:[e,""],f=h.getOptionScopes(this.getDataset(),u),p=Object.keys(G.elements[e]),g=()=>this.getContext(n,r,s),m=h.resolveNamedOptions(f,p,g,d);return m.$shared&&(m.$shared=c,o[a]=Object.freeze(Cu(m,c))),m}_resolveAnimations(e,s,n){let r=this.chart,o=this._cachedDataOpts,a=`animation-${s}`,l=o[a];if(l)return l;let c;if(r.options.animation!==!1){let u=this.chart.config,d=u.datasetAnimationScopeKeys(this._type,s),f=u.getOptionScopes(this.getDataset(),d);c=u.createResolver(f,this.getContext(e,n,s))}let h=new Yn(r,c&&c.animations);return c&&c._cacheable&&(o[a]=Object.freeze(h)),h}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,s){return!s||$a(e)||this.chart._animationsDisabled}_getSharedOptions(e,s){let n=this.resolveDataElementOptions(e,s),r=this._sharedOptions,o=this.getSharedOptions(n),a=this.includeOptions(s,o)||o!==r;return this.updateSharedOptions(o,s,n),{sharedOptions:o,includeOptions:a}}updateElement(e,s,n,r){$a(r)?Object.assign(e,n):this._resolveAnimations(s,r).update(e,n)}updateSharedOptions(e,s,n){e&&!$a(s)&&this._resolveAnimations(void 0,s).update(e,n)}_setStyle(e,s,n,r){e.active=r;let o=this.getStyle(s,r);this._resolveAnimations(s,n,r).update(e,{options:!r&&this.getSharedOptions(o)||o})}removeHoverStyle(e,s,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,s,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){let e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){let e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){let s=this._data,n=this._cachedMeta.data;for(let[l,c,h]of this._syncList)this[l](c,h);this._syncList=[];let r=n.length,o=s.length,a=Math.min(o,r);a&&this.parse(0,a),o>r?this._insertElements(r,o-r,e):o<r&&this._removeElements(o,r-o)}_insertElements(e,s,n=!0){let r=this._cachedMeta,o=r.data,a=e+s,l,c=h=>{for(h.length+=s,l=h.length-1;l>=a;l--)h[l]=h[l-s]};for(c(o),l=e;l<a;++l)o[l]=new this.dataElementType;this._parsing&&c(r._parsed),this.parse(e,s),n&&this.updateElements(o,e,s,"reset")}updateElements(e,s,n,r){}_removeElements(e,s){let n=this._cachedMeta;if(this._parsing){let r=n._parsed.splice(e,s);n._stacked&&bs(n,r)}n.data.splice(e,s)}_sync(e){if(this._parsing)this._syncList.push(e);else{let[s,n,r]=e;this[s](n,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){let e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,s){s&&this._sync(["_removeElements",e,s]);let n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return i})();function C_(i,t){if(!i._cache.$bar){let e=i.getMatchingVisibleMetas(t),s=[];for(let n=0,r=e.length;n<r;n++)s=s.concat(e[n].controller.getAllParsedValues(i));i._cache.$bar=ga(s.sort((n,r)=>n-r))}return i._cache.$bar}function O_(i){let t=i.iScale,e=C_(t,i.type),s=t._length,n,r,o,a,l=()=>{o===32767||o===-32768||(_i(a)&&(s=Math.min(s,Math.abs(o-a)||s)),a=o)};for(n=0,r=e.length;n<r;++n)o=t.getPixelForValue(e[n]),l();for(a=void 0,n=0,r=t.ticks.length;n<r;++n)o=t.getPixelForTick(n),l();return s}function T_(i,t,e,s){let n=e.barThickness,r,o;return N(n)?(r=t.min*e.categoryPercentage,o=e.barPercentage):(r=n*s,o=1),{chunk:r/s,ratio:o,start:t.pixels[i]-r/2}}function A_(i,t,e,s){let n=t.pixels,r=n[i],o=i>0?n[i-1]:null,a=i<n.length-1?n[i+1]:null,l=e.categoryPercentage;o===null&&(o=r-(a===null?t.end-t.start:a-r)),a===null&&(a=r+r-o);let c=r-(r-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/s,ratio:e.barPercentage,start:c}}function D_(i,t,e,s){let n=e.parse(i[0],s),r=e.parse(i[1],s),o=Math.min(n,r),a=Math.max(n,r),l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),t[e.axis]=c,t._custom={barStart:l,barEnd:c,start:n,end:r,min:o,max:a}}function Sd(i,t,e,s){return Z(i)?D_(i,t,e,s):t[e.axis]=e.parse(i,s),t}function Ou(i,t,e,s){let n=i.iScale,r=i.vScale,o=n.getLabels(),a=n===r,l=[],c,h,u,d;for(c=e,h=e+s;c<h;++c)d=t[c],u={},u[n.axis]=a||n.parse(o[c],c),l.push(Sd(d,u,r,c));return l}function Ba(i){return i&&i.barStart!==void 0&&i.barEnd!==void 0}function I_(i,t,e){return i!==0?Ht(i):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}function F_(i){let t,e,s,n,r;return i.horizontal?(t=i.base>i.x,e="left",s="right"):(t=i.base<i.y,e="bottom",s="top"),t?(n="end",r="start"):(n="start",r="end"),{start:e,end:s,reverse:t,top:n,bottom:r}}function R_(i,t,e,s){let n=t.borderSkipped,r={};if(!n){i.borderSkipped=r;return}if(n===!0){i.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}let{start:o,end:a,reverse:l,top:c,bottom:h}=F_(i);n==="middle"&&e&&(i.enableBorderRadius=!0,(e._top||0)===s?n=c:(e._bottom||0)===s?n=h:(r[Tu(h,o,a,l)]=!0,n=c)),r[Tu(n,o,a,l)]=!0,i.borderSkipped=r}function Tu(i,t,e,s){return s?(i=L_(i,t,e),i=Au(i,e,t)):i=Au(i,t,e),i}function L_(i,t,e){return i===t?e:i===e?t:i}function Au(i,t,e){return i==="start"?t:i==="end"?e:i}function N_(i,{inflateAmount:t},e){i.inflateAmount=t==="auto"?e===1?.33:0:t}var $_=(()=>{class i extends Re{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,s,n,r){return Ou(e,s,n,r)}parseArrayData(e,s,n,r){return Ou(e,s,n,r)}parseObjectData(e,s,n,r){let{iScale:o,vScale:a}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,h=o.axis==="x"?l:c,u=a.axis==="x"?l:c,d=[],f,p,g,m;for(f=n,p=n+r;f<p;++f)m=s[f],g={},g[o.axis]=o.parse(he(m,h),f),d.push(Sd(he(m,u),g,a,f));return d}updateRangeFromParsed(e,s,n,r){super.updateRangeFromParsed(e,s,n,r);let o=n._custom;o&&s===this._cachedMeta.vScale&&(e.min=Math.min(e.min,o.min),e.max=Math.max(e.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(e){let s=this._cachedMeta,{iScale:n,vScale:r}=s,o=this.getParsed(e),a=o._custom,l=Ba(a)?"["+a.start+", "+a.end+"]":""+r.getLabelForValue(o[r.axis]);return{label:""+n.getLabelForValue(o[n.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize();let e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){let s=this._cachedMeta;this.updateElements(s.data,0,s.data.length,e)}updateElements(e,s,n,r){let o=r==="reset",{index:a,_cachedMeta:{vScale:l}}=this,c=l.getBasePixel(),h=l.isHorizontal(),u=this._getRuler(),{sharedOptions:d,includeOptions:f}=this._getSharedOptions(s,r);for(let p=s;p<s+n;p++){let g=this.getParsed(p),m=o||N(g[l.axis])?{base:c,head:c}:this._calculateBarValuePixels(p),_=this._calculateBarIndexPixels(p,u),v=(g._stacks||{})[l.axis],y={horizontal:h,base:m.base,enableBorderRadius:!v||Ba(g._custom)||a===v._top||a===v._bottom,x:h?m.head:_.center,y:h?_.center:m.head,height:h?_.size:Math.abs(m.size),width:h?Math.abs(m.size):_.size};f&&(y.options=d||this.resolveDataElementOptions(p,e[p].active?"active":r));let w=y.options||e[p].options;R_(y,w,v,a),N_(y,w,u.ratio),this.updateElement(e[p],p,y,r)}}_getStacks(e,s){let{iScale:n}=this._cachedMeta,r=n.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),o=n.options.stacked,a=[],l=this._cachedMeta.controller.getParsed(s),c=l&&l[n.axis],h=u=>{let d=u._parsed.find(p=>p[n.axis]===c),f=d&&d[u.vScale.axis];if(N(f)||isNaN(f))return!0};for(let u of r)if(!(s!==void 0&&h(u))&&((o===!1||a.indexOf(u.stack)===-1||o===void 0&&u.stack===void 0)&&a.push(u.stack),u.index===e))break;return a.length||a.push(void 0),a}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){let e=this.chart.scales,s=this.chart.options.indexAxis;return Object.keys(e).filter(n=>e[n].axis===s).shift()}_getAxis(){let e={},s=this.getFirstScaleIdForIndexAxis();for(let n of this.chart.data.datasets)e[R(this.chart.options.indexAxis==="x"?n.xAxisID:n.yAxisID,s)]=!0;return Object.keys(e)}_getStackIndex(e,s,n){let r=this._getStacks(e,n),o=s!==void 0?r.indexOf(s):-1;return o===-1?r.length-1:o}_getRuler(){let e=this.options,s=this._cachedMeta,n=s.iScale,r=[],o,a;for(o=0,a=s.data.length;o<a;++o)r.push(n.getPixelForValue(this.getParsed(o)[n.axis],o));let l=e.barThickness;return{min:l||O_(s),pixels:r,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:l?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){let{_cachedMeta:{vScale:s,_stacked:n,index:r},options:{base:o,minBarLength:a}}=this,l=o||0,c=this.getParsed(e),h=c._custom,u=Ba(h),d=c[s.axis],f=0,p=n?this.applyStack(s,c,n):d,g,m;p!==d&&(f=p-d,p=d),u&&(d=h.barStart,p=h.barEnd-h.barStart,d!==0&&Ht(d)!==Ht(h.barEnd)&&(f=0),f+=d);let _=!N(o)&&!u?o:f,v=s.getPixelForValue(_);if(this.chart.getDataVisibility(e)?g=s.getPixelForValue(f+p):g=v,m=g-v,Math.abs(m)<a){m=I_(m,s,l)*a,d===l&&(v-=m/2);let y=s.getPixelForDecimal(0),w=s.getPixelForDecimal(1),x=Math.min(y,w),S=Math.max(y,w);v=Math.max(Math.min(v,S),x),g=v+m,n&&!u&&(c._stacks[s.axis]._visualValues[r]=s.getValueForPixel(g)-s.getValueForPixel(v))}if(v===s.getPixelForValue(l)){let y=Ht(m)*s.getLineWidthForValue(l)/2;v+=y,m-=y}return{size:m,base:v,head:g,center:g+m/2}}_calculateBarIndexPixels(e,s){let n=s.scale,r=this.options,o=r.skipNull,a=R(r.maxBarThickness,1/0),l,c,h=this._getAxisCount();if(s.grouped){let u=o?this._getStackCount(e):s.stackCount,d=r.barThickness==="flex"?A_(e,s,r,u*h):T_(e,s,r,u*h),f=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,p=this._getAxis().indexOf(R(f,this.getFirstScaleIdForIndexAxis())),g=this._getStackIndex(this.index,this._cachedMeta.stack,o?e:void 0)+p;l=d.start+d.chunk*g+d.chunk/2,c=Math.min(a,d.chunk*d.ratio)}else l=n.getPixelForValue(this.getParsed(e)[n.axis],e),c=Math.min(a,s.min*s.ratio);return{base:l-c/2,head:l+c/2,center:l,size:c}}draw(){let e=this._cachedMeta,s=e.vScale,n=e.data,r=n.length,o=0;for(;o<r;++o)this.getParsed(o)[s.axis]!==null&&!n[o].hidden&&n[o].draw(this._ctx)}}return i})(),B_=(()=>{class i extends Re{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,s,n,r){let o=super.parsePrimitiveData(e,s,n,r);for(let a=0;a<o.length;a++)o[a]._custom=this.resolveDataElementOptions(a+n).radius;return o}parseArrayData(e,s,n,r){let o=super.parseArrayData(e,s,n,r);for(let a=0;a<o.length;a++){let l=s[n+a];o[a]._custom=R(l[2],this.resolveDataElementOptions(a+n).radius)}return o}parseObjectData(e,s,n,r){let o=super.parseObjectData(e,s,n,r);for(let a=0;a<o.length;a++){let l=s[n+a];o[a]._custom=R(l&&l.r&&+l.r,this.resolveDataElementOptions(a+n).radius)}return o}getMaxOverflow(){let e=this._cachedMeta.data,s=0;for(let n=e.length-1;n>=0;--n)s=Math.max(s,e[n].size(this.resolveDataElementOptions(n))/2);return s>0&&s}getLabelAndValue(e){let s=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:o}=s,a=this.getParsed(e),l=r.getLabelForValue(a.x),c=o.getLabelForValue(a.y),h=a._custom;return{label:n[e]||"",value:"("+l+", "+c+(h?", "+h:"")+")"}}update(e){let s=this._cachedMeta.data;this.updateElements(s,0,s.length,e)}updateElements(e,s,n,r){let o=r==="reset",{iScale:a,vScale:l}=this._cachedMeta,{sharedOptions:c,includeOptions:h}=this._getSharedOptions(s,r),u=a.axis,d=l.axis;for(let f=s;f<s+n;f++){let p=e[f],g=!o&&this.getParsed(f),m={},_=m[u]=o?a.getPixelForDecimal(.5):a.getPixelForValue(g[u]),v=m[d]=o?l.getBasePixel():l.getPixelForValue(g[d]);m.skip=isNaN(_)||isNaN(v),h&&(m.options=c||this.resolveDataElementOptions(f,p.active?"active":r),o&&(m.options.radius=0)),this.updateElement(p,f,m,r)}}resolveDataElementOptions(e,s){let n=this.getParsed(e),r=super.resolveDataElementOptions(e,s);r.$shared&&(r=Object.assign({},r,{$shared:!1}));let o=r.radius;return s!=="active"&&(r.radius=0),r.radius+=R(n&&n._custom,o),r}}return i})();function z_(i,t,e){let s=1,n=1,r=0,o=0;if(t<Q){let a=i,l=a+t,c=Math.cos(a),h=Math.sin(a),u=Math.cos(l),d=Math.sin(l),f=(y,w,x)=>bi(y,a,l,!0)?1:Math.max(w,w*e,x,x*e),p=(y,w,x)=>bi(y,a,l,!0)?-1:Math.min(w,w*e,x,x*e),g=f(0,c,u),m=f(ot,h,d),_=p(z,c,u),v=p(z+ot,h,d);s=(g-_)/2,n=(m-v)/2,r=-(g+_)/2,o=-(m+v)/2}return{ratioX:s,ratioY:n,offsetX:r,offsetY:o}}var pl=(()=>{class i extends Re{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){let s=e.data,{labels:{pointStyle:n,textAlign:r,color:o,useBorderRadius:a,borderRadius:l}}=e.legend.options;return s.labels.length&&s.datasets.length?s.labels.map((c,h)=>{let d=e.getDatasetMeta(0).controller.getStyle(h);return{text:c,fillStyle:d.backgroundColor,fontColor:o,hidden:!e.getDataVisibility(h),lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:d.borderWidth,strokeStyle:d.borderColor,textAlign:r,pointStyle:n,borderRadius:a&&(l||d.borderRadius),index:h}}):[]}},onClick(e,s,n){n.chart.toggleDataVisibility(s.index),n.chart.update()}}}};constructor(e,s){super(e,s),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,s){let n=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=n;else{let o=c=>+n[c];if(B(n[e])){let{key:c="value"}=this._parsing;o=h=>+he(n[h],c)}let a,l;for(a=e,l=e+s;a<l;++a)r._parsed[a]=o(a)}}_getRotation(){return $t(this.options.rotation-90)}_getCircumference(){return $t(this.options.circumference)}_getRotationExtents(){let e=Q,s=-Q;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){let r=this.chart.getDatasetMeta(n).controller,o=r._getRotation(),a=r._getCircumference();e=Math.min(e,o),s=Math.max(s,o+a)}return{rotation:e,circumference:s-e}}update(e){let s=this.chart,{chartArea:n}=s,r=this._cachedMeta,o=r.data,a=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,l=Math.max((Math.min(n.width,n.height)-a)/2,0),c=Math.min(Xh(this.options.cutout,l),1),h=this._getRingWeight(this.index),{circumference:u,rotation:d}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:g,offsetY:m}=z_(d,u,c),_=(n.width-a)/f,v=(n.height-a)/p,y=Math.max(Math.min(_,v)/2,0),w=la(this.options.radius,y),x=Math.max(w*c,0),S=(w-x)/this._getVisibleDatasetWeightTotal();this.offsetX=g*w,this.offsetY=m*w,r.total=this.calculateTotal(),this.outerRadius=w-S*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-S*h,0),this.updateElements(o,0,o.length,e)}_circumference(e,s){let n=this.options,r=this._cachedMeta,o=this._getCircumference();return s&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||r._parsed[e]===null||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*o/Q)}updateElements(e,s,n,r){let o=r==="reset",a=this.chart,l=a.chartArea,h=a.options.animation,u=(l.left+l.right)/2,d=(l.top+l.bottom)/2,f=o&&h.animateScale,p=f?0:this.innerRadius,g=f?0:this.outerRadius,{sharedOptions:m,includeOptions:_}=this._getSharedOptions(s,r),v=this._getRotation(),y;for(y=0;y<s;++y)v+=this._circumference(y,o);for(y=s;y<s+n;++y){let w=this._circumference(y,o),x=e[y],S={x:u+this.offsetX,y:d+this.offsetY,startAngle:v,endAngle:v+w,circumference:w,outerRadius:g,innerRadius:p};_&&(S.options=m||this.resolveDataElementOptions(y,x.active?"active":r)),v+=w,this.updateElement(x,y,S,r)}}calculateTotal(){let e=this._cachedMeta,s=e.data,n=0,r;for(r=0;r<s.length;r++){let o=e._parsed[r];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(r)&&!s[r].hidden&&(n+=Math.abs(o))}return n}calculateCircumference(e){let s=this._cachedMeta.total;return s>0&&!isNaN(e)?Q*(Math.abs(e)/s):0}getLabelAndValue(e){let s=this._cachedMeta,n=this.chart,r=n.data.labels||[],o=xi(s._parsed[e],n.options.locale);return{label:r[e]||"",value:o}}getMaxBorderWidth(e){let s=0,n=this.chart,r,o,a,l,c;if(!e){for(r=0,o=n.data.datasets.length;r<o;++r)if(n.isDatasetVisible(r)){a=n.getDatasetMeta(r),e=a.data,l=a.controller;break}}if(!e)return 0;for(r=0,o=e.length;r<o;++r)c=l.resolveDataElementOptions(r),c.borderAlign!=="inner"&&(s=Math.max(s,c.borderWidth||0,c.hoverBorderWidth||0));return s}getMaxOffset(e){let s=0;for(let n=0,r=e.length;n<r;++n){let o=this.resolveDataElementOptions(n);s=Math.max(s,o.offset||0,o.hoverOffset||0)}return s}_getRingWeightOffset(e){let s=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(s+=this._getRingWeight(n));return s}_getRingWeight(e){return Math.max(R(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}return i})(),j_=(()=>{class i extends Re{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){let s=this._cachedMeta,{dataset:n,data:r=[],_dataset:o}=s,a=this.chart._animationsDisabled,{start:l,count:c}=va(s,r,a);this._drawStart=l,this._drawCount=c,ba(s)&&(l=0,c=r.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!o._decimated,n.points=r;let h=this.resolveDatasetElementOptions(e);this.options.showLine||(h.borderWidth=0),h.segment=this.options.segment,this.updateElement(n,void 0,{animated:!a,options:h},e),this.updateElements(r,l,c,e)}updateElements(e,s,n,r){let o=r==="reset",{iScale:a,vScale:l,_stacked:c,_dataset:h}=this._cachedMeta,{sharedOptions:u,includeOptions:d}=this._getSharedOptions(s,r),f=a.axis,p=l.axis,{spanGaps:g,segment:m}=this.options,_=Xe(g)?g:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||o||r==="none",y=s+n,w=e.length,x=s>0&&this.getParsed(s-1);for(let S=0;S<w;++S){let M=e[S],k=v?M:{};if(S<s||S>=y){k.skip=!0;continue}let O=this.getParsed(S),A=N(O[p]),D=k[f]=a.getPixelForValue(O[f],S),I=k[p]=o||A?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,O,c):O[p],S);k.skip=isNaN(D)||isNaN(I)||A,k.stop=S>0&&Math.abs(O[f]-x[f])>_,m&&(k.parsed=O,k.raw=h.data[S]),d&&(k.options=u||this.resolveDataElementOptions(S,M.active?"active":r)),v||this.updateElement(M,S,k,r),x=O}}getMaxOverflow(){let e=this._cachedMeta,s=e.dataset,n=s.options&&s.options.borderWidth||0,r=e.data||[];if(!r.length)return n;let o=r[0].size(this.resolveDataElementOptions(0)),a=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(n,o,a)/2}draw(){let e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}return i})(),Md=(()=>{class i extends Re{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){let s=e.data;if(s.labels.length&&s.datasets.length){let{labels:{pointStyle:n,color:r}}=e.legend.options;return s.labels.map((o,a)=>{let c=e.getDatasetMeta(0).controller.getStyle(a);return{text:o,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:r,lineWidth:c.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(a),index:a}})}return[]}},onClick(e,s,n){n.chart.toggleDataVisibility(s.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(e,s){super(e,s),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){let s=this._cachedMeta,n=this.chart,r=n.data.labels||[],o=xi(s._parsed[e].r,n.options.locale);return{label:r[e]||"",value:o}}parseObjectData(e,s,n,r){return Ca.bind(this)(e,s,n,r)}update(e){let s=this._cachedMeta.data;this._updateRadius(),this.updateElements(s,0,s.length,e)}getMinMax(){let e=this._cachedMeta,s={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((n,r)=>{let o=this.getParsed(r).r;!isNaN(o)&&this.chart.getDataVisibility(r)&&(o<s.min&&(s.min=o),o>s.max&&(s.max=o))}),s}_updateRadius(){let e=this.chart,s=e.chartArea,n=e.options,r=Math.min(s.right-s.left,s.bottom-s.top),o=Math.max(r/2,0),a=Math.max(n.cutoutPercentage?o/100*n.cutoutPercentage:1,0),l=(o-a)/e.getVisibleDatasetCount();this.outerRadius=o-l*this.index,this.innerRadius=this.outerRadius-l}updateElements(e,s,n,r){let o=r==="reset",a=this.chart,c=a.options.animation,h=this._cachedMeta.rScale,u=h.xCenter,d=h.yCenter,f=h.getIndexAngle(0)-.5*z,p=f,g,m=360/this.countVisibleElements();for(g=0;g<s;++g)p+=this._computeAngle(g,r,m);for(g=s;g<s+n;g++){let _=e[g],v=p,y=p+this._computeAngle(g,r,m),w=a.getDataVisibility(g)?h.getDistanceFromCenterForValue(this.getParsed(g).r):0;p=y,o&&(c.animateScale&&(w=0),c.animateRotate&&(v=y=f));let x={x:u,y:d,innerRadius:0,outerRadius:w,startAngle:v,endAngle:y,options:this.resolveDataElementOptions(g,_.active?"active":r)};this.updateElement(_,g,x,r)}}countVisibleElements(){let e=this._cachedMeta,s=0;return e.data.forEach((n,r)=>{!isNaN(this.getParsed(r).r)&&this.chart.getDataVisibility(r)&&s++}),s}_computeAngle(e,s,n){return this.chart.getDataVisibility(e)?$t(this.resolveDataElementOptions(e,s).angle||n):0}}return i})(),H_=(()=>{class i extends pl{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}return i})(),W_=(()=>{class i extends Re{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(e){let s=this._cachedMeta.vScale,n=this.getParsed(e);return{label:s.getLabels()[e],value:""+s.getLabelForValue(n[s.axis])}}parseObjectData(e,s,n,r){return Ca.bind(this)(e,s,n,r)}update(e){let s=this._cachedMeta,n=s.dataset,r=s.data||[],o=s.iScale.getLabels();if(n.points=r,e!=="resize"){let a=this.resolveDatasetElementOptions(e);this.options.showLine||(a.borderWidth=0);let l={_loop:!0,_fullLoop:o.length===r.length,options:a};this.updateElement(n,void 0,l,e)}this.updateElements(r,0,r.length,e)}updateElements(e,s,n,r){let o=this._cachedMeta.rScale,a=r==="reset";for(let l=s;l<s+n;l++){let c=e[l],h=this.resolveDataElementOptions(l,c.active?"active":r),u=o.getPointPositionForValue(l,this.getParsed(l).r),d=a?o.xCenter:u.x,f=a?o.yCenter:u.y,p={x:d,y:f,angle:u.angle,skip:isNaN(d)||isNaN(f),options:h};this.updateElement(c,l,p,r)}}}return i})(),V_=(()=>{class i extends Re{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(e){let s=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:o}=s,a=this.getParsed(e),l=r.getLabelForValue(a.x),c=o.getLabelForValue(a.y);return{label:n[e]||"",value:"("+l+", "+c+")"}}update(e){let s=this._cachedMeta,{data:n=[]}=s,r=this.chart._animationsDisabled,{start:o,count:a}=va(s,n,r);if(this._drawStart=o,this._drawCount=a,ba(s)&&(o=0,a=n.length),this.options.showLine){this.datasetElementType||this.addElements();let{dataset:l,_dataset:c}=s;l._chart=this.chart,l._datasetIndex=this.index,l._decimated=!!c._decimated,l.points=n;let h=this.resolveDatasetElementOptions(e);h.segment=this.options.segment,this.updateElement(l,void 0,{animated:!r,options:h},e)}else this.datasetElementType&&(delete s.dataset,this.datasetElementType=!1);this.updateElements(n,o,a,e)}addElements(){let{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,s,n,r){let o=r==="reset",{iScale:a,vScale:l,_stacked:c,_dataset:h}=this._cachedMeta,u=this.resolveDataElementOptions(s,r),d=this.getSharedOptions(u),f=this.includeOptions(r,d),p=a.axis,g=l.axis,{spanGaps:m,segment:_}=this.options,v=Xe(m)?m:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||o||r==="none",w=s>0&&this.getParsed(s-1);for(let x=s;x<s+n;++x){let S=e[x],M=this.getParsed(x),k=y?S:{},O=N(M[g]),A=k[p]=a.getPixelForValue(M[p],x),D=k[g]=o||O?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,M,c):M[g],x);k.skip=isNaN(A)||isNaN(D)||O,k.stop=x>0&&Math.abs(M[p]-w[p])>v,_&&(k.parsed=M,k.raw=h.data[x]),f&&(k.options=d||this.resolveDataElementOptions(x,S.active?"active":r)),y||this.updateElement(S,x,k,r),w=M}this.updateSharedOptions(d,r,u)}getMaxOverflow(){let e=this._cachedMeta,s=e.data||[];if(!this.options.showLine){let l=0;for(let c=s.length-1;c>=0;--c)l=Math.max(l,s[c].size(this.resolveDataElementOptions(c))/2);return l>0&&l}let n=e.dataset,r=n.options&&n.options.borderWidth||0;if(!s.length)return r;let o=s[0].size(this.resolveDataElementOptions(0)),a=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(r,o,a)/2}}return i})(),U_=Object.freeze({__proto__:null,BarController:$_,BubbleController:B_,DoughnutController:pl,LineController:j_,PieController:H_,PolarAreaController:Md,RadarController:W_,ScatterController:V_});function Je(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var Xa=class i{static override(t){Object.assign(i.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return Je()}parse(){return Je()}format(){return Je()}add(){return Je()}diff(){return Je()}startOf(){return Je()}endOf(){return Je()}},q_={_date:Xa};function Y_(i,t,e,s){let{controller:n,data:r,_sorted:o}=i,a=n._cachedMeta.iScale,l=i.dataset&&i.dataset.options?i.dataset.options.spanGaps:null;if(a&&t===a.axis&&t!=="r"&&o&&r.length){let c=a._reversePixels?eu:Gt;if(s){if(n._sharedOptions){let h=r[0],u=typeof h.getRange=="function"&&h.getRange(t);if(u){let d=c(r,t,e-u),f=c(r,t,e+u);return{lo:d.lo,hi:f.hi}}}}else{let h=c(r,t,e);if(l){let{vScale:u}=n._cachedMeta,{_parsed:d}=i,f=d.slice(0,h.lo+1).reverse().findIndex(g=>!N(g[u.axis]));h.lo-=Math.max(0,f);let p=d.slice(h.hi).findIndex(g=>!N(g[u.axis]));h.hi+=Math.max(0,p)}return h}}return{lo:0,hi:r.length-1}}function Os(i,t,e,s,n){let r=i.getSortedVisibleDatasetMetas(),o=e[t];for(let a=0,l=r.length;a<l;++a){let{index:c,data:h}=r[a],{lo:u,hi:d}=Y_(r[a],t,o,n);for(let f=u;f<=d;++f){let p=h[f];p.skip||s(p,c,f)}}}function G_(i){let t=i.indexOf("x")!==-1,e=i.indexOf("y")!==-1;return function(s,n){let r=t?Math.abs(s.x-n.x):0,o=e?Math.abs(s.y-n.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function za(i,t,e,s,n){let r=[];return!n&&!i.isPointInArea(t)||Os(i,e,t,function(a,l,c){!n&&!Xt(a,i.chartArea,0)||a.inRange(t.x,t.y,s)&&r.push({element:a,datasetIndex:l,index:c})},!0),r}function X_(i,t,e,s){let n=[];function r(o,a,l){let{startAngle:c,endAngle:h}=o.getProps(["startAngle","endAngle"],s),{angle:u}=fa(o,{x:t.x,y:t.y});bi(u,c,h)&&n.push({element:o,datasetIndex:a,index:l})}return Os(i,e,t,r),n}function K_(i,t,e,s,n,r){let o=[],a=G_(e),l=Number.POSITIVE_INFINITY;function c(h,u,d){let f=h.inRange(t.x,t.y,n);if(s&&!f)return;let p=h.getCenterPoint(n);if(!(!!r||i.isPointInArea(p))&&!f)return;let m=a(t,p);m<l?(o=[{element:h,datasetIndex:u,index:d}],l=m):m===l&&o.push({element:h,datasetIndex:u,index:d})}return Os(i,e,t,c),o}function ja(i,t,e,s,n,r){return!r&&!i.isPointInArea(t)?[]:e==="r"&&!s?X_(i,t,e,n):K_(i,t,e,s,n,r)}function Du(i,t,e,s,n){let r=[],o=e==="x"?"inXRange":"inYRange",a=!1;return Os(i,e,t,(l,c,h)=>{l[o]&&l[o](t[e],n)&&(r.push({element:l,datasetIndex:c,index:h}),a=a||l.inRange(t.x,t.y,n))}),s&&!a?[]:r}var J_={evaluateInteractionItems:Os,modes:{index(i,t,e,s){let n=Ie(t,i),r=e.axis||"x",o=e.includeInvisible||!1,a=e.intersect?za(i,n,r,s,o):ja(i,n,r,!1,s,o),l=[];return a.length?(i.getSortedVisibleDatasetMetas().forEach(c=>{let h=a[0].index,u=c.data[h];u&&!u.skip&&l.push({element:u,datasetIndex:c.index,index:h})}),l):[]},dataset(i,t,e,s){let n=Ie(t,i),r=e.axis||"xy",o=e.includeInvisible||!1,a=e.intersect?za(i,n,r,s,o):ja(i,n,r,!1,s,o);if(a.length>0){let l=a[0].datasetIndex,c=i.getDatasetMeta(l).data;a=[];for(let h=0;h<c.length;++h)a.push({element:c[h],datasetIndex:l,index:h})}return a},point(i,t,e,s){let n=Ie(t,i),r=e.axis||"xy",o=e.includeInvisible||!1;return za(i,n,r,s,o)},nearest(i,t,e,s){let n=Ie(t,i),r=e.axis||"xy",o=e.includeInvisible||!1;return ja(i,n,r,e.intersect,s,o)},x(i,t,e,s){let n=Ie(t,i);return Du(i,n,"x",e.intersect,s)},y(i,t,e,s){let n=Ie(t,i);return Du(i,n,"y",e.intersect,s)}}},Pd=["left","top","right","bottom"];function xs(i,t){return i.filter(e=>e.pos===t)}function Iu(i,t){return i.filter(e=>Pd.indexOf(e.pos)===-1&&e.box.axis===t)}function ys(i,t){return i.sort((e,s)=>{let n=t?s:e,r=t?e:s;return n.weight===r.weight?n.index-r.index:n.weight-r.weight})}function Z_(i){let t=[],e,s,n,r,o,a;for(e=0,s=(i||[]).length;e<s;++e)n=i[e],{position:r,options:{stack:o,stackWeight:a=1}}=n,t.push({index:e,box:n,pos:r,horizontal:n.isHorizontal(),weight:n.weight,stack:o&&r+o,stackWeight:a});return t}function Q_(i){let t={};for(let e of i){let{stack:s,pos:n,stackWeight:r}=e;if(!s||!Pd.includes(n))continue;let o=t[s]||(t[s]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return t}function tv(i,t){let e=Q_(i),{vBoxMaxWidth:s,hBoxMaxHeight:n}=t,r,o,a;for(r=0,o=i.length;r<o;++r){a=i[r];let{fullSize:l}=a.box,c=e[a.stack],h=c&&a.stackWeight/c.weight;a.horizontal?(a.width=h?h*s:l&&t.availableWidth,a.height=n):(a.width=s,a.height=h?h*n:l&&t.availableHeight)}return e}function ev(i){let t=Z_(i),e=ys(t.filter(c=>c.box.fullSize),!0),s=ys(xs(t,"left"),!0),n=ys(xs(t,"right")),r=ys(xs(t,"top"),!0),o=ys(xs(t,"bottom")),a=Iu(t,"x"),l=Iu(t,"y");return{fullSize:e,leftAndTop:s.concat(r),rightAndBottom:n.concat(l).concat(o).concat(a),chartArea:xs(t,"chartArea"),vertical:s.concat(n).concat(l),horizontal:r.concat(o).concat(a)}}function Fu(i,t,e,s){return Math.max(i[e],t[e])+Math.max(i[s],t[s])}function Ed(i,t){i.top=Math.max(i.top,t.top),i.left=Math.max(i.left,t.left),i.bottom=Math.max(i.bottom,t.bottom),i.right=Math.max(i.right,t.right)}function iv(i,t,e,s){let{pos:n,box:r}=e,o=i.maxPadding;if(!B(n)){e.size&&(i[n]-=e.size);let u=s[e.stack]||{size:0,count:1};u.size=Math.max(u.size,e.horizontal?r.height:r.width),e.size=u.size/u.count,i[n]+=e.size}r.getPadding&&Ed(o,r.getPadding());let a=Math.max(0,t.outerWidth-Fu(o,i,"left","right")),l=Math.max(0,t.outerHeight-Fu(o,i,"top","bottom")),c=a!==i.w,h=l!==i.h;return i.w=a,i.h=l,e.horizontal?{same:c,other:h}:{same:h,other:c}}function sv(i){let t=i.maxPadding;function e(s){let n=Math.max(t[s]-i[s],0);return i[s]+=n,n}i.y+=e("top"),i.x+=e("left"),e("right"),e("bottom")}function nv(i,t){let e=t.maxPadding;function s(n){let r={left:0,top:0,right:0,bottom:0};return n.forEach(o=>{r[o]=Math.max(t[o],e[o])}),r}return s(i?["left","right"]:["top","bottom"])}function Ss(i,t,e,s){let n=[],r,o,a,l,c,h;for(r=0,o=i.length,c=0;r<o;++r){a=i[r],l=a.box,l.update(a.width||t.w,a.height||t.h,nv(a.horizontal,t));let{same:u,other:d}=iv(t,e,a,s);c|=u&&n.length,h=h||d,l.fullSize||n.push(a)}return c&&Ss(n,t,e,s)||h}function Bn(i,t,e,s,n){i.top=e,i.left=t,i.right=t+s,i.bottom=e+n,i.width=s,i.height=n}function Ru(i,t,e,s){let n=e.padding,{x:r,y:o}=t;for(let a of i){let l=a.box,c=s[a.stack]||{count:1,placed:0,weight:1},h=a.stackWeight/c.weight||1;if(a.horizontal){let u=t.w*h,d=c.size||l.height;_i(c.start)&&(o=c.start),l.fullSize?Bn(l,n.left,o,e.outerWidth-n.right-n.left,d):Bn(l,t.left+c.placed,o,u,d),c.start=o,c.placed+=u,o=l.bottom}else{let u=t.h*h,d=c.size||l.width;_i(c.start)&&(r=c.start),l.fullSize?Bn(l,r,n.top,d,e.outerHeight-n.bottom-n.top):Bn(l,r,t.top+c.placed,d,u),c.start=r,c.placed+=u,r=l.right}}t.x=r,t.y=o}var wt={addBox(i,t){i.boxes||(i.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},i.boxes.push(t)},removeBox(i,t){let e=i.boxes?i.boxes.indexOf(t):-1;e!==-1&&i.boxes.splice(e,1)},configure(i,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(i,t,e,s){if(!i)return;let n=xt(i.options.layout.padding),r=Math.max(t-n.width,0),o=Math.max(e-n.height,0),a=ev(i.boxes),l=a.vertical,c=a.horizontal;W(i.boxes,g=>{typeof g.beforeLayout=="function"&&g.beforeLayout()});let h=l.reduce((g,m)=>m.box.options&&m.box.options.display===!1?g:g+1,0)||1,u=Object.freeze({outerWidth:t,outerHeight:e,padding:n,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/h,hBoxMaxHeight:o/2}),d=Object.assign({},n);Ed(d,xt(s));let f=Object.assign({maxPadding:d,w:r,h:o,x:n.left,y:n.top},n),p=tv(l.concat(c),u);Ss(a.fullSize,f,u,p),Ss(l,f,u,p),Ss(c,f,u,p)&&Ss(l,f,u,p),sv(f),Ru(a.leftAndTop,f,u,p),f.x+=f.w,f.y+=f.h,Ru(a.rightAndBottom,f,u,p),i.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},W(a.chartArea,g=>{let m=g.box;Object.assign(m,i.chartArea),m.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}},Gn=class{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,s){}removeEventListener(t,e,s){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,s,n){return e=Math.max(0,e||t.width),s=s||t.height,{width:e,height:Math.max(0,n?Math.floor(e/n):s)}}isAttached(t){return!0}updateConfig(t){}},Ka=class extends Gn{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}},Un="$chartjs",rv={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Lu=i=>i===null||i==="";function ov(i,t){let e=i.style,s=i.getAttribute("height"),n=i.getAttribute("width");if(i[Un]={initial:{height:s,width:n,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",Lu(n)){let r=Ta(i,"width");r!==void 0&&(i.width=r)}if(Lu(s))if(i.style.height==="")i.height=i.width/(t||2);else{let r=Ta(i,"height");r!==void 0&&(i.height=r)}return i}var Cd=vu?{passive:!0}:!1;function av(i,t,e){i&&i.addEventListener(t,e,Cd)}function lv(i,t,e){i&&i.canvas&&i.canvas.removeEventListener(t,e,Cd)}function cv(i,t){let e=rv[i.type]||i.type,{x:s,y:n}=Ie(i,t);return{type:e,chart:t,native:i,x:s!==void 0?s:null,y:n!==void 0?n:null}}function Xn(i,t){for(let e of i)if(e===t||e.contains(t))return!0}function hv(i,t,e){let s=i.canvas,n=new MutationObserver(r=>{let o=!1;for(let a of r)o=o||Xn(a.addedNodes,s),o=o&&!Xn(a.removedNodes,s);o&&e()});return n.observe(document,{childList:!0,subtree:!0}),n}function uv(i,t,e){let s=i.canvas,n=new MutationObserver(r=>{let o=!1;for(let a of r)o=o||Xn(a.removedNodes,s),o=o&&!Xn(a.addedNodes,s);o&&e()});return n.observe(document,{childList:!0,subtree:!0}),n}var Ps=new Map,Nu=0;function Od(){let i=window.devicePixelRatio;i!==Nu&&(Nu=i,Ps.forEach((t,e)=>{e.currentDevicePixelRatio!==i&&t()}))}function dv(i,t){Ps.size||window.addEventListener("resize",Od),Ps.set(i,t)}function fv(i){Ps.delete(i),Ps.size||window.removeEventListener("resize",Od)}function pv(i,t,e){let s=i.canvas,n=s&&Nn(s);if(!n)return;let r=_a((a,l)=>{let c=n.clientWidth;e(a,l),c<n.clientWidth&&e()},window),o=new ResizeObserver(a=>{let l=a[0],c=l.contentRect.width,h=l.contentRect.height;c===0&&h===0||r(c,h)});return o.observe(n),dv(i,r),o}function Ha(i,t,e){e&&e.disconnect(),t==="resize"&&fv(i)}function gv(i,t,e){let s=i.canvas,n=_a(r=>{i.ctx!==null&&e(cv(r,i))},i);return av(s,t,n),n}var Ja=class extends Gn{acquireContext(t,e){let s=t&&t.getContext&&t.getContext("2d");return s&&s.canvas===t?(ov(t,e),s):null}releaseContext(t){let e=t.canvas;if(!e[Un])return!1;let s=e[Un].initial;["height","width"].forEach(r=>{let o=s[r];N(o)?e.removeAttribute(r):e.setAttribute(r,o)});let n=s.style||{};return Object.keys(n).forEach(r=>{e.style[r]=n[r]}),e.width=e.width,delete e[Un],!0}addEventListener(t,e,s){this.removeEventListener(t,e);let n=t.$proxies||(t.$proxies={}),o={attach:hv,detach:uv,resize:pv}[e]||gv;n[e]=o(t,e,s)}removeEventListener(t,e){let s=t.$proxies||(t.$proxies={}),n=s[e];if(!n)return;({attach:Ha,detach:Ha,resize:Ha}[e]||lv)(t,e,n),s[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,s,n){return _u(t,e,s,n)}isAttached(t){let e=t&&Nn(t);return!!(e&&e.isConnected)}};function mv(i){return!Ln()||typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas?Ka:Ja}var Wt=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){let{x:e,y:s}=this.getProps(["x","y"],t);return{x:e,y:s}}hasValue(){return Xe(this.x)&&Xe(this.y)}getProps(t,e){let s=this.$animations;if(!e||!s)return this;let n={};return t.forEach(r=>{n[r]=s[r]&&s[r].active()?s[r]._to:this[r]}),n}};function _v(i,t){let e=i.options.ticks,s=vv(i),n=Math.min(e.maxTicksLimit||s,s),r=e.major.enabled?xv(t):[],o=r.length,a=r[0],l=r[o-1],c=[];if(o>n)return yv(t,c,r,o/n),c;let h=bv(r,t,n);if(o>0){let u,d,f=o>1?Math.round((l-a)/(o-1)):null;for(zn(t,c,h,N(f)?0:a-f,a),u=0,d=o-1;u<d;u++)zn(t,c,h,r[u],r[u+1]);return zn(t,c,h,l,N(f)?t.length:l+f),c}return zn(t,c,h),c}function vv(i){let t=i.options.offset,e=i._tickSize(),s=i._length/e+(t?0:1),n=i._maxLength/e;return Math.floor(Math.min(s,n))}function bv(i,t,e){let s=wv(i),n=t.length/e;if(!s)return Math.max(n,1);let r=Zh(s);for(let o=0,a=r.length-1;o<a;o++){let l=r[o];if(l>n)return l}return Math.max(n,1)}function xv(i){let t=[],e,s;for(e=0,s=i.length;e<s;e++)i[e].major&&t.push(e);return t}function yv(i,t,e,s){let n=0,r=e[0],o;for(s=Math.ceil(s),o=0;o<i.length;o++)o===r&&(t.push(i[o]),n++,r=e[n*s])}function zn(i,t,e,s,n){let r=R(s,0),o=Math.min(R(n,i.length),i.length),a=0,l,c,h;for(e=Math.ceil(e),n&&(l=n-s,e=l/Math.floor(l/e)),h=r;h<0;)a++,h=Math.round(r+a*e);for(c=Math.max(r,0);c<o;c++)c===h&&(t.push(i[c]),a++,h=Math.round(r+a*e))}function wv(i){let t=i.length,e,s;if(t<2)return!1;for(s=i[0],e=1;e<t;++e)if(i[e]-i[e-1]!==s)return!1;return s}var kv=i=>i==="left"?"right":i==="right"?"left":i,$u=(i,t,e)=>t==="top"||t==="left"?i[t]+e:i[t]-e,Bu=(i,t)=>Math.min(t||i,i);function zu(i,t){let e=[],s=i.length/t,n=i.length,r=0;for(;r<n;r+=s)e.push(i[Math.floor(r)]);return e}function Sv(i,t,e){let s=i.ticks.length,n=Math.min(t,s-1),r=i._startPixel,o=i._endPixel,a=1e-6,l=i.getPixelForTick(n),c;if(!(e&&(s===1?c=Math.max(l-r,o-l):t===0?c=(i.getPixelForTick(1)-l)/2:c=(l-i.getPixelForTick(n-1))/2,l+=n<t?c:-c,l<r-a||l>o+a)))return l}function Mv(i,t){W(i,e=>{let s=e.gc,n=s.length/2,r;if(n>t){for(r=0;r<n;++r)delete e.data[s[r]];s.splice(0,n)}})}function ws(i){return i.drawTicks?i.tickLength:0}function ju(i,t){if(!i.display)return 0;let e=ht(i.font,t),s=xt(i.padding);return(Z(i.text)?i.text.length:1)*e.lineHeight+s.height}function Pv(i,t){return ue(i,{scale:t,type:"scale"})}function Ev(i,t,e){return ue(i,{tick:e,index:t,type:"tick"})}function Cv(i,t,e){let s=An(i);return(e&&t!=="right"||!e&&t==="right")&&(s=kv(s)),s}function Ov(i,t,e,s){let{top:n,left:r,bottom:o,right:a,chart:l}=i,{chartArea:c,scales:h}=l,u=0,d,f,p,g=o-n,m=a-r;if(i.isHorizontal()){if(f=bt(s,r,a),B(e)){let _=Object.keys(e)[0],v=e[_];p=h[_].getPixelForValue(v)+g-t}else e==="center"?p=(c.bottom+c.top)/2+g-t:p=$u(i,e,t);d=a-r}else{if(B(e)){let _=Object.keys(e)[0],v=e[_];f=h[_].getPixelForValue(v)-m+t}else e==="center"?f=(c.left+c.right)/2-m+t:f=$u(i,e,t);p=bt(s,o,n),u=e==="left"?-ot:ot}return{titleX:f,titleY:p,maxWidth:d,rotation:u}}var Qe=class i extends Wt{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:s,_suggestedMax:n}=this;return t=Ot(t,Number.POSITIVE_INFINITY),e=Ot(e,Number.NEGATIVE_INFINITY),s=Ot(s,Number.POSITIVE_INFINITY),n=Ot(n,Number.NEGATIVE_INFINITY),{min:Ot(t,s),max:Ot(e,n),minDefined:nt(t),maxDefined:nt(e)}}getMinMax(t){let{min:e,max:s,minDefined:n,maxDefined:r}=this.getUserBounds(),o;if(n&&r)return{min:e,max:s};let a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,t),n||(e=Math.min(e,o.min)),r||(s=Math.max(s,o.max));return e=r&&e>s?s:e,s=n&&e>s?e:s,{min:Ot(e,Ot(s,e)),max:Ot(s,Ot(e,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Y(this.options.beforeUpdate,[this])}update(t,e,s){let{beginAtZero:n,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=uu(this,r,n),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let l=a<this.ticks.length;this._convertTicksToLabels(l?zu(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=_v(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,s;this.isHorizontal()?(e=this.left,s=this.right):(e=this.top,s=this.bottom,t=!t),this._startPixel=e,this._endPixel=s,this._reversePixels=t,this._length=s-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Y(this.options.afterUpdate,[this])}beforeSetDimensions(){Y(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Y(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Y(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Y(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){let e=this.options.ticks,s,n,r;for(s=0,n=t.length;s<n;s++)r=t[s],r.label=Y(e.callback,[r.value,s,t],this)}afterTickToLabelConversion(){Y(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Y(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let t=this.options,e=t.ticks,s=Bu(this.ticks.length,t.ticks.maxTicksLimit),n=e.minRotation||0,r=e.maxRotation,o=n,a,l,c;if(!this._isVisible()||!e.display||n>=r||s<=1||!this.isHorizontal()){this.labelRotation=n;return}let h=this._getLabelSizes(),u=h.widest.width,d=h.highest.height,f=pt(this.chart.width-u,0,this.maxWidth);a=t.offset?this.maxWidth/s:f/(s-1),u+6>a&&(a=f/(s-(t.offset?.5:1)),l=this.maxHeight-ws(t.grid)-e.padding-ju(t.title,this.chart.options.font),c=Math.sqrt(u*u+d*d),o=On(Math.min(Math.asin(pt((h.highest.height+6)/a,-1,1)),Math.asin(pt(l/c,-1,1))-Math.asin(pt(d/c,-1,1)))),o=Math.max(n,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){Y(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Y(this.options.beforeFit,[this])}fit(){let t={width:0,height:0},{chart:e,options:{ticks:s,title:n,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){let l=ju(n,e.options.font);if(a?(t.width=this.maxWidth,t.height=ws(r)+l):(t.height=this.maxHeight,t.width=ws(r)+l),s.display&&this.ticks.length){let{first:c,last:h,widest:u,highest:d}=this._getLabelSizes(),f=s.padding*2,p=$t(this.labelRotation),g=Math.cos(p),m=Math.sin(p);if(a){let _=s.mirror?0:m*u.width+g*d.height;t.height=Math.min(this.maxHeight,t.height+_+f)}else{let _=s.mirror?0:g*u.width+m*d.height;t.width=Math.min(this.maxWidth,t.width+_+f)}this._calculatePadding(c,h,m,g)}}this._handleMargins(),a?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,s,n){let{ticks:{align:r,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){let h=this.getPixelForTick(0)-this.left,u=this.right-this.getPixelForTick(this.ticks.length-1),d=0,f=0;l?c?(d=n*t.width,f=s*e.height):(d=s*t.height,f=n*e.width):r==="start"?f=e.width:r==="end"?d=t.width:r!=="inner"&&(d=t.width/2,f=e.width/2),this.paddingLeft=Math.max((d-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((f-u+o)*this.width/(this.width-u),0)}else{let h=e.height/2,u=t.height/2;r==="start"?(h=0,u=t.height):r==="end"&&(h=e.height,u=0),this.paddingTop=h+o,this.paddingBottom=u+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Y(this.options.afterFit,[this])}isHorizontal(){let{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,s;for(e=0,s=t.length;e<s;e++)N(t[e].label)&&(t.splice(e,1),s--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){let e=this.options.ticks.sampleSize,s=this.ticks;e<s.length&&(s=zu(s,e)),this._labelSizes=t=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,s){let{ctx:n,_longestTextCache:r}=this,o=[],a=[],l=Math.floor(e/Bu(e,s)),c=0,h=0,u,d,f,p,g,m,_,v,y,w,x;for(u=0;u<e;u+=l){if(p=t[u].label,g=this._resolveTickFontOptions(u),n.font=m=g.string,_=r[m]=r[m]||{data:{},gc:[]},v=g.lineHeight,y=w=0,!N(p)&&!Z(p))y=ps(n,_.data,_.gc,y,p),w=v;else if(Z(p))for(d=0,f=p.length;d<f;++d)x=p[d],!N(x)&&!Z(x)&&(y=ps(n,_.data,_.gc,y,x),w+=v);o.push(y),a.push(w),c=Math.max(y,c),h=Math.max(w,h)}Mv(r,e);let S=o.indexOf(c),M=a.indexOf(h),k=O=>({width:o[O]||0,height:a[O]||0});return{first:k(0),last:k(e-1),widest:k(S),highest:k(M),widths:o,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){let e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);let e=this._startPixel+t*this._length;return tu(this._alignToPixels?Te(this.chart,e,0):e)}getDecimalForPixel(t){let e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){let e=this.ticks||[];if(t>=0&&t<e.length){let s=e[t];return s.$context||(s.$context=Ev(this.getContext(),t,s))}return this.$context||(this.$context=Pv(this.chart.getContext(),this))}_tickSize(){let t=this.options.ticks,e=$t(this.labelRotation),s=Math.abs(Math.cos(e)),n=Math.abs(Math.sin(e)),r=this._getLabelSizes(),o=t.autoSkipPadding||0,a=r?r.widest.width+o:0,l=r?r.highest.height+o:0;return this.isHorizontal()?l*s>a*n?a/s:l/n:l*n<a*s?l/s:a/n}_isVisible(){let t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){let e=this.axis,s=this.chart,n=this.options,{grid:r,position:o,border:a}=n,l=r.offset,c=this.isHorizontal(),u=this.ticks.length+(l?1:0),d=ws(r),f=[],p=a.setContext(this.getContext()),g=p.display?p.width:0,m=g/2,_=function(j){return Te(s,j,g)},v,y,w,x,S,M,k,O,A,D,I,U;if(o==="top")v=_(this.bottom),M=this.bottom-d,O=v-m,D=_(t.top)+m,U=t.bottom;else if(o==="bottom")v=_(this.top),D=t.top,U=_(t.bottom)-m,M=v+m,O=this.top+d;else if(o==="left")v=_(this.right),S=this.right-d,k=v-m,A=_(t.left)+m,I=t.right;else if(o==="right")v=_(this.left),A=t.left,I=_(t.right)-m,S=v+m,k=this.left+d;else if(e==="x"){if(o==="center")v=_((t.top+t.bottom)/2+.5);else if(B(o)){let j=Object.keys(o)[0],H=o[j];v=_(this.chart.scales[j].getPixelForValue(H))}D=t.top,U=t.bottom,M=v+m,O=M+d}else if(e==="y"){if(o==="center")v=_((t.left+t.right)/2);else if(B(o)){let j=Object.keys(o)[0],H=o[j];v=_(this.chart.scales[j].getPixelForValue(H))}S=v-m,k=S-d,A=t.left,I=t.right}let it=R(n.ticks.maxTicksLimit,u),L=Math.max(1,Math.ceil(u/it));for(y=0;y<u;y+=L){let j=this.getContext(y),H=r.setContext(j),ut=a.setContext(j),q=H.lineWidth,kt=H.color,zt=ut.dash||[],rt=ut.dashOffset,gt=H.tickWidth,at=H.tickColor,Ft=H.tickBorderDash||[],yt=H.tickBorderDashOffset;w=Sv(this,y,l),w!==void 0&&(x=Te(s,w,q),c?S=k=A=I=x:M=O=D=U=x,f.push({tx1:S,ty1:M,tx2:k,ty2:O,x1:A,y1:D,x2:I,y2:U,width:q,color:kt,borderDash:zt,borderDashOffset:rt,tickWidth:gt,tickColor:at,tickBorderDash:Ft,tickBorderDashOffset:yt}))}return this._ticksLength=u,this._borderValue=v,f}_computeLabelItems(t){let e=this.axis,s=this.options,{position:n,ticks:r}=s,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:h,mirror:u}=r,d=ws(s.grid),f=d+h,p=u?-h:f,g=-$t(this.labelRotation),m=[],_,v,y,w,x,S,M,k,O,A,D,I,U="middle";if(n==="top")S=this.bottom-p,M=this._getXAxisLabelAlignment();else if(n==="bottom")S=this.top+p,M=this._getXAxisLabelAlignment();else if(n==="left"){let L=this._getYAxisLabelAlignment(d);M=L.textAlign,x=L.x}else if(n==="right"){let L=this._getYAxisLabelAlignment(d);M=L.textAlign,x=L.x}else if(e==="x"){if(n==="center")S=(t.top+t.bottom)/2+f;else if(B(n)){let L=Object.keys(n)[0],j=n[L];S=this.chart.scales[L].getPixelForValue(j)+f}M=this._getXAxisLabelAlignment()}else if(e==="y"){if(n==="center")x=(t.left+t.right)/2-f;else if(B(n)){let L=Object.keys(n)[0],j=n[L];x=this.chart.scales[L].getPixelForValue(j)}M=this._getYAxisLabelAlignment(d).textAlign}e==="y"&&(l==="start"?U="top":l==="end"&&(U="bottom"));let it=this._getLabelSizes();for(_=0,v=a.length;_<v;++_){y=a[_],w=y.label;let L=r.setContext(this.getContext(_));k=this.getPixelForTick(_)+r.labelOffset,O=this._resolveTickFontOptions(_),A=O.lineHeight,D=Z(w)?w.length:1;let j=D/2,H=L.color,ut=L.textStrokeColor,q=L.textStrokeWidth,kt=M;o?(x=k,M==="inner"&&(_===v-1?kt=this.options.reverse?"left":"right":_===0?kt=this.options.reverse?"right":"left":kt="center"),n==="top"?c==="near"||g!==0?I=-D*A+A/2:c==="center"?I=-it.highest.height/2-j*A+A:I=-it.highest.height+A/2:c==="near"||g!==0?I=A/2:c==="center"?I=it.highest.height/2-j*A:I=it.highest.height-D*A,u&&(I*=-1),g!==0&&!L.showLabelBackdrop&&(x+=A/2*Math.sin(g))):(S=k,I=(1-D)*A/2);let zt;if(L.showLabelBackdrop){let rt=xt(L.backdropPadding),gt=it.heights[_],at=it.widths[_],Ft=I-rt.top,yt=0-rt.left;switch(U){case"middle":Ft-=gt/2;break;case"bottom":Ft-=gt;break}switch(M){case"center":yt-=at/2;break;case"right":yt-=at;break;case"inner":_===v-1?yt-=at:_>0&&(yt-=at/2);break}zt={left:yt,top:Ft,width:at+rt.width,height:gt+rt.height,color:L.backdropColor}}m.push({label:w,font:O,textOffset:I,options:{rotation:g,color:H,strokeColor:ut,strokeWidth:q,textAlign:kt,textBaseline:U,translation:[x,S],backdrop:zt}})}return m}_getXAxisLabelAlignment(){let{position:t,ticks:e}=this.options;if(-$t(this.labelRotation))return t==="top"?"left":"right";let n="center";return e.align==="start"?n="left":e.align==="end"?n="right":e.align==="inner"&&(n="inner"),n}_getYAxisLabelAlignment(t){let{position:e,ticks:{crossAlign:s,mirror:n,padding:r}}=this.options,o=this._getLabelSizes(),a=t+r,l=o.widest.width,c,h;return e==="left"?n?(h=this.right+r,s==="near"?c="left":s==="center"?(c="center",h+=l/2):(c="right",h+=l)):(h=this.right-a,s==="near"?c="right":s==="center"?(c="center",h-=l/2):(c="left",h=this.left)):e==="right"?n?(h=this.left+r,s==="near"?c="right":s==="center"?(c="center",h-=l/2):(c="left",h-=l)):(h=this.left+a,s==="near"?c="left":s==="center"?(c="center",h+=l/2):(c="right",h=this.right)):c="right",{textAlign:c,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;let t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){let{ctx:t,options:{backgroundColor:e},left:s,top:n,width:r,height:o}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(s,n,r,o),t.restore())}getLineWidthForValue(t){let e=this.options.grid;if(!this._isVisible()||!e.display)return 0;let n=this.ticks.findIndex(r=>r.value===t);return n>=0?e.setContext(this.getContext(n)).lineWidth:0}drawGrid(t){let e=this.options.grid,s=this.ctx,n=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t)),r,o,a=(l,c,h)=>{!h.width||!h.color||(s.save(),s.lineWidth=h.width,s.strokeStyle=h.color,s.setLineDash(h.borderDash||[]),s.lineDashOffset=h.borderDashOffset,s.beginPath(),s.moveTo(l.x,l.y),s.lineTo(c.x,c.y),s.stroke(),s.restore())};if(e.display)for(r=0,o=n.length;r<o;++r){let l=n[r];e.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),e.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){let{chart:t,ctx:e,options:{border:s,grid:n}}=this,r=s.setContext(this.getContext()),o=s.display?r.width:0;if(!o)return;let a=n.setContext(this.getContext(0)).lineWidth,l=this._borderValue,c,h,u,d;this.isHorizontal()?(c=Te(t,this.left,o)-o/2,h=Te(t,this.right,a)+a/2,u=d=l):(u=Te(t,this.top,o)-o/2,d=Te(t,this.bottom,a)+a/2,c=h=l),e.save(),e.lineWidth=r.width,e.strokeStyle=r.color,e.beginPath(),e.moveTo(c,u),e.lineTo(h,d),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;let s=this.ctx,n=this._computeLabelArea();n&&_s(s,n);let r=this.getLabelItems(t);for(let o of r){let a=o.options,l=o.font,c=o.label,h=o.textOffset;Ae(s,c,0,h,l,a)}n&&vs(s)}drawTitle(){let{ctx:t,options:{position:e,title:s,reverse:n}}=this;if(!s.display)return;let r=ht(s.font),o=xt(s.padding),a=s.align,l=r.lineHeight/2;e==="bottom"||e==="center"||B(e)?(l+=o.bottom,Z(s.text)&&(l+=r.lineHeight*(s.text.length-1))):l+=o.top;let{titleX:c,titleY:h,maxWidth:u,rotation:d}=Ov(this,l,e,a);Ae(t,s.text,0,0,r,{color:s.color,maxWidth:u,rotation:d,textAlign:Cv(a,e,n),textBaseline:"middle",translation:[c,h]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){let t=this.options,e=t.ticks&&t.ticks.z||0,s=R(t.grid&&t.grid.z,-1),n=R(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==i.prototype.draw?[{z:e,draw:r=>{this.draw(r)}}]:[{z:s,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:n,draw:()=>{this.drawBorder()}},{z:e,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(t){let e=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",n=[],r,o;for(r=0,o=e.length;r<o;++r){let a=e[r];a[s]===this.id&&(!t||a.type===t)&&n.push(a)}return n}_resolveTickFontOptions(t){let e=this.options.ticks.setContext(this.getContext(t));return ht(e.font)}_maxDigits(){let t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}},Si=class{constructor(t,e,s){this.type=t,this.scope=e,this.override=s,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){let e=Object.getPrototypeOf(t),s;Dv(e)&&(s=this.register(e));let n=this.items,r=t.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in n||(n[r]=t,Tv(t,o,s),this.override&&G.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){let e=this.items,s=t.id,n=this.scope;s in e&&delete e[s],n&&s in G[n]&&(delete G[n][s],this.override&&delete Oe[s])}};function Tv(i,t,e){let s=pi(Object.create(null),[e?G.get(e):{},G.get(t),i.defaults]);G.set(t,s),i.defaultRoutes&&Av(t,i.defaultRoutes),i.descriptors&&G.describe(t,i.descriptors)}function Av(i,t){Object.keys(t).forEach(e=>{let s=e.split("."),n=s.pop(),r=[i].concat(s).join("."),o=t[e].split("."),a=o.pop(),l=o.join(".");G.route(r,n,l,a)})}function Dv(i){return"id"in i&&"defaults"in i}var Za=class{constructor(){this.controllers=new Si(Re,"datasets",!0),this.elements=new Si(Wt,"elements"),this.plugins=new Si(Object,"plugins"),this.scales=new Si(Qe,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,s){[...e].forEach(n=>{let r=s||this._getRegistryForType(n);s||r.isForType(n)||r===this.plugins&&n.id?this._exec(t,r,n):W(n,o=>{let a=s||this._getRegistryForType(o);this._exec(t,a,o)})})}_exec(t,e,s){let n=Cn(t);Y(s["before"+n],[],s),e[t](s),Y(s["after"+n],[],s)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){let s=this._typedRegistries[e];if(s.isForType(t))return s}return this.plugins}_get(t,e,s){let n=e.get(t);if(n===void 0)throw new Error('"'+t+'" is not a registered '+s+".");return n}},Qt=new Za,Qa=class{constructor(){this._init=void 0}notify(t,e,s,n){if(e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install")),this._init===void 0)return;let r=n?this._descriptors(t).filter(n):this._descriptors(t),o=this._notify(r,t,e,s);return e==="afterDestroy"&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall"),this._init=void 0),o}_notify(t,e,s,n){n=n||{};for(let r of t){let o=r.plugin,a=o[s],l=[e,n,r.options];if(Y(a,l,o)===!1&&n.cancelable)return!1}return!0}invalidate(){N(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;let e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){let s=t&&t.config,n=R(s.options&&s.options.plugins,{}),r=Iv(s);return n===!1&&!e?[]:Rv(t,r,n,e)}_notifyStateChanges(t){let e=this._oldCache||[],s=this._cache,n=(r,o)=>r.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(n(e,s),t,"stop"),this._notify(n(s,e),t,"start")}};function Iv(i){let t={},e=[],s=Object.keys(Qt.plugins.items);for(let r=0;r<s.length;r++)e.push(Qt.getPlugin(s[r]));let n=i.plugins||[];for(let r=0;r<n.length;r++){let o=n[r];e.indexOf(o)===-1&&(e.push(o),t[o.id]=!0)}return{plugins:e,localIds:t}}function Fv(i,t){return!t&&i===!1?null:i===!0?{}:i}function Rv(i,{plugins:t,localIds:e},s,n){let r=[],o=i.getContext();for(let a of t){let l=a.id,c=Fv(s[l],n);c!==null&&r.push({plugin:a,options:Lv(i.config,{plugin:a,local:e[l]},c,o)})}return r}function Lv(i,{plugin:t,local:e},s,n){let r=i.pluginScopeKeys(t),o=i.getOptionScopes(s,r);return e&&t.defaults&&o.push(t.defaults),i.createResolver(o,n,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function tl(i,t){let e=G.datasets[i]||{};return((t.datasets||{})[i]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function Nv(i,t){let e=i;return i==="_index_"?e=t:i==="_value_"&&(e=t==="x"?"y":"x"),e}function $v(i,t){return i===t?"_index_":"_value_"}function Hu(i){if(i==="x"||i==="y"||i==="r")return i}function Bv(i){if(i==="top"||i==="bottom")return"x";if(i==="left"||i==="right")return"y"}function el(i,...t){if(Hu(i))return i;for(let e of t){let s=e.axis||Bv(e.position)||i.length>1&&Hu(i[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${i}' axis. Please provide 'axis' or 'position' option.`)}function Wu(i,t,e){if(e[t+"AxisID"]===i)return{axis:t}}function zv(i,t){if(t.data&&t.data.datasets){let e=t.data.datasets.filter(s=>s.xAxisID===i||s.yAxisID===i);if(e.length)return Wu(i,"x",e[0])||Wu(i,"y",e[0])}return{}}function jv(i,t){let e=Oe[i.type]||{scales:{}},s=t.scales||{},n=tl(i.type,t),r=Object.create(null);return Object.keys(s).forEach(o=>{let a=s[o];if(!B(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);let l=el(o,a,zv(o,i),G.scales[a.type]),c=$v(l,n),h=e.scales||{};r[o]=mi(Object.create(null),[{axis:l},a,h[l],h[c]])}),i.data.datasets.forEach(o=>{let a=o.type||i.type,l=o.indexAxis||tl(a,t),h=(Oe[a]||{}).scales||{};Object.keys(h).forEach(u=>{let d=Nv(u,l),f=o[d+"AxisID"]||d;r[f]=r[f]||Object.create(null),mi(r[f],[{axis:d},s[f],h[u]])})}),Object.keys(r).forEach(o=>{let a=r[o];mi(a,[G.scales[a.type],G.scale])}),r}function Td(i){let t=i.options||(i.options={});t.plugins=R(t.plugins,{}),t.scales=jv(i,t)}function Ad(i){return i=i||{},i.datasets=i.datasets||[],i.labels=i.labels||[],i}function Hv(i){return i=i||{},i.data=Ad(i.data),Td(i),i}var Vu=new Map,Dd=new Set;function jn(i,t){let e=Vu.get(i);return e||(e=t(),Vu.set(i,e),Dd.add(e)),e}var ks=(i,t,e)=>{let s=he(t,e);s!==void 0&&i.add(s)},il=class{constructor(t){this._config=Hv(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Ad(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){let t=this._config;this.clearCache(),Td(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return jn(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return jn(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return jn(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){let e=t.id,s=this.type;return jn(`${s}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){let s=this._scopeCache,n=s.get(t);return(!n||e)&&(n=new Map,s.set(t,n)),n}getOptionScopes(t,e,s){let{options:n,type:r}=this,o=this._cachedScopes(t,s),a=o.get(e);if(a)return a;let l=new Set;e.forEach(h=>{t&&(l.add(t),h.forEach(u=>ks(l,t,u))),h.forEach(u=>ks(l,n,u)),h.forEach(u=>ks(l,Oe[r]||{},u)),h.forEach(u=>ks(l,G,u)),h.forEach(u=>ks(l,Dn,u))});let c=Array.from(l);return c.length===0&&c.push(Object.create(null)),Dd.has(e)&&o.set(e,c),c}chartOptionScopes(){let{options:t,type:e}=this;return[t,Oe[e]||{},G.datasets[e]||{},{type:e},G,Dn]}resolveNamedOptions(t,e,s,n=[""]){let r={$shared:!0},{resolver:o,subPrefixes:a}=Uu(this._resolverCache,t,n),l=o;if(Vv(o,e)){r.$shared=!1,s=le(s)?s():s;let c=this.createResolver(t,s,a);l=Ge(o,s,c)}for(let c of e)r[c]=l[c];return r}createResolver(t,e,s=[""],n){let{resolver:r}=Uu(this._resolverCache,t,s);return B(e)?Ge(r,e,void 0,n):r}};function Uu(i,t,e){let s=i.get(t);s||(s=new Map,i.set(t,s));let n=e.join(),r=s.get(n);return r||(r={resolver:Rn(t,e),subPrefixes:e.filter(a=>!a.toLowerCase().includes("hover"))},s.set(n,r)),r}var Wv=i=>B(i)&&Object.getOwnPropertyNames(i).some(t=>le(i[t]));function Vv(i,t){let{isScriptable:e,isIndexable:s}=Ma(i);for(let n of t){let r=e(n),o=s(n),a=(o||r)&&i[n];if(r&&(le(a)||Wv(a))||o&&Z(a))return!0}return!1}var Uv="4.5.1",qv=["top","bottom","left","right","chartArea"];function qu(i,t){return i==="top"||i==="bottom"||qv.indexOf(i)===-1&&t==="x"}function Yu(i,t){return function(e,s){return e[i]===s[i]?e[t]-s[t]:e[i]-s[i]}}function Gu(i){let t=i.chart,e=t.options.animation;t.notifyPlugins("afterRender"),Y(e&&e.onComplete,[i],t)}function Yv(i){let t=i.chart,e=t.options.animation;Y(e&&e.onProgress,[i],t)}function Id(i){return Ln()&&typeof i=="string"?i=document.getElementById(i):i&&i.length&&(i=i[0]),i&&i.canvas&&(i=i.canvas),i}var qn={},Xu=i=>{let t=Id(i);return Object.values(qn).filter(e=>e.canvas===t).pop()};function Gv(i,t,e){let s=Object.keys(i);for(let n of s){let r=+n;if(r>=t){let o=i[n];delete i[n],(e>0||r>t)&&(i[r+e]=o)}}}function Xv(i,t,e,s){return!e||i.type==="mouseout"?null:s?t:i}var Qn=(()=>{class i{static defaults=G;static instances=qn;static overrides=Oe;static registry=Qt;static version=Uv;static getChart=Xu;static register(...e){Qt.add(...e),Ku()}static unregister(...e){Qt.remove(...e),Ku()}constructor(e,s){let n=this.config=new il(s),r=Id(e),o=Xu(r);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");let a=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||mv(r)),this.platform.updateConfig(n);let l=this.platform.acquireContext(r,a.aspectRatio),c=l&&l.canvas,h=c&&c.height,u=c&&c.width;if(this.id=Gh(),this.ctx=l,this.canvas=c,this.width=u,this.height=h,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Qa,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=ru(d=>this.update(d),a.resizeDelay||0),this._dataChanges=[],qn[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}de.listen(this,"complete",Gu),de.listen(this,"progress",Yv),this._initialize(),this.attached&&this.update()}get aspectRatio(){let{options:{aspectRatio:e,maintainAspectRatio:s},width:n,height:r,_aspectRatio:o}=this;return N(e)?s&&o?o:r?n/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Qt}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Oa(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return wa(this.canvas,this.ctx),this}stop(){return de.stop(this),this}resize(e,s){de.running(this)?this._resizeBeforeDraw={width:e,height:s}:this._resize(e,s)}_resize(e,s){let n=this.options,r=this.canvas,o=n.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(r,e,s,o),l=n.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,Oa(this,l,!0)&&(this.notifyPlugins("resize",{size:a}),Y(n.onResize,[this,a],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){let s=this.options.scales||{};W(s,(n,r)=>{n.id=r})}buildOrUpdateScales(){let e=this.options,s=e.scales,n=this.scales,r=Object.keys(n).reduce((a,l)=>(a[l]=!1,a),{}),o=[];s&&(o=o.concat(Object.keys(s).map(a=>{let l=s[a],c=el(a,l),h=c==="r",u=c==="x";return{options:l,dposition:h?"chartArea":u?"bottom":"left",dtype:h?"radialLinear":u?"category":"linear"}}))),W(o,a=>{let l=a.options,c=l.id,h=el(c,l),u=R(l.type,a.dtype);(l.position===void 0||qu(l.position,h)!==qu(a.dposition))&&(l.position=a.dposition),r[c]=!0;let d=null;if(c in n&&n[c].type===u)d=n[c];else{let f=Qt.getScale(u);d=new f({id:c,type:u,ctx:this.ctx,chart:this}),n[d.id]=d}d.init(l,e)}),W(r,(a,l)=>{a||delete n[l]}),W(n,a=>{wt.configure(this,a,a.options),wt.addBox(this,a)})}_updateMetasets(){let e=this._metasets,s=this.data.datasets.length,n=e.length;if(e.sort((r,o)=>r.index-o.index),n>s){for(let r=s;r<n;++r)this._destroyDatasetMeta(r);e.splice(s,n-s)}this._sortedMetasets=e.slice(0).sort(Yu("order","index"))}_removeUnreferencedMetasets(){let{_metasets:e,data:{datasets:s}}=this;e.length>s.length&&delete this._stacks,e.forEach((n,r)=>{s.filter(o=>o===n._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){let e=[],s=this.data.datasets,n,r;for(this._removeUnreferencedMetasets(),n=0,r=s.length;n<r;n++){let o=s[n],a=this.getDatasetMeta(n),l=o.type||this.config.type;if(a.type&&a.type!==l&&(this._destroyDatasetMeta(n),a=this.getDatasetMeta(n)),a.type=l,a.indexAxis=o.indexAxis||tl(l,this.options),a.order=o.order||0,a.index=n,a.label=""+o.label,a.visible=this.isDatasetVisible(n),a.controller)a.controller.updateIndex(n),a.controller.linkScales();else{let c=Qt.getController(l),{datasetElementType:h,dataElementType:u}=G.datasets[l];Object.assign(c,{dataElementType:Qt.getElement(u),datasetElementType:h&&Qt.getElement(h)}),a.controller=new c(this,n),e.push(a.controller)}}return this._updateMetasets(),e}_resetElements(){W(this.data.datasets,(e,s)=>{this.getDatasetMeta(s).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){let s=this.config;s.update();let n=this._options=s.createResolver(s.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;let o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let h=0,u=this.data.datasets.length;h<u;h++){let{controller:d}=this.getDatasetMeta(h),f=!r&&o.indexOf(d)===-1;d.buildOrUpdateElements(f),a=Math.max(+d.getMaxOverflow(),a)}a=this._minPadding=n.layout.autoPadding?a:0,this._updateLayout(a),r||W(o,h=>{h.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Yu("z","_idx"));let{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){W(this.scales,e=>{wt.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let e=this.options,s=new Set(Object.keys(this._listeners)),n=new Set(e.events);(!ca(s,n)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){let{_hiddenIndices:e}=this,s=this._getUniformDataChanges()||[];for(let{method:n,start:r,count:o}of s){let a=n==="_removeElements"?-o:o;Gv(e,r,a)}}_getUniformDataChanges(){let e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];let s=this.data.datasets.length,n=o=>new Set(e.filter(a=>a[0]===o).map((a,l)=>l+","+a.splice(1).join(","))),r=n(0);for(let o=1;o<s;o++)if(!ca(r,n(o)))return;return Array.from(r).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;wt.update(this,this.width,this.height,e);let s=this.chartArea,n=s.width<=0||s.height<=0;this._layers=[],W(this.boxes,r=>{n&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,o)=>{r._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let s=0,n=this.data.datasets.length;s<n;++s)this.getDatasetMeta(s).controller.configure();for(let s=0,n=this.data.datasets.length;s<n;++s)this._updateDataset(s,le(e)?e({datasetIndex:s}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,s){let n=this.getDatasetMeta(e),r={meta:n,index:e,mode:s,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(n.controller._update(s),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(de.has(this)?this.attached&&!de.running(this)&&de.start(this):(this.draw(),Gu({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){let{width:n,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;let s=this._layers;for(e=0;e<s.length&&s[e].z<=0;++e)s[e].draw(this.chartArea);for(this._drawDatasets();e<s.length;++e)s[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){let s=this._sortedMetasets,n=[],r,o;for(r=0,o=s.length;r<o;++r){let a=s[r];(!e||a.visible)&&n.push(a)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;let e=this.getSortedVisibleDatasetMetas();for(let s=e.length-1;s>=0;--s)this._drawDataset(e[s]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){let s=this.ctx,n={meta:e,index:e.index,cancelable:!0},r=Ra(this,e);this.notifyPlugins("beforeDatasetDraw",n)!==!1&&(r&&_s(s,r),e.controller.draw(),r&&vs(s),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return Xt(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,s,n,r){let o=J_.modes[s];return typeof o=="function"?o(this,e,n,r):[]}getDatasetMeta(e){let s=this.data.datasets[e],n=this._metasets,r=n.filter(o=>o&&o._dataset===s).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:s&&s.order||0,index:e,_dataset:s,_parsed:[],_sorted:!1},n.push(r)),r}getContext(){return this.$context||(this.$context=ue(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){let s=this.data.datasets[e];if(!s)return!1;let n=this.getDatasetMeta(e);return typeof n.hidden=="boolean"?!n.hidden:!s.hidden}setDatasetVisibility(e,s){let n=this.getDatasetMeta(e);n.hidden=!s}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,s,n){let r=n?"show":"hide",o=this.getDatasetMeta(e),a=o.controller._resolveAnimations(void 0,r);_i(s)?(o.data[s].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),a.update(o,{visible:n}),this.update(l=>l.datasetIndex===e?r:void 0))}hide(e,s){this._updateVisibility(e,s,!1)}show(e,s){this._updateVisibility(e,s,!0)}_destroyDatasetMeta(e){let s=this._metasets[e];s&&s.controller&&s.controller._destroy(),delete this._metasets[e]}_stop(){let e,s;for(this.stop(),de.remove(this),e=0,s=this.data.datasets.length;e<s;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:e,ctx:s}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),wa(e,s),this.platform.releaseContext(s),this.canvas=null,this.ctx=null),delete qn[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){let e=this._listeners,s=this.platform,n=(o,a)=>{s.addEventListener(this,o,a),e[o]=a},r=(o,a,l)=>{o.offsetX=a,o.offsetY=l,this._eventHandler(o)};W(this.options.events,o=>n(o,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});let e=this._responsiveListeners,s=this.platform,n=(c,h)=>{s.addEventListener(this,c,h),e[c]=h},r=(c,h)=>{e[c]&&(s.removeEventListener(this,c,h),delete e[c])},o=(c,h)=>{this.canvas&&this.resize(c,h)},a,l=()=>{r("attach",l),this.attached=!0,this.resize(),n("resize",o),n("detach",a)};a=()=>{this.attached=!1,r("resize",o),this._stop(),this._resize(0,0),n("attach",l)},s.isAttached(this.canvas)?l():a()}unbindEvents(){W(this._listeners,(e,s)=>{this.platform.removeEventListener(this,s,e)}),this._listeners={},W(this._responsiveListeners,(e,s)=>{this.platform.removeEventListener(this,s,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,s,n){let r=n?"set":"remove",o,a,l,c;for(s==="dataset"&&(o=this.getDatasetMeta(e[0].datasetIndex),o.controller["_"+r+"DatasetHoverStyle"]()),l=0,c=e.length;l<c;++l){a=e[l];let h=a&&this.getDatasetMeta(a.datasetIndex).controller;h&&h[r+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){let s=this._active||[],n=e.map(({datasetIndex:o,index:a})=>{let l=this.getDatasetMeta(o);if(!l)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:l.data[a],index:a}});!gs(n,s)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,s))}notifyPlugins(e,s,n){return this._plugins.notify(this,e,s,n)}isPluginEnabled(e){return this._plugins._cache.filter(s=>s.plugin.id===e).length===1}_updateHoverStyles(e,s,n){let r=this.options.hover,o=(c,h)=>c.filter(u=>!h.some(d=>u.datasetIndex===d.datasetIndex&&u.index===d.index)),a=o(s,e),l=n?e:o(e,s);a.length&&this.updateHoverStyle(a,r.mode,!1),l.length&&r.mode&&this.updateHoverStyle(l,r.mode,!0)}_eventHandler(e,s){let n={event:e,replay:s,cancelable:!0,inChartArea:this.isPointInArea(e)},r=a=>(a.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",n,r)===!1)return;let o=this._handleEvent(e,s,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,r),(o||n.changed)&&this.render(),this}_handleEvent(e,s,n){let{_active:r=[],options:o}=this,a=s,l=this._getActiveElements(e,r,n,a),c=Jh(e),h=Xv(e,this._lastEvent,n,c);n&&(this._lastEvent=null,Y(o.onHover,[e,l,this],this),c&&Y(o.onClick,[e,l,this],this));let u=!gs(l,r);return(u||s)&&(this._active=l,this._updateHoverStyles(l,r,s)),this._lastEvent=h,u}_getActiveElements(e,s,n,r){if(e.type==="mouseout")return[];if(!n)return s;let o=this.options.hover;return this.getElementsAtEventForMode(e,o.mode,o,r)}}return i})();function Ku(){return W(Qn.instances,i=>i._plugins.invalidate())}function Kv(i,t,e){let{startAngle:s,x:n,y:r,outerRadius:o,innerRadius:a,options:l}=t,{borderWidth:c,borderJoinStyle:h}=l,u=Math.min(c/o,vt(s-e));if(i.beginPath(),i.arc(n,r,o-c/2,s+u/2,e-u/2),a>0){let d=Math.min(c/a,vt(s-e));i.arc(n,r,a+c/2,e-d/2,s+d/2,!0)}else{let d=Math.min(c/2,o*vt(s-e));if(h==="round")i.arc(n,r,d,e-z/2,s+z/2,!0);else if(h==="bevel"){let f=2*d*d,p=-f*Math.cos(e+z/2)+n,g=-f*Math.sin(e+z/2)+r,m=f*Math.cos(s+z/2)+n,_=f*Math.sin(s+z/2)+r;i.lineTo(p,g),i.lineTo(m,_)}}i.closePath(),i.moveTo(0,0),i.rect(0,0,i.canvas.width,i.canvas.height),i.clip("evenodd")}function Jv(i,t,e){let{startAngle:s,pixelMargin:n,x:r,y:o,outerRadius:a,innerRadius:l}=t,c=n/a;i.beginPath(),i.arc(r,o,a,s-c,e+c),l>n?(c=n/l,i.arc(r,o,l,e+c,s-c,!0)):i.arc(r,o,n,e+ot,s-ot),i.closePath(),i.clip()}function Zv(i){return Fn(i,["outerStart","outerEnd","innerStart","innerEnd"])}function Qv(i,t,e,s){let n=Zv(i.options.borderRadius),r=(e-t)/2,o=Math.min(r,s*t/2),a=l=>{let c=(e-Math.min(r,l))*s/2;return pt(l,0,Math.min(r,c))};return{outerStart:a(n.outerStart),outerEnd:a(n.outerEnd),innerStart:pt(n.innerStart,0,o),innerEnd:pt(n.innerEnd,0,o)}}function ki(i,t,e,s){return{x:e+i*Math.cos(t),y:s+i*Math.sin(t)}}function Kn(i,t,e,s,n,r){let{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:h}=t,u=Math.max(t.outerRadius+s+e-c,0),d=h>0?h+s+e+c:0,f=0,p=n-l;if(s){let L=h>0?h-s:0,j=u>0?u-s:0,H=(L+j)/2,ut=H!==0?p*H/(H+s):p;f=(p-ut)/2}let g=Math.max(.001,p*u-e/z)/u,m=(p-g)/2,_=l+m+f,v=n-m-f,{outerStart:y,outerEnd:w,innerStart:x,innerEnd:S}=Qv(t,d,u,v-_),M=u-y,k=u-w,O=_+y/M,A=v-w/k,D=d+x,I=d+S,U=_+x/D,it=v-S/I;if(i.beginPath(),r){let L=(O+A)/2;if(i.arc(o,a,u,O,L),i.arc(o,a,u,L,A),w>0){let q=ki(k,A,o,a);i.arc(q.x,q.y,w,A,v+ot)}let j=ki(I,v,o,a);if(i.lineTo(j.x,j.y),S>0){let q=ki(I,it,o,a);i.arc(q.x,q.y,S,v+ot,it+Math.PI)}let H=(v-S/d+(_+x/d))/2;if(i.arc(o,a,d,v-S/d,H,!0),i.arc(o,a,d,H,_+x/d,!0),x>0){let q=ki(D,U,o,a);i.arc(q.x,q.y,x,U+Math.PI,_-ot)}let ut=ki(M,_,o,a);if(i.lineTo(ut.x,ut.y),y>0){let q=ki(M,O,o,a);i.arc(q.x,q.y,y,_-ot,O)}}else{i.moveTo(o,a);let L=Math.cos(O)*u+o,j=Math.sin(O)*u+a;i.lineTo(L,j);let H=Math.cos(A)*u+o,ut=Math.sin(A)*u+a;i.lineTo(H,ut)}i.closePath()}function tb(i,t,e,s,n){let{fullCircles:r,startAngle:o,circumference:a}=t,l=t.endAngle;if(r){Kn(i,t,e,s,l,n);for(let c=0;c<r;++c)i.fill();isNaN(a)||(l=o+(a%Q||Q))}return Kn(i,t,e,s,l,n),i.fill(),l}function eb(i,t,e,s,n){let{fullCircles:r,startAngle:o,circumference:a,options:l}=t,{borderWidth:c,borderJoinStyle:h,borderDash:u,borderDashOffset:d,borderRadius:f}=l,p=l.borderAlign==="inner";if(!c)return;i.setLineDash(u||[]),i.lineDashOffset=d,p?(i.lineWidth=c*2,i.lineJoin=h||"round"):(i.lineWidth=c,i.lineJoin=h||"bevel");let g=t.endAngle;if(r){Kn(i,t,e,s,g,n);for(let m=0;m<r;++m)i.stroke();isNaN(a)||(g=o+(a%Q||Q))}p&&Jv(i,t,g),l.selfJoin&&g-o>=z&&f===0&&h!=="miter"&&Kv(i,t,g),r||(Kn(i,t,e,s,g,n),i.stroke())}var sl=class extends Wt{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,s){let n=this.getProps(["x","y"],s),{angle:r,distance:o}=fa(n,{x:t,y:e}),{startAngle:a,endAngle:l,innerRadius:c,outerRadius:h,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),d=(this.options.spacing+this.options.borderWidth)/2,f=R(u,l-a),p=bi(r,a,l)&&a!==l,g=f>=Q||p,m=Jt(o,c+d,h+d);return g&&m}getCenterPoint(t){let{x:e,y:s,startAngle:n,endAngle:r,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:l,spacing:c}=this.options,h=(n+r)/2,u=(o+a+c+l)/2;return{x:e+Math.cos(h)*u,y:s+Math.sin(h)*u}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){let{options:e,circumference:s}=this,n=(e.offset||0)/4,r=(e.spacing||0)/2,o=e.circular;if(this.pixelMargin=e.borderAlign==="inner"?.33:0,this.fullCircles=s>Q?Math.floor(s/Q):0,s===0||this.innerRadius<0||this.outerRadius<0)return;t.save();let a=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(a)*n,Math.sin(a)*n);let l=1-Math.sin(Math.min(z,s||0)),c=n*l;t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,tb(t,this,c,r,o),eb(t,this,c,r,o),t.restore()}};function Fd(i,t,e=t){i.lineCap=R(e.borderCapStyle,t.borderCapStyle),i.setLineDash(R(e.borderDash,t.borderDash)),i.lineDashOffset=R(e.borderDashOffset,t.borderDashOffset),i.lineJoin=R(e.borderJoinStyle,t.borderJoinStyle),i.lineWidth=R(e.borderWidth,t.borderWidth),i.strokeStyle=R(e.borderColor,t.borderColor)}function ib(i,t,e){i.lineTo(e.x,e.y)}function sb(i){return i.stepped?cu:i.tension||i.cubicInterpolationMode==="monotone"?hu:ib}function Rd(i,t,e={}){let s=i.length,{start:n=0,end:r=s-1}=e,{start:o,end:a}=t,l=Math.max(n,o),c=Math.min(r,a),h=n<o&&r<o||n>a&&r>a;return{count:s,start:l,loop:t.loop,ilen:c<l&&!h?s+c-l:c-l}}function nb(i,t,e,s){let{points:n,options:r}=t,{count:o,start:a,loop:l,ilen:c}=Rd(n,e,s),h=sb(r),{move:u=!0,reverse:d}=s||{},f,p,g;for(f=0;f<=c;++f)p=n[(a+(d?c-f:f))%o],!p.skip&&(u?(i.moveTo(p.x,p.y),u=!1):h(i,g,p,d,r.stepped),g=p);return l&&(p=n[(a+(d?c:0))%o],h(i,g,p,d,r.stepped)),!!l}function rb(i,t,e,s){let n=t.points,{count:r,start:o,ilen:a}=Rd(n,e,s),{move:l=!0,reverse:c}=s||{},h=0,u=0,d,f,p,g,m,_,v=w=>(o+(c?a-w:w))%r,y=()=>{g!==m&&(i.lineTo(h,m),i.lineTo(h,g),i.lineTo(h,_))};for(l&&(f=n[v(0)],i.moveTo(f.x,f.y)),d=0;d<=a;++d){if(f=n[v(d)],f.skip)continue;let w=f.x,x=f.y,S=w|0;S===p?(x<g?g=x:x>m&&(m=x),h=(u*h+w)/++u):(y(),i.lineTo(w,x),p=S,u=0,g=m=x),_=x}y()}function nl(i){let t=i.options,e=t.borderDash&&t.borderDash.length;return!i._decimated&&!i._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!e?rb:nb}function ob(i){return i.stepped?bu:i.tension||i.cubicInterpolationMode==="monotone"?xu:Ee}function ab(i,t,e,s){let n=t._path;n||(n=t._path=new Path2D,t.path(n,e,s)&&n.closePath()),Fd(i,t.options),i.stroke(n)}function lb(i,t,e,s){let{segments:n,options:r}=t,o=nl(t);for(let a of n)Fd(i,r,a.style),i.beginPath(),o(i,t,a,{start:e,end:e+s-1})&&i.closePath(),i.stroke()}var cb=typeof Path2D=="function";function hb(i,t,e,s){cb&&!t.options.segment?ab(i,t,e,s):lb(i,t,e,s)}var tr=(()=>{class i extends Wt{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,s){let n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){let r=n.spanGaps?this._loop:this._fullLoop;mu(this._points,n,e,r,s),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=wu(this,this.options.segment))}first(){let e=this.segments,s=this.points;return e.length&&s[e[0].start]}last(){let e=this.segments,s=this.points,n=e.length;return n&&s[e[n-1].end]}interpolate(e,s){let n=this.options,r=e[s],o=this.points,a=Fa(this,{property:s,start:r,end:r});if(!a.length)return;let l=[],c=ob(n),h,u;for(h=0,u=a.length;h<u;++h){let{start:d,end:f}=a[h],p=o[d],g=o[f];if(p===g){l.push(p);continue}let m=Math.abs((r-p[s])/(g[s]-p[s])),_=c(p,g,m,n.stepped);_[s]=e[s],l.push(_)}return l.length===1?l[0]:l}pathSegment(e,s,n){return nl(this)(e,this,s,n)}path(e,s,n){let r=this.segments,o=nl(this),a=this._loop;s=s||0,n=n||this.points.length-s;for(let l of r)a&=o(e,this,l,{start:s,end:s+n-1});return!!a}draw(e,s,n,r){let o=this.options||{};(this.points||[]).length&&o.borderWidth&&(e.save(),hb(e,this,n,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return i})();function Ju(i,t,e,s){let n=i.options,{[e]:r}=i.getProps([e],s);return Math.abs(t-r)<n.radius+n.hitRadius}var ub=(()=>{class i extends Wt{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,s,n){let r=this.options,{x:o,y:a}=this.getProps(["x","y"],n);return Math.pow(e-o,2)+Math.pow(s-a,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(e,s){return Ju(this,e,"x",s)}inYRange(e,s){return Ju(this,e,"y",s)}getCenterPoint(e){let{x:s,y:n}=this.getProps(["x","y"],e);return{x:s,y:n}}size(e){e=e||this.options||{};let s=e.radius||0;s=Math.max(s,s&&e.hoverRadius||0);let n=s&&e.borderWidth||0;return(s+n)*2}draw(e,s){let n=this.options;this.skip||n.radius<.1||!Xt(this,s,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,In(e,n,this.x,this.y))}getRange(){let e=this.options||{};return e.radius+e.hitRadius}}return i})();function Ld(i,t){let{x:e,y:s,base:n,width:r,height:o}=i.getProps(["x","y","base","width","height"],t),a,l,c,h,u;return i.horizontal?(u=o/2,a=Math.min(e,n),l=Math.max(e,n),c=s-u,h=s+u):(u=r/2,a=e-u,l=e+u,c=Math.min(s,n),h=Math.max(s,n)),{left:a,top:c,right:l,bottom:h}}function Fe(i,t,e,s){return i?0:pt(t,e,s)}function db(i,t,e){let s=i.options.borderWidth,n=i.borderSkipped,r=Sa(s);return{t:Fe(n.top,r.top,0,e),r:Fe(n.right,r.right,0,t),b:Fe(n.bottom,r.bottom,0,e),l:Fe(n.left,r.left,0,t)}}function fb(i,t,e){let{enableBorderRadius:s}=i.getProps(["enableBorderRadius"]),n=i.options.borderRadius,r=De(n),o=Math.min(t,e),a=i.borderSkipped,l=s||B(n);return{topLeft:Fe(!l||a.top||a.left,r.topLeft,0,o),topRight:Fe(!l||a.top||a.right,r.topRight,0,o),bottomLeft:Fe(!l||a.bottom||a.left,r.bottomLeft,0,o),bottomRight:Fe(!l||a.bottom||a.right,r.bottomRight,0,o)}}function pb(i){let t=Ld(i),e=t.right-t.left,s=t.bottom-t.top,n=db(i,e/2,s/2),r=fb(i,e/2,s/2);return{outer:{x:t.left,y:t.top,w:e,h:s,radius:r},inner:{x:t.left+n.l,y:t.top+n.t,w:e-n.l-n.r,h:s-n.t-n.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(n.t,n.l)),topRight:Math.max(0,r.topRight-Math.max(n.t,n.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(n.b,n.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(n.b,n.r))}}}}function Wa(i,t,e,s){let n=t===null,r=e===null,a=i&&!(n&&r)&&Ld(i,s);return a&&(n||Jt(t,a.left,a.right))&&(r||Jt(e,a.top,a.bottom))}function gb(i){return i.topLeft||i.topRight||i.bottomLeft||i.bottomRight}function mb(i,t){i.rect(t.x,t.y,t.w,t.h)}function Va(i,t,e={}){let s=i.x!==e.x?-t:0,n=i.y!==e.y?-t:0,r=(i.x+i.w!==e.x+e.w?t:0)-s,o=(i.y+i.h!==e.y+e.h?t:0)-n;return{x:i.x+s,y:i.y+n,w:i.w+r,h:i.h+o,radius:i.radius}}var rl=class extends Wt{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){let{inflateAmount:e,options:{borderColor:s,backgroundColor:n}}=this,{inner:r,outer:o}=pb(this),a=gb(o.radius)?yi:mb;t.save(),(o.w!==r.w||o.h!==r.h)&&(t.beginPath(),a(t,Va(o,e,r)),t.clip(),a(t,Va(r,-e,o)),t.fillStyle=s,t.fill("evenodd")),t.beginPath(),a(t,Va(r,e)),t.fillStyle=n,t.fill(),t.restore()}inRange(t,e,s){return Wa(this,t,e,s)}inXRange(t,e){return Wa(this,t,null,e)}inYRange(t,e){return Wa(this,null,t,e)}getCenterPoint(t){let{x:e,y:s,base:n,horizontal:r}=this.getProps(["x","y","base","horizontal"],t);return{x:r?(e+n)/2:e,y:r?s:(s+n)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}},_b=Object.freeze({__proto__:null,ArcElement:sl,BarElement:rl,LineElement:tr,PointElement:ub}),ol=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],Zu=ol.map(i=>i.replace("rgb(","rgba(").replace(")",", 0.5)"));function Nd(i){return ol[i%ol.length]}function $d(i){return Zu[i%Zu.length]}function vb(i,t){return i.borderColor=Nd(t),i.backgroundColor=$d(t),++t}function bb(i,t){return i.backgroundColor=i.data.map(()=>Nd(t++)),t}function xb(i,t){return i.backgroundColor=i.data.map(()=>$d(t++)),t}function yb(i){let t=0;return(e,s)=>{let n=i.getDatasetMeta(s).controller;n instanceof pl?t=bb(e,t):n instanceof Md?t=xb(e,t):n&&(t=vb(e,t))}}function Qu(i){let t;for(t in i)if(i[t].borderColor||i[t].backgroundColor)return!0;return!1}function wb(i){return i&&(i.borderColor||i.backgroundColor)}function kb(){return G.borderColor!=="rgba(0,0,0,0.1)"||G.backgroundColor!=="rgba(0,0,0,0.1)"}var Sb={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(i,t,e){if(!e.enabled)return;let{data:{datasets:s},options:n}=i.config,{elements:r}=n,o=Qu(s)||wb(n)||r&&Qu(r)||kb();if(!e.forceOverride&&o)return;let a=yb(i);s.forEach(a)}};function Mb(i,t,e,s,n){let r=n.samples||s;if(r>=e)return i.slice(t,t+e);let o=[],a=(e-2)/(r-2),l=0,c=t+e-1,h=t,u,d,f,p,g;for(o[l++]=i[h],u=0;u<r-2;u++){let m=0,_=0,v,y=Math.floor((u+1)*a)+1+t,w=Math.min(Math.floor((u+2)*a)+1,e)+t,x=w-y;for(v=y;v<w;v++)m+=i[v].x,_+=i[v].y;m/=x,_/=x;let S=Math.floor(u*a)+1+t,M=Math.min(Math.floor((u+1)*a)+1,e)+t,{x:k,y:O}=i[h];for(f=p=-1,v=S;v<M;v++)p=.5*Math.abs((k-m)*(i[v].y-O)-(k-i[v].x)*(_-O)),p>f&&(f=p,d=i[v],g=v);o[l++]=d,h=g}return o[l++]=i[c],o}function Pb(i,t,e,s){let n=0,r=0,o,a,l,c,h,u,d,f,p,g,m=[],_=t+e-1,v=i[t].x,w=i[_].x-v;for(o=t;o<t+e;++o){a=i[o],l=(a.x-v)/w*s,c=a.y;let x=l|0;if(x===h)c<p?(p=c,u=o):c>g&&(g=c,d=o),n=(r*n+a.x)/++r;else{let S=o-1;if(!N(u)&&!N(d)){let M=Math.min(u,d),k=Math.max(u,d);M!==f&&M!==S&&m.push(Ns(Ls({},i[M]),{x:n})),k!==f&&k!==S&&m.push(Ns(Ls({},i[k]),{x:n}))}o>0&&S!==f&&m.push(i[S]),m.push(a),h=x,r=0,p=g=c,u=d=f=o}}return m}function Bd(i){if(i._decimated){let t=i._data;delete i._decimated,delete i._data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function td(i){i.data.datasets.forEach(t=>{Bd(t)})}function Eb(i,t){let e=t.length,s=0,n,{iScale:r}=i,{min:o,max:a,minDefined:l,maxDefined:c}=r.getUserBounds();return l&&(s=pt(Gt(t,r.axis,o).lo,0,e-1)),c?n=pt(Gt(t,r.axis,a).hi+1,s,e)-s:n=e-s,{start:s,count:n}}var Cb={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(i,t,e)=>{if(!e.enabled){td(i);return}let s=i.width;i.data.datasets.forEach((n,r)=>{let{_data:o,indexAxis:a}=n,l=i.getDatasetMeta(r),c=o||n.data;if(wi([a,i.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;let h=i.scales[l.xAxisID];if(h.type!=="linear"&&h.type!=="time"||i.options.parsing)return;let{start:u,count:d}=Eb(l,c),f=e.threshold||4*s;if(d<=f){Bd(n);return}N(o)&&(n._data=c,delete n.data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(g){this._data=g}}));let p;switch(e.algorithm){case"lttb":p=Mb(c,u,d,s,e);break;case"min-max":p=Pb(c,u,d,s);break;default:throw new Error(`Unsupported decimation algorithm '${e.algorithm}'`)}n._decimated=p})},destroy(i){td(i)}};function Ob(i,t,e){let s=i.segments,n=i.points,r=t.points,o=[];for(let a of s){let{start:l,end:c}=a;c=er(l,c,n);let h=al(e,n[l],n[c],a.loop);if(!t.segments){o.push({source:a,target:h,start:n[l],end:n[c]});continue}let u=Fa(t,h);for(let d of u){let f=al(e,r[d.start],r[d.end],d.loop),p=Ia(a,n,f);for(let g of p)o.push({source:g,target:d,start:{[e]:ed(h,f,"start",Math.max)},end:{[e]:ed(h,f,"end",Math.min)}})}}return o}function al(i,t,e,s){if(s)return;let n=t[i],r=e[i];return i==="angle"&&(n=vt(n),r=vt(r)),{property:i,start:n,end:r}}function Tb(i,t){let{x:e=null,y:s=null}=i||{},n=t.points,r=[];return t.segments.forEach(({start:o,end:a})=>{a=er(o,a,n);let l=n[o],c=n[a];s!==null?(r.push({x:l.x,y:s}),r.push({x:c.x,y:s})):e!==null&&(r.push({x:e,y:l.y}),r.push({x:e,y:c.y}))}),r}function er(i,t,e){for(;t>i;t--){let s=e[t];if(!isNaN(s.x)&&!isNaN(s.y))break}return t}function ed(i,t,e,s){return i&&t?s(i[e],t[e]):i?i[e]:t?t[e]:0}function zd(i,t){let e=[],s=!1;return Z(i)?(s=!0,e=i):e=Tb(i,t),e.length?new tr({points:e,options:{tension:0},_loop:s,_fullLoop:s}):null}function id(i){return i&&i.fill!==!1}function Ab(i,t,e){let n=i[t].fill,r=[t],o;if(!e)return n;for(;n!==!1&&r.indexOf(n)===-1;){if(!nt(n))return n;if(o=i[n],!o)return!1;if(o.visible)return n;r.push(n),n=o.fill}return!1}function Db(i,t,e){let s=Lb(i);if(B(s))return isNaN(s.value)?!1:s;let n=parseFloat(s);return nt(n)&&Math.floor(n)===n?Ib(s[0],t,n,e):["origin","start","end","stack","shape"].indexOf(s)>=0&&s}function Ib(i,t,e,s){return(i==="-"||i==="+")&&(e=t+e),e===t||e<0||e>=s?!1:e}function Fb(i,t){let e=null;return i==="start"?e=t.bottom:i==="end"?e=t.top:B(i)?e=t.getPixelForValue(i.value):t.getBasePixel&&(e=t.getBasePixel()),e}function Rb(i,t,e){let s;return i==="start"?s=e:i==="end"?s=t.options.reverse?t.min:t.max:B(i)?s=i.value:s=t.getBaseValue(),s}function Lb(i){let t=i.options,e=t.fill,s=R(e&&e.target,e);return s===void 0&&(s=!!t.backgroundColor),s===!1||s===null?!1:s===!0?"origin":s}function Nb(i){let{scale:t,index:e,line:s}=i,n=[],r=s.segments,o=s.points,a=$b(t,e);a.push(zd({x:null,y:t.bottom},s));for(let l=0;l<r.length;l++){let c=r[l];for(let h=c.start;h<=c.end;h++)Bb(n,o[h],a)}return new tr({points:n,options:{}})}function $b(i,t){let e=[],s=i.getMatchingVisibleMetas("line");for(let n=0;n<s.length;n++){let r=s[n];if(r.index===t)break;r.hidden||e.unshift(r.dataset)}return e}function Bb(i,t,e){let s=[];for(let n=0;n<e.length;n++){let r=e[n],{first:o,last:a,point:l}=zb(r,t,"x");if(!(!l||o&&a)){if(o)s.unshift(l);else if(i.push(l),!a)break}}i.push(...s)}function zb(i,t,e){let s=i.interpolate(t,e);if(!s)return{};let n=s[e],r=i.segments,o=i.points,a=!1,l=!1;for(let c=0;c<r.length;c++){let h=r[c],u=o[h.start][e],d=o[h.end][e];if(Jt(n,u,d)){a=n===u,l=n===d;break}}return{first:a,last:l,point:s}}var Jn=class{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,s){let{x:n,y:r,radius:o}=this;return e=e||{start:0,end:Q},t.arc(n,r,o,e.end,e.start,!0),!s.bounds}interpolate(t){let{x:e,y:s,radius:n}=this,r=t.angle;return{x:e+Math.cos(r)*n,y:s+Math.sin(r)*n,angle:r}}};function jb(i){let{chart:t,fill:e,line:s}=i;if(nt(e))return Hb(t,e);if(e==="stack")return Nb(i);if(e==="shape")return!0;let n=Wb(i);return n instanceof Jn?n:zd(n,s)}function Hb(i,t){let e=i.getDatasetMeta(t);return e&&i.isDatasetVisible(t)?e.dataset:null}function Wb(i){return(i.scale||{}).getPointPositionForValue?Ub(i):Vb(i)}function Vb(i){let{scale:t={},fill:e}=i,s=Fb(e,t);if(nt(s)){let n=t.isHorizontal();return{x:n?s:null,y:n?null:s}}return null}function Ub(i){let{scale:t,fill:e}=i,s=t.options,n=t.getLabels().length,r=s.reverse?t.max:t.min,o=Rb(e,t,r),a=[];if(s.grid.circular){let l=t.getPointPositionForValue(0,r);return new Jn({x:l.x,y:l.y,radius:t.getDistanceFromCenterForValue(o)})}for(let l=0;l<n;++l)a.push(t.getPointPositionForValue(l,o));return a}function Ua(i,t,e){let s=jb(t),{chart:n,index:r,line:o,scale:a,axis:l}=t,c=o.options,h=c.fill,u=c.backgroundColor,{above:d=u,below:f=u}=h||{},p=n.getDatasetMeta(r),g=Ra(n,p);s&&o.points.length&&(_s(i,e),qb(i,{line:o,target:s,above:d,below:f,area:e,scale:a,axis:l,clip:g}),vs(i))}function qb(i,t){let{line:e,target:s,above:n,below:r,area:o,scale:a,clip:l}=t,c=e._loop?"angle":t.axis;i.save();let h=r;r!==n&&(c==="x"?(sd(i,s,o.top),qa(i,{line:e,target:s,color:n,scale:a,property:c,clip:l}),i.restore(),i.save(),sd(i,s,o.bottom)):c==="y"&&(nd(i,s,o.left),qa(i,{line:e,target:s,color:r,scale:a,property:c,clip:l}),i.restore(),i.save(),nd(i,s,o.right),h=n)),qa(i,{line:e,target:s,color:h,scale:a,property:c,clip:l}),i.restore()}function sd(i,t,e){let{segments:s,points:n}=t,r=!0,o=!1;i.beginPath();for(let a of s){let{start:l,end:c}=a,h=n[l],u=n[er(l,c,n)];r?(i.moveTo(h.x,h.y),r=!1):(i.lineTo(h.x,e),i.lineTo(h.x,h.y)),o=!!t.pathSegment(i,a,{move:o}),o?i.closePath():i.lineTo(u.x,e)}i.lineTo(t.first().x,e),i.closePath(),i.clip()}function nd(i,t,e){let{segments:s,points:n}=t,r=!0,o=!1;i.beginPath();for(let a of s){let{start:l,end:c}=a,h=n[l],u=n[er(l,c,n)];r?(i.moveTo(h.x,h.y),r=!1):(i.lineTo(e,h.y),i.lineTo(h.x,h.y)),o=!!t.pathSegment(i,a,{move:o}),o?i.closePath():i.lineTo(e,u.y)}i.lineTo(e,t.first().y),i.closePath(),i.clip()}function qa(i,t){let{line:e,target:s,property:n,color:r,scale:o,clip:a}=t,l=Ob(e,s,n);for(let{source:c,target:h,start:u,end:d}of l){let{style:{backgroundColor:f=r}={}}=c,p=s!==!0;i.save(),i.fillStyle=f,Yb(i,o,a,p&&al(n,u,d)),i.beginPath();let g=!!e.pathSegment(i,c),m;if(p){g?i.closePath():rd(i,s,d,n);let _=!!s.pathSegment(i,h,{move:g,reverse:!0});m=g&&_,m||rd(i,s,u,n)}i.closePath(),i.fill(m?"evenodd":"nonzero"),i.restore()}}function Yb(i,t,e,s){let n=t.chart.chartArea,{property:r,start:o,end:a}=s||{};if(r==="x"||r==="y"){let l,c,h,u;r==="x"?(l=o,c=n.top,h=a,u=n.bottom):(l=n.left,c=o,h=n.right,u=a),i.beginPath(),e&&(l=Math.max(l,e.left),h=Math.min(h,e.right),c=Math.max(c,e.top),u=Math.min(u,e.bottom)),i.rect(l,c,h-l,u-c),i.clip()}}function rd(i,t,e,s){let n=t.interpolate(e,s);n&&i.lineTo(n.x,n.y)}var Gb={id:"filler",afterDatasetsUpdate(i,t,e){let s=(i.data.datasets||[]).length,n=[],r,o,a,l;for(o=0;o<s;++o)r=i.getDatasetMeta(o),a=r.dataset,l=null,a&&a.options&&a instanceof tr&&(l={visible:i.isDatasetVisible(o),index:o,fill:Db(a,o,s),chart:i,axis:r.controller.options.indexAxis,scale:r.vScale,line:a}),r.$filler=l,n.push(l);for(o=0;o<s;++o)l=n[o],!(!l||l.fill===!1)&&(l.fill=Ab(n,o,e.propagate))},beforeDraw(i,t,e){let s=e.drawTime==="beforeDraw",n=i.getSortedVisibleDatasetMetas(),r=i.chartArea;for(let o=n.length-1;o>=0;--o){let a=n[o].$filler;a&&(a.line.updateControlPoints(r,a.axis),s&&a.fill&&Ua(i.ctx,a,r))}},beforeDatasetsDraw(i,t,e){if(e.drawTime!=="beforeDatasetsDraw")return;let s=i.getSortedVisibleDatasetMetas();for(let n=s.length-1;n>=0;--n){let r=s[n].$filler;id(r)&&Ua(i.ctx,r,i.chartArea)}},beforeDatasetDraw(i,t,e){let s=t.meta.$filler;!id(s)||e.drawTime!=="beforeDatasetDraw"||Ua(i.ctx,s,i.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}},od=(i,t)=>{let{boxHeight:e=t,boxWidth:s=t}=i;return i.usePointStyle&&(e=Math.min(e,t),s=i.pointStyleWidth||Math.min(s,t)),{boxWidth:s,boxHeight:e,itemHeight:Math.max(t,e)}},Xb=(i,t)=>i!==null&&t!==null&&i.datasetIndex===t.datasetIndex&&i.index===t.index,Zn=class extends Wt{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,s){this.maxWidth=t,this.maxHeight=e,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){let t=this.options.labels||{},e=Y(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(s=>t.filter(s,this.chart.data))),t.sort&&(e=e.sort((s,n)=>t.sort(s,n,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){let{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}let s=t.labels,n=ht(s.font),r=n.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=od(s,r),c,h;e.font=n.string,this.isHorizontal()?(c=this.maxWidth,h=this._fitRows(o,r,a,l)+10):(h=this.maxHeight,c=this._fitCols(o,n,a,l)+10),this.width=Math.min(c,t.maxWidth||this.maxWidth),this.height=Math.min(h,t.maxHeight||this.maxHeight)}_fitRows(t,e,s,n){let{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],h=n+a,u=t;r.textAlign="left",r.textBaseline="middle";let d=-1,f=-h;return this.legendItems.forEach((p,g)=>{let m=s+e/2+r.measureText(p.text).width;(g===0||c[c.length-1]+m+2*a>o)&&(u+=h,c[c.length-(g>0?0:1)]=0,f+=h,d++),l[g]={left:0,top:f,row:d,width:m,height:n},c[c.length-1]+=m+a}),u}_fitCols(t,e,s,n){let{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],h=o-t,u=a,d=0,f=0,p=0,g=0;return this.legendItems.forEach((m,_)=>{let{itemWidth:v,itemHeight:y}=Kb(s,e,r,m,n);_>0&&f+y+2*a>h&&(u+=d+a,c.push({width:d,height:f}),p+=d+a,g++,d=f=0),l[_]={left:p,top:f,col:g,width:v,height:y},d=Math.max(d,v),f+=y+a}),u+=d,c.push({width:d,height:f}),u}adjustHitBoxes(){if(!this.options.display)return;let t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:s,labels:{padding:n},rtl:r}}=this,o=Ke(r,this.left,this.width);if(this.isHorizontal()){let a=0,l=bt(s,this.left+n,this.right-this.lineWidths[a]);for(let c of e)a!==c.row&&(a=c.row,l=bt(s,this.left+n,this.right-this.lineWidths[a])),c.top+=this.top+t+n,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+n}else{let a=0,l=bt(s,this.top+t+n,this.bottom-this.columnSizes[a].height);for(let c of e)c.col!==a&&(a=c.col,l=bt(s,this.top+t+n,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+n,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+n}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){let t=this.ctx;_s(t,this),this._draw(),vs(t)}}_draw(){let{options:t,columnSizes:e,lineWidths:s,ctx:n}=this,{align:r,labels:o}=t,a=G.color,l=Ke(t.rtl,this.left,this.width),c=ht(o.font),{padding:h}=o,u=c.size,d=u/2,f;this.drawTitle(),n.textAlign=l.textAlign("left"),n.textBaseline="middle",n.lineWidth=.5,n.font=c.string;let{boxWidth:p,boxHeight:g,itemHeight:m}=od(o,u),_=function(S,M,k){if(isNaN(p)||p<=0||isNaN(g)||g<0)return;n.save();let O=R(k.lineWidth,1);if(n.fillStyle=R(k.fillStyle,a),n.lineCap=R(k.lineCap,"butt"),n.lineDashOffset=R(k.lineDashOffset,0),n.lineJoin=R(k.lineJoin,"miter"),n.lineWidth=O,n.strokeStyle=R(k.strokeStyle,a),n.setLineDash(R(k.lineDash,[])),o.usePointStyle){let A={radius:g*Math.SQRT2/2,pointStyle:k.pointStyle,rotation:k.rotation,borderWidth:O},D=l.xPlus(S,p/2),I=M+d;ka(n,A,D,I,o.pointStyleWidth&&p)}else{let A=M+Math.max((u-g)/2,0),D=l.leftForLtr(S,p),I=De(k.borderRadius);n.beginPath(),Object.values(I).some(U=>U!==0)?yi(n,{x:D,y:A,w:p,h:g,radius:I}):n.rect(D,A,p,g),n.fill(),O!==0&&n.stroke()}n.restore()},v=function(S,M,k){Ae(n,k.text,S,M+m/2,c,{strikethrough:k.hidden,textAlign:l.textAlign(k.textAlign)})},y=this.isHorizontal(),w=this._computeTitleHeight();y?f={x:bt(r,this.left+h,this.right-s[0]),y:this.top+h+w,line:0}:f={x:this.left+h,y:bt(r,this.top+w+h,this.bottom-e[0].height),line:0},Aa(this.ctx,t.textDirection);let x=m+h;this.legendItems.forEach((S,M)=>{n.strokeStyle=S.fontColor,n.fillStyle=S.fontColor;let k=n.measureText(S.text).width,O=l.textAlign(S.textAlign||(S.textAlign=o.textAlign)),A=p+d+k,D=f.x,I=f.y;l.setWidth(this.width),y?M>0&&D+A+h>this.right&&(I=f.y+=x,f.line++,D=f.x=bt(r,this.left+h,this.right-s[f.line])):M>0&&I+x>this.bottom&&(D=f.x=D+e[f.line].width+h,f.line++,I=f.y=bt(r,this.top+w+h,this.bottom-e[f.line].height));let U=l.x(D);if(_(U,I,S),D=ou(O,D+p+d,y?D+A:this.right,t.rtl),v(l.x(D),I,S),y)f.x+=A+h;else if(typeof S.text!="string"){let it=c.lineHeight;f.y+=jd(S,it)+h}else f.y+=x}),Da(this.ctx,t.textDirection)}drawTitle(){let t=this.options,e=t.title,s=ht(e.font),n=xt(e.padding);if(!e.display)return;let r=Ke(t.rtl,this.left,this.width),o=this.ctx,a=e.position,l=s.size/2,c=n.top+l,h,u=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),h=this.top+c,u=bt(t.align,u,this.right-d);else{let p=this.columnSizes.reduce((g,m)=>Math.max(g,m.height),0);h=c+bt(t.align,this.top,this.bottom-p-t.labels.padding-this._computeTitleHeight())}let f=bt(a,u,u+d);o.textAlign=r.textAlign(An(a)),o.textBaseline="middle",o.strokeStyle=e.color,o.fillStyle=e.color,o.font=s.string,Ae(o,e.text,f,h,s)}_computeTitleHeight(){let t=this.options.title,e=ht(t.font),s=xt(t.padding);return t.display?e.lineHeight+s.height:0}_getLegendItemAt(t,e){let s,n,r;if(Jt(t,this.left,this.right)&&Jt(e,this.top,this.bottom)){for(r=this.legendHitBoxes,s=0;s<r.length;++s)if(n=r[s],Jt(t,n.left,n.left+n.width)&&Jt(e,n.top,n.top+n.height))return this.legendItems[s]}return null}handleEvent(t){let e=this.options;if(!Qb(t.type,e))return;let s=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){let n=this._hoveredItem,r=Xb(n,s);n&&!r&&Y(e.onLeave,[t,n,this],this),this._hoveredItem=s,s&&!r&&Y(e.onHover,[t,s,this],this)}else s&&Y(e.onClick,[t,s,this],this)}};function Kb(i,t,e,s,n){let r=Jb(s,i,t,e),o=Zb(n,s,t.lineHeight);return{itemWidth:r,itemHeight:o}}function Jb(i,t,e,s){let n=i.text;return n&&typeof n!="string"&&(n=n.reduce((r,o)=>r.length>o.length?r:o)),t+e.size/2+s.measureText(n).width}function Zb(i,t,e){let s=i;return typeof t.text!="string"&&(s=jd(t,e)),s}function jd(i,t){let e=i.text?i.text.length:0;return t*e}function Qb(i,t){return!!((i==="mousemove"||i==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(i==="click"||i==="mouseup"))}var tx={id:"legend",_element:Zn,start(i,t,e){let s=i.legend=new Zn({ctx:i.ctx,options:e,chart:i});wt.configure(i,s,e),wt.addBox(i,s)},stop(i){wt.removeBox(i,i.legend),delete i.legend},beforeUpdate(i,t,e){let s=i.legend;wt.configure(i,s,e),s.options=e},afterUpdate(i){let t=i.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(i,t){t.replay||i.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(i,t,e){let s=t.datasetIndex,n=e.chart;n.isDatasetVisible(s)?(n.hide(s),t.hidden=!0):(n.show(s),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:i=>i.chart.options.color,boxWidth:40,padding:10,generateLabels(i){let t=i.data.datasets,{labels:{usePointStyle:e,pointStyle:s,textAlign:n,color:r,useBorderRadius:o,borderRadius:a}}=i.legend.options;return i._getSortedDatasetMetas().map(l=>{let c=l.controller.getStyle(e?0:void 0),h=xt(c.borderWidth);return{text:t[l.index].label,fillStyle:c.backgroundColor,fontColor:r,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:c.borderColor,pointStyle:s||c.pointStyle,rotation:c.rotation,textAlign:n||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:i=>i.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:i=>!i.startsWith("on"),labels:{_scriptable:i=>!["generateLabels","filter","sort"].includes(i)}}},Es=class extends Wt{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){let s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=e;let n=Z(s.text)?s.text.length:1;this._padding=xt(s.padding);let r=n*ht(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){let t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){let{top:e,left:s,bottom:n,right:r,options:o}=this,a=o.align,l=0,c,h,u;return this.isHorizontal()?(h=bt(a,s,r),u=e+t,c=r-s):(o.position==="left"?(h=s+t,u=bt(a,n,e),l=z*-.5):(h=r-t,u=bt(a,e,n),l=z*.5),c=n-e),{titleX:h,titleY:u,maxWidth:c,rotation:l}}draw(){let t=this.ctx,e=this.options;if(!e.display)return;let s=ht(e.font),r=s.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(r);Ae(t,e.text,0,0,s,{color:e.color,maxWidth:l,rotation:c,textAlign:An(e.align),textBaseline:"middle",translation:[o,a]})}};function ex(i,t){let e=new Es({ctx:i.ctx,options:t,chart:i});wt.configure(i,e,t),wt.addBox(i,e),i.titleBlock=e}var ix={id:"title",_element:Es,start(i,t,e){ex(i,e)},stop(i){let t=i.titleBlock;wt.removeBox(i,t),delete i.titleBlock},beforeUpdate(i,t,e){let s=i.titleBlock;wt.configure(i,s,e),s.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},Hn=new WeakMap,sx={id:"subtitle",start(i,t,e){let s=new Es({ctx:i.ctx,options:e,chart:i});wt.configure(i,s,e),wt.addBox(i,s),Hn.set(i,s)},stop(i){wt.removeBox(i,Hn.get(i)),Hn.delete(i)},beforeUpdate(i,t,e){let s=Hn.get(i);wt.configure(i,s,e),s.options=e},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},Ms={average(i){if(!i.length)return!1;let t,e,s=new Set,n=0,r=0;for(t=0,e=i.length;t<e;++t){let a=i[t].element;if(a&&a.hasValue()){let l=a.tooltipPosition();s.add(l.x),n+=l.y,++r}}return r===0||s.size===0?!1:{x:[...s].reduce((a,l)=>a+l)/s.size,y:n/r}},nearest(i,t){if(!i.length)return!1;let e=t.x,s=t.y,n=Number.POSITIVE_INFINITY,r,o,a;for(r=0,o=i.length;r<o;++r){let l=i[r].element;if(l&&l.hasValue()){let c=l.getCenterPoint(),h=Pn(t,c);h<n&&(n=h,a=l)}}if(a){let l=a.tooltipPosition();e=l.x,s=l.y}return{x:e,y:s}}};function Zt(i,t){return t&&(Z(t)?Array.prototype.push.apply(i,t):i.push(t)),i}function fe(i){return(typeof i=="string"||i instanceof String)&&i.indexOf(`
`)>-1?i.split(`
`):i}function nx(i,t){let{element:e,datasetIndex:s,index:n}=t,r=i.getDatasetMeta(s).controller,{label:o,value:a}=r.getLabelAndValue(n);return{chart:i,label:o,parsed:r.getParsed(n),raw:i.data.datasets[s].data[n],formattedValue:a,dataset:r.getDataset(),dataIndex:n,datasetIndex:s,element:e}}function ad(i,t){let e=i.chart.ctx,{body:s,footer:n,title:r}=i,{boxWidth:o,boxHeight:a}=t,l=ht(t.bodyFont),c=ht(t.titleFont),h=ht(t.footerFont),u=r.length,d=n.length,f=s.length,p=xt(t.padding),g=p.height,m=0,_=s.reduce((w,x)=>w+x.before.length+x.lines.length+x.after.length,0);if(_+=i.beforeBody.length+i.afterBody.length,u&&(g+=u*c.lineHeight+(u-1)*t.titleSpacing+t.titleMarginBottom),_){let w=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;g+=f*w+(_-f)*l.lineHeight+(_-1)*t.bodySpacing}d&&(g+=t.footerMarginTop+d*h.lineHeight+(d-1)*t.footerSpacing);let v=0,y=function(w){m=Math.max(m,e.measureText(w).width+v)};return e.save(),e.font=c.string,W(i.title,y),e.font=l.string,W(i.beforeBody.concat(i.afterBody),y),v=t.displayColors?o+2+t.boxPadding:0,W(s,w=>{W(w.before,y),W(w.lines,y),W(w.after,y)}),v=0,e.font=h.string,W(i.footer,y),e.restore(),m+=p.width,{width:m,height:g}}function rx(i,t){let{y:e,height:s}=t;return e<s/2?"top":e>i.height-s/2?"bottom":"center"}function ox(i,t,e,s){let{x:n,width:r}=s,o=e.caretSize+e.caretPadding;if(i==="left"&&n+r+o>t.width||i==="right"&&n-r-o<0)return!0}function ax(i,t,e,s){let{x:n,width:r}=e,{width:o,chartArea:{left:a,right:l}}=i,c="center";return s==="center"?c=n<=(a+l)/2?"left":"right":n<=r/2?c="left":n>=o-r/2&&(c="right"),ox(c,i,t,e)&&(c="center"),c}function ld(i,t,e){let s=e.yAlign||t.yAlign||rx(i,e);return{xAlign:e.xAlign||t.xAlign||ax(i,t,e,s),yAlign:s}}function lx(i,t){let{x:e,width:s}=i;return t==="right"?e-=s:t==="center"&&(e-=s/2),e}function cx(i,t,e){let{y:s,height:n}=i;return t==="top"?s+=e:t==="bottom"?s-=n+e:s-=n/2,s}function cd(i,t,e,s){let{caretSize:n,caretPadding:r,cornerRadius:o}=i,{xAlign:a,yAlign:l}=e,c=n+r,{topLeft:h,topRight:u,bottomLeft:d,bottomRight:f}=De(o),p=lx(t,a),g=cx(t,l,c);return l==="center"?a==="left"?p+=c:a==="right"&&(p-=c):a==="left"?p-=Math.max(h,d)+n:a==="right"&&(p+=Math.max(u,f)+n),{x:pt(p,0,s.width-t.width),y:pt(g,0,s.height-t.height)}}function Wn(i,t,e){let s=xt(e.padding);return t==="center"?i.x+i.width/2:t==="right"?i.x+i.width-s.right:i.x+s.left}function hd(i){return Zt([],fe(i))}function hx(i,t,e){return ue(i,{tooltip:t,tooltipItems:e,type:"tooltip"})}function ud(i,t){let e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?i.override(e):i}var Hd={beforeTitle:Kt,title(i){if(i.length>0){let t=i[0],e=t.chart.data.labels,s=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(s>0&&t.dataIndex<s)return e[t.dataIndex]}return""},afterTitle:Kt,beforeBody:Kt,beforeLabel:Kt,label(i){if(this&&this.options&&this.options.mode==="dataset")return i.label+": "+i.formattedValue||i.formattedValue;let t=i.dataset.label||"";t&&(t+=": ");let e=i.formattedValue;return N(e)||(t+=e),t},labelColor(i){let e=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(i){let e=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:Kt,afterBody:Kt,beforeFooter:Kt,footer:Kt,afterFooter:Kt};function Tt(i,t,e,s){let n=i[t].call(e,s);return typeof n>"u"?Hd[t].call(e,s):n}var dd=(()=>{class i extends Wt{static positioners=Ms;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let e=this._cachedAnimations;if(e)return e;let s=this.chart,n=this.options.setContext(this.getContext()),r=n.enabled&&s.options.animation&&n.animations,o=new Yn(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=hx(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,s){let{callbacks:n}=s,r=Tt(n,"beforeTitle",this,e),o=Tt(n,"title",this,e),a=Tt(n,"afterTitle",this,e),l=[];return l=Zt(l,fe(r)),l=Zt(l,fe(o)),l=Zt(l,fe(a)),l}getBeforeBody(e,s){return hd(Tt(s.callbacks,"beforeBody",this,e))}getBody(e,s){let{callbacks:n}=s,r=[];return W(e,o=>{let a={before:[],lines:[],after:[]},l=ud(n,o);Zt(a.before,fe(Tt(l,"beforeLabel",this,o))),Zt(a.lines,Tt(l,"label",this,o)),Zt(a.after,fe(Tt(l,"afterLabel",this,o))),r.push(a)}),r}getAfterBody(e,s){return hd(Tt(s.callbacks,"afterBody",this,e))}getFooter(e,s){let{callbacks:n}=s,r=Tt(n,"beforeFooter",this,e),o=Tt(n,"footer",this,e),a=Tt(n,"afterFooter",this,e),l=[];return l=Zt(l,fe(r)),l=Zt(l,fe(o)),l=Zt(l,fe(a)),l}_createItems(e){let s=this._active,n=this.chart.data,r=[],o=[],a=[],l=[],c,h;for(c=0,h=s.length;c<h;++c)l.push(nx(this.chart,s[c]));return e.filter&&(l=l.filter((u,d,f)=>e.filter(u,d,f,n))),e.itemSort&&(l=l.sort((u,d)=>e.itemSort(u,d,n))),W(l,u=>{let d=ud(e.callbacks,u);r.push(Tt(d,"labelColor",this,u)),o.push(Tt(d,"labelPointStyle",this,u)),a.push(Tt(d,"labelTextColor",this,u))}),this.labelColors=r,this.labelPointStyles=o,this.labelTextColors=a,this.dataPoints=l,l}update(e,s){let n=this.options.setContext(this.getContext()),r=this._active,o,a=[];if(!r.length)this.opacity!==0&&(o={opacity:0});else{let l=Ms[n.position].call(this,r,this._eventPosition);a=this._createItems(n),this.title=this.getTitle(a,n),this.beforeBody=this.getBeforeBody(a,n),this.body=this.getBody(a,n),this.afterBody=this.getAfterBody(a,n),this.footer=this.getFooter(a,n);let c=this._size=ad(this,n),h=Object.assign({},l,c),u=ld(this.chart,n,h),d=cd(n,h,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,o={opacity:1,x:d.x,y:d.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=a,this.$context=void 0,o&&this._resolveAnimations().update(this,o),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:s})}drawCaret(e,s,n,r){let o=this.getCaretPosition(e,n,r);s.lineTo(o.x1,o.y1),s.lineTo(o.x2,o.y2),s.lineTo(o.x3,o.y3)}getCaretPosition(e,s,n){let{xAlign:r,yAlign:o}=this,{caretSize:a,cornerRadius:l}=n,{topLeft:c,topRight:h,bottomLeft:u,bottomRight:d}=De(l),{x:f,y:p}=e,{width:g,height:m}=s,_,v,y,w,x,S;return o==="center"?(x=p+m/2,r==="left"?(_=f,v=_-a,w=x+a,S=x-a):(_=f+g,v=_+a,w=x-a,S=x+a),y=_):(r==="left"?v=f+Math.max(c,u)+a:r==="right"?v=f+g-Math.max(h,d)-a:v=this.caretX,o==="top"?(w=p,x=w-a,_=v-a,y=v+a):(w=p+m,x=w+a,_=v+a,y=v-a),S=w),{x1:_,x2:v,x3:y,y1:w,y2:x,y3:S}}drawTitle(e,s,n){let r=this.title,o=r.length,a,l,c;if(o){let h=Ke(n.rtl,this.x,this.width);for(e.x=Wn(this,n.titleAlign,n),s.textAlign=h.textAlign(n.titleAlign),s.textBaseline="middle",a=ht(n.titleFont),l=n.titleSpacing,s.fillStyle=n.titleColor,s.font=a.string,c=0;c<o;++c)s.fillText(r[c],h.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+l,c+1===o&&(e.y+=n.titleMarginBottom-l)}}_drawColorBox(e,s,n,r,o){let a=this.labelColors[n],l=this.labelPointStyles[n],{boxHeight:c,boxWidth:h}=o,u=ht(o.bodyFont),d=Wn(this,"left",o),f=r.x(d),p=c<u.lineHeight?(u.lineHeight-c)/2:0,g=s.y+p;if(o.usePointStyle){let m={radius:Math.min(h,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},_=r.leftForLtr(f,h)+h/2,v=g+c/2;e.strokeStyle=o.multiKeyBackground,e.fillStyle=o.multiKeyBackground,In(e,m,_,v),e.strokeStyle=a.borderColor,e.fillStyle=a.backgroundColor,In(e,m,_,v)}else{e.lineWidth=B(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,e.strokeStyle=a.borderColor,e.setLineDash(a.borderDash||[]),e.lineDashOffset=a.borderDashOffset||0;let m=r.leftForLtr(f,h),_=r.leftForLtr(r.xPlus(f,1),h-2),v=De(a.borderRadius);Object.values(v).some(y=>y!==0)?(e.beginPath(),e.fillStyle=o.multiKeyBackground,yi(e,{x:m,y:g,w:h,h:c,radius:v}),e.fill(),e.stroke(),e.fillStyle=a.backgroundColor,e.beginPath(),yi(e,{x:_,y:g+1,w:h-2,h:c-2,radius:v}),e.fill()):(e.fillStyle=o.multiKeyBackground,e.fillRect(m,g,h,c),e.strokeRect(m,g,h,c),e.fillStyle=a.backgroundColor,e.fillRect(_,g+1,h-2,c-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,s,n){let{body:r}=this,{bodySpacing:o,bodyAlign:a,displayColors:l,boxHeight:c,boxWidth:h,boxPadding:u}=n,d=ht(n.bodyFont),f=d.lineHeight,p=0,g=Ke(n.rtl,this.x,this.width),m=function(O){s.fillText(O,g.x(e.x+p),e.y+f/2),e.y+=f+o},_=g.textAlign(a),v,y,w,x,S,M,k;for(s.textAlign=a,s.textBaseline="middle",s.font=d.string,e.x=Wn(this,_,n),s.fillStyle=n.bodyColor,W(this.beforeBody,m),p=l&&_!=="right"?a==="center"?h/2+u:h+2+u:0,x=0,M=r.length;x<M;++x){for(v=r[x],y=this.labelTextColors[x],s.fillStyle=y,W(v.before,m),w=v.lines,l&&w.length&&(this._drawColorBox(s,e,x,g,n),f=Math.max(d.lineHeight,c)),S=0,k=w.length;S<k;++S)m(w[S]),f=d.lineHeight;W(v.after,m)}p=0,f=d.lineHeight,W(this.afterBody,m),e.y-=o}drawFooter(e,s,n){let r=this.footer,o=r.length,a,l;if(o){let c=Ke(n.rtl,this.x,this.width);for(e.x=Wn(this,n.footerAlign,n),e.y+=n.footerMarginTop,s.textAlign=c.textAlign(n.footerAlign),s.textBaseline="middle",a=ht(n.footerFont),s.fillStyle=n.footerColor,s.font=a.string,l=0;l<o;++l)s.fillText(r[l],c.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+n.footerSpacing}}drawBackground(e,s,n,r){let{xAlign:o,yAlign:a}=this,{x:l,y:c}=e,{width:h,height:u}=n,{topLeft:d,topRight:f,bottomLeft:p,bottomRight:g}=De(r.cornerRadius);s.fillStyle=r.backgroundColor,s.strokeStyle=r.borderColor,s.lineWidth=r.borderWidth,s.beginPath(),s.moveTo(l+d,c),a==="top"&&this.drawCaret(e,s,n,r),s.lineTo(l+h-f,c),s.quadraticCurveTo(l+h,c,l+h,c+f),a==="center"&&o==="right"&&this.drawCaret(e,s,n,r),s.lineTo(l+h,c+u-g),s.quadraticCurveTo(l+h,c+u,l+h-g,c+u),a==="bottom"&&this.drawCaret(e,s,n,r),s.lineTo(l+p,c+u),s.quadraticCurveTo(l,c+u,l,c+u-p),a==="center"&&o==="left"&&this.drawCaret(e,s,n,r),s.lineTo(l,c+d),s.quadraticCurveTo(l,c,l+d,c),s.closePath(),s.fill(),r.borderWidth>0&&s.stroke()}_updateAnimationTarget(e){let s=this.chart,n=this.$animations,r=n&&n.x,o=n&&n.y;if(r||o){let a=Ms[e.position].call(this,this._active,this._eventPosition);if(!a)return;let l=this._size=ad(this,e),c=Object.assign({},a,this._size),h=ld(s,e,c),u=cd(e,c,h,s);(r._to!==u.x||o._to!==u.y)&&(this.xAlign=h.xAlign,this.yAlign=h.yAlign,this.width=l.width,this.height=l.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){let s=this.options.setContext(this.getContext()),n=this.opacity;if(!n)return;this._updateAnimationTarget(s);let r={width:this.width,height:this.height},o={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;let a=xt(s.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;s.enabled&&l&&(e.save(),e.globalAlpha=n,this.drawBackground(o,e,r,s),Aa(e,s.textDirection),o.y+=a.top,this.drawTitle(o,e,s),this.drawBody(o,e,s),this.drawFooter(o,e,s),Da(e,s.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,s){let n=this._active,r=e.map(({datasetIndex:l,index:c})=>{let h=this.chart.getDatasetMeta(l);if(!h)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:h.data[c],index:c}}),o=!gs(n,r),a=this._positionChanged(r,s);(o||a)&&(this._active=r,this._eventPosition=s,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,s,n=!0){if(s&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let r=this.options,o=this._active||[],a=this._getActiveElements(e,o,s,n),l=this._positionChanged(a,e),c=s||!gs(a,o)||l;return c&&(this._active=a,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,s))),c}_getActiveElements(e,s,n,r){let o=this.options;if(e.type==="mouseout")return[];if(!r)return s.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);let a=this.chart.getElementsAtEventForMode(e,o.mode,o,n);return o.reverse&&a.reverse(),a}_positionChanged(e,s){let{caretX:n,caretY:r,options:o}=this,a=Ms[o.position].call(this,e,s);return a!==!1&&(n!==a.x||r!==a.y)}}return i})(),ux={id:"tooltip",_element:dd,positioners:Ms,afterInit(i,t,e){e&&(i.tooltip=new dd({chart:i,options:e}))},beforeUpdate(i,t,e){i.tooltip&&i.tooltip.initialize(e)},reset(i,t,e){i.tooltip&&i.tooltip.initialize(e)},afterDraw(i){let t=i.tooltip;if(t&&t._willRender()){let e={tooltip:t};if(i.notifyPlugins("beforeTooltipDraw",Ns(Ls({},e),{cancelable:!0}))===!1)return;t.draw(i.ctx),i.notifyPlugins("afterTooltipDraw",e)}},afterEvent(i,t){if(i.tooltip){let e=t.replay;i.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(i,t)=>t.bodyFont.size,boxWidth:(i,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Hd},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:i=>i!=="filter"&&i!=="itemSort"&&i!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},dx=Object.freeze({__proto__:null,Colors:Sb,Decimation:Cb,Filler:Gb,Legend:tx,SubTitle:sx,Title:ix,Tooltip:ux}),fx=(i,t,e,s)=>(typeof t=="string"?(e=i.push(t)-1,s.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function px(i,t,e,s){let n=i.indexOf(t);if(n===-1)return fx(i,t,e,s);let r=i.lastIndexOf(t);return n!==r?e:n}var gx=(i,t)=>i===null?null:pt(Math.round(i),0,t);function fd(i){let t=this.getLabels();return i>=0&&i<t.length?t[i]:i}var mx=(()=>{class i extends Qe{static id="category";static defaults={ticks:{callback:fd}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){let s=this._addedLabels;if(s.length){let n=this.getLabels();for(let{index:r,label:o}of s)n[r]===o&&n.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,s){if(N(e))return null;let n=this.getLabels();return s=isFinite(s)&&n[s]===e?s:px(n,e,R(s,e),this._addedLabels),gx(s,n.length-1)}determineDataLimits(){let{minDefined:e,maxDefined:s}=this.getUserBounds(),{min:n,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(n=0),s||(r=this.getLabels().length-1)),this.min=n,this.max=r}buildTicks(){let e=this.min,s=this.max,n=this.options.offset,r=[],o=this.getLabels();o=e===0&&s===o.length-1?o:o.slice(e,s+1),this._valueRange=Math.max(o.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let a=e;a<=s;a++)r.push({value:a});return r}getLabelForValue(e){return fd.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){let s=this.ticks;return e<0||e>s.length-1?null:this.getPixelForValue(s[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}return i})();function _x(i,t){let e=[],{bounds:n,step:r,min:o,max:a,precision:l,count:c,maxTicks:h,maxDigits:u,includeBounds:d}=i,f=r||1,p=h-1,{min:g,max:m}=t,_=!N(o),v=!N(a),y=!N(c),w=(m-g)/(u+1),x=ha((m-g)/p/f)*f,S,M,k,O;if(x<1e-14&&!_&&!v)return[{value:g},{value:m}];O=Math.ceil(m/x)-Math.floor(g/x),O>p&&(x=ha(O*x/p/f)*f),N(l)||(S=Math.pow(10,l),x=Math.ceil(x*S)/S),n==="ticks"?(M=Math.floor(g/x)*x,k=Math.ceil(m/x)*x):(M=g,k=m),_&&v&&r&&Qh((a-o)/r,x/1e3)?(O=Math.round(Math.min((a-o)/x,h)),x=(a-o)/O,M=o,k=a):y?(M=_?o:M,k=v?a:k,O=c-1,x=(k-M)/O):(O=(k-M)/x,vi(O,Math.round(O),x/1e3)?O=Math.round(O):O=Math.ceil(O));let A=Math.max(da(x),da(M));S=Math.pow(10,N(l)?A:l),M=Math.round(M*S)/S,k=Math.round(k*S)/S;let D=0;for(_&&(d&&M!==o?(e.push({value:o}),M<o&&D++,vi(Math.round((M+D*x)*S)/S,o,pd(o,w,i))&&D++):M<o&&D++);D<O;++D){let I=Math.round((M+D*x)*S)/S;if(v&&I>a)break;e.push({value:I})}return v&&d&&k!==a?e.length&&vi(e[e.length-1].value,a,pd(a,w,i))?e[e.length-1].value=a:e.push({value:a}):(!v||k===a)&&e.push({value:k}),e}function pd(i,t,{horizontal:e,minRotation:s}){let n=$t(s),r=(e?Math.sin(n):Math.cos(n))||.001,o=.75*t*(""+i).length;return Math.min(t/r,o)}var Mi=class extends Qe{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return N(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){let{beginAtZero:t}=this.options,{minDefined:e,maxDefined:s}=this.getUserBounds(),{min:n,max:r}=this,o=l=>n=e?n:l,a=l=>r=s?r:l;if(t){let l=Ht(n),c=Ht(r);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(n===r){let l=r===0?1:Math.abs(r*.05);a(r+l),t||o(n-l)}this.min=n,this.max=r}getTickLimit(){let t=this.options.ticks,{maxTicksLimit:e,stepSize:s}=t,n;return s?(n=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,n>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${n} ticks. Limiting to 1000.`),n=1e3)):(n=this.computeTickLimit(),e=e||11),e&&(n=Math.min(e,n)),n}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){let t=this.options,e=t.ticks,s=this.getTickLimit();s=Math.max(2,s);let n={maxTicks:s,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},r=this._range||this,o=_x(n,r);return t.bounds==="ticks"&&ua(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){let t=this.ticks,e=this.min,s=this.max;if(super.configure(),this.options.offset&&t.length){let n=(s-e)/Math.max(t.length-1,1)/2;e-=n,s+=n}this._startValue=e,this._endValue=s,this._valueRange=s-e}getLabelForValue(t){return xi(t,this.chart.options.locale,this.options.ticks.format)}},ll=class extends Mi{static id="linear";static defaults={ticks:{callback:ms.formatters.numeric}};determineDataLimits(){let{min:t,max:e}=this.getMinMax(!0);this.min=nt(t)?t:0,this.max=nt(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){let t=this.isHorizontal(),e=t?this.width:this.height,s=$t(this.options.ticks.minRotation),n=(t?Math.sin(s):Math.cos(s))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,r.lineHeight/n))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}},Cs=i=>Math.floor(ce(i)),Ze=(i,t)=>Math.pow(10,Cs(i)+t);function gd(i){return i/Math.pow(10,Cs(i))===1}function md(i,t,e){let s=Math.pow(10,e),n=Math.floor(i/s);return Math.ceil(t/s)-n}function vx(i,t){let e=t-i,s=Cs(e);for(;md(i,t,s)>10;)s++;for(;md(i,t,s)<10;)s--;return Math.min(s,Cs(i))}function bx(i,{min:t,max:e}){t=Ot(i.min,t);let s=[],n=Cs(t),r=vx(t,e),o=r<0?Math.pow(10,Math.abs(r)):1,a=Math.pow(10,r),l=n>r?Math.pow(10,n):0,c=Math.round((t-l)*o)/o,h=Math.floor((t-l)/a/10)*a*10,u=Math.floor((c-h)/Math.pow(10,r)),d=Ot(i.min,Math.round((l+h+u*Math.pow(10,r))*o)/o);for(;d<e;)s.push({value:d,major:gd(d),significand:u}),u>=10?u=u<15?15:20:u++,u>=20&&(r++,u=2,o=r>=0?1:o),d=Math.round((l+h+u*Math.pow(10,r))*o)/o;let f=Ot(i.max,d);return s.push({value:f,major:gd(f),significand:u}),s}var cl=class extends Qe{static id="logarithmic";static defaults={ticks:{callback:ms.formatters.logarithmic,major:{enabled:!0}}};constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){let s=Mi.prototype.parse.apply(this,[t,e]);if(s===0){this._zero=!0;return}return nt(s)&&s>0?s:null}determineDataLimits(){let{min:t,max:e}=this.getMinMax(!0);this.min=nt(t)?Math.max(0,t):null,this.max=nt(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!nt(this._userMin)&&(this.min=t===Ze(this.min,0)?Ze(this.min,-1):Ze(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:t,maxDefined:e}=this.getUserBounds(),s=this.min,n=this.max,r=a=>s=t?s:a,o=a=>n=e?n:a;s===n&&(s<=0?(r(1),o(10)):(r(Ze(s,-1)),o(Ze(n,1)))),s<=0&&r(Ze(n,-1)),n<=0&&o(Ze(s,1)),this.min=s,this.max=n}buildTicks(){let t=this.options,e={min:this._userMin,max:this._userMax},s=bx(e,this);return t.bounds==="ticks"&&ua(s,this,"value"),t.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}getLabelForValue(t){return t===void 0?"0":xi(t,this.chart.options.locale,this.options.ticks.format)}configure(){let t=this.min;super.configure(),this._startValue=ce(t),this._valueRange=ce(this.max)-ce(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(ce(t)-this._startValue)/this._valueRange)}getValueForPixel(t){let e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}};function hl(i){let t=i.ticks;if(t.display&&i.display){let e=xt(t.backdropPadding);return R(t.font&&t.font.size,G.font.size)+e.height}return 0}function xx(i,t,e){return e=Z(e)?e:[e],{w:lu(i,t.string,e),h:e.length*t.lineHeight}}function _d(i,t,e,s,n){return i===s||i===n?{start:t-e/2,end:t+e/2}:i<s||i>n?{start:t-e,end:t}:{start:t,end:t+e}}function yx(i){let t={l:i.left+i._padding.left,r:i.right-i._padding.right,t:i.top+i._padding.top,b:i.bottom-i._padding.bottom},e=Object.assign({},t),s=[],n=[],r=i._pointLabels.length,o=i.options.pointLabels,a=o.centerPointLabels?z/r:0;for(let l=0;l<r;l++){let c=o.setContext(i.getPointLabelContext(l));n[l]=c.padding;let h=i.getPointPosition(l,i.drawingArea+n[l],a),u=ht(c.font),d=xx(i.ctx,u,i._pointLabels[l]);s[l]=d;let f=vt(i.getIndexAngle(l)+a),p=Math.round(On(f)),g=_d(p,h.x,d.w,0,180),m=_d(p,h.y,d.h,90,270);wx(e,t,f,g,m)}i.setCenterPoint(t.l-e.l,e.r-t.r,t.t-e.t,e.b-t.b),i._pointLabelItems=Mx(i,s,n)}function wx(i,t,e,s,n){let r=Math.abs(Math.sin(e)),o=Math.abs(Math.cos(e)),a=0,l=0;s.start<t.l?(a=(t.l-s.start)/r,i.l=Math.min(i.l,t.l-a)):s.end>t.r&&(a=(s.end-t.r)/r,i.r=Math.max(i.r,t.r+a)),n.start<t.t?(l=(t.t-n.start)/o,i.t=Math.min(i.t,t.t-l)):n.end>t.b&&(l=(n.end-t.b)/o,i.b=Math.max(i.b,t.b+l))}function kx(i,t,e){let s=i.drawingArea,{extra:n,additionalAngle:r,padding:o,size:a}=e,l=i.getPointPosition(t,s+n+o,r),c=Math.round(On(vt(l.angle+ot))),h=Cx(l.y,a.h,c),u=Px(c),d=Ex(l.x,a.w,u);return{visible:!0,x:l.x,y:h,textAlign:u,left:d,top:h,right:d+a.w,bottom:h+a.h}}function Sx(i,t){if(!t)return!0;let{left:e,top:s,right:n,bottom:r}=i;return!(Xt({x:e,y:s},t)||Xt({x:e,y:r},t)||Xt({x:n,y:s},t)||Xt({x:n,y:r},t))}function Mx(i,t,e){let s=[],n=i._pointLabels.length,r=i.options,{centerPointLabels:o,display:a}=r.pointLabels,l={extra:hl(r)/2,additionalAngle:o?z/n:0},c;for(let h=0;h<n;h++){l.padding=e[h],l.size=t[h];let u=kx(i,h,l);s.push(u),a==="auto"&&(u.visible=Sx(u,c),u.visible&&(c=u))}return s}function Px(i){return i===0||i===180?"center":i<180?"left":"right"}function Ex(i,t,e){return e==="right"?i-=t:e==="center"&&(i-=t/2),i}function Cx(i,t,e){return e===90||e===270?i-=t/2:(e>270||e<90)&&(i-=t),i}function Ox(i,t,e){let{left:s,top:n,right:r,bottom:o}=e,{backdropColor:a}=t;if(!N(a)){let l=De(t.borderRadius),c=xt(t.backdropPadding);i.fillStyle=a;let h=s-c.left,u=n-c.top,d=r-s+c.width,f=o-n+c.height;Object.values(l).some(p=>p!==0)?(i.beginPath(),yi(i,{x:h,y:u,w:d,h:f,radius:l}),i.fill()):i.fillRect(h,u,d,f)}}function Tx(i,t){let{ctx:e,options:{pointLabels:s}}=i;for(let n=t-1;n>=0;n--){let r=i._pointLabelItems[n];if(!r.visible)continue;let o=s.setContext(i.getPointLabelContext(n));Ox(e,o,r);let a=ht(o.font),{x:l,y:c,textAlign:h}=r;Ae(e,i._pointLabels[n],l,c+a.lineHeight/2,a,{color:o.color,textAlign:h,textBaseline:"middle"})}}function Wd(i,t,e,s){let{ctx:n}=i;if(e)n.arc(i.xCenter,i.yCenter,t,0,Q);else{let r=i.getPointPosition(0,t);n.moveTo(r.x,r.y);for(let o=1;o<s;o++)r=i.getPointPosition(o,t),n.lineTo(r.x,r.y)}}function Ax(i,t,e,s,n){let r=i.ctx,o=t.circular,{color:a,lineWidth:l}=t;!o&&!s||!a||!l||e<0||(r.save(),r.strokeStyle=a,r.lineWidth=l,r.setLineDash(n.dash||[]),r.lineDashOffset=n.dashOffset,r.beginPath(),Wd(i,e,o,s),r.closePath(),r.stroke(),r.restore())}function Dx(i,t,e){return ue(i,{label:e,index:t,type:"pointLabel"})}var ul=class extends Mi{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:ms.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let t=this._padding=xt(hl(this.options)/2),e=this.width=this.maxWidth-t.width,s=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+s/2+t.top),this.drawingArea=Math.floor(Math.min(e,s)/2)}determineDataLimits(){let{min:t,max:e}=this.getMinMax(!1);this.min=nt(t)&&!isNaN(t)?t:0,this.max=nt(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/hl(this.options))}generateTickLabels(t){Mi.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((e,s)=>{let n=Y(this.options.pointLabels.callback,[e,s],this);return n||n===0?n:""}).filter((e,s)=>this.chart.getDataVisibility(s))}fit(){let t=this.options;t.display&&t.pointLabels.display?yx(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,s,n){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((s-n)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,s,n))}getIndexAngle(t){let e=Q/(this._pointLabels.length||1),s=this.options.startAngle||0;return vt(t*e+$t(s))}getDistanceFromCenterForValue(t){if(N(t))return NaN;let e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(N(t))return NaN;let e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){let e=this._pointLabels||[];if(t>=0&&t<e.length){let s=e[t];return Dx(this.getContext(),t,s)}}getPointPosition(t,e,s=0){let n=this.getIndexAngle(t)-ot+s;return{x:Math.cos(n)*e+this.xCenter,y:Math.sin(n)*e+this.yCenter,angle:n}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){let{left:e,top:s,right:n,bottom:r}=this._pointLabelItems[t];return{left:e,top:s,right:n,bottom:r}}drawBackground(){let{backgroundColor:t,grid:{circular:e}}=this.options;if(t){let s=this.ctx;s.save(),s.beginPath(),Wd(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),s.closePath(),s.fillStyle=t,s.fill(),s.restore()}}drawGrid(){let t=this.ctx,e=this.options,{angleLines:s,grid:n,border:r}=e,o=this._pointLabels.length,a,l,c;if(e.pointLabels.display&&Tx(this,o),n.display&&this.ticks.forEach((h,u)=>{if(u!==0||u===0&&this.min<0){l=this.getDistanceFromCenterForValue(h.value);let d=this.getContext(u),f=n.setContext(d),p=r.setContext(d);Ax(this,f,l,o,p)}}),s.display){for(t.save(),a=o-1;a>=0;a--){let h=s.setContext(this.getPointLabelContext(a)),{color:u,lineWidth:d}=h;!d||!u||(t.lineWidth=d,t.strokeStyle=u,t.setLineDash(h.borderDash),t.lineDashOffset=h.borderDashOffset,l=this.getDistanceFromCenterForValue(e.reverse?this.min:this.max),c=this.getPointPosition(a,l),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(c.x,c.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){let t=this.ctx,e=this.options,s=e.ticks;if(!s.display)return;let n=this.getIndexAngle(0),r,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(n),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!e.reverse)return;let c=s.setContext(this.getContext(l)),h=ht(c.font);if(r=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){t.font=h.string,o=t.measureText(a.label).width,t.fillStyle=c.backdropColor;let u=xt(c.backdropPadding);t.fillRect(-o/2-u.left,-r-h.size/2-u.top,o+u.width,h.size+u.height)}Ae(t,a.label,0,-r,h,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),t.restore()}drawTitle(){}},ir={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},At=Object.keys(ir);function vd(i,t){return i-t}function bd(i,t){if(N(t))return null;let e=i._adapter,{parser:s,round:n,isoWeekday:r}=i._parseOpts,o=t;return typeof s=="function"&&(o=s(o)),nt(o)||(o=typeof s=="string"?e.parse(o,s):e.parse(o)),o===null?null:(n&&(o=n==="week"&&(Xe(r)||r===!0)?e.startOf(o,"isoWeek",r):e.startOf(o,n)),+o)}function xd(i,t,e,s){let n=At.length;for(let r=At.indexOf(i);r<n-1;++r){let o=ir[At[r]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((e-t)/(a*o.size))<=s)return At[r]}return At[n-1]}function Ix(i,t,e,s,n){for(let r=At.length-1;r>=At.indexOf(e);r--){let o=At[r];if(ir[o].common&&i._adapter.diff(n,s,o)>=t-1)return o}return At[e?At.indexOf(e):0]}function Fx(i){for(let t=At.indexOf(i)+1,e=At.length;t<e;++t)if(ir[At[t]].common)return At[t]}function yd(i,t,e){if(!e)i[t]=!0;else if(e.length){let{lo:s,hi:n}=Tn(e,t),r=e[s]>=t?e[s]:e[n];i[r]=!0}}function Rx(i,t,e,s){let n=i._adapter,r=+n.startOf(t[0].value,s),o=t[t.length-1].value,a,l;for(a=r;a<=o;a=+n.add(a,1,s))l=e[a],l>=0&&(t[l].major=!0);return t}function wd(i,t,e){let s=[],n={},r=t.length,o,a;for(o=0;o<r;++o)a=t[o],n[a]=o,s.push({value:a,major:!1});return r===0||!e?s:Rx(i,s,n,e)}var dl=(()=>{class i extends Qe{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,s={}){let n=e.time||(e.time={}),r=this._adapter=new q_._date(e.adapters.date);r.init(s),mi(n.displayFormats,r.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=s.normalized}parse(e,s){return e===void 0?null:bd(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let e=this.options,s=this._adapter,n=e.time.unit||"day",{min:r,max:o,minDefined:a,maxDefined:l}=this.getUserBounds();function c(h){!a&&!isNaN(h.min)&&(r=Math.min(r,h.min)),!l&&!isNaN(h.max)&&(o=Math.max(o,h.max))}(!a||!l)&&(c(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&c(this.getMinMax(!1))),r=nt(r)&&!isNaN(r)?r:+s.startOf(Date.now(),n),o=nt(o)&&!isNaN(o)?o:+s.endOf(Date.now(),n)+1,this.min=Math.min(r,o-1),this.max=Math.max(r+1,o)}_getLabelBounds(){let e=this.getLabelTimestamps(),s=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(s=e[0],n=e[e.length-1]),{min:s,max:n}}buildTicks(){let e=this.options,s=e.time,n=e.ticks,r=n.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);let o=this.min,a=this.max,l=iu(r,o,a);return this._unit=s.unit||(n.autoSkip?xd(s.minUnit,this.min,this.max,this._getLabelCapacity(o)):Ix(this,l.length,s.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:Fx(this._unit),this.initOffsets(r),e.reverse&&l.reverse(),wd(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let s=0,n=0,r,o;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?s=1-r:s=(this.getDecimalForValue(e[1])-r)/2,o=this.getDecimalForValue(e[e.length-1]),e.length===1?n=o:n=(o-this.getDecimalForValue(e[e.length-2]))/2);let a=e.length<3?.5:.25;s=pt(s,0,a),n=pt(n,0,a),this._offsets={start:s,end:n,factor:1/(s+1+n)}}_generate(){let e=this._adapter,s=this.min,n=this.max,r=this.options,o=r.time,a=o.unit||xd(o.minUnit,s,n,this._getLabelCapacity(s)),l=R(r.ticks.stepSize,1),c=a==="week"?o.isoWeekday:!1,h=Xe(c)||c===!0,u={},d=s,f,p;if(h&&(d=+e.startOf(d,"isoWeek",c)),d=+e.startOf(d,h?"day":a),e.diff(n,s,a)>1e5*l)throw new Error(s+" and "+n+" are too far apart with stepSize of "+l+" "+a);let g=r.ticks.source==="data"&&this.getDataTimestamps();for(f=d,p=0;f<n;f=+e.add(f,l,a),p++)yd(u,f,g);return(f===n||r.bounds==="ticks"||p===1)&&yd(u,f,g),Object.keys(u).sort(vd).map(m=>+m)}getLabelForValue(e){let s=this._adapter,n=this.options.time;return n.tooltipFormat?s.format(e,n.tooltipFormat):s.format(e,n.displayFormats.datetime)}format(e,s){let r=this.options.time.displayFormats,o=this._unit,a=s||r[o];return this._adapter.format(e,a)}_tickFormatFunction(e,s,n,r){let o=this.options,a=o.ticks.callback;if(a)return Y(a,[e,s,n],this);let l=o.time.displayFormats,c=this._unit,h=this._majorUnit,u=c&&l[c],d=h&&l[h],f=n[s],p=h&&d&&f&&f.major;return this._adapter.format(e,r||(p?d:u))}generateTickLabels(e){let s,n,r;for(s=0,n=e.length;s<n;++s)r=e[s],r.label=this._tickFormatFunction(r.value,s,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){let s=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((s.start+n)*s.factor)}getValueForPixel(e){let s=this._offsets,n=this.getDecimalForPixel(e)/s.factor-s.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){let s=this.options.ticks,n=this.ctx.measureText(e).width,r=$t(this.isHorizontal()?s.maxRotation:s.minRotation),o=Math.cos(r),a=Math.sin(r),l=this._resolveTickFontOptions(0).size;return{w:n*o+l*a,h:n*a+l*o}}_getLabelCapacity(e){let s=this.options.time,n=s.displayFormats,r=n[s.unit]||n.millisecond,o=this._tickFormatFunction(e,0,wd(this,[e],this._majorUnit),r),a=this._getLabelSize(o),l=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return l>0?l:1}getDataTimestamps(){let e=this._cache.data||[],s,n;if(e.length)return e;let r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(s=0,n=r.length;s<n;++s)e=e.concat(r[s].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){let e=this._cache.labels||[],s,n;if(e.length)return e;let r=this.getLabels();for(s=0,n=r.length;s<n;++s)e.push(bd(this,r[s]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return ga(e.sort(vd))}}return i})();function Vn(i,t,e){let s=0,n=i.length-1,r,o,a,l;e?(t>=i[s].pos&&t<=i[n].pos&&({lo:s,hi:n}=Gt(i,"pos",t)),{pos:r,time:a}=i[s],{pos:o,time:l}=i[n]):(t>=i[s].time&&t<=i[n].time&&({lo:s,hi:n}=Gt(i,"time",t)),{time:r,pos:a}=i[s],{time:o,pos:l}=i[n]);let c=o-r;return c?a+(l-a)*(t-r)/c:a}var fl=class extends dl{static id="timeseries";static defaults=dl.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=Vn(e,this.min),this._tableRange=Vn(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){let{min:e,max:s}=this,n=[],r=[],o,a,l,c,h;for(o=0,a=t.length;o<a;++o)c=t[o],c>=e&&c<=s&&n.push(c);if(n.length<2)return[{time:e,pos:0},{time:s,pos:1}];for(o=0,a=n.length;o<a;++o)h=n[o+1],l=n[o-1],c=n[o],Math.round((h+l)/2)!==c&&r.push({time:c,pos:o/(a-1)});return r}_generate(){let t=this.min,e=this.max,s=super.getDataTimestamps();return(!s.includes(t)||!s.length)&&s.splice(0,0,t),(!s.includes(e)||s.length===1)&&s.push(e),s.sort((n,r)=>n-r)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;let e=this.getDataTimestamps(),s=this.getLabelTimestamps();return e.length&&s.length?t=this.normalize(e.concat(s)):t=e.length?e:s,t=this._cache.all=t,t}getDecimalForValue(t){return(Vn(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){let e=this._offsets,s=this.getDecimalForPixel(t)/e.factor-e.end;return Vn(this._table,s*this._tableRange+this._minPos,!0)}},Lx=Object.freeze({__proto__:null,CategoryScale:mx,LinearScale:ll,LogarithmicScale:cl,RadialLinearScale:ul,TimeScale:dl,TimeSeriesScale:fl}),Vd=[U_,_b,dx,Lx];var Nx=typeof global=="object"&&global&&global.Object===Object&&global,sr=Nx;var $x=typeof self=="object"&&self&&self.Object===Object&&self,Bx=sr||$x||Function("return this")(),Bt=Bx;var zx=Bt.Symbol,Pi=zx;var Ud=Object.prototype,jx=Ud.hasOwnProperty,Hx=Ud.toString,Ts=Pi?Pi.toStringTag:void 0;function Wx(i){var t=jx.call(i,Ts),e=i[Ts];try{i[Ts]=void 0;var s=!0}catch{}var n=Hx.call(i);return s&&(t?i[Ts]=e:delete i[Ts]),n}var qd=Wx;var Vx=Object.prototype,Ux=Vx.toString;function qx(i){return Ux.call(i)}var Yd=qx;var Yx="[object Null]",Gx="[object Undefined]",Gd=Pi?Pi.toStringTag:void 0;function Xx(i){return i==null?i===void 0?Gx:Yx:Gd&&Gd in Object(i)?qd(i):Yd(i)}var Le=Xx;function Kx(i){return i!=null&&typeof i=="object"}var te=Kx;var Jx=Array.isArray,As=Jx;function Zx(i){var t=typeof i;return i!=null&&(t=="object"||t=="function")}var Dt=Zx;function Qx(i){return i}var nr=Qx;var t0="[object AsyncFunction]",e0="[object Function]",i0="[object GeneratorFunction]",s0="[object Proxy]";function n0(i){if(!Dt(i))return!1;var t=Le(i);return t==e0||t==i0||t==t0||t==s0}var Ei=n0;var r0=Bt["__core-js_shared__"],rr=r0;var Xd=(function(){var i=/[^.]+$/.exec(rr&&rr.keys&&rr.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""})();function o0(i){return!!Xd&&Xd in i}var Kd=o0;var a0=Function.prototype,l0=a0.toString;function c0(i){if(i!=null){try{return l0.call(i)}catch{}try{return i+""}catch{}}return""}var Jd=c0;var h0=/[\\^$.*+?()[\]{}|]/g,u0=/^\[object .+?Constructor\]$/,d0=Function.prototype,f0=Object.prototype,p0=d0.toString,g0=f0.hasOwnProperty,m0=RegExp("^"+p0.call(g0).replace(h0,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function _0(i){if(!Dt(i)||Kd(i))return!1;var t=Ei(i)?m0:u0;return t.test(Jd(i))}var Zd=_0;function v0(i,t){return i?.[t]}var Qd=v0;function b0(i,t){var e=Qd(i,t);return Zd(e)?e:void 0}var Ci=b0;var tf=Object.create,x0=(function(){function i(){}return function(t){if(!Dt(t))return{};if(tf)return tf(t);i.prototype=t;var e=new i;return i.prototype=void 0,e}})(),ef=x0;function y0(i,t,e){switch(e.length){case 0:return i.call(t);case 1:return i.call(t,e[0]);case 2:return i.call(t,e[0],e[1]);case 3:return i.call(t,e[0],e[1],e[2])}return i.apply(t,e)}var sf=y0;function w0(i,t){var e=-1,s=i.length;for(t||(t=Array(s));++e<s;)t[e]=i[e];return t}var nf=w0;var k0=800,S0=16,M0=Date.now;function P0(i){var t=0,e=0;return function(){var s=M0(),n=S0-(s-e);if(e=s,n>0){if(++t>=k0)return arguments[0]}else t=0;return i.apply(void 0,arguments)}}var rf=P0;function E0(i){return function(){return i}}var of=E0;var C0=(function(){try{var i=Ci(Object,"defineProperty");return i({},"",{}),i}catch{}})(),Oi=C0;var O0=Oi?function(i,t){return Oi(i,"toString",{configurable:!0,enumerable:!1,value:of(t),writable:!0})}:nr,af=O0;var T0=rf(af),lf=T0;var A0=9007199254740991,D0=/^(?:0|[1-9]\d*)$/;function I0(i,t){var e=typeof i;return t=t??A0,!!t&&(e=="number"||e!="symbol"&&D0.test(i))&&i>-1&&i%1==0&&i<t}var or=I0;function F0(i,t,e){t=="__proto__"&&Oi?Oi(i,t,{configurable:!0,enumerable:!0,value:e,writable:!0}):i[t]=e}var Ti=F0;function R0(i,t){return i===t||i!==i&&t!==t}var Ne=R0;var L0=Object.prototype,N0=L0.hasOwnProperty;function $0(i,t,e){var s=i[t];(!(N0.call(i,t)&&Ne(s,e))||e===void 0&&!(t in i))&&Ti(i,t,e)}var cf=$0;function B0(i,t,e,s){var n=!e;e||(e={});for(var r=-1,o=t.length;++r<o;){var a=t[r],l=s?s(e[a],i[a],a,e,i):void 0;l===void 0&&(l=i[a]),n?Ti(e,a,l):cf(e,a,l)}return e}var hf=B0;var uf=Math.max;function z0(i,t,e){return t=uf(t===void 0?i.length-1:t,0),function(){for(var s=arguments,n=-1,r=uf(s.length-t,0),o=Array(r);++n<r;)o[n]=s[t+n];n=-1;for(var a=Array(t+1);++n<t;)a[n]=s[n];return a[t]=e(o),sf(i,this,a)}}var df=z0;function j0(i,t){return lf(df(i,t,nr),i+"")}var ff=j0;var H0=9007199254740991;function W0(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=H0}var ar=W0;function V0(i){return i!=null&&ar(i.length)&&!Ei(i)}var Ai=V0;function U0(i,t,e){if(!Dt(e))return!1;var s=typeof t;return(s=="number"?Ai(e)&&or(t,e.length):s=="string"&&t in e)?Ne(e[t],i):!1}var pf=U0;function q0(i){return ff(function(t,e){var s=-1,n=e.length,r=n>1?e[n-1]:void 0,o=n>2?e[2]:void 0;for(r=i.length>3&&typeof r=="function"?(n--,r):void 0,o&&pf(e[0],e[1],o)&&(r=n<3?void 0:r,n=1),t=Object(t);++s<n;){var a=e[s];a&&i(t,a,s,r)}return t})}var gf=q0;var Y0=Object.prototype;function G0(i){var t=i&&i.constructor,e=typeof t=="function"&&t.prototype||Y0;return i===e}var lr=G0;function X0(i,t){for(var e=-1,s=Array(i);++e<i;)s[e]=t(e);return s}var mf=X0;var K0="[object Arguments]";function J0(i){return te(i)&&Le(i)==K0}var gl=J0;var _f=Object.prototype,Z0=_f.hasOwnProperty,Q0=_f.propertyIsEnumerable,ty=gl((function(){return arguments})())?gl:function(i){return te(i)&&Z0.call(i,"callee")&&!Q0.call(i,"callee")},Ds=ty;function ey(){return!1}var vf=ey;var yf=typeof exports=="object"&&exports&&!exports.nodeType&&exports,bf=yf&&typeof module=="object"&&module&&!module.nodeType&&module,iy=bf&&bf.exports===yf,xf=iy?Bt.Buffer:void 0,sy=xf?xf.isBuffer:void 0,ny=sy||vf,cr=ny;var ry="[object Arguments]",oy="[object Array]",ay="[object Boolean]",ly="[object Date]",cy="[object Error]",hy="[object Function]",uy="[object Map]",dy="[object Number]",fy="[object Object]",py="[object RegExp]",gy="[object Set]",my="[object String]",_y="[object WeakMap]",vy="[object ArrayBuffer]",by="[object DataView]",xy="[object Float32Array]",yy="[object Float64Array]",wy="[object Int8Array]",ky="[object Int16Array]",Sy="[object Int32Array]",My="[object Uint8Array]",Py="[object Uint8ClampedArray]",Ey="[object Uint16Array]",Cy="[object Uint32Array]",et={};et[xy]=et[yy]=et[wy]=et[ky]=et[Sy]=et[My]=et[Py]=et[Ey]=et[Cy]=!0;et[ry]=et[oy]=et[vy]=et[ay]=et[by]=et[ly]=et[cy]=et[hy]=et[uy]=et[dy]=et[fy]=et[py]=et[gy]=et[my]=et[_y]=!1;function Oy(i){return te(i)&&ar(i.length)&&!!et[Le(i)]}var wf=Oy;function Ty(i){return function(t){return i(t)}}var kf=Ty;var Sf=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Is=Sf&&typeof module=="object"&&module&&!module.nodeType&&module,Ay=Is&&Is.exports===Sf,ml=Ay&&sr.process,Dy=(function(){try{var i=Is&&Is.require&&Is.require("util").types;return i||ml&&ml.binding&&ml.binding("util")}catch{}})(),_l=Dy;var Mf=_l&&_l.isTypedArray,Iy=Mf?kf(Mf):wf,hr=Iy;var Fy=Object.prototype,Ry=Fy.hasOwnProperty;function Ly(i,t){var e=As(i),s=!e&&Ds(i),n=!e&&!s&&cr(i),r=!e&&!s&&!n&&hr(i),o=e||s||n||r,a=o?mf(i.length,String):[],l=a.length;for(var c in i)(t||Ry.call(i,c))&&!(o&&(c=="length"||n&&(c=="offset"||c=="parent")||r&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||or(c,l)))&&a.push(c);return a}var Pf=Ly;function Ny(i,t){return function(e){return i(t(e))}}var Ef=Ny;function $y(i){var t=[];if(i!=null)for(var e in Object(i))t.push(e);return t}var Cf=$y;var By=Object.prototype,zy=By.hasOwnProperty;function jy(i){if(!Dt(i))return Cf(i);var t=lr(i),e=[];for(var s in i)s=="constructor"&&(t||!zy.call(i,s))||e.push(s);return e}var Of=jy;function Hy(i){return Ai(i)?Pf(i,!0):Of(i)}var ur=Hy;var Wy=Ci(Object,"create"),pe=Wy;function Vy(){this.__data__=pe?pe(null):{},this.size=0}var Tf=Vy;function Uy(i){var t=this.has(i)&&delete this.__data__[i];return this.size-=t?1:0,t}var Af=Uy;var qy="__lodash_hash_undefined__",Yy=Object.prototype,Gy=Yy.hasOwnProperty;function Xy(i){var t=this.__data__;if(pe){var e=t[i];return e===qy?void 0:e}return Gy.call(t,i)?t[i]:void 0}var Df=Xy;var Ky=Object.prototype,Jy=Ky.hasOwnProperty;function Zy(i){var t=this.__data__;return pe?t[i]!==void 0:Jy.call(t,i)}var If=Zy;var Qy="__lodash_hash_undefined__";function tw(i,t){var e=this.__data__;return this.size+=this.has(i)?0:1,e[i]=pe&&t===void 0?Qy:t,this}var Ff=tw;function Di(i){var t=-1,e=i==null?0:i.length;for(this.clear();++t<e;){var s=i[t];this.set(s[0],s[1])}}Di.prototype.clear=Tf;Di.prototype.delete=Af;Di.prototype.get=Df;Di.prototype.has=If;Di.prototype.set=Ff;var vl=Di;function ew(){this.__data__=[],this.size=0}var Rf=ew;function iw(i,t){for(var e=i.length;e--;)if(Ne(i[e][0],t))return e;return-1}var $e=iw;var sw=Array.prototype,nw=sw.splice;function rw(i){var t=this.__data__,e=$e(t,i);if(e<0)return!1;var s=t.length-1;return e==s?t.pop():nw.call(t,e,1),--this.size,!0}var Lf=rw;function ow(i){var t=this.__data__,e=$e(t,i);return e<0?void 0:t[e][1]}var Nf=ow;function aw(i){return $e(this.__data__,i)>-1}var $f=aw;function lw(i,t){var e=this.__data__,s=$e(e,i);return s<0?(++this.size,e.push([i,t])):e[s][1]=t,this}var Bf=lw;function Ii(i){var t=-1,e=i==null?0:i.length;for(this.clear();++t<e;){var s=i[t];this.set(s[0],s[1])}}Ii.prototype.clear=Rf;Ii.prototype.delete=Lf;Ii.prototype.get=Nf;Ii.prototype.has=$f;Ii.prototype.set=Bf;var Be=Ii;var cw=Ci(Bt,"Map"),dr=cw;function hw(){this.size=0,this.__data__={hash:new vl,map:new(dr||Be),string:new vl}}var zf=hw;function uw(i){var t=typeof i;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?i!=="__proto__":i===null}var jf=uw;function dw(i,t){var e=i.__data__;return jf(t)?e[typeof t=="string"?"string":"hash"]:e.map}var ze=dw;function fw(i){var t=ze(this,i).delete(i);return this.size-=t?1:0,t}var Hf=fw;function pw(i){return ze(this,i).get(i)}var Wf=pw;function gw(i){return ze(this,i).has(i)}var Vf=gw;function mw(i,t){var e=ze(this,i),s=e.size;return e.set(i,t),this.size+=e.size==s?0:1,this}var Uf=mw;function Fi(i){var t=-1,e=i==null?0:i.length;for(this.clear();++t<e;){var s=i[t];this.set(s[0],s[1])}}Fi.prototype.clear=zf;Fi.prototype.delete=Hf;Fi.prototype.get=Wf;Fi.prototype.has=Vf;Fi.prototype.set=Uf;var qf=Fi;var _w=Ef(Object.getPrototypeOf,Object),fr=_w;var vw="[object Object]",bw=Function.prototype,xw=Object.prototype,Yf=bw.toString,yw=xw.hasOwnProperty,ww=Yf.call(Object);function kw(i){if(!te(i)||Le(i)!=vw)return!1;var t=fr(i);if(t===null)return!0;var e=yw.call(t,"constructor")&&t.constructor;return typeof e=="function"&&e instanceof e&&Yf.call(e)==ww}var Gf=kw;function Sw(){this.__data__=new Be,this.size=0}var Xf=Sw;function Mw(i){var t=this.__data__,e=t.delete(i);return this.size=t.size,e}var Kf=Mw;function Pw(i){return this.__data__.get(i)}var Jf=Pw;function Ew(i){return this.__data__.has(i)}var Zf=Ew;var Cw=200;function Ow(i,t){var e=this.__data__;if(e instanceof Be){var s=e.__data__;if(!dr||s.length<Cw-1)return s.push([i,t]),this.size=++e.size,this;e=this.__data__=new qf(s)}return e.set(i,t),this.size=e.size,this}var Qf=Ow;function Ri(i){var t=this.__data__=new Be(i);this.size=t.size}Ri.prototype.clear=Xf;Ri.prototype.delete=Kf;Ri.prototype.get=Jf;Ri.prototype.has=Zf;Ri.prototype.set=Qf;var tp=Ri;var np=typeof exports=="object"&&exports&&!exports.nodeType&&exports,ep=np&&typeof module=="object"&&module&&!module.nodeType&&module,Tw=ep&&ep.exports===np,ip=Tw?Bt.Buffer:void 0,sp=ip?ip.allocUnsafe:void 0;function Aw(i,t){if(t)return i.slice();var e=i.length,s=sp?sp(e):new i.constructor(e);return i.copy(s),s}var rp=Aw;var Dw=Bt.Uint8Array,bl=Dw;function Iw(i){var t=new i.constructor(i.byteLength);return new bl(t).set(new bl(i)),t}var op=Iw;function Fw(i,t){var e=t?op(i.buffer):i.buffer;return new i.constructor(e,i.byteOffset,i.length)}var ap=Fw;function Rw(i){return typeof i.constructor=="function"&&!lr(i)?ef(fr(i)):{}}var lp=Rw;function Lw(i){return function(t,e,s){for(var n=-1,r=Object(t),o=s(t),a=o.length;a--;){var l=o[i?a:++n];if(e(r[l],l,r)===!1)break}return t}}var cp=Lw;var Nw=cp(),hp=Nw;function $w(i,t,e){(e!==void 0&&!Ne(i[t],e)||e===void 0&&!(t in i))&&Ti(i,t,e)}var Fs=$w;function Bw(i){return te(i)&&Ai(i)}var up=Bw;function zw(i,t){if(!(t==="constructor"&&typeof i[t]=="function")&&t!="__proto__")return i[t]}var Rs=zw;function jw(i){return hf(i,ur(i))}var dp=jw;function Hw(i,t,e,s,n,r,o){var a=Rs(i,e),l=Rs(t,e),c=o.get(l);if(c){Fs(i,e,c);return}var h=r?r(a,l,e+"",i,t,o):void 0,u=h===void 0;if(u){var d=As(l),f=!d&&cr(l),p=!d&&!f&&hr(l);h=l,d||f||p?As(a)?h=a:up(a)?h=nf(a):f?(u=!1,h=rp(l,!0)):p?(u=!1,h=ap(l,!0)):h=[]:Gf(l)||Ds(l)?(h=a,Ds(a)?h=dp(a):(!Dt(a)||Ei(a))&&(h=lp(l))):u=!1}u&&(o.set(l,h),n(h,l,s,r,o),o.delete(l)),Fs(i,e,h)}var fp=Hw;function pp(i,t,e,s,n){i!==t&&hp(t,function(r,o){if(n||(n=new tp),Dt(r))fp(i,t,o,e,pp,s,n);else{var a=s?s(Rs(i,o),r,o+"",i,t,n):void 0;a===void 0&&(a=r),Fs(i,o,a)}},ur)}var gp=pp;var Ww=gf(function(i,t,e){gp(i,t,e)}),pr=Ww;var mp=new El("Configuration for ngCharts");function JP(...i){return{registerables:[...Vd,...i]}}function ZP(...i){let t=pr({},...i);return{provide:mp,useValue:t}}var Vw=(()=>{class i{constructor(){this.colorschemesOptions=new Sl(void 0)}setColorschemesOptions(e){this.pColorschemesOptions=e,this.colorschemesOptions.next(e)}getColorschemesOptions(){return this.pColorschemesOptions}static{this.\u0275fac=function(s){return new(s||i)}}static{this.\u0275prov=Pl({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),QP=(()=>{class i{constructor(e,s,n,r){this.zone=s,this.themeService=n,this.type="bar",this.plugins=[],this.chartClick=new _r,this.chartHover=new _r,this.subs=[],this.themeOverrides={},r?.registerables&&Qn.register(...r.registerables),r?.defaults&&G.set(r.defaults),this.ctx=e.nativeElement.getContext("2d"),this.subs.push(this.themeService.colorschemesOptions.pipe(Ml()).subscribe(o=>this.themeChanged(o)))}ngOnChanges(e){let s=["type"],n=Object.getOwnPropertyNames(e);if(n.some(r=>s.includes(r))||n.every(r=>e[r].isFirstChange()))this.render();else{let r=this.getChartConfiguration();this.chart&&(Object.assign(this.chart.config.data,r.data),this.chart.config.plugins&&Object.assign(this.chart.config.plugins,r.plugins),this.chart.config.options&&Object.assign(this.chart.config.options,r.options)),this.update()}}ngOnDestroy(){this.chart&&(this.chart.destroy(),this.chart=void 0),this.subs.forEach(e=>e.unsubscribe())}render(){return this.chart&&this.chart.destroy(),this.zone.runOutsideAngular(()=>this.chart=new Qn(this.ctx,this.getChartConfiguration()))}update(e){this.chart&&this.zone.runOutsideAngular(()=>this.chart?.update(e))}hideDataset(e,s){this.chart&&(this.chart.getDatasetMeta(e).hidden=s,this.update())}isDatasetHidden(e){return this.chart?.getDatasetMeta(e)?.hidden}toBase64Image(){return this.chart?.toBase64Image()}themeChanged(e){this.themeOverrides=e,this.chart&&(this.chart.config.options&&Object.assign(this.chart.config.options,this.getChartOptions()),this.update())}getChartOptions(){return pr({onHover:(e,s)=>{!this.chartHover.observed&&!this.chartHover.observers?.length||this.zone.run(()=>this.chartHover.emit({event:e,active:s}))},onClick:(e,s)=>{!this.chartClick.observed&&!this.chartClick.observers?.length||this.zone.run(()=>this.chartClick.emit({event:e,active:s}))}},this.themeOverrides,this.options,{plugins:{legend:{display:this.legend}}})}getChartConfiguration(){return{type:this.type,data:this.getChartData(),options:this.getChartOptions(),plugins:this.plugins}}getChartData(){return this.data?this.data:{labels:this.labels||[],datasets:this.datasets||[]}}static{this.\u0275fac=function(s){return new(s||i)(Li(Tl),Li(Cl),Li(Vw),Li(mp,8))}}static{this.\u0275dir=Al({type:i,selectors:[["canvas","baseChart",""]],inputs:{type:"type",legend:"legend",data:"data",options:"options",plugins:"plugins",labels:"labels",datasets:"datasets"},outputs:{chartClick:"chartClick",chartHover:"chartHover"},exportAs:["base-chart"],features:[Ol]})}}return i})();export{Jw as a,JP as b,ZP as c,QP as d};
