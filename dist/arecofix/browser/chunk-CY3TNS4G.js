import{a as D}from"./chunk-EZQXAHE6.js";import{a as k,d as j}from"./chunk-VU7SKD6P.js";import{b as I,c as T}from"./chunk-FR6EAD4C.js";import"./chunk-X77PN5FN.js";import{k as E}from"./chunk-GLDAN37X.js";import{Aa as S,Bb as r,Cb as p,Da as s,Db as x,Q as w,Qa as _,Sb as b,Ub as y,V as m,ab as h,bb as v,ec as C,gb as P,hb as t,ib as a,jb as o,tb as d}from"./chunk-VQO264VU.js";import{a as u,b as g}from"./chunk-VOSPIT4N.js";var f=class n{auth=m(D);supabase=this.auth.getSupabaseClient();async getPostBySlug(i){let{data:e,error:l}=await this.supabase.from("blog_posts").select("*").eq("slug",i).single();if(l){if(l.code==="PGRST116")return null;throw l}return g(u({},e),{image:e.featured_image||e.image||e.image_url})}async getRecentPosts(i=5){let{data:e,error:l}=await this.supabase.from("blog_posts").select("*").order("created_at",{ascending:!1}).limit(i);if(l)throw l;return(e||[]).map(c=>g(u({},c),{image:c.featured_image||c.image||c.image_url}))}static \u0275fac=function(e){return new(e||n)};static \u0275prov=w({token:n,factory:n.\u0275fac,providedIn:"root"})};function F(n,i){n&1&&(t(0,"div",1),o(1,"div",3),a())}function R(n,i){if(n&1&&(t(0,"div",2)(1,"div",4),o(2,"i",5),a(),t(3,"h2",6),r(4,"No pudimos cargar la entrada"),a(),t(5,"p",7),r(6),a(),t(7,"a",8),r(8," Volver al Inicio "),a()()),n&2){let e=d();s(6),p(e.error)}}function A(n,i){if(n&1&&(t(0,"div",9),o(1,"div",23)(2,"img",24),t(3,"div",25)(4,"div",26)(5,"a",27),o(6,"i",28),r(7," Volver "),a(),t(8,"h1",29),r(9),a(),t(10,"div",30)(11,"span",31),r(12,"Blog"),a(),o(13,"i",32),t(14,"time"),r(15),b(16,"date"),a()()()()()),n&2){let e=d(2);s(2),P("src",e.post.image,S)("alt",e.post.title),s(7),x(" ",e.post.title," "),s(6),p(y(16,4,e.post.created_at,"longDate"))}}function L(n,i){if(n&1&&(t(0,"div",10)(1,"div",26)(2,"a",33),o(3,"i",28),r(4," Volver al Inicio "),a(),t(5,"h1",34),r(6),a(),t(7,"div",35),o(8,"i",32),t(9,"time"),r(10),b(11,"date"),a()()()()),n&2){let e=d(2);s(6),x(" ",e.post.title," "),s(4),p(y(11,2,e.post.created_at,"longDate"))}}function z(n,i){if(n&1&&(t(0,"article"),h(1,A,17,7,"div",9)(2,L,12,5,"div",10),t(3,"div",11)(4,"div",12),r(5),a(),t(6,"div",13)(7,"div",14)(8,"div",15),r(9," Compartir esta entrada: "),a(),t(10,"div",16)(11,"button",17),o(12,"i",18),a(),t(13,"button",19),o(14,"i",20),a(),t(15,"button",21),o(16,"i",22),a()()()()()()),n&2){let e=d();s(),v(e.post.image?1:2),s(4),x(" ",e.post.content," ")}}var M=class n{route=m(k);postService=m(f);cdr=m(C);titleService=m(T);metaService=m(I);post=null;loading=!0;error=null;async ngOnInit(){this.route.paramMap.subscribe(async i=>{let e=i.get("slug");e&&await this.loadPost(e)})}async loadPost(i){try{this.loading=!0,this.error=null,this.post=await this.postService.getPostBySlug(i),this.post?this.updateMetaTags(this.post):this.error="Entrada no encontrada"}catch{this.error="Error al cargar la entrada"}finally{this.loading=!1,this.cdr.markForCheck()}}updateMetaTags(i){this.titleService.setTitle(`${i.title} | Arecofix`),i.meta_description&&this.metaService.updateTag({name:"description",content:i.meta_description}),i.meta_title&&this.metaService.updateTag({name:"title",content:i.meta_title})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=_({type:n,selectors:[["app-post-page"]],decls:4,vars:1,consts:[[1,"min-h-screen","bg-white"],[1,"flex","justify-center","items-center","h-screen"],[1,"flex","flex-col","items-center","justify-center","h-[60vh]","text-center","px-4"],[1,"animate-spin","rounded-full","h-12","w-12","border-t-2","border-b-2","border-indigo-600"],[1,"bg-red-50","p-4","rounded-full","mb-4"],[1,"fas","fa-exclamation-triangle","text-red-500","text-2xl"],[1,"text-2xl","font-bold","text-gray-900","mb-2"],[1,"text-gray-500","mb-6"],["routerLink","/",1,"px-6","py-3","bg-indigo-600","hover:bg-indigo-700","text-white","font-medium","rounded-full","transition-colors"],[1,"relative","h-[40vh]","md:h-[50vh]","w-full","overflow-hidden"],[1,"bg-gray-900","py-20","md:py-32"],[1,"container","mx-auto","px-4","max-w-3xl","py-12","md:py-20"],[1,"prose","prose-lg","md:prose-xl","prose-indigo","mx-auto","text-gray-700","leading-relaxed"],[1,"mt-16","pt-8","border-t","border-gray-200"],[1,"flex","flex-col","md:flex-row","justify-between","items-center","gap-6"],[1,"text-gray-500","font-medium"],[1,"flex","gap-4"],[1,"w-10","h-10","rounded-full","bg-[#25D366]","text-white","flex","items-center","justify-center","hover:opacity-90","transition-opacity"],[1,"fab","fa-whatsapp","text-xl"],[1,"w-10","h-10","rounded-full","bg-[#1877F2]","text-white","flex","items-center","justify-center","hover:opacity-90","transition-opacity"],[1,"fab","fa-facebook-f"],[1,"w-10","h-10","rounded-full","bg-[#1DA1F2]","text-white","flex","items-center","justify-center","hover:opacity-90","transition-opacity"],[1,"fab","fa-twitter"],[1,"absolute","inset-0","bg-black/40","z-10"],[1,"w-full","h-full","object-cover",3,"src","alt"],[1,"absolute","inset-0","z-20","flex","items-end","pb-12","md:pb-20"],[1,"container","mx-auto","px-4","max-w-4xl"],["routerLink","/",1,"inline-flex","items-center","text-white/80","hover:text-white","mb-6","transition-colors","text-sm","font-medium","backdrop-blur-sm","bg-black/20","px-3","py-1","rounded-full"],[1,"fas","fa-arrow-left","mr-2"],[1,"text-3xl","md:text-5xl","lg:text-6xl","font-bold","text-white","leading-tight","drop-shadow-lg","mb-4"],[1,"flex","items-center","text-white/90","text-sm","md:text-base","font-medium"],[1,"bg-indigo-600","px-3","py-1","rounded-full","text-xs","uppercase","tracking-wider","mr-4"],[1,"far","fa-calendar-alt","mr-2"],["routerLink","/",1,"inline-flex","items-center","text-white/80","hover:text-white","mb-8","transition-colors","text-sm","font-medium"],[1,"text-3xl","md:text-5xl","lg:text-6xl","font-bold","text-white","leading-tight","mb-6"],[1,"flex","items-center","text-gray-400","text-sm","md:text-base"]],template:function(e,l){e&1&&(t(0,"div",0),h(1,F,2,0,"div",1)(2,R,9,1,"div",2)(3,z,17,2,"article"),a()),e&2&&(s(),v(l.loading?1:l.error?2:l.post?3:-1))},dependencies:[j,E],encapsulation:2,changeDetection:0})};export{M as PostPage};
