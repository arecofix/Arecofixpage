import{a as W}from"./chunk-EWVJVUFG.js";import{a as F,b as A,d as T,e as N,f as L,g as D,h as k,p as B,s as I}from"./chunk-T33GMKOB.js";import"./chunk-HVYNZZQK.js";import"./chunk-M7RWEG4P.js";import{A as P,l as C,x,z as E}from"./chunk-T7HZBI4H.js";import{$b as s,Ab as i,Bb as f,Lb as v,Nb as S,Ta as r,Vb as a,W as b,Wb as M,Xb as w,Zb as l,_b as d,fb as y,ma as g,sb as c,tb as h,yb as _,zb as n}from"./chunk-NLTFPZ75.js";import"./chunk-7CGTOI24.js";function j(p,m){if(p&1&&(n(0,"div",7),f(1,"i",28),n(2,"span"),a(3),i()()),p&2){let o=S();r(3),M(o.error())}}function q(p,m){p&1&&f(0,"span",27)}var R=class p{route=b(x);router=b(E);auth=b(W);id=null;form=g({name:"",type:"",rubro:"",address:"",cuil:"",email:"",phone:"",is_active:!0});loading=g(!0);saving=g(!1);error=g(null);async ngOnInit(){if(this.id=this.route.snapshot.paramMap.get("id"),this.id){let m=this.auth.getSupabaseClient(),{data:o,error:e}=await m.from("suppliers").select("*").eq("id",this.id).single();o&&this.form.set({name:o.name,type:o.type||"",rubro:o.rubro||"",address:o.address||"",cuil:o.tax_id||"",email:o.email||"",phone:o.phone||"",is_active:o.is_active})}this.loading.set(!1)}async save(){this.saving.set(!0),this.error.set(null);let m=this.auth.getSupabaseClient(),o={name:this.form().name,type:this.form().type,rubro:this.form().rubro,address:this.form().address,tax_id:this.form().cuil,email:this.form().email,phone:this.form().phone,is_active:this.form().is_active};try{if(this.id){let{error:e}=await m.from("suppliers").update(o).eq("id",this.id);if(e)throw e}else{let{error:e}=await m.from("suppliers").insert(o);if(e)throw e}this.router.navigate(["/admin/suppliers"])}catch(e){this.error.set(e.message)}finally{this.saving.set(!1)}}static \u0275fac=function(o){return new(o||p)};static \u0275cmp=y({type:p,selectors:[["app-admin-supplier-form-page"]],decls:50,vars:12,consts:[[1,"max-w-4xl","mx-auto","text-base-content"],[1,"flex","items-center","gap-4","mb-6"],["routerLink","/admin/suppliers",1,"btn","btn-circle","btn-ghost","text-base-content"],[1,"fas","fa-arrow-left"],[1,"text-2xl","font-bold","text-green-600"],[3,"ngSubmit"],[1,"bg-base-100","p-6","rounded-xl","shadow-sm","border","border-base-200","mb-6","text-base-content"],[1,"alert","alert-error","mb-6"],[1,"mb-4"],[1,"block","text-sm","font-medium","text-base-content","mb-1.5"],["type","text","name","name","required","",1,"w-full","bg-base-100","text-base-content","border","border-base-300","rounded-lg","px-4","py-2","focus:outline-none","focus:ring-2","transition-all","duration-200","ease-in-out","shadow-sm","hover:border-base-content/40",3,"ngModelChange","ngModel"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],["type","text","name","type","placeholder","Ej: Mayorista, Fabricante",1,"w-full","bg-base-100","text-base-content","border","border-base-300","rounded-lg","px-4","py-2","focus:outline-none","focus:ring-2","transition-all","duration-200","ease-in-out","shadow-sm","hover:border-base-content/40",3,"ngModelChange","ngModel"],["type","text","name","rubro","placeholder","Ej: Electr\xF3nica",1,"w-full","bg-base-100","text-base-content","border","border-base-300","rounded-lg","px-4","py-2","focus:outline-none","focus:ring-2","transition-all","duration-200","ease-in-out","shadow-sm","hover:border-base-content/40",3,"ngModelChange","ngModel"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6","mt-4"],["type","text","name","cuil",1,"w-full","bg-base-100","text-base-content","border","border-base-300","rounded-lg","px-4","py-2","focus:outline-none","focus:ring-2","transition-all","duration-200","ease-in-out","shadow-sm","hover:border-base-content/40",3,"ngModelChange","ngModel"],["type","text","name","phone",1,"w-full","bg-base-100","text-base-content","border","border-base-300","rounded-lg","px-4","py-2","focus:outline-none","focus:ring-2","transition-all","duration-200","ease-in-out","shadow-sm","hover:border-base-content/40",3,"ngModelChange","ngModel"],[1,"mt-4"],["type","email","name","email",1,"w-full","bg-base-100","text-base-content","border","border-base-300","rounded-lg","px-4","py-2","focus:outline-none","focus:ring-2","transition-all","duration-200","ease-in-out","shadow-sm","hover:border-base-content/40",3,"ngModelChange","ngModel"],["type","text","name","address",1,"w-full","bg-base-100","text-base-content","border","border-base-300","rounded-lg","px-4","py-2","focus:outline-none","focus:ring-2","transition-all","duration-200","ease-in-out","shadow-sm","hover:border-base-content/40",3,"ngModelChange","ngModel"],[1,"mt-6"],[1,"flex","items-center","gap-3","p-3","bg-base-100","border","border-base-200","rounded-lg","hover:bg-base-200","transition-colors","cursor-pointer","w-fit"],["type","checkbox","name","is_active",1,"checkbox","checkbox-primary","h-5","w-5","rounded","border-base-300",3,"ngModelChange","ngModel"],[1,"font-medium","text-gray-700"],[1,"flex","justify-end","gap-4","mt-6"],["routerLink","/admin/suppliers",1,"btn","btn-ghost"],["type","submit",1,"btn","btn-primary","px-8",3,"disabled"],[1,"loading","loading-spinner","loading-xs","mr-2"],[1,"fas","fa-exclamation-circle"]],template:function(o,e){o&1&&(n(0,"div",0)(1,"div",1)(2,"a",2),f(3,"i",3),i(),n(4,"h1",4),a(5),i()(),n(6,"form",5),v("ngSubmit",function(){return e.save()}),n(7,"div",6),c(8,j,4,1,"div",7),n(9,"div",8)(10,"label",9),a(11,"Nombre"),i(),n(12,"input",10),s("ngModelChange",function(t){return d(e.form().name,t)||(e.form().name=t),t}),i()(),n(13,"div",11)(14,"div")(15,"label",9),a(16,"Tipo"),i(),n(17,"input",12),s("ngModelChange",function(t){return d(e.form().type,t)||(e.form().type=t),t}),i()(),n(18,"div")(19,"label",9),a(20,"Rubro"),i(),n(21,"input",13),s("ngModelChange",function(t){return d(e.form().rubro,t)||(e.form().rubro=t),t}),i()()(),n(22,"div",14)(23,"div")(24,"label",9),a(25,"CUIL/CUIT"),i(),n(26,"input",15),s("ngModelChange",function(t){return d(e.form().cuil,t)||(e.form().cuil=t),t}),i()(),n(27,"div")(28,"label",9),a(29,"Tel\xE9fono"),i(),n(30,"input",16),s("ngModelChange",function(t){return d(e.form().phone,t)||(e.form().phone=t),t}),i()()(),n(31,"div",17)(32,"label",9),a(33,"Email"),i(),n(34,"input",18),s("ngModelChange",function(t){return d(e.form().email,t)||(e.form().email=t),t}),i()(),n(35,"div",17)(36,"label",9),a(37,"Direcci\xF3n"),i(),n(38,"input",19),s("ngModelChange",function(t){return d(e.form().address,t)||(e.form().address=t),t}),i()(),n(39,"div",20)(40,"label",21)(41,"input",22),s("ngModelChange",function(t){return d(e.form().is_active,t)||(e.form().is_active=t),t}),i(),n(42,"span",23),a(43,"Activo"),i()()()(),n(44,"div",24)(45,"a",25),a(46,"Cancelar"),i(),n(47,"button",26),c(48,q,1,0,"span",27),a(49," Guardar "),i()()()()),o&2&&(r(5),w("",e.id?"Editar":"Nuevo"," Proveedor"),r(3),h(e.error()?8:-1),r(4),l("ngModel",e.form().name),r(5),l("ngModel",e.form().type),r(4),l("ngModel",e.form().rubro),r(5),l("ngModel",e.form().cuil),r(4),l("ngModel",e.form().phone),r(4),l("ngModel",e.form().email),r(4),l("ngModel",e.form().address),r(3),l("ngModel",e.form().is_active),r(6),_("disabled",e.saving()),r(),h(e.saving()?48:-1))},dependencies:[C,I,k,A,F,T,N,B,D,L,P],encapsulation:2})};export{R as AdminSupplierFormPage};
