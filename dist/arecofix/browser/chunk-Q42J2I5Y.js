import{a as V}from"./chunk-5GJFSCEY.js";import{a as $,d as j}from"./chunk-ZUCCYXWI.js";import"./chunk-R5JSKLLG.js";import"./chunk-LI7IRV6C.js";import"./chunk-LAXSCOZR.js";import{Bb as i,Ca as E,Cb as m,Db as p,Ga as a,Sa as C,Sb as F,Ub as M,X as g,aa as I,ab as v,ba as h,bb as _,eb as D,fb as w,gb as P,hb as e,ib as t,jb as f,na as x,pb as A,rb as T,rc as k,tb as u,uc as N}from"./chunk-JAGY3XSL.js";import"./chunk-VOSPIT4N.js";var L=(l,r)=>r.id;function O(l,r){l&1&&(e(0,"div",1),i(1,"Cargando..."),t())}function U(l,r){if(l&1&&f(0,"img",7),l&2){let n=u(2);P("src",n.company().logo_url,E)}}function B(l,r){if(l&1&&(e(0,"p",9),i(1),t()),l&2){let n,d=u(2);a(),p("CUIT: ",(n=d.company())==null?null:n.ruc)}}function R(l,r){if(l&1&&(e(0,"tr",17)(1,"td",24),i(2),t(),e(3,"td",15),i(4),t(),e(5,"td",16),i(6),t(),e(7,"td",16),i(8),t()()),l&2){let n=r.$implicit;a(2),m((n.products==null?null:n.products.name)||"Producto eliminado"),a(2),m(n.quantity),a(2),p("$",n.unit_price),a(2),p("$",n.subtotal)}}function z(l,r){if(l&1){let n=A();e(0,"div",2)(1,"div",3)(2,"div")(3,"h1",4),i(4,"Factura"),t(),e(5,"p",5),i(6),t()(),e(7,"div",6),v(8,U,1,1,"img",7),e(9,"div",8),i(10),t(),e(11,"p",9),i(12),t(),e(13,"p",9),i(14),t(),e(15,"p",9),i(16),t(),e(17,"p",9),i(18),t(),v(19,B,2,1,"p",9),t()(),e(20,"div",10)(21,"div")(22,"h3",11),i(23,"Facturar a:"),t(),e(24,"p"),i(25),t(),e(26,"p",9),i(27),t(),e(28,"p",9),i(29),t()(),e(30,"div",6)(31,"h3",11),i(32,"Detalles:"),t(),e(33,"p"),i(34),F(35,"date"),t(),e(36,"p"),i(37),t()()(),e(38,"table",12)(39,"thead")(40,"tr",13)(41,"th",14),i(42,"Descripci\xF3n"),t(),e(43,"th",15),i(44,"Cant."),t(),e(45,"th",16),i(46,"Precio Unit."),t(),e(47,"th",16),i(48,"Subtotal"),t()()(),e(49,"tbody"),D(50,R,9,4,"tr",17,L),t(),e(52,"tfoot")(53,"tr")(54,"td",18),i(55,"Total"),t(),e(56,"td",19),i(57),t()()()(),e(58,"div",20)(59,"a",21),i(60,"Volver"),t(),e(61,"button",22),T("click",function(){I(n);let c=u();return h(c.print())}),f(62,"i",23),i(63," Imprimir "),t()()()}if(l&2){let n,d,c,s,y,b,S,o=u();a(6),p("#",o.invoice().invoice_number||"Borrador"),a(2),_((n=o.company())!=null&&n.logo_url?8:-1),a(2),m(((d=o.company())==null?null:d.name)||"Arecofix"),a(2),m(((c=o.company())==null?null:c.location)||"Servicios Integrales"),a(2),m((s=o.company())==null?null:s.address),a(2),m((y=o.company())==null?null:y.phone),a(2),m((b=o.company())==null?null:b.email),a(),_((S=o.company())!=null&&S.ruc?19:-1),a(6),m(o.invoice().customer_name||"Consumidor Final"),a(2),m(o.invoice().customer_address),a(2),m(o.invoice().customer_dni_cuit),a(5),p("Fecha: ",M(35,14,o.invoice().issued_at,"shortDate")),a(3),p("Tipo: ",o.invoice().type),a(13),w(o.items()),a(7),p("$",o.invoice().total_amount)}}function G(l,r){l&1&&(e(0,"div",1),i(1,"Factura no encontrada"),t())}var q=class l{route=g($);auth=g(V);invoice=x(null,{});items=x([],{});company=x(null,{});loading=x(!0,{});async ngOnInit(){let r=this.route.snapshot.paramMap.get("id"),n=this.auth.getSupabaseClient(),{data:d}=await n.from("company_settings").select("*").maybeSingle();if(d&&this.company.set(d),r){let{data:c}=await n.from("invoices").select("*, sales(*)").eq("id",r).single();if(c&&(this.invoice.set(c),c.sales?.id)){let{data:s}=await n.from("sale_items").select("*, products(name)").eq("sale_id",c.sales.id);s&&this.items.set(s)}}this.loading.set(!1)}print(){window.print()}static \u0275fac=function(n){return new(n||l)};static \u0275cmp=C({type:l,selectors:[["app-admin-invoice-detail-page"]],decls:4,vars:1,consts:[[1,"printable-content","max-w-3xl","mx-auto","bg-white","shadow-lg","rounded-lg","overflow-hidden","my-8","print:shadow-none","print:max-w-none","print:w-full","print:m-0","print:rounded-none","text-gray-800"],[1,"p-8","text-center"],[1,"p-8"],[1,"flex","justify-between","items-start","mb-8"],[1,"text-3xl","font-bold","text-gray-800"],[1,"text-gray-500","mt-1"],[1,"text-right"],["alt","Logo",1,"h-16","mb-2","ml-auto","object-contain",3,"src"],[1,"font-bold","text-xl","text-indigo-600"],[1,"text-sm","text-gray-500"],[1,"grid","grid-cols-2","gap-8","mb-8"],[1,"font-bold","text-gray-700","mb-2"],[1,"w-full","mb-8"],[1,"border-b-2","border-gray-200","text-gray-800"],[1,"text-left","py-3"],[1,"text-center","py-3"],[1,"text-right","py-3"],[1,"border-b","border-gray-100"],["colspan","3",1,"text-right","py-4","font-bold"],[1,"text-right","py-4","font-bold","text-xl"],[1,"flex","justify-end","gap-4","print:hidden"],["routerLink","/admin/invoices",1,"btn","btn-ghost"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-print","mr-2"],[1,"py-3"]],template:function(n,d){n&1&&(e(0,"div",0),v(1,O,2,0,"div",1)(2,z,64,17,"div",2)(3,G,2,0,"div",1),t()),n&2&&(a(),_(d.loading()?1:d.invoice()?2:3))},dependencies:[N,j,k],encapsulation:2})};export{q as AdminInvoiceDetailPage};
