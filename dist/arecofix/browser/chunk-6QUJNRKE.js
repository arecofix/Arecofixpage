import{j as g}from"./chunk-BWQSVEWZ.js";import{$b as s,S as d,X as n,na as m,pa as u}from"./chunk-DPJIKM6M.js";import{a as i,b as c}from"./chunk-VOSPIT4N.js";var p=class o{logger=n(g);cartItems=m([],{});constructor(){let t=localStorage.getItem("cart");t&&this.cartItems.set(JSON.parse(t)),u(()=>{localStorage.setItem("cart",JSON.stringify(this.cartItems()))})}addToCart(t){this.cartItems.update(e=>e.find(r=>r.product.id===t.id)?e.map(r=>r.product.id===t.id?c(i({},r),{quantity:r.quantity+1}):r):[...e,{product:t,quantity:1}]),this.logger.debug("Product added to cart",{productName:t.name})}removeFromCart(t){this.cartItems.update(e=>e.filter(a=>a.product.id!==t))}updateQuantity(t,e){if(e<=0){this.removeFromCart(t);return}this.cartItems.update(a=>a.map(r=>r.product.id===t?c(i({},r),{quantity:e}):r))}clearCart(){this.cartItems.set([])}totalItems=s(()=>this.cartItems().reduce((t,e)=>t+e.quantity,0),{});totalPrice=s(()=>this.cartItems().reduce((t,e)=>t+e.product.price*e.quantity,0),{});static \u0275fac=function(e){return new(e||o)};static \u0275prov=d({token:o,factory:o.\u0275fac,providedIn:"root"})};export{p as a};
