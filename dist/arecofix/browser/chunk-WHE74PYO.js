import{a as I}from"./chunk-EMKRN3HQ.js";import{a as F}from"./chunk-5IW2QAQV.js";import"./chunk-YSO73UTU.js";import"./chunk-4TKL6PHB.js";import{a as k}from"./chunk-AQQRJJTD.js";import{h as T}from"./chunk-ZP3NLRVZ.js";import"./chunk-AF237TA6.js";import"./chunk-T7AXESXA.js";import{r as P}from"./chunk-XPXWP2W5.js";import{Ab as C,Bb as f,Cb as i,Db as a,Eb as d,Kb as E,Ob as S,Qb as l,Ra as x,Wa as o,Wb as w,Y as s,Yb as r,Zb as b,_b as y,ba as _,ca as u,gc as B,ib as v,kc as A,oa as m,vb as g,wb as p,zb as h}from"./chunk-D4Q5CFD4.js";import"./chunk-VOSPIT4N.js";var D=e=>["/admin/brands",e],R=(e,n)=>n.id;function j(e,n){e&1&&(i(0,"tr")(1,"td",8),r(2,"Cargando..."),a()())}function $(e,n){e&1&&(i(0,"tr")(1,"td",8),r(2,"No hay marcas registradas."),a()())}function z(e,n){if(e&1&&d(0,"img",10),e&2){let t=l().$implicit;f("alt",B(t.name))("src",t.logo_url,x)}}function O(e,n){e&1&&(i(0,"div",11),d(1,"i",17),a())}function V(e,n){if(e&1){let t=E();i(0,"tr",9)(1,"td"),g(2,z,1,3,"img",10)(3,O,2,0,"div",11),a(),i(4,"td")(5,"div",12),r(6),a(),i(7,"div",13),r(8),a()(),i(9,"td")(10,"button",14),S("click",function(){let M=_(t).$implicit,L=l(2);return u(L.toggleStatus(M))}),r(11),a()(),i(12,"td")(13,"a",15),d(14,"i",16),a()()()}if(e&2){let t=n.$implicit;o(2),p(t.logo_url?2:3),o(4),b(t.name),o(2),b(t.slug),o(2),w("badge-success",t.is_active)("badge-error",!t.is_active),o(),y(" ",t.is_active?"Activo":"Inactivo"," "),o(2),f("routerLink",A(9,D,t.id))}}function U(e,n){if(e&1&&h(0,V,15,11,"tr",9,R),e&2){let t=l();C(t.brands())}}var N=class e{brandRepo=s(F);logger=s(k);notification=s(I);brands=m([]);loading=m(!0);async ngOnInit(){await this.loadBrands()}async loadBrands(){this.loading.set(!0);try{let n=await this.brandRepo.findAll({column:"name",ascending:!0});this.brands.set(n)}catch(n){this.logger.error("Failed to load brands",n),this.notification.showError("Error al cargar las marcas")}finally{this.loading.set(!1)}}async toggleStatus(n){try{await this.brandRepo.toggleStatus(n.id,n.is_active),await this.loadBrands(),this.notification.showSuccess("Estado actualizado correctamente")}catch(t){this.logger.error("Failed to toggle brand status",t),this.notification.showError("Error al actualizar el estado")}}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=v({type:e,selectors:[["app-admin-brands-page"]],decls:23,vars:1,consts:[[1,"flex","justify-between","items-center","mb-6"],[1,"text-2xl","font-bold","text-green-600"],["routerLink","/admin/brands/new",1,"btn","btn-primary"],[1,"fas","fa-plus","mr-2"],[1,"bg-base-100","rounded-lg","shadow","overflow-hidden","text-base-content"],[1,"overflow-x-auto"],[1,"table","w-full"],[1,"text-base-content","font-bold"],["colspan","4",1,"text-center","py-4","text-base-content/70"],[1,"hover:bg-base-200/50"],[1,"w-10","h-10","object-contain",3,"src","alt"],[1,"w-10","h-10","bg-base-200","rounded","flex","items-center","justify-center","text-base-content/50"],[1,"font-bold"],[1,"text-sm","opacity-50"],[1,"badge",3,"click"],[1,"btn","btn-sm","btn-ghost","hover:bg-base-300",3,"routerLink"],[1,"fas","fa-edit"],[1,"fas","fa-image"]],template:function(t,c){t&1&&(i(0,"div",0)(1,"h1",1),r(2,"Marcas"),a(),i(3,"a",2),d(4,"i",3),r(5," Nueva Marca "),a()(),i(6,"div",4)(7,"div",5)(8,"table",6)(9,"thead")(10,"tr",7)(11,"th"),r(12,"Logo"),a(),i(13,"th"),r(14,"Nombre"),a(),i(15,"th"),r(16,"Estado"),a(),i(17,"th"),r(18,"Acciones"),a()()(),i(19,"tbody"),g(20,j,3,0,"tr")(21,$,3,0,"tr")(22,U,2,0),a()()()()),t&2&&(o(20),p(c.loading()?20:c.brands().length===0?21:22))},dependencies:[P,T],encapsulation:2})};export{N as AdminBrandsPage};
