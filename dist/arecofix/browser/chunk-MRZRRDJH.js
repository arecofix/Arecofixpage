import{a as F}from"./chunk-GG25NLRU.js";import"./chunk-SFGK2H4E.js";import"./chunk-RLEXB5XQ.js";import{h as T}from"./chunk-UWELTD43.js";import"./chunk-KREPGFQR.js";import"./chunk-T7AXESXA.js";import"./chunk-IZ4CGVWK.js";import{Ab as w,Bb as x,Cb as t,Cc as V,Db as i,Eb as d,Kb as C,Ob as m,Qb as h,Ra as S,Ub as I,Wa as o,Wb as _,Y as v,Yb as n,Zb as p,_b as u,ba as s,ca as l,ib as y,kc as A,vb as b,wb as E,zb as k}from"./chunk-IZKGPZFC.js";import"./chunk-VOSPIT4N.js";var $=r=>["/admin/products",r],L=(r,a)=>a.id;function j(r,a){r&1&&(t(0,"div",11),d(1,"span",14),i())}function N(r,a){if(r&1&&(t(0,"div",12),d(1,"i",15),t(2,"span"),n(3),i()()),r&2){let e=h();o(3),p(e.error)}}function O(r,a){if(r&1&&(t(0,"tr")(1,"td")(2,"div",19)(3,"div",20)(4,"div",21),d(5,"img",22),i()(),t(6,"div")(7,"div",23),n(8),i(),t(9,"div",24),n(10),i()()()(),t(11,"td",23),n(12),i(),t(13,"td")(14,"div",25),n(15),i()(),t(16,"td")(17,"span",25),n(18),i()(),t(19,"td")(20,"a",26),d(21,"i",27),n(22," Editar "),i()()()),r&2){let e=a.$implicit;o(5),x("src",e.image_url||"assets/img/no-image.png",S),o(3),p(e.name),o(2),p(e.slug),o(2),u("$",e.price),o(2),_("badge-warning",e.stock<5)("badge-success",e.stock>=5),o(),u(" ",e.stock," "),o(2),_("badge-success",e.is_active)("badge-ghost",!e.is_active),o(),u(" ",e.is_active?"Activo":"Inactivo"," "),o(2),x("routerLink",A(15,$,e.id))}}function z(r,a){if(r&1&&(t(0,"div",13)(1,"div",16)(2,"table",17)(3,"thead")(4,"tr",18)(5,"th"),n(6,"Producto"),i(),t(7,"th"),n(8,"Precio"),i(),t(9,"th"),n(10,"Stock"),i(),t(11,"th"),n(12,"Estado"),i(),t(13,"th"),n(14,"Acciones"),i()()(),t(15,"tbody"),k(16,O,23,17,"tr",null,L),i()()()()),r&2){let e=h();o(16),w(e.products)}}var D=class r{productService=v(F);cdr=v(V);products=[];loading=!0;error=null;async ngOnInit(){try{this.products=await this.productService.getProducts()}catch(a){this.error=a.message||"Error al cargar productos"}finally{this.loading=!1,this.cdr.markForCheck()}}async exportProducts(){try{this.loading=!0,await this.productService.exportProductsToCSV()}catch(a){this.error=a.message||"Error al exportar productos"}finally{this.loading=!1,this.cdr.markForCheck()}}async importProducts(a){let e=a.target.files[0];if(e)try{this.loading=!0;let c=await this.productService.importProductsFromCSV(e);alert(`Importaci\xF3n completada: ${c.success} productos importados/actualizados. ${c.errors} errores.`),this.products=await this.productService.getProducts()}catch(c){this.error=c.message||"Error al importar productos"}finally{this.loading=!1,a.target.value="",this.cdr.markForCheck()}}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=y({type:r,selectors:[["app-admin-products-page"]],decls:18,vars:1,consts:[["fileInput",""],[1,"flex","justify-between","items-center","mb-6"],[1,"text-2xl","font-bold","text-gray-800"],[1,"flex","gap-2"],[1,"btn","btn-outline","btn-primary",3,"click"],[1,"fas","fa-file-export","mr-2"],[1,"btn","btn-outline","btn-secondary",3,"click"],[1,"fas","fa-file-import","mr-2"],["type","file","accept",".csv",1,"hidden",3,"change"],["routerLink","/admin/products/new",1,"btn","btn-primary"],[1,"fas","fa-plus","mr-2"],[1,"flex","justify-center","py-12"],[1,"alert","alert-error"],[1,"bg-white","rounded-lg","shadow","overflow-hidden","text-gray-800"],[1,"loading","loading-spinner","loading-lg"],[1,"fas","fa-exclamation-circle"],[1,"overflow-x-auto"],[1,"table","w-full"],[1,"text-gray-800"],[1,"flex","items-center","gap-3"],[1,"avatar"],[1,"mask","mask-squircle","w-12","h-12"],["alt","Product",3,"src"],[1,"font-bold"],[1,"text-sm","opacity-50"],[1,"badge"],[1,"btn","btn-sm","btn-ghost",3,"routerLink"],[1,"fas","fa-edit"]],template:function(e,c){if(e&1){let g=C();t(0,"div",1)(1,"h1",2),n(2,"Productos"),i(),t(3,"div",3)(4,"button",4),m("click",function(){return s(g),l(c.exportProducts())}),d(5,"i",5),n(6," Exportar CSV "),i(),t(7,"button",6),m("click",function(){s(g);let f=I(11);return l(f.click())}),d(8,"i",7),n(9," Importar CSV "),i(),t(10,"input",8,0),m("change",function(f){return s(g),l(c.importProducts(f))}),i(),t(12,"a",9),d(13,"i",10),n(14," Nuevo Producto "),i()()(),b(15,j,2,0,"div",11)(16,N,4,1,"div",12)(17,z,18,0,"div",13)}e&2&&(o(15),E(c.loading?15:c.error?16:17))},dependencies:[T],encapsulation:2,changeDetection:0})};export{D as AdminProductsPage};
