import{a as J}from"./chunk-2HROJAXH.js";import{a as G}from"./chunk-JLUYGYUQ.js";import"./chunk-FNOMVEKC.js";import{a as A}from"./chunk-C35SOBDG.js";import{a as H,b as N,c as O}from"./chunk-5CQ2DUKW.js";import"./chunk-4TKL6PHB.js";import{a as B,d as S}from"./chunk-PVP2WLQH.js";import"./chunk-AQQRJJTD.js";import{e as z}from"./chunk-ZP3NLRVZ.js";import"./chunk-AF237TA6.js";import"./chunk-T7AXESXA.js";import{h as R,x as F}from"./chunk-XPXWP2W5.js";import{Bb as I,Cb as a,Db as n,Eb as l,Kb as V,L as P,Ob as h,Qb as s,T,Wa as c,Y as d,Yb as r,_b as g,ba as b,ca as _,da as p,ea as v,fa as M,ib as j,q as w,v as f,vb as m,w as D,wb as u,wc as L}from"./chunk-D4Q5CFD4.js";import{a as y,b as E}from"./chunk-VOSPIT4N.js";var C=class i{fallbackProducts=[{id:"1001",category_id:"0",slug:"joystick-play-station-4",name:"Joystick Play Station 4",description:"En venta Joystick nuevo de play station 4 DUALSHOCK",price:29800,featured:!0,image_url:"assets/img/products/joystick-ps4-v2.webp"},{id:"1002",category_id:"0",slug:"iphone-8-plus",name:"iPhone 8 Plus",description:"En venta iPhone 8 Plus vidrio astillado no afecta su uso",price:96e3,featured:!0,image_url:"assets/img/products/iph8plus.webp"},{id:"1003",category_id:"0",slug:"iphone-x",name:"iPhone X",description:"En venta celular iphone x a wifi",price:149e3,featured:!0,image_url:"assets/img/products/iphx.webp"}];getFallbackProduct(e){return this.fallbackProducts.find(t=>t.slug===e)}getAllFallbackProducts(){return[...this.fallbackProducts]}isFallbackProduct(e){return this.fallbackProducts.some(t=>t.slug===e)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=T({token:i,factory:i.\u0275fac,providedIn:"root"})};function U(i,e){i&1&&l(0,"is-loading")}function $(i,e){i&1&&l(0,"is-empty")}function q(i,e){i&1&&l(0,"is-error")}function X(i,e){i&1&&(a(0,"div",11)(1,"div",40),p(),a(2,"svg",41),l(3,"path",42),n(),r(4," Destacado "),n()())}function Q(i,e){i&1&&l(0,"span",16)}function W(i,e){if(i&1&&r(0),i&2){let t,o=s(3);g(" ",((t=o.categoryRs.value())==null?null:t.name)||"Desconocida"," ")}}function Y(i,e){if(i&1&&(a(0,"div",17),r(1),n()),i&2){let t=s(3);c(),g("SKU: ",t.product().sku)}}function Z(i,e){if(i&1){let t=V();a(0,"div",1)(1,"button",2),h("click",function(){b(t);let x=s(2);return _(x.goBack())}),p(),a(2,"svg",3),l(3,"path",4),n(),r(4," Volver a Productos "),n()(),v(),a(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"figure",9),l(10,"img",10),m(11,X,5,0,"div",11),n()(),a(12,"div",12)(13,"div")(14,"h1",13),r(15),n(),a(16,"div",14)(17,"div",15),r(18," Categor\xEDa: "),m(19,Q,1,0,"span",16)(20,W,1,1),n(),m(21,Y,2,1,"div",17),n(),a(22,"div",18),r(23),n(),a(24,"p",19),r(25),n()(),l(26,"div",20),a(27,"div",21)(28,"button",22),h("click",function(){b(t);let x=s(2);return _(x.addToCart())}),p(),a(29,"svg",23),l(30,"path",24),n(),r(31," Agregar al Carrito "),n(),v(),a(32,"button",25),p(),a(33,"svg",23),l(34,"path",26),n(),r(35," Favoritos "),n()(),v(),a(36,"div",27)(37,"h3",28),r(38,"Detalles Adicionales"),n(),a(39,"div",29)(40,"div")(41,"span",30),r(42,"Disponibilidad"),n(),a(43,"span",31),r(44,"En Stock"),n()(),a(45,"div")(46,"span",30),r(47,"Garant\xEDa"),n(),a(48,"span",32),r(49,"3 Meses"),n()(),a(50,"div")(51,"span",30),r(52,"Env\xEDo"),n(),a(53,"span",32),r(54,"A todo el pa\xEDs"),n()()()()()(),a(55,"div",33)(56,"div",34)(57,"button",35),h("click",function(){b(t);let x=s(2);return _(x.shareProduct())}),p(),a(58,"svg",36),l(59,"path",37),n(),r(60," Compartir "),n(),v(),a(61,"button",38),p(),a(62,"svg",36),l(63,"path",39),n(),r(64," M\xE1s Informaci\xF3n "),n()()()()()}if(i&2){let t,o=s(2);c(10),I("ngSrc",o.product().image_url||((t=o.product().gallery_urls)==null?null:t[0])||"assets/img/no-image.png")("alt",o.product().name)("priority",!0),c(),u(o.product().featured?11:-1),c(4),g(" ",o.product().name," "),c(4),u(o.categoryRs.isLoading()?19:20),c(2),u(o.product().sku?21:-1),c(2),g(" $",o.product().price," "),c(2),g(" ",o.product().description||"Sin descripci\xF3n disponible."," ")}}function ee(i,e){if(i&1&&(a(0,"div",0),m(1,Z,65,9),n()),i&2){let t=s();c(),u(t.product()?1:-1)}}var k=class i{route=d(z);categoryService=d(A);productService=d(J);location=d(R);fallbackService=d(C);productRs=S({stream:()=>D([this.route.params.pipe(f(({productSlug:e})=>e)),this.route.queryParams.pipe(f(e=>+e._page||1))]).pipe(P(([e])=>this.productService.getData({_page:1,slug:e}).pipe(f(t=>{let o=this.fallbackService.getFallbackProduct(e);return(!t.data||t.data.length===0)&&o?E(y({},t),{data:[o],items:1,pages:1}):t}))))});product=L(()=>{let e=this.productRs.value();return!e||!e.data||e.data.length===0?null:e.data[0]});injector=d(M);categoryRs=S({stream:()=>B(this.product,{injector:this.injector}).pipe(P(e=>e?this.categoryService.getById(e.category_id):w(null)))});goBack(){this.location.back()}cartService=d(G);addToCart(){let e=this.product();e&&this.cartService.addToCart(e)}shareProduct(){let e=this.product();if(!e)return;let t={title:e.name,text:`Mira este producto: ${e.name}`,url:window.location.href};navigator.share?navigator.share(t).catch(o=>console.error("Error sharing:",o)):navigator.clipboard.writeText(window.location.href).then(()=>alert("Enlace copiado al portapapeles!")).catch(o=>console.error("Error copying to clipboard:",o))}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=j({type:i,selectors:[["app-products-details-page"]],decls:4,vars:1,consts:[[1,"container","mx-auto","px-4","py-8","max-w-6xl"],[1,"mb-6"],[1,"btn","btn-ghost","btn-sm","gap-2","text-base-content",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],[1,"card","bg-base-100","shadow-2xl","border","border-base-200"],[1,"card-body","p-0"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-8","p-4","lg:p-8"],[1,"relative"],[1,"relative","rounded-2xl","overflow-hidden","h-96","w-full","bg-base-200"],["fill","",1,"object-contain","p-4",3,"ngSrc","alt","priority"],[1,"absolute","top-4","right-4","z-10"],[1,"flex","flex-col","justify-center","space-y-6"],[1,"text-3xl","lg:text-4xl","font-bold","text-base-content","mb-2"],[1,"flex","gap-2","mb-4"],[1,"badge","badge-secondary","badge-outline"],[1,"loading","loading-dots","loading-xs"],[1,"badge","badge-ghost"],[1,"text-4xl","font-bold","text-primary","mb-4"],[1,"text-base-content/80","text-lg","leading-relaxed"],[1,"divider"],[1,"flex","flex-col","sm:flex-row","gap-4"],[1,"btn","btn-primary","btn-lg","flex-1","gap-2","shadow-lg","shadow-primary/30",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-2.5 5M7 13l2.5 5m6-5v6a2 2 0 11-4 0v-6m4 0V9a2 2 0 00-2-2H9a2 2 0 00-2 2v4.01"],[1,"btn","btn-outline","btn-lg","flex-1","gap-2","text-base-content","hover:text-white"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"],[1,"bg-base-200","rounded-xl","p-6","mt-6"],[1,"font-bold","text-base-content","mb-4"],[1,"grid","grid-cols-2","gap-4","text-sm"],[1,"block","text-base-content/60"],[1,"font-medium","text-success"],[1,"font-medium","text-base-content"],[1,"p-6","border-t","border-base-200","bg-base-50/50"],[1,"flex","justify-center","gap-4"],[1,"btn","btn-ghost","btn-sm","gap-2","text-base-content/70","hover:text-primary",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"],[1,"btn","btn-ghost","btn-sm","gap-2","text-base-content/70","hover:text-primary"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"badge","badge-primary","badge-lg","gap-2","shadow-md"],["fill","currentColor","viewBox","0 0 20 20",1,"w-4","h-4"],["d","M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"]],template:function(t,o){t&1&&m(0,U,1,0,"is-loading")(1,$,1,0,"is-empty")(2,q,1,0,"is-error")(3,ee,2,1,"div",0),t&2&&u(o.productRs.isLoading()?0:o.productRs.hasValue()?o.productRs.error()?2:o.productRs.hasValue()?3:-1:1)},dependencies:[H,N,O,F],encapsulation:2,changeDetection:0})},xe=k;export{k as ProductsDetailsPage,xe as default};
