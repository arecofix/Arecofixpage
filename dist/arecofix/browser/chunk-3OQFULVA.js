import{a as c}from"./chunk-V2I26IUK.js";import{S as o,X as i}from"./chunk-UMWLAP3G.js";var n=class a{auth=i(c);supabase=this.auth.getSupabaseClient();async getProducts(){let{data:t,error:r}=await this.supabase.from("products").select("*").order("created_at",{ascending:!1});if(r)throw r;return t||[]}async getProduct(t){let{data:r,error:e}=await this.supabase.from("products").select("*").eq("id",t).single();if(e)throw e;return r}async getBrands(){let{data:t,error:r}=await this.supabase.from("brands").select("*").eq("is_active",!0).order("name");if(r)throw r;return t||[]}async getCategories(){let{data:t,error:r}=await this.supabase.from("categories").select("*").eq("is_active",!0).order("name");if(r)throw r;return t||[]}async createProduct(t){let{error:r}=await this.supabase.from("products").insert(t);if(r)throw r}async updateProduct(t,r){let{error:e}=await this.supabase.from("products").update(r).eq("id",t);if(e)throw e}async uploadImage(t){let r=`products/${Date.now()}-${t.name}`,{data:e,error:s}=await this.supabase.storage.from("public-assets").upload(r,t);if(s)throw s;let{data:u}=this.supabase.storage.from("public-assets").getPublicUrl(e.path);return u.publicUrl}slugify(t){return t.toString().toLowerCase().trim().replace(/\s+/g,"-").replace(/&/g,"-and-").replace(/[^a-z0-9-]/g,"").replace(/-+/g,"-")}static \u0275fac=function(r){return new(r||a)};static \u0275prov=o({token:a,factory:a.\u0275fac,providedIn:"root"})};export{n as a};
