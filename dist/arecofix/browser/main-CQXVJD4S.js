import{a as Je,b as Oc,c as xc}from"./chunk-OA3VU6X3.js";import{a as Nc}from"./chunk-TKLFIGRT.js";import{a as bc}from"./chunk-SF6BTA4R.js";import{a as Ac,b as Sc,c as Rc,d as Pc,e as Cc,f as kc,g as Dc}from"./chunk-YSO73UTU.js";import{c as Tc}from"./chunk-5IR2AIZL.js";import{a as mr}from"./chunk-773BQMTG.js";import{a as ft}from"./chunk-NIOBXWFE.js";import{c as Ic,g as wc,h as Ec}from"./chunk-755N3HP6.js";import{s as gc,t as _c,v as yc,w as vc}from"./chunk-P77MY6VE.js";import{$ as nc,Aa as cc,Dc as Hi,Eb as hc,Fb as pr,Gb as Gi,Hb as dc,Lb as fc,O as ec,P as tc,Ra as uc,T as xt,W as Vt,Wa as lc,Y as ae,Yb as pc,Z as Lt,aa as dr,c as $i,da as rc,ea as ic,fa as Mt,g as Xa,h as Za,ib as fr,j as ji,ka as Ae,l as zi,la as sc,m as Wi,na as oc,pa as ac,sa as fe,tc as mc}from"./chunk-OOA6GWW3.js";import{a as j,b as de,c as Ja}from"./chunk-7CGTOI24.js";var Vc=[{title:"Home",path:"",loadChildren:()=>import("./chunk-M6WZ62D2.js")},{title:"Admin",path:"admin",loadChildren:()=>import("./chunk-NROAOMCP.js")},{path:"**",redirectTo:""}];var gr=class n{logger=ae(mr);notification=ae(Nc);handleError(e){this.logger.error("Unhandled error occurred",e),e instanceof _c?this.handleHttpError(e):e instanceof Ac?this.handleApplicationError(e):this.handleUnknownError(e)}handleHttpError(e){let t;switch(e.status){case 0:t="No se pudo conectar al servidor. Verifica tu conexi\xF3n a internet.";break;case 400:t="Solicitud inv\xE1lida. Por favor verifica los datos ingresados.";break;case 401:t="Sesi\xF3n expirada. Por favor inicia sesi\xF3n nuevamente.";break;case 403:t="No tienes permisos para realizar esta acci\xF3n.";break;case 404:t="El recurso solicitado no fue encontrado.";break;case 500:t="Error del servidor. Por favor intenta nuevamente m\xE1s tarde.";break;case 503:t="Servicio no disponible. Por favor intenta m\xE1s tarde.";break;default:t=`Error inesperado (${e.status}). Por favor intenta nuevamente.`}this.notification.showError(t)}handleApplicationError(e){let t;e instanceof Sc?t=e.message||"Los datos ingresados no son v\xE1lidos.":e instanceof Rc?t="Error de autenticaci\xF3n. Por favor inicia sesi\xF3n nuevamente.":e instanceof Pc?t="No tienes permisos para realizar esta acci\xF3n.":e instanceof Cc?t=e.message:e instanceof kc?t="Error al acceder a la base de datos. Por favor intenta nuevamente.":e instanceof Dc?t="Error de conexi\xF3n. Verifica tu internet e intenta nuevamente.":t=e.message||"Ocurri\xF3 un error inesperado.",this.notification.showError(t)}handleUnknownError(e){this.notification.showError("Ocurri\xF3 un error inesperado. Por favor intenta nuevamente.")}static \u0275fac=function(t){return new(t||n)};static \u0275prov=xt({token:n,factory:n.\u0275fac})};var Lc=()=>{};var Uc=function(n){let e=[],t=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},vd=function(n){let e=[],t=0,i=0;for(;t<n.length;){let s=n[t++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){let a=n[t++];e[i++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){let a=n[t++],u=n[t++],h=n[t++],d=((s&7)<<18|(a&63)<<12|(u&63)<<6|h&63)-65536;e[i++]=String.fromCharCode(55296+(d>>10)),e[i++]=String.fromCharCode(56320+(d&1023))}else{let a=n[t++],u=n[t++];e[i++]=String.fromCharCode((s&15)<<12|(a&63)<<6|u&63)}}return e.join("")},yr={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<n.length;s+=3){let a=n[s],u=s+1<n.length,h=u?n[s+1]:0,d=s+2<n.length,y=d?n[s+2]:0,b=a>>2,A=(a&3)<<4|h>>4,T=(h&15)<<2|y>>6,P=y&63;d||(P=64,u||(T=64)),i.push(t[b],t[A],t[T],t[P])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Uc(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):vd(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<n.length;){let a=t[n.charAt(s++)],h=s<n.length?t[n.charAt(s)]:0;++s;let y=s<n.length?t[n.charAt(s)]:64;++s;let A=s<n.length?t[n.charAt(s)]:64;if(++s,a==null||h==null||y==null||A==null)throw new Qi;let T=a<<2|h>>4;if(i.push(T),y!==64){let P=h<<4&240|y>>2;if(i.push(P),A!==64){let R=y<<6&192|A;i.push(R)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Qi=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Id=function(n){let e=Uc(n);return yr.encodeByteArray(e,!0)},gn=function(n){return Id(n).replace(/\./g,"")},vr=function(n){try{return yr.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Ji(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var wd=()=>Ji().__FIREBASE_DEFAULTS__,Ed=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Td=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&vr(n[1]);return e&&JSON.parse(e)},Xi=()=>{try{return Lc()||wd()||Ed()||Td()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Zi=n=>{var e,t;return(t=(e=Xi())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Bc=n=>{let e=Zi(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},es=()=>{var n;return(n=Xi())===null||n===void 0?void 0:n.config},ts=n=>{var e;return(e=Xi())===null||e===void 0?void 0:e[`_${n}`]};var pt=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}};function mt(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Ir(n){return(await fetch(n,{credentials:"include"})).ok}function qc(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},i=e||"demo-project",s=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let u=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[gn(JSON.stringify(t)),gn(JSON.stringify(u)),""].join(".")}var mn={};function bd(){let n={prod:[],emulator:[]};for(let e of Object.keys(mn))mn[e]?n.emulator.push(e):n.prod.push(e);return n}function Ad(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var Mc=!1;function wr(n,e){if(typeof window>"u"||typeof document>"u"||!mt(window.location.host)||mn[n]===e||mn[n]||Mc)return;mn[n]=e;function t(T){return`__firebase__banner__${T}`}let i="__firebase__banner",a=bd().prod.length>0;function u(){let T=document.getElementById(i);T&&T.remove()}function h(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function d(T,P){T.setAttribute("width","24"),T.setAttribute("id",P),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function y(){let T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{Mc=!0,u()},T}function b(T,P){T.setAttribute("id",P),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function A(){let T=Ad(i),P=t("text"),R=document.getElementById(P)||document.createElement("span"),k=t("learnmore"),C=document.getElementById(k)||document.createElement("a"),N=t("preprendIcon"),U=document.getElementById(N)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){let $=T.element;h($),b(C,k);let ne=y();d(U,N),$.append(U,R,C,ne),document.body.appendChild($)}a?(R.innerText="Preview backend disconnected.",U.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(U.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",P)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",A):A()}function K(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function $c(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(K())}function jc(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function zc(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Wc(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Gc(){let n=K();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function _n(){try{return typeof indexedDB=="object"}catch{return!1}}function Hc(){return new Promise((n,e)=>{try{let t=!0,i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}var Sd="FirebaseError",le=class n extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=Sd,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ve.prototype.create)}},ve=class{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){let i=t[0]||{},s=`${this.service}/${e}`,a=this.errors[e],u=a?Rd(a,i):"Error",h=`${this.serviceName}: ${u} (${s}).`;return new le(s,h,i)}};function Rd(n,e){return n.replace(Pd,(t,i)=>{let s=e[i];return s!=null?String(s):`<${i}?>`})}var Pd=/\{\$([^}]+)}/g;function Kc(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Se(n,e){if(n===e)return!0;let t=Object.keys(n),i=Object.keys(e);for(let s of t){if(!i.includes(s))return!1;let a=n[s],u=e[s];if(Fc(a)&&Fc(u)){if(!Se(a,u))return!1}else if(a!==u)return!1}for(let s of i)if(!t.includes(s))return!1;return!0}function Fc(n){return n!==null&&typeof n=="object"}function yn(n){let e=[];for(let[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Qc(n,e){let t=new Yi(n,e);return t.subscribe.bind(t)}var Yi=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let s;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");Cd(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:i},s.next===void 0&&(s.next=Ki),s.error===void 0&&(s.error=Ki),s.complete===void 0&&(s.complete=Ki);let a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function Cd(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Ki(){}var By=14400*1e3;function Fe(n){return n&&n._delegate?n._delegate:n}var se=class{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var gt="[DEFAULT]";var ns=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let i=new pt;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{let s=this.getOrInitializeService({instanceIdentifier:t});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let i=this.normalizeInstanceIdentifier(e?.identifier),s=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Dd(e))try{this.getOrInitializeService({instanceIdentifier:gt})}catch{}for(let[t,i]of this.instancesDeferred.entries()){let s=this.normalizeInstanceIdentifier(t);try{let a=this.getOrInitializeService({instanceIdentifier:s});i.resolve(a)}catch{}}}}clearInstance(e=gt){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=gt){return this.instances.has(e)}getOptions(e=gt){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let s=this.getOrInitializeService({instanceIdentifier:i,options:t});for(let[a,u]of this.instancesDeferred.entries()){let h=this.normalizeInstanceIdentifier(a);i===h&&u.resolve(s)}return s}onInit(e,t){var i;let s=this.normalizeInstanceIdentifier(t),a=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;a.add(e),this.onInitCallbacks.set(s,a);let u=this.instances.get(s);return u&&e(u,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){let i=this.onInitCallbacks.get(t);if(i)for(let s of i)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:kd(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=gt){return this.component?this.component.multipleInstances?e:gt:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function kd(n){return n===gt?void 0:n}function Dd(n){return n.instantiationMode==="EAGER"}var Er=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new ns(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var Nd=[],F=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(F||{}),Od={debug:F.DEBUG,verbose:F.VERBOSE,info:F.INFO,warn:F.WARN,error:F.ERROR,silent:F.SILENT},xd=F.INFO,Vd={[F.DEBUG]:"log",[F.VERBOSE]:"log",[F.INFO]:"info",[F.WARN]:"warn",[F.ERROR]:"error"},Ld=(n,e,...t)=>{if(e<n.logLevel)return;let i=new Date().toISOString(),s=Vd[e];if(s)console[s](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Re=class{constructor(e){this.name=e,this._logLevel=xd,this._logHandler=Ld,this._userLogHandler=null,Nd.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in F))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Od[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,F.DEBUG,...e),this._logHandler(this,F.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,F.VERBOSE,...e),this._logHandler(this,F.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,F.INFO,...e),this._logHandler(this,F.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,F.WARN,...e),this._logHandler(this,F.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,F.ERROR,...e),this._logHandler(this,F.ERROR,...e)}};var Md=(n,e)=>e.some(t=>n instanceof t),Yc,Jc;function Fd(){return Yc||(Yc=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ud(){return Jc||(Jc=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Xc=new WeakMap,is=new WeakMap,Zc=new WeakMap,rs=new WeakMap,os=new WeakMap;function Bd(n){let e=new Promise((t,i)=>{let s=()=>{n.removeEventListener("success",a),n.removeEventListener("error",u)},a=()=>{t(Pe(n.result)),s()},u=()=>{i(n.error),s()};n.addEventListener("success",a),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&Xc.set(t,n)}).catch(()=>{}),os.set(e,n),e}function qd(n){if(is.has(n))return;let e=new Promise((t,i)=>{let s=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",u),n.removeEventListener("abort",u)},a=()=>{t(),s()},u=()=>{i(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",a),n.addEventListener("error",u),n.addEventListener("abort",u)});is.set(n,e)}var ss={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return is.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Zc.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Pe(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function eu(n){ss=n(ss)}function $d(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let i=n.call(Tr(this),e,...t);return Zc.set(i,e.sort?e.sort():[e]),Pe(i)}:Ud().includes(n)?function(...e){return n.apply(Tr(this),e),Pe(Xc.get(this))}:function(...e){return Pe(n.apply(Tr(this),e))}}function jd(n){return typeof n=="function"?$d(n):(n instanceof IDBTransaction&&qd(n),Md(n,Fd())?new Proxy(n,ss):n)}function Pe(n){if(n instanceof IDBRequest)return Bd(n);if(rs.has(n))return rs.get(n);let e=jd(n);return e!==n&&(rs.set(n,e),os.set(e,n)),e}var Tr=n=>os.get(n);function nu(n,e,{blocked:t,upgrade:i,blocking:s,terminated:a}={}){let u=indexedDB.open(n,e),h=Pe(u);return i&&u.addEventListener("upgradeneeded",d=>{i(Pe(u.result),d.oldVersion,d.newVersion,Pe(u.transaction),d)}),t&&u.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),h.then(d=>{a&&d.addEventListener("close",()=>a()),s&&d.addEventListener("versionchange",y=>s(y.oldVersion,y.newVersion,y))}).catch(()=>{}),h}var zd=["get","getKey","getAll","getAllKeys","count"],Wd=["put","add","delete","clear"],as=new Map;function tu(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(as.get(e))return as.get(e);let t=e.replace(/FromIndex$/,""),i=e!==t,s=Wd.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(s||zd.includes(t)))return;let a=async function(u,...h){let d=this.transaction(u,s?"readwrite":"readonly"),y=d.store;return i&&(y=y.index(h.shift())),(await Promise.all([y[t](...h),s&&d.done]))[0]};return as.set(e,a),a}eu(n=>de(j({},n),{get:(e,t,i)=>tu(e,t)||n.get(e,t,i),has:(e,t)=>!!tu(e,t)||n.has(e,t)}));var us=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Gd(t)){let i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}};function Gd(n){let e=n.getComponent();return e?.type==="VERSION"}var ls="@firebase/app",ru="0.13.2";var Ue=new Re("@firebase/app"),Hd="@firebase/app-compat",Kd="@firebase/analytics-compat",Qd="@firebase/analytics",Yd="@firebase/app-check-compat",Jd="@firebase/app-check",Xd="@firebase/auth",Zd="@firebase/auth-compat",ef="@firebase/database",tf="@firebase/data-connect",nf="@firebase/database-compat",rf="@firebase/functions",sf="@firebase/functions-compat",of="@firebase/installations",af="@firebase/installations-compat",cf="@firebase/messaging",uf="@firebase/messaging-compat",lf="@firebase/performance",hf="@firebase/performance-compat",df="@firebase/remote-config",ff="@firebase/remote-config-compat",pf="@firebase/storage",mf="@firebase/storage-compat",gf="@firebase/firestore",_f="@firebase/ai",yf="@firebase/firestore-compat",vf="firebase",If="11.10.0";var hs="[DEFAULT]",wf={[ls]:"fire-core",[Hd]:"fire-core-compat",[Qd]:"fire-analytics",[Kd]:"fire-analytics-compat",[Jd]:"fire-app-check",[Yd]:"fire-app-check-compat",[Xd]:"fire-auth",[Zd]:"fire-auth-compat",[ef]:"fire-rtdb",[tf]:"fire-data-connect",[nf]:"fire-rtdb-compat",[rf]:"fire-fn",[sf]:"fire-fn-compat",[of]:"fire-iid",[af]:"fire-iid-compat",[cf]:"fire-fcm",[uf]:"fire-fcm-compat",[lf]:"fire-perf",[hf]:"fire-perf-compat",[df]:"fire-rc",[ff]:"fire-rc-compat",[pf]:"fire-gcs",[mf]:"fire-gcs-compat",[gf]:"fire-fst",[yf]:"fire-fst-compat",[_f]:"fire-vertex","fire-js":"fire-js",[vf]:"fire-js-all"};var vn=new Map,Ef=new Map,ds=new Map;function iu(n,e){try{n.container.addComponent(e)}catch(t){Ue.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ie(n){let e=n.name;if(ds.has(e))return Ue.debug(`There were multiple attempts to register component ${e}.`),!1;ds.set(e,n);for(let t of vn.values())iu(t,n);for(let t of Ef.values())iu(t,n);return!0}function Ft(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function pe(n){return n==null?!1:n.settings!==void 0}var Tf={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Xe=new ve("app","Firebase",Tf);var fs=class{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new se("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Xe.create("app-deleted",{appName:this._name})}};var Ze=If;function gs(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let i=Object.assign({name:hs,automaticDataCollectionEnabled:!0},e),s=i.name;if(typeof s!="string"||!s)throw Xe.create("bad-app-name",{appName:String(s)});if(t||(t=es()),!t)throw Xe.create("no-options");let a=vn.get(s);if(a){if(Se(t,a.options)&&Se(i,a.config))return a;throw Xe.create("duplicate-app",{appName:s})}let u=new Er(s);for(let d of ds.values())u.addComponent(d);let h=new fs(t,i,u);return vn.set(s,h),h}function _t(n=hs){let e=vn.get(n);if(!e&&n===hs&&es())return gs();if(!e)throw Xe.create("no-app",{appName:n});return e}function br(){return Array.from(vn.values())}function W(n,e,t){var i;let s=(i=wf[n])!==null&&i!==void 0?i:n;t&&(s+=`-${t}`);let a=s.match(/\s|\//),u=e.match(/\s|\//);if(a||u){let h=[`Unable to register library "${s}" with version "${e}":`];a&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ue.warn(h.join(" "));return}Ie(new se(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}var bf="firebase-heartbeat-database",Af=1,In="firebase-heartbeat-store",cs=null;function cu(){return cs||(cs=nu(bf,Af,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(In)}catch(t){console.warn(t)}}}}).catch(n=>{throw Xe.create("idb-open",{originalErrorMessage:n.message})})),cs}async function Sf(n){try{let t=(await cu()).transaction(In),i=await t.objectStore(In).get(uu(n));return await t.done,i}catch(e){if(e instanceof le)Ue.warn(e.message);else{let t=Xe.create("idb-get",{originalErrorMessage:e?.message});Ue.warn(t.message)}}}async function su(n,e){try{let i=(await cu()).transaction(In,"readwrite");await i.objectStore(In).put(e,uu(n)),await i.done}catch(t){if(t instanceof le)Ue.warn(t.message);else{let i=Xe.create("idb-set",{originalErrorMessage:t?.message});Ue.warn(i.message)}}}function uu(n){return`${n.name}!${n.options.appId}`}var Rf=1024,Pf=30,ps=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new ms(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{let s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=ou();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>Pf){let u=kf(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Ue.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=ou(),{heartbeatsToSend:i,unsentEntries:s}=Cf(this._heartbeatsCache.heartbeats),a=gn(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return Ue.warn(t),""}}};function ou(){return new Date().toISOString().substring(0,10)}function Cf(n,e=Rf){let t=[],i=n.slice();for(let s of n){let a=t.find(u=>u.agent===s.agent);if(a){if(a.dates.push(s.date),au(t)>e){a.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),au(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}var ms=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return _n()?Hc().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await Sf(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){let s=await this.read();return su(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){let s=await this.read();return su(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}};function au(n){return gn(JSON.stringify({version:2,heartbeats:n})).length}function kf(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}function Df(n){Ie(new se("platform-logger",e=>new us(e),"PRIVATE")),Ie(new se("heartbeat",e=>new ps(e),"PRIVATE")),W(ls,ru,n),W(ls,ru,"esm2017"),W("fire-js","")}Df("");var Nf="firebase",Of="11.10.0";W(Nf,Of,"app");var et=new ec("ANGULARFIRE2_VERSION");function wn(n,e,t){if(e){if(e.length===1)return e[0];let a=e.filter(u=>u.app===t);if(a.length===1)return a[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Bt=(n,e)=>{let t=e?[e]:br(),i=[];return t.forEach(s=>{s.container.getProvider(n).instances.forEach(u=>{i.includes(u)||i.push(u)})}),i},Ut=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(Ut||{}),lu=Hi()&&typeof Zone<"u"?Ut.WARN:Ut.SILENT;var Ar=class{zone;delegate;constructor(e,t=Za){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,i){let s=this.zone,a=function(u){s?s.runGuarded(()=>{e.apply(this,[u])}):e.apply(this,[u])};return this.delegate.schedule(a,t,i)}},tt=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=ae(Ae);this.outsideAngular=t.runOutsideAngular(()=>new Ar(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new Ar(typeof Zone>"u"?void 0:Zone.current,Xa))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=xt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),hu=!1;function xf(n,e){!hu&&(lu>Ut.SILENT||Hi())&&(hu=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),lu>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function Vf(n){let e=ae(Ae,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function yt(n){let e=ae(Ae,{optional:!0});return e?e.run(()=>n()):n()}var Lf=(n,e,t)=>(...i)=>(e&&setTimeout(e,0),dr(t,()=>yt(()=>n.apply(void 0,i)))),vt=(n,e,t)=>(t||=e?Ut.WARN:Ut.VERBOSE,function(){let i,s=arguments,a,u,h;try{a=ae(tt),u=ae(ac),h=ae(nc)}catch{return xf(n,t),n.apply(this,s)}for(let y=0;y<arguments.length;y++)typeof s[y]=="function"&&(e&&(i||=yt(()=>u.add())),s[y]=Lf(s[y],i,h));let d=Vf(()=>n.apply(this,s));return e?d instanceof $i?d.pipe(Wi(a.outsideAngular),zi(a.insideAngular),Tc(h)):d instanceof Promise?yt(()=>new Promise((y,b)=>{u.run(()=>d).then(A=>dr(h,()=>yt(()=>y(A))),A=>dr(h,()=>yt(()=>b(A))))})):typeof d=="function"&&i?function(){return setTimeout(i,0),d.apply(this,arguments)}:yt(()=>d):d instanceof $i?d.pipe(Wi(a.outsideAngular),zi(a.insideAngular)):yt(()=>d)});var Be=class{constructor(e){return e}},It=class{constructor(){return br()}};function Mf(n){return n&&n.length===1?n[0]:new Be(_t())}var _s=new Vt("angularfire2._apps"),Ff={provide:Be,useFactory:Mf,deps:[[new fe,_s]]},Uf={provide:It,deps:[[new fe,_s]]};function Bf(n){return(e,t)=>{let i=t.get(cc);W("angularfire",et.full,"core"),W("angularfire",et.full,"app"),W("angular",tc.full,i.toString());let s=e.runOutsideAngular(()=>n(t));return new Be(s)}}function du(n,...e){return Lt([Ff,Uf,{provide:_s,useFactory:Bf(n),multi:!0,deps:[Ae,Mt,tt,...e]}])}var fu=vt(gs,!0);var qf=new Map,$f={activated:!1,tokenObservers:[]},jf={initialized:!1,enabled:!1};function we(n){return qf.get(n)||Object.assign({},$f)}function _u(){return jf}var zf="https://content-firebaseappcheck.googleapis.com/v1";var Wf="exchangeDebugToken",pu={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},Ov=1440*60*1e3;var Is=class{constructor(e,t,i,s,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=i,this.lowerBound=s,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=s,s>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new pt,this.pending.promise.catch(t=>{}),await Gf(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new pt,this.pending.promise.catch(t=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function Gf(n){return new Promise(e=>{setTimeout(e,n)})}var Hf={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},nt=new ve("appCheck","AppCheck",Hf);function yu(n){if(!we(n).activated)throw nt.create("use-before-activation",{appName:n.name})}async function vu({url:n,body:e},t){let i={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let A=await s.getHeartbeatsHeader();A&&(i["X-Firebase-Client"]=A)}let a={method:"POST",body:JSON.stringify(e),headers:i},u;try{u=await fetch(n,a)}catch(A){throw nt.create("fetch-network-error",{originalErrorMessage:A?.message})}if(u.status!==200)throw nt.create("fetch-status-error",{httpStatus:u.status});let h;try{h=await u.json()}catch(A){throw nt.create("fetch-parse-error",{originalErrorMessage:A?.message})}let d=h.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw nt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${h.ttl}`});let y=Number(d[1])*1e3,b=Date.now();return{token:h.token,expireTimeMillis:b+y,issuedAtTimeMillis:b}}function Iu(n,e){let{projectId:t,appId:i,apiKey:s}=n.options;return{url:`${zf}/projects/${t}/apps/${i}:${Wf}?key=${s}`,body:{debug_token:e}}}var Kf="firebase-app-check-database",Qf=1,ws="firebase-app-check-store";var Sr=null;function Yf(){return Sr||(Sr=new Promise((n,e)=>{try{let t=indexedDB.open(Kf,Qf);t.onsuccess=i=>{n(i.target.result)},t.onerror=i=>{var s;e(nt.create("storage-open",{originalErrorMessage:(s=i.target.error)===null||s===void 0?void 0:s.message}))},t.onupgradeneeded=i=>{let s=i.target.result;i.oldVersion===0&&s.createObjectStore(ws,{keyPath:"compositeKey"})}}catch(t){e(nt.create("storage-open",{originalErrorMessage:t?.message}))}}),Sr)}function Jf(n,e){return Xf(Zf(n),e)}async function Xf(n,e){let i=(await Yf()).transaction(ws,"readwrite"),a=i.objectStore(ws).put({compositeKey:n,value:e});return new Promise((u,h)=>{a.onsuccess=d=>{u()},i.onerror=d=>{var y;h(nt.create("storage-set",{originalErrorMessage:(y=d.target.error)===null||y===void 0?void 0:y.message}))}})}function Zf(n){return`${n.options.appId}-${n.name}`}var En=new Re("@firebase/app-check");function ys(n,e){return _n()?Jf(n,e).catch(t=>{En.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function wu(){return _u().enabled}async function Eu(){let n=_u();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}var ep={error:"UNKNOWN_ERROR"};function tp(n){return yr.encodeString(JSON.stringify(n),!1)}async function Es(n,e=!1,t=!1){let i=n.app;yu(i);let s=we(i),a=s.token,u;if(a&&!Tn(a)&&(s.token=void 0,a=void 0),!a){let y=await s.cachedTokenPromise;y&&(Tn(y)?a=y:await ys(i,void 0))}if(!e&&a&&Tn(a))return{token:a.token};let h=!1;if(wu())try{s.exchangeTokenPromise||(s.exchangeTokenPromise=vu(Iu(i,await Eu()),n.heartbeatServiceProvider).finally(()=>{s.exchangeTokenPromise=void 0}),h=!0);let y=await s.exchangeTokenPromise;return await ys(i,y),s.token=y,{token:y.token}}catch(y){return y.code==="appCheck/throttled"||y.code==="appCheck/initial-throttle"?En.warn(y.message):t&&En.error(y),vs(y)}try{s.exchangeTokenPromise||(s.exchangeTokenPromise=s.provider.getToken().finally(()=>{s.exchangeTokenPromise=void 0}),h=!0),a=await we(i).exchangeTokenPromise}catch(y){y.code==="appCheck/throttled"||y.code==="appCheck/initial-throttle"?En.warn(y.message):t&&En.error(y),u=y}let d;return a?u?Tn(a)?d={token:a.token,internalError:u}:d=vs(u):(d={token:a.token},s.token=a,await ys(i,a)):d=vs(u),h&&sp(i,d),d}async function np(n){let e=n.app;yu(e);let{provider:t}=we(e);if(wu()){let i=await Eu(),{token:s}=await vu(Iu(e,i),n.heartbeatServiceProvider);return{token:s}}else{let{token:i}=await t.getToken();return{token:i}}}function rp(n,e,t,i){let{app:s}=n,a=we(s),u={next:t,error:i,type:e};if(a.tokenObservers=[...a.tokenObservers,u],a.token&&Tn(a.token)){let h=a.token;Promise.resolve().then(()=>{t({token:h.token}),mu(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>mu(n))}function Tu(n,e){let t=we(n),i=t.tokenObservers.filter(s=>s.next!==e);i.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=i}function mu(n){let{app:e}=n,t=we(e),i=t.tokenRefresher;i||(i=ip(n),t.tokenRefresher=i),!i.isRunning()&&t.isTokenAutoRefreshEnabled&&i.start()}function ip(n){let{app:e}=n;return new Is(async()=>{let t=we(e),i;if(t.token?i=await Es(n,!0):i=await Es(n),i.error)throw i.error;if(i.internalError)throw i.internalError},()=>!0,()=>{let t=we(e);if(t.token){let i=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,s=t.token.expireTimeMillis-300*1e3;return i=Math.min(i,s),Math.max(0,i-Date.now())}else return 0},pu.RETRIAL_MIN_WAIT,pu.RETRIAL_MAX_WAIT)}function sp(n,e){let t=we(n).tokenObservers;for(let i of t)try{i.type==="EXTERNAL"&&e.error!=null?i.error(e.error):i.next(e)}catch{}}function Tn(n){return n.expireTimeMillis-Date.now()>0}function vs(n){return{token:tp(ep),error:n}}var Ts=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=we(this.app);for(let t of e)Tu(this.app,t.next);return Promise.resolve()}};function op(n,e){return new Ts(n,e)}function ap(n){return{getToken:e=>Es(n,e),getLimitedUseToken:()=>np(n),addTokenListener:e=>rp(n,"INTERNAL",e),removeTokenListener:e=>Tu(n.app,e)}}var cp="@firebase/app-check",up="0.10.1";var lp="app-check",gu="app-check-internal";function hp(){Ie(new se(lp,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return op(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(gu).initialize()})),Ie(new se(gu,n=>{let e=n.getProvider("app-check").getImmediate();return ap(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),W(cp,up)}hp();var dp="app-check";var qt=class{constructor(){return Bt(dp)}};var fp=["localhost","0.0.0.0","127.0.0.1"],Wv=typeof window<"u"&&fp.includes(window.location.hostname);function Fu(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var Uu=Fu,Bu=new ve("auth","Firebase",Fu());var Nr=new Re("@firebase/auth");function pp(n,...e){Nr.logLevel<=F.WARN&&Nr.warn(`Auth (${Ze}): ${n}`,...e)}function Pr(n,...e){Nr.logLevel<=F.ERROR&&Nr.error(`Auth (${Ze}): ${n}`,...e)}function st(n,...e){throw js(n,...e)}function Et(n,...e){return js(n,...e)}function qu(n,e,t){let i=Object.assign(Object.assign({},Uu()),{[e]:t});return new ve("auth","Firebase",i).create(e,{appName:n.name})}function wt(n){return qu(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function js(n,...e){if(typeof n!="string"){let t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return Bu.create(n,...e)}function D(n,e,...t){if(!n)throw js(e,...t)}function qe(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Pr(e),new Error(e)}function ot(n,e){n||qe(e)}function Rs(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function mp(){return bu()==="http:"||bu()==="https:"}function bu(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function gp(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(mp()||zc()||"connection"in navigator)?navigator.onLine:!0}function _p(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Tt=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,ot(t>e,"Short delay should be less than long delay!"),this.isMobile=$c()||Wc()}get(){return gp()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function zs(n,e){ot(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Or=class{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;qe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;qe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;qe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var yp={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var vp=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Ip=new Tt(3e4,6e4);function Ws(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function $t(n,e,t,i,s={}){return $u(n,s,async()=>{let a={},u={};i&&(e==="GET"?u=i:a={body:JSON.stringify(i)});let h=yn(Object.assign({key:n.config.apiKey},u)).slice(1),d=await n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);let y=Object.assign({method:e,headers:d},a);return jc()||(y.referrerPolicy="no-referrer"),n.emulatorConfig&&mt(n.emulatorConfig.host)&&(y.credentials="include"),Or.fetch()(await ju(n,n.config.apiHost,t,h),y)})}async function $u(n,e,t){n._canInitEmulator=!1;let i=Object.assign(Object.assign({},yp),e);try{let s=new Ps(n),a=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();let u=await a.json();if("needConfirmation"in u)throw Rr(n,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{let h=a.ok?u.errorMessage:u.error.message,[d,y]=h.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Rr(n,"credential-already-in-use",u);if(d==="EMAIL_EXISTS")throw Rr(n,"email-already-in-use",u);if(d==="USER_DISABLED")throw Rr(n,"user-disabled",u);let b=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw qu(n,b,y);st(n,b)}}catch(s){if(s instanceof le)throw s;st(n,"network-request-failed",{message:String(s)})}}async function wp(n,e,t,i,s={}){let a=await $t(n,e,t,i,s);return"mfaPendingCredential"in a&&st(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function ju(n,e,t,i){let s=`${e}${t}?${i}`,a=n,u=a.config.emulator?zs(n.config,s):`${n.config.apiScheme}://${s}`;return vp.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(u).toString():u}var Ps=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Et(this.auth,"network-request-failed")),Ip.get())})}};function Rr(n,e,t){let i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);let s=Et(n,e,i);return s.customData._tokenResponse=t,s}async function Ep(n,e){return $t(n,"POST","/v1/accounts:delete",e)}async function xr(n,e){return $t(n,"POST","/v1/accounts:lookup",e)}function bn(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Gs(n,e=!1){let t=Fe(n),i=await t.getIdToken(e),s=Hs(i);D(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");let a=typeof s.firebase=="object"?s.firebase:void 0,u=a?.sign_in_provider;return{claims:s,token:i,authTime:bn(bs(s.auth_time)),issuedAtTime:bn(bs(s.iat)),expirationTime:bn(bs(s.exp)),signInProvider:u||null,signInSecondFactor:a?.sign_in_second_factor||null}}function bs(n){return Number(n)*1e3}function Hs(n){let[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Pr("JWT malformed, contained fewer than 3 sections"),null;try{let s=vr(t);return s?JSON.parse(s):(Pr("Failed to decode base64 JWT payload"),null)}catch(s){return Pr("Caught error parsing JWT payload as JSON",s?.toString()),null}}function Au(n){let e=Hs(n);return D(e,"internal-error"),D(typeof e.exp<"u","internal-error"),D(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Sn(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof le&&Tp(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function Tp({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Cs=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;let s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var Rn=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=bn(this.lastLoginAt),this.creationTime=bn(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function Vr(n){var e;let t=n.auth,i=await n.getIdToken(),s=await Sn(n,xr(t,{idToken:i}));D(s?.users.length,t,"internal-error");let a=s.users[0];n._notifyReloadListener(a);let u=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?zu(a.providerUserInfo):[],h=bp(n.providerData,u),d=n.isAnonymous,y=!(n.email&&a.passwordHash)&&!h?.length,b=d?y:!1,A={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:h,metadata:new Rn(a.createdAt,a.lastLoginAt),isAnonymous:b};Object.assign(n,A)}async function Ks(n){let e=Fe(n);await Vr(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function bp(n,e){return[...n.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function zu(n){return n.map(e=>{var{providerId:t}=e,i=ji(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}async function Ap(n,e){let t=await $u(n,{},async()=>{let i=yn({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=n.config,u=await ju(n,s,"/v1/token",`key=${a}`),h=await n._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";let d={method:"POST",headers:h,body:i};return n.emulatorConfig&&mt(n.emulatorConfig.host)&&(d.credentials="include"),Or.fetch()(u,d)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Sp(n,e){return $t(n,"POST","/v2/accounts:revokeToken",Ws(n,e))}var An=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){D(e.idToken,"internal-error"),D(typeof e.idToken<"u","internal-error"),D(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Au(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){D(e.length!==0,"internal-error");let t=Au(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(D(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:i,refreshToken:s,expiresIn:a}=await Ap(e,t);this.updateTokensAndExpiration(i,s,Number(a))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){let{refreshToken:i,accessToken:s,expirationTime:a}=t,u=new n;return i&&(D(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),s&&(D(typeof s=="string","internal-error",{appName:e}),u.accessToken=s),a&&(D(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return qe("not implemented")}};function rt(n,e){D(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var it=class n{constructor(e){var{uid:t,auth:i,stsTokenManager:s}=e,a=ji(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Cs(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Rn(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){let t=await Sn(this,this.stsTokenManager.getToken(this.auth,e));return D(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Gs(this,e)}reload(){return Ks(this)}_assign(e){this!==e&&(D(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){D(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Vr(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(pe(this.auth.app))return Promise.reject(wt(this.auth));let e=await this.getIdToken();return await Sn(this,Ep(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,s,a,u,h,d,y,b;let A=(i=t.displayName)!==null&&i!==void 0?i:void 0,T=(s=t.email)!==null&&s!==void 0?s:void 0,P=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,R=(u=t.photoURL)!==null&&u!==void 0?u:void 0,k=(h=t.tenantId)!==null&&h!==void 0?h:void 0,C=(d=t._redirectEventId)!==null&&d!==void 0?d:void 0,N=(y=t.createdAt)!==null&&y!==void 0?y:void 0,U=(b=t.lastLoginAt)!==null&&b!==void 0?b:void 0,{uid:$,emailVerified:ne,isAnonymous:xe,providerData:Y,stsTokenManager:v}=t;D($&&v,e,"internal-error");let f=An.fromJSON(this.name,v);D(typeof $=="string",e,"internal-error"),rt(A,e.name),rt(T,e.name),D(typeof ne=="boolean",e,"internal-error"),D(typeof xe=="boolean",e,"internal-error"),rt(P,e.name),rt(R,e.name),rt(k,e.name),rt(C,e.name),rt(N,e.name),rt(U,e.name);let m=new n({uid:$,auth:e,email:T,emailVerified:ne,displayName:A,isAnonymous:xe,photoURL:R,phoneNumber:P,tenantId:k,stsTokenManager:f,createdAt:N,lastLoginAt:U});return Y&&Array.isArray(Y)&&(m.providerData=Y.map(g=>Object.assign({},g))),C&&(m._redirectEventId=C),m}static async _fromIdTokenResponse(e,t,i=!1){let s=new An;s.updateFromServerResponse(t);let a=new n({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await Vr(a),a}static async _fromGetAccountInfoResponse(e,t,i){let s=t.users[0];D(s.localId!==void 0,"internal-error");let a=s.providerUserInfo!==void 0?zu(s.providerUserInfo):[],u=!(s.email&&s.passwordHash)&&!a?.length,h=new An;h.updateFromIdToken(i);let d=new n({uid:s.localId,auth:e,stsTokenManager:h,isAnonymous:u}),y={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Rn(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!a?.length};return Object.assign(d,y),d}};var Su=new Map;function $e(n){ot(n instanceof Function,"Expected a class definition");let e=Su.get(n);return e?(ot(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Su.set(n,e),e)}var Rp=(()=>{class n{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,i){this.storage[t]=i}async _get(t){let i=this.storage[t];return i===void 0?null:i}async _remove(t){delete this.storage[t]}_addListener(t,i){}_removeListener(t,i){}}return n.type="NONE",n})(),ks=Rp;function Cr(n,e,t){return`firebase:${n}:${e}:${t}`}var Lr=class n{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;let{config:s,name:a}=this.auth;this.fullUserKey=Cr(this.userKey,s.apiKey,a),this.fullPersistenceKey=Cr("persistence",s.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=await xr(this.auth,{idToken:e}).catch(()=>{});return t?it._fromGetAccountInfoResponse(this.auth,t,e):null}return it._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new n($e(ks),e,i);let s=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y),a=s[0]||$e(ks),u=Cr(i,e.config.apiKey,e.name),h=null;for(let y of t)try{let b=await y._get(u);if(b){let A;if(typeof b=="string"){let T=await xr(e,{idToken:b}).catch(()=>{});if(!T)break;A=await it._fromGetAccountInfoResponse(e,T,b)}else A=it._fromJSON(e,b);y!==a&&(h=A),a=y;break}}catch{}let d=s.filter(y=>y._shouldAllowMigration);return!a._shouldAllowMigration||!d.length?new n(a,e,i):(a=d[0],h&&await a._set(u,h.toJSON()),await Promise.all(t.map(async y=>{if(y!==a)try{await y._remove(u)}catch{}})),new n(a,e,i))}};function Ru(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Ku(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Wu(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Yu(e))return"Blackberry";if(Ju(e))return"Webos";if(Gu(e))return"Safari";if((e.includes("chrome/")||Hu(e))&&!e.includes("edge/"))return"Chrome";if(Qu(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function Wu(n=K()){return/firefox\//i.test(n)}function Gu(n=K()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Hu(n=K()){return/crios\//i.test(n)}function Ku(n=K()){return/iemobile/i.test(n)}function Qu(n=K()){return/android/i.test(n)}function Yu(n=K()){return/blackberry/i.test(n)}function Ju(n=K()){return/webos/i.test(n)}function Qs(n=K()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Pp(n=K()){var e;return Qs(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Cp(){return Gc()&&document.documentMode===10}function Xu(n=K()){return Qs(n)||Qu(n)||Ju(n)||Yu(n)||/windows phone/i.test(n)||Ku(n)}function Zu(n,e=[]){let t;switch(n){case"Browser":t=Ru(K());break;case"Worker":t=`${Ru(K())}-${n}`;break;default:t=n}let i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ze}/${i}`}var Ds=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let i=a=>new Promise((u,h)=>{try{let d=e(a);u(d)}catch(d){h(d)}});i.onAbort=t,this.queue.push(i);let s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(let s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}};async function kp(n,e={}){return $t(n,"GET","/v2/passwordPolicy",Ws(n,e))}var Dp=6,Ns=class{constructor(e){var t,i,s,a;let u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:Dp,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,s,a,u,h;let d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(t=d.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),d.isValid&&(d.isValid=(i=d.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(s=d.containsLowercaseLetter)!==null&&s!==void 0?s:!0),d.isValid&&(d.isValid=(a=d.containsUppercaseLetter)!==null&&a!==void 0?a:!0),d.isValid&&(d.isValid=(u=d.containsNumericCharacter)!==null&&u!==void 0?u:!0),d.isValid&&(d.isValid=(h=d.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),d}validatePasswordLengthOptions(e,t){let i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}};var Os=class{constructor(e,t,i,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Mr(this),this.idTokenSubscription=new Mr(this),this.beforeStateQueue=new Ds(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Bu,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=$e(t)),this._initializationPromise=this.queue(async()=>{var i,s,a;if(!this._deleted&&(this.persistenceManager=await Lr.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await xr(this,{idToken:e}),i=await it._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(pe(this.app)){let u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}let i=await this.assertedPersistence.getCurrentUser(),s=i,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,h=s?._redirectEventId,d=await this.tryRedirectSignIn(e);(!u||u===h)&&d?.user&&(s=d.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return D(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Vr(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=_p()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(pe(this.app))return Promise.reject(wt(this));let t=e?Fe(e):null;return t&&D(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&D(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return pe(this.app)?Promise.reject(wt(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return pe(this.app)?Promise.reject(wt(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence($e(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await kp(this),t=new Ns(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ve("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await Sp(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){let i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&$e(e)||this._popupRedirectResolver;D(t,this,"argument-error"),this.redirectPersistenceManager=await Lr.create(this,[$e(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,s){if(this._deleted)return()=>{};let a=typeof t=="function"?t:t.next.bind(t),u=!1,h=this._isInitialized?Promise.resolve():this._initializationPromise;if(D(h,this,"internal-error"),h.then(()=>{u||a(this.currentUser)}),typeof t=="function"){let d=e.addObserver(t,i,s);return()=>{u=!0,d()}}else{let d=e.addObserver(t);return()=>{u=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return D(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Zu(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);let s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;if(pe(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&pp(`Error while retrieving App Check token: ${t.error}`),t?.token}};function Ys(n){return Fe(n)}var Mr=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Qc(t=>this.observer=t)}get next(){return D(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Js={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Np(n){Js=n}function Op(n){return Js.loadJS(n)}function xp(){return Js.gapiScript}function el(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function Xs(n,e){let t=Ft(n,"auth");if(t.isInitialized()){let s=t.getImmediate(),a=t.getOptions();if(Se(a,e??{}))return s;st(s,"already-initialized")}return t.initialize({options:e})}function Vp(n,e){let t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map($e);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function Zs(n,e,t){let i=Ys(n);D(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");let s=!!t?.disableWarnings,a=tl(e),{host:u,port:h}=Lp(e),d=h===null?"":`:${h}`,y={url:`${a}//${u}${d}/`},b=Object.freeze({host:u,port:h,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){D(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),D(Se(y,i.config.emulator)&&Se(b,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=y,i.emulatorConfig=b,i.settings.appVerificationDisabledForTesting=!0,mt(u)?(Ir(`${a}//${u}${d}`),wr("Auth",!0)):s||Mp()}function tl(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Lp(n){let e=tl(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let i=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){let a=s[1];return{host:a,port:Pu(i.substr(a.length+1))}}else{let[a,u]=i.split(":");return{host:a,port:Pu(u)}}}function Pu(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function Mp(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Fr=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return qe("not implemented")}_getIdTokenResponse(e){return qe("not implemented")}_linkToIdToken(e,t){return qe("not implemented")}_getReauthenticationResolver(e){return qe("not implemented")}};async function As(n,e){return wp(n,"POST","/v1/accounts:signInWithIdp",Ws(n,e))}var Ur=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var xs=class extends Ur{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var Pn=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,s=!1){let a=await it._fromIdTokenResponse(e,i,s),u=Cu(i);return new n({user:a,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);let s=Cu(i);return new n({user:e,providerId:s,_tokenResponse:i,operationType:t})}};function Cu(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var Vs=class n extends le{constructor(e,t,i,s){var a;super(t.code,t.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,s){return new n(e,t,i,s)}};function nl(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Vs._fromErrorAndOperation(n,a,e,i):a})}async function Fp(n,e,t=!1){let i=await Sn(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Pn._forOperation(n,"link",i)}async function Up(n,e,t=!1){let{auth:i}=n;if(pe(i.app))return Promise.reject(wt(i));let s="reauthenticate";try{let a=await Sn(n,nl(i,s,e,n),t);D(a.idToken,i,"internal-error");let u=Hs(a.idToken);D(u,i,"internal-error");let{sub:h}=u;return D(n.uid===h,i,"user-mismatch"),Pn._forOperation(n,s,a)}catch(a){throw a?.code==="auth/user-not-found"&&st(i,"user-mismatch"),a}}async function Bp(n,e,t=!1){if(pe(n.app))return Promise.reject(wt(n));let i="signIn",s=await nl(n,i,e),a=await Pn._fromIdTokenResponse(n,i,s);return t||await n._updateCurrentUser(a.user),a}function eo(n,e,t,i){return Fe(n).onIdTokenChanged(e,t,i)}function to(n,e,t){return Fe(n).beforeAuthStateChanged(e,t)}var Br="__sak";var qr=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Br,"1"),this.storage.removeItem(Br),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var qp=1e3,$p=10,jp=(()=>{class n extends qr{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Xu(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let i of Object.keys(this.listeners)){let s=this.storage.getItem(i),a=this.localCache[i];s!==a&&t(i,a,s)}}onStorageEvent(t,i=!1){if(!t.key){this.forAllChangedKeys((h,d,y)=>{this.notifyListeners(h,y)});return}let s=t.key;i?this.detachListener():this.stopPolling();let a=()=>{let h=this.storage.getItem(s);!i&&this.localCache[s]===h||this.notifyListeners(s,h)},u=this.storage.getItem(s);Cp()&&u!==t.newValue&&t.newValue!==t.oldValue?setTimeout(a,$p):a()}notifyListeners(t,i){this.localCache[t]=i;let s=this.listeners[t];if(s)for(let a of Array.from(s))a(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:s}),!0)})},qp)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,i){await super._set(t,i),this.localCache[t]=JSON.stringify(i)}async _get(t){let i=await super._get(t);return this.localCache[t]=JSON.stringify(i),i}async _remove(t){await super._remove(t),delete this.localCache[t]}}return n.type="LOCAL",n})(),rl=jp;var zp=(()=>{class n extends qr{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}return n.type="SESSION",n})(),no=zp;function Wp(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}var Gp=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let i=this.receivers.find(a=>a.isListeningto(t));if(i)return i;let s=new n(t);return this.receivers.push(s),s}isListeningto(t){return this.eventTarget===t}async handleEvent(t){let i=t,{eventId:s,eventType:a,data:u}=i.data,h=this.handlersMap[a];if(!h?.size)return;i.ports[0].postMessage({status:"ack",eventId:s,eventType:a});let d=Array.from(h).map(async b=>b(i.origin,u)),y=await Wp(d);i.ports[0].postMessage({status:"done",eventId:s,eventType:a,response:y})}_subscribe(t,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function il(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}var Ls=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){let s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,u;return new Promise((h,d)=>{let y=il("",20);s.port1.start();let b=setTimeout(()=>{d(new Error("unsupported_event"))},i);u={messageChannel:s,onMessage(A){let T=A;if(T.data.eventId===y)switch(T.data.status){case"ack":clearTimeout(b),a=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),h(T.data.response);break;default:clearTimeout(b),clearTimeout(a),d(new Error("invalid_response"));break}}},this.handlers.add(u),s.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[s.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}};function Ce(){return window}function Hp(n){Ce().location.href=n}function sl(){return typeof Ce().WorkerGlobalScope<"u"&&typeof Ce().importScripts=="function"}async function Kp(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Qp(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function Yp(){return sl()?self:null}var ol="firebaseLocalStorageDb",Jp=1,$r="firebaseLocalStorage",al="fbase_key",bt=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function zr(n,e){return n.transaction([$r],e?"readwrite":"readonly").objectStore($r)}function Xp(){let n=indexedDB.deleteDatabase(ol);return new bt(n).toPromise()}function Ms(){let n=indexedDB.open(ol,Jp);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let i=n.result;try{i.createObjectStore($r,{keyPath:al})}catch(s){t(s)}}),n.addEventListener("success",async()=>{let i=n.result;i.objectStoreNames.contains($r)?e(i):(i.close(),await Xp(),e(await Ms()))})})}async function ku(n,e,t){let i=zr(n,!0).put({[al]:e,value:t});return new bt(i).toPromise()}async function Zp(n,e){let t=zr(n,!1).get(e),i=await new bt(t).toPromise();return i===void 0?null:i.value}function Du(n,e){let t=zr(n,!0).delete(e);return new bt(t).toPromise()}var em=800,tm=3,nm=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ms(),this.db)}async _withRetries(t){let i=0;for(;;)try{let s=await this._openDb();return await t(s)}catch(s){if(i++>tm)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return sl()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Gp._getInstance(Yp()),this.receiver._subscribe("keyChanged",async(t,i)=>({keyProcessed:(await this._poll()).includes(i.key)})),this.receiver._subscribe("ping",async(t,i)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await Kp(),!this.activeServiceWorker)return;this.sender=new Ls(this.activeServiceWorker);let s=await this.sender._send("ping",{},800);s&&!((t=s[0])===null||t===void 0)&&t.fulfilled&&!((i=s[0])===null||i===void 0)&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||Qp()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let t=await Ms();return await ku(t,Br,"1"),await Du(t,Br),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,i){return this._withPendingWrite(async()=>(await this._withRetries(s=>ku(s,t,i)),this.localCache[t]=i,this.notifyServiceWorker(t)))}async _get(t){let i=await this._withRetries(s=>Zp(s,t));return this.localCache[t]=i,i}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Du(i,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){let t=await this._withRetries(a=>{let u=zr(a,!1).getAll();return new bt(u).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let i=[],s=new Set;if(t.length!==0)for(let{fbase_key:a,value:u}of t)s.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(u)&&(this.notifyListeners(a,u),i.push(a));for(let a of Object.keys(this.localCache))this.localCache[a]&&!s.has(a)&&(this.notifyListeners(a,null),i.push(a));return i}notifyListeners(t,i){this.localCache[t]=i;let s=this.listeners[t];if(s)for(let a of Array.from(s))a(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),em)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),cl=nm;var tI=el("rcb"),nI=new Tt(3e4,6e4);function rm(n,e){return e?$e(e):(D(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Cn=class extends Fr{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return As(e,this._buildIdpRequest())}_linkToIdToken(e,t){return As(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return As(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function im(n){return Bp(n.auth,new Cn(n),n.bypassAuthState)}function sm(n){let{auth:e,user:t}=n;return D(t,e,"internal-error"),Up(t,new Cn(n),n.bypassAuthState)}async function om(n){let{auth:e,user:t}=n;return D(t,e,"internal-error"),Fp(t,new Cn(n),n.bypassAuthState)}var Fs=class{constructor(e,t,i,s,a=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:i,postBody:s,tenantId:a,error:u,type:h}=e;if(u){this.reject(u);return}let d={auth:this.auth,requestUri:t,sessionId:i,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(d))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return im;case"linkViaPopup":case"linkViaRedirect":return om;case"reauthViaPopup":case"reauthViaRedirect":return sm;default:st(this.auth,"internal-error")}}resolve(e){ot(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ot(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var rI=new Tt(2e3,1e4);var am="pendingRedirect",kr=new Map,Us=class extends Fs{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=kr.get(this.auth._key());if(!e){try{let i=await cm(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}kr.set(this.auth._key(),e)}return this.bypassAuthState||kr.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function cm(n,e){let t=hm(e),i=lm(n);if(!await i._isAvailable())return!1;let s=await i._get(t)==="true";return await i._remove(t),s}function um(n,e){kr.set(n._key(),e)}function lm(n){return $e(n._redirectPersistence)}function hm(n){return Cr(am,n.config.apiKey,n.name)}async function dm(n,e,t=!1){if(pe(n.app))return Promise.reject(wt(n));let i=Ys(n),s=rm(i,e),u=await new Us(i,s,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}var fm=600*1e3,Bs=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!pm(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!ul(e)){let s=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(Et(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=fm&&this.cachedEventUids.clear(),this.cachedEventUids.has(Nu(e))}saveEventToCache(e){this.cachedEventUids.add(Nu(e)),this.lastProcessedEventTime=Date.now()}};function Nu(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function ul({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function pm(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ul(n);default:return!1}}async function mm(n,e={}){return $t(n,"GET","/v1/projects",e)}var gm=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_m=/^https?/;async function ym(n){if(n.config.emulator)return;let{authorizedDomains:e}=await mm(n);for(let t of e)try{if(vm(t))return}catch{}st(n,"unauthorized-domain")}function vm(n){let e=Rs(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){let u=new URL(n);return u.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!_m.test(t))return!1;if(gm.test(n))return i===n;let s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}var Im=new Tt(3e4,6e4);function Ou(){let n=Ce().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function wm(n){return new Promise((e,t)=>{var i,s,a;function u(){Ou(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ou(),t(Et(n,"network-request-failed"))},timeout:Im.get()})}if(!((s=(i=Ce().gapi)===null||i===void 0?void 0:i.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((a=Ce().gapi)===null||a===void 0)&&a.load)u();else{let h=el("iframefcb");return Ce()[h]=()=>{gapi.load?u():t(Et(n,"network-request-failed"))},Op(`${xp()}?onload=${h}`).catch(d=>t(d))}}).catch(e=>{throw Dr=null,e})}var Dr=null;function Em(n){return Dr=Dr||wm(n),Dr}var Tm=new Tt(5e3,15e3),bm="__/auth/iframe",Am="emulator/auth/iframe",Sm={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Rm=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Pm(n){let e=n.config;D(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?zs(e,Am):`https://${n.config.authDomain}/${bm}`,i={apiKey:e.apiKey,appName:n.name,v:Ze},s=Rm.get(n.config.apiHost);s&&(i.eid=s);let a=n._getFrameworks();return a.length&&(i.fw=a.join(",")),`${t}?${yn(i).slice(1)}`}async function Cm(n){let e=await Em(n),t=Ce().gapi;return D(t,n,"internal-error"),e.open({where:document.body,url:Pm(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Sm,dontclear:!0},i=>new Promise(async(s,a)=>{await i.restyle({setHideOnLeave:!1});let u=Et(n,"network-request-failed"),h=Ce().setTimeout(()=>{a(u)},Tm.get());function d(){Ce().clearTimeout(h),s(i)}i.ping(d).then(d,()=>{a(u)})}))}var km={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Dm=500,Nm=600,Om="_blank",xm="http://localhost",jr=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function Vm(n,e,t,i=Dm,s=Nm){let a=Math.max((window.screen.availHeight-s)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString(),h="",d=Object.assign(Object.assign({},km),{width:i.toString(),height:s.toString(),top:a,left:u}),y=K().toLowerCase();t&&(h=Hu(y)?Om:t),Wu(y)&&(e=e||xm,d.scrollbars="yes");let b=Object.entries(d).reduce((T,[P,R])=>`${T}${P}=${R},`,"");if(Pp(y)&&h!=="_self")return Lm(e||"",h),new jr(null);let A=window.open(e||"",h,b);D(A,n,"popup-blocked");try{A.focus()}catch{}return new jr(A)}function Lm(n,e){let t=document.createElement("a");t.href=n,t.target=e;let i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}var Mm="__/auth/handler",Fm="emulator/auth/handler",Um=encodeURIComponent("fac");async function xu(n,e,t,i,s,a){D(n.config.authDomain,n,"auth-domain-config-required"),D(n.config.apiKey,n,"invalid-api-key");let u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Ze,eventId:s};if(e instanceof Ur){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",Kc(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(let[b,A]of Object.entries(a||{}))u[b]=A}if(e instanceof xs){let b=e.getScopes().filter(A=>A!=="");b.length>0&&(u.scopes=b.join(","))}n.tenantId&&(u.tid=n.tenantId);let h=u;for(let b of Object.keys(h))h[b]===void 0&&delete h[b];let d=await n._getAppCheckToken(),y=d?`#${Um}=${encodeURIComponent(d)}`:"";return`${Bm(n)}?${yn(h).slice(1)}${y}`}function Bm({config:n}){return n.emulator?zs(n,Fm):`https://${n.authDomain}/${Mm}`}var Ss="webStorageSupport",qs=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=no,this._completeRedirectFn=dm,this._overrideRedirectResult=um}async _openPopup(e,t,i,s){var a;ot((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");let u=await xu(e,t,i,Rs(),s);return Vm(e,u,il())}async _openRedirect(e,t,i,s){await this._originValidation(e);let a=await xu(e,t,i,Rs(),s);return Hp(a),new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:s,promise:a}=this.eventManagers[t];return s?Promise.resolve(s):(ot(a,"If manager is not set, promise should be"),a)}let i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){let t=await Cm(e),i=new Bs(e);return t.register("authEvent",s=>(D(s?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ss,{type:Ss},s=>{var a;let u=(a=s?.[0])===null||a===void 0?void 0:a[Ss];u!==void 0&&t(!!u),st(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=ym(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Xu()||Gu()||Qs()}},ll=qs;var Vu="@firebase/auth",Lu="1.10.8";var $s=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){D(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function qm(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function $m(n){Ie(new se("auth",(e,{options:t})=>{let i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:h}=i.options;D(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});let d={apiKey:u,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Zu(n)},y=new Os(i,s,a,d);return Vp(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Ie(new se("auth-internal",e=>{let t=Ys(e.getProvider("auth").getImmediate());return(i=>new $s(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),W(Vu,Lu,qm(n)),W(Vu,Lu,"esm2017")}var jm=300,zm=ts("authIdTokenMaxAge")||jm,Mu=null,Wm=n=>async e=>{let t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>zm)return;let s=t?.token;Mu!==s&&(Mu=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function ro(n=_t()){let e=Ft(n,"auth");if(e.isInitialized())return e.getImmediate();let t=Xs(n,{popupRedirectResolver:ll,persistence:[cl,rl,no]}),i=ts("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){let a=new URL(i,location.origin);if(location.origin===a.origin){let u=Wm(a.toString());to(t,u,()=>u(t.currentUser)),eo(t,h=>u(h))}}let s=Zi("auth");return s&&Zs(t,`http://${s}`),t}function Gm(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}Np({loadJS(n){return new Promise((e,t)=>{let i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=s=>{let a=Et("internal-error");a.customData=s,t(a)},i.type="text/javascript",i.charset="UTF-8",Gm().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});$m("Browser");var hl="auth",kn=class{constructor(e){return e}},Dn=class{constructor(){return Bt(hl)}};var io=new Vt("angularfire2.auth-instances");function Ug(n,e){let t=wn(hl,n,e);return t&&new kn(t)}function Bg(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new kn(i)}}var qg={provide:Dn,deps:[[new fe,io]]},$g={provide:kn,useFactory:Ug,deps:[[new fe,io],Be]};function dl(n,...e){return W("angularfire",et.full,"auth"),Lt([$g,qg,{provide:io,useFactory:Bg(n),multi:!0,deps:[Ae,Mt,tt,It,[new fe,qt],...e]}])}var fl=vt(ro,!0);var pl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ml={};var Wr,gl;(function(){var n;function e(v,f){function m(){}m.prototype=f.prototype,v.D=f.prototype,v.prototype=new m,v.prototype.constructor=v,v.C=function(g,_,w){for(var p=Array(arguments.length-2),oe=2;oe<arguments.length;oe++)p[oe-2]=arguments[oe];return f.prototype[_].apply(g,p)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(v,f,m){m||(m=0);var g=Array(16);if(typeof f=="string")for(var _=0;16>_;++_)g[_]=f.charCodeAt(m++)|f.charCodeAt(m++)<<8|f.charCodeAt(m++)<<16|f.charCodeAt(m++)<<24;else for(_=0;16>_;++_)g[_]=f[m++]|f[m++]<<8|f[m++]<<16|f[m++]<<24;f=v.g[0],m=v.g[1],_=v.g[2];var w=v.g[3],p=f+(w^m&(_^w))+g[0]+3614090360&4294967295;f=m+(p<<7&4294967295|p>>>25),p=w+(_^f&(m^_))+g[1]+3905402710&4294967295,w=f+(p<<12&4294967295|p>>>20),p=_+(m^w&(f^m))+g[2]+606105819&4294967295,_=w+(p<<17&4294967295|p>>>15),p=m+(f^_&(w^f))+g[3]+3250441966&4294967295,m=_+(p<<22&4294967295|p>>>10),p=f+(w^m&(_^w))+g[4]+4118548399&4294967295,f=m+(p<<7&4294967295|p>>>25),p=w+(_^f&(m^_))+g[5]+1200080426&4294967295,w=f+(p<<12&4294967295|p>>>20),p=_+(m^w&(f^m))+g[6]+2821735955&4294967295,_=w+(p<<17&4294967295|p>>>15),p=m+(f^_&(w^f))+g[7]+4249261313&4294967295,m=_+(p<<22&4294967295|p>>>10),p=f+(w^m&(_^w))+g[8]+1770035416&4294967295,f=m+(p<<7&4294967295|p>>>25),p=w+(_^f&(m^_))+g[9]+2336552879&4294967295,w=f+(p<<12&4294967295|p>>>20),p=_+(m^w&(f^m))+g[10]+4294925233&4294967295,_=w+(p<<17&4294967295|p>>>15),p=m+(f^_&(w^f))+g[11]+2304563134&4294967295,m=_+(p<<22&4294967295|p>>>10),p=f+(w^m&(_^w))+g[12]+1804603682&4294967295,f=m+(p<<7&4294967295|p>>>25),p=w+(_^f&(m^_))+g[13]+4254626195&4294967295,w=f+(p<<12&4294967295|p>>>20),p=_+(m^w&(f^m))+g[14]+2792965006&4294967295,_=w+(p<<17&4294967295|p>>>15),p=m+(f^_&(w^f))+g[15]+1236535329&4294967295,m=_+(p<<22&4294967295|p>>>10),p=f+(_^w&(m^_))+g[1]+4129170786&4294967295,f=m+(p<<5&4294967295|p>>>27),p=w+(m^_&(f^m))+g[6]+3225465664&4294967295,w=f+(p<<9&4294967295|p>>>23),p=_+(f^m&(w^f))+g[11]+643717713&4294967295,_=w+(p<<14&4294967295|p>>>18),p=m+(w^f&(_^w))+g[0]+3921069994&4294967295,m=_+(p<<20&4294967295|p>>>12),p=f+(_^w&(m^_))+g[5]+3593408605&4294967295,f=m+(p<<5&4294967295|p>>>27),p=w+(m^_&(f^m))+g[10]+38016083&4294967295,w=f+(p<<9&4294967295|p>>>23),p=_+(f^m&(w^f))+g[15]+3634488961&4294967295,_=w+(p<<14&4294967295|p>>>18),p=m+(w^f&(_^w))+g[4]+3889429448&4294967295,m=_+(p<<20&4294967295|p>>>12),p=f+(_^w&(m^_))+g[9]+568446438&4294967295,f=m+(p<<5&4294967295|p>>>27),p=w+(m^_&(f^m))+g[14]+3275163606&4294967295,w=f+(p<<9&4294967295|p>>>23),p=_+(f^m&(w^f))+g[3]+4107603335&4294967295,_=w+(p<<14&4294967295|p>>>18),p=m+(w^f&(_^w))+g[8]+1163531501&4294967295,m=_+(p<<20&4294967295|p>>>12),p=f+(_^w&(m^_))+g[13]+2850285829&4294967295,f=m+(p<<5&4294967295|p>>>27),p=w+(m^_&(f^m))+g[2]+4243563512&4294967295,w=f+(p<<9&4294967295|p>>>23),p=_+(f^m&(w^f))+g[7]+1735328473&4294967295,_=w+(p<<14&4294967295|p>>>18),p=m+(w^f&(_^w))+g[12]+2368359562&4294967295,m=_+(p<<20&4294967295|p>>>12),p=f+(m^_^w)+g[5]+4294588738&4294967295,f=m+(p<<4&4294967295|p>>>28),p=w+(f^m^_)+g[8]+2272392833&4294967295,w=f+(p<<11&4294967295|p>>>21),p=_+(w^f^m)+g[11]+1839030562&4294967295,_=w+(p<<16&4294967295|p>>>16),p=m+(_^w^f)+g[14]+4259657740&4294967295,m=_+(p<<23&4294967295|p>>>9),p=f+(m^_^w)+g[1]+2763975236&4294967295,f=m+(p<<4&4294967295|p>>>28),p=w+(f^m^_)+g[4]+1272893353&4294967295,w=f+(p<<11&4294967295|p>>>21),p=_+(w^f^m)+g[7]+4139469664&4294967295,_=w+(p<<16&4294967295|p>>>16),p=m+(_^w^f)+g[10]+3200236656&4294967295,m=_+(p<<23&4294967295|p>>>9),p=f+(m^_^w)+g[13]+681279174&4294967295,f=m+(p<<4&4294967295|p>>>28),p=w+(f^m^_)+g[0]+3936430074&4294967295,w=f+(p<<11&4294967295|p>>>21),p=_+(w^f^m)+g[3]+3572445317&4294967295,_=w+(p<<16&4294967295|p>>>16),p=m+(_^w^f)+g[6]+76029189&4294967295,m=_+(p<<23&4294967295|p>>>9),p=f+(m^_^w)+g[9]+3654602809&4294967295,f=m+(p<<4&4294967295|p>>>28),p=w+(f^m^_)+g[12]+3873151461&4294967295,w=f+(p<<11&4294967295|p>>>21),p=_+(w^f^m)+g[15]+530742520&4294967295,_=w+(p<<16&4294967295|p>>>16),p=m+(_^w^f)+g[2]+3299628645&4294967295,m=_+(p<<23&4294967295|p>>>9),p=f+(_^(m|~w))+g[0]+4096336452&4294967295,f=m+(p<<6&4294967295|p>>>26),p=w+(m^(f|~_))+g[7]+1126891415&4294967295,w=f+(p<<10&4294967295|p>>>22),p=_+(f^(w|~m))+g[14]+2878612391&4294967295,_=w+(p<<15&4294967295|p>>>17),p=m+(w^(_|~f))+g[5]+4237533241&4294967295,m=_+(p<<21&4294967295|p>>>11),p=f+(_^(m|~w))+g[12]+1700485571&4294967295,f=m+(p<<6&4294967295|p>>>26),p=w+(m^(f|~_))+g[3]+2399980690&4294967295,w=f+(p<<10&4294967295|p>>>22),p=_+(f^(w|~m))+g[10]+4293915773&4294967295,_=w+(p<<15&4294967295|p>>>17),p=m+(w^(_|~f))+g[1]+2240044497&4294967295,m=_+(p<<21&4294967295|p>>>11),p=f+(_^(m|~w))+g[8]+1873313359&4294967295,f=m+(p<<6&4294967295|p>>>26),p=w+(m^(f|~_))+g[15]+4264355552&4294967295,w=f+(p<<10&4294967295|p>>>22),p=_+(f^(w|~m))+g[6]+2734768916&4294967295,_=w+(p<<15&4294967295|p>>>17),p=m+(w^(_|~f))+g[13]+1309151649&4294967295,m=_+(p<<21&4294967295|p>>>11),p=f+(_^(m|~w))+g[4]+4149444226&4294967295,f=m+(p<<6&4294967295|p>>>26),p=w+(m^(f|~_))+g[11]+3174756917&4294967295,w=f+(p<<10&4294967295|p>>>22),p=_+(f^(w|~m))+g[2]+718787259&4294967295,_=w+(p<<15&4294967295|p>>>17),p=m+(w^(_|~f))+g[9]+3951481745&4294967295,v.g[0]=v.g[0]+f&4294967295,v.g[1]=v.g[1]+(_+(p<<21&4294967295|p>>>11))&4294967295,v.g[2]=v.g[2]+_&4294967295,v.g[3]=v.g[3]+w&4294967295}i.prototype.u=function(v,f){f===void 0&&(f=v.length);for(var m=f-this.blockSize,g=this.B,_=this.h,w=0;w<f;){if(_==0)for(;w<=m;)s(this,v,w),w+=this.blockSize;if(typeof v=="string"){for(;w<f;)if(g[_++]=v.charCodeAt(w++),_==this.blockSize){s(this,g),_=0;break}}else for(;w<f;)if(g[_++]=v[w++],_==this.blockSize){s(this,g),_=0;break}}this.h=_,this.o+=f},i.prototype.v=function(){var v=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);v[0]=128;for(var f=1;f<v.length-8;++f)v[f]=0;var m=8*this.o;for(f=v.length-8;f<v.length;++f)v[f]=m&255,m/=256;for(this.u(v),v=Array(16),f=m=0;4>f;++f)for(var g=0;32>g;g+=8)v[m++]=this.g[f]>>>g&255;return v};function a(v,f){var m=h;return Object.prototype.hasOwnProperty.call(m,v)?m[v]:m[v]=f(v)}function u(v,f){this.h=f;for(var m=[],g=!0,_=v.length-1;0<=_;_--){var w=v[_]|0;g&&w==f||(m[_]=w,g=!1)}this.g=m}var h={};function d(v){return-128<=v&&128>v?a(v,function(f){return new u([f|0],0>f?-1:0)}):new u([v|0],0>v?-1:0)}function y(v){if(isNaN(v)||!isFinite(v))return A;if(0>v)return C(y(-v));for(var f=[],m=1,g=0;v>=m;g++)f[g]=v/m|0,m*=4294967296;return new u(f,0)}function b(v,f){if(v.length==0)throw Error("number format error: empty string");if(f=f||10,2>f||36<f)throw Error("radix out of range: "+f);if(v.charAt(0)=="-")return C(b(v.substring(1),f));if(0<=v.indexOf("-"))throw Error('number format error: interior "-" character');for(var m=y(Math.pow(f,8)),g=A,_=0;_<v.length;_+=8){var w=Math.min(8,v.length-_),p=parseInt(v.substring(_,_+w),f);8>w?(w=y(Math.pow(f,w)),g=g.j(w).add(y(p))):(g=g.j(m),g=g.add(y(p)))}return g}var A=d(0),T=d(1),P=d(16777216);n=u.prototype,n.m=function(){if(k(this))return-C(this).m();for(var v=0,f=1,m=0;m<this.g.length;m++){var g=this.i(m);v+=(0<=g?g:4294967296+g)*f,f*=4294967296}return v},n.toString=function(v){if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(R(this))return"0";if(k(this))return"-"+C(this).toString(v);for(var f=y(Math.pow(v,6)),m=this,g="";;){var _=ne(m,f).g;m=N(m,_.j(f));var w=((0<m.g.length?m.g[0]:m.h)>>>0).toString(v);if(m=_,R(m))return w+g;for(;6>w.length;)w="0"+w;g=w+g}},n.i=function(v){return 0>v?0:v<this.g.length?this.g[v]:this.h};function R(v){if(v.h!=0)return!1;for(var f=0;f<v.g.length;f++)if(v.g[f]!=0)return!1;return!0}function k(v){return v.h==-1}n.l=function(v){return v=N(this,v),k(v)?-1:R(v)?0:1};function C(v){for(var f=v.g.length,m=[],g=0;g<f;g++)m[g]=~v.g[g];return new u(m,~v.h).add(T)}n.abs=function(){return k(this)?C(this):this},n.add=function(v){for(var f=Math.max(this.g.length,v.g.length),m=[],g=0,_=0;_<=f;_++){var w=g+(this.i(_)&65535)+(v.i(_)&65535),p=(w>>>16)+(this.i(_)>>>16)+(v.i(_)>>>16);g=p>>>16,w&=65535,p&=65535,m[_]=p<<16|w}return new u(m,m[m.length-1]&-2147483648?-1:0)};function N(v,f){return v.add(C(f))}n.j=function(v){if(R(this)||R(v))return A;if(k(this))return k(v)?C(this).j(C(v)):C(C(this).j(v));if(k(v))return C(this.j(C(v)));if(0>this.l(P)&&0>v.l(P))return y(this.m()*v.m());for(var f=this.g.length+v.g.length,m=[],g=0;g<2*f;g++)m[g]=0;for(g=0;g<this.g.length;g++)for(var _=0;_<v.g.length;_++){var w=this.i(g)>>>16,p=this.i(g)&65535,oe=v.i(_)>>>16,be=v.i(_)&65535;m[2*g+2*_]+=p*be,U(m,2*g+2*_),m[2*g+2*_+1]+=w*be,U(m,2*g+2*_+1),m[2*g+2*_+1]+=p*oe,U(m,2*g+2*_+1),m[2*g+2*_+2]+=w*oe,U(m,2*g+2*_+2)}for(g=0;g<f;g++)m[g]=m[2*g+1]<<16|m[2*g];for(g=f;g<2*f;g++)m[g]=0;return new u(m,0)};function U(v,f){for(;(v[f]&65535)!=v[f];)v[f+1]+=v[f]>>>16,v[f]&=65535,f++}function $(v,f){this.g=v,this.h=f}function ne(v,f){if(R(f))throw Error("division by zero");if(R(v))return new $(A,A);if(k(v))return f=ne(C(v),f),new $(C(f.g),C(f.h));if(k(f))return f=ne(v,C(f)),new $(C(f.g),f.h);if(30<v.g.length){if(k(v)||k(f))throw Error("slowDivide_ only works with positive integers.");for(var m=T,g=f;0>=g.l(v);)m=xe(m),g=xe(g);var _=Y(m,1),w=Y(g,1);for(g=Y(g,2),m=Y(m,2);!R(g);){var p=w.add(g);0>=p.l(v)&&(_=_.add(m),w=p),g=Y(g,1),m=Y(m,1)}return f=N(v,_.j(f)),new $(_,f)}for(_=A;0<=v.l(f);){for(m=Math.max(1,Math.floor(v.m()/f.m())),g=Math.ceil(Math.log(m)/Math.LN2),g=48>=g?1:Math.pow(2,g-48),w=y(m),p=w.j(f);k(p)||0<p.l(v);)m-=g,w=y(m),p=w.j(f);R(w)&&(w=T),_=_.add(w),v=N(v,p)}return new $(_,v)}n.A=function(v){return ne(this,v).h},n.and=function(v){for(var f=Math.max(this.g.length,v.g.length),m=[],g=0;g<f;g++)m[g]=this.i(g)&v.i(g);return new u(m,this.h&v.h)},n.or=function(v){for(var f=Math.max(this.g.length,v.g.length),m=[],g=0;g<f;g++)m[g]=this.i(g)|v.i(g);return new u(m,this.h|v.h)},n.xor=function(v){for(var f=Math.max(this.g.length,v.g.length),m=[],g=0;g<f;g++)m[g]=this.i(g)^v.i(g);return new u(m,this.h^v.h)};function xe(v){for(var f=v.g.length+1,m=[],g=0;g<f;g++)m[g]=v.i(g)<<1|v.i(g-1)>>>31;return new u(m,v.h)}function Y(v,f){var m=f>>5;f%=32;for(var g=v.g.length-m,_=[],w=0;w<g;w++)_[w]=0<f?v.i(w+m)>>>f|v.i(w+m+1)<<32-f:v.i(w+m);return new u(_,v.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,gl=ml.Md5=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=y,u.fromString=b,Wr=ml.Integer=u}).apply(typeof pl<"u"?pl:typeof self<"u"?self:typeof window<"u"?window:{});var Gr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},je={};var _l,jg,yl,vl,Il,wl,El,Tl,bl;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(r,o,c){return r==Array.prototype||r==Object.prototype||(r[o]=c.value),r};function t(r){r=[typeof globalThis=="object"&&globalThis,r,typeof window=="object"&&window,typeof self=="object"&&self,typeof Gr=="object"&&Gr];for(var o=0;o<r.length;++o){var c=r[o];if(c&&c.Math==Math)return c}throw Error("Cannot find global object")}var i=t(this);function s(r,o){if(o)e:{var c=i;r=r.split(".");for(var l=0;l<r.length-1;l++){var I=r[l];if(!(I in c))break e;c=c[I]}r=r[r.length-1],l=c[r],o=o(l),o!=l&&o!=null&&e(c,r,{configurable:!0,writable:!0,value:o})}}function a(r,o){r instanceof String&&(r+="");var c=0,l=!1,I={next:function(){if(!l&&c<r.length){var E=c++;return{value:o(E,r[E]),done:!1}}return l=!0,{done:!0,value:void 0}}};return I[Symbol.iterator]=function(){return I},I}s("Array.prototype.values",function(r){return r||function(){return a(this,function(o,c){return c})}});var u=u||{},h=this||self;function d(r){var o=typeof r;return o=o!="object"?o:r?Array.isArray(r)?"array":o:"null",o=="array"||o=="object"&&typeof r.length=="number"}function y(r){var o=typeof r;return o=="object"&&r!=null||o=="function"}function b(r,o,c){return r.call.apply(r.bind,arguments)}function A(r,o,c){if(!r)throw Error();if(2<arguments.length){var l=Array.prototype.slice.call(arguments,2);return function(){var I=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(I,l),r.apply(o,I)}}return function(){return r.apply(o,arguments)}}function T(r,o,c){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?b:A,T.apply(null,arguments)}function P(r,o){var c=Array.prototype.slice.call(arguments,1);return function(){var l=c.slice();return l.push.apply(l,arguments),r.apply(this,l)}}function R(r,o){function c(){}c.prototype=o.prototype,r.aa=o.prototype,r.prototype=new c,r.prototype.constructor=r,r.Qb=function(l,I,E){for(var S=Array(arguments.length-2),B=2;B<arguments.length;B++)S[B-2]=arguments[B];return o.prototype[I].apply(l,S)}}function k(r){let o=r.length;if(0<o){let c=Array(o);for(let l=0;l<o;l++)c[l]=r[l];return c}return[]}function C(r,o){for(let c=1;c<arguments.length;c++){let l=arguments[c];if(d(l)){let I=r.length||0,E=l.length||0;r.length=I+E;for(let S=0;S<E;S++)r[I+S]=l[S]}else r.push(l)}}class N{constructor(o,c){this.i=o,this.j=c,this.h=0,this.g=null}get(){let o;return 0<this.h?(this.h--,o=this.g,this.g=o.next,o.next=null):o=this.i(),o}}function U(r){return/^[\s\xa0]*$/.test(r)}function $(){var r=h.navigator;return r&&(r=r.userAgent)?r:""}function ne(r){return ne[" "](r),r}ne[" "]=function(){};var xe=$().indexOf("Gecko")!=-1&&!($().toLowerCase().indexOf("webkit")!=-1&&$().indexOf("Edge")==-1)&&!($().indexOf("Trident")!=-1||$().indexOf("MSIE")!=-1)&&$().indexOf("Edge")==-1;function Y(r,o,c){for(let l in r)o.call(c,r[l],l,r)}function v(r,o){for(let c in r)o.call(void 0,r[c],c,r)}function f(r){let o={};for(let c in r)o[c]=r[c];return o}let m="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function g(r,o){let c,l;for(let I=1;I<arguments.length;I++){l=arguments[I];for(c in l)r[c]=l[c];for(let E=0;E<m.length;E++)c=m[E],Object.prototype.hasOwnProperty.call(l,c)&&(r[c]=l[c])}}function _(r){var o=1;r=r.split(":");let c=[];for(;0<o&&r.length;)c.push(r.shift()),o--;return r.length&&c.push(r.join(":")),c}function w(r){h.setTimeout(()=>{throw r},0)}function p(){var r=Ve;let o=null;return r.g&&(o=r.g,r.g=r.g.next,r.g||(r.h=null),o.next=null),o}class oe{constructor(){this.h=this.g=null}add(o,c){let l=be.get();l.set(o,c),this.h?this.h.next=l:this.g=l,this.h=l}}var be=new N(()=>new Hn,r=>r.reset());class Hn{constructor(){this.next=this.g=this.h=null}set(o,c){this.h=o,this.g=c,this.next=null}reset(){this.next=this.g=this.h=null}}let He,he=!1,Ve=new oe,Ct=()=>{let r=h.Promise.resolve(void 0);He=()=>{r.then(Kn)}};var Kn=()=>{for(var r;r=p();){try{r.h.call(r.g)}catch(c){w(c)}var o=be;o.j(r),100>o.h&&(o.h++,r.next=o.g,o.g=r)}he=!1};function _e(){this.s=this.s,this.C=this.C}_e.prototype.s=!1,_e.prototype.ma=function(){this.s||(this.s=!0,this.N())},_e.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function J(r,o){this.type=r,this.g=this.target=o,this.defaultPrevented=!1}J.prototype.h=function(){this.defaultPrevented=!0};var qh=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var r=!1,o=Object.defineProperty({},"passive",{get:function(){r=!0}});try{let c=()=>{};h.addEventListener("test",c,o),h.removeEventListener("test",c,o)}catch{}return r})();function Xt(r,o){if(J.call(this,r?r.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,r){var c=this.type=r.type,l=r.changedTouches&&r.changedTouches.length?r.changedTouches[0]:null;if(this.target=r.target||r.srcElement,this.g=o,o=r.relatedTarget){if(xe){e:{try{ne(o.nodeName);var I=!0;break e}catch{}I=!1}I||(o=null)}}else c=="mouseover"?o=r.fromElement:c=="mouseout"&&(o=r.toElement);this.relatedTarget=o,l?(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0):(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0),this.button=r.button,this.key=r.key||"",this.ctrlKey=r.ctrlKey,this.altKey=r.altKey,this.shiftKey=r.shiftKey,this.metaKey=r.metaKey,this.pointerId=r.pointerId||0,this.pointerType=typeof r.pointerType=="string"?r.pointerType:$h[r.pointerType]||"",this.state=r.state,this.i=r,r.defaultPrevented&&Xt.aa.h.call(this)}}R(Xt,J);var $h={2:"touch",3:"pen",4:"mouse"};Xt.prototype.h=function(){Xt.aa.h.call(this);var r=this.i;r.preventDefault?r.preventDefault():r.returnValue=!1};var Zt="closure_listenable_"+(1e6*Math.random()|0),jh=0;function zh(r,o,c,l,I){this.listener=r,this.proxy=null,this.src=o,this.type=c,this.capture=!!l,this.ha=I,this.key=++jh,this.da=this.fa=!1}function Qn(r){r.da=!0,r.listener=null,r.proxy=null,r.src=null,r.ha=null}function Yn(r){this.src=r,this.g={},this.h=0}Yn.prototype.add=function(r,o,c,l,I){var E=r.toString();r=this.g[E],r||(r=this.g[E]=[],this.h++);var S=vi(r,o,l,I);return-1<S?(o=r[S],c||(o.fa=!1)):(o=new zh(o,this.src,E,!!l,I),o.fa=c,r.push(o)),o};function yi(r,o){var c=o.type;if(c in r.g){var l=r.g[c],I=Array.prototype.indexOf.call(l,o,void 0),E;(E=0<=I)&&Array.prototype.splice.call(l,I,1),E&&(Qn(o),r.g[c].length==0&&(delete r.g[c],r.h--))}}function vi(r,o,c,l){for(var I=0;I<r.length;++I){var E=r[I];if(!E.da&&E.listener==o&&E.capture==!!c&&E.ha==l)return I}return-1}var Ii="closure_lm_"+(1e6*Math.random()|0),wi={};function Jo(r,o,c,l,I){if(l&&l.once)return Zo(r,o,c,l,I);if(Array.isArray(o)){for(var E=0;E<o.length;E++)Jo(r,o[E],c,l,I);return null}return c=Ai(c),r&&r[Zt]?r.K(o,c,y(l)?!!l.capture:!!l,I):Xo(r,o,c,!1,l,I)}function Xo(r,o,c,l,I,E){if(!o)throw Error("Invalid event type");var S=y(I)?!!I.capture:!!I,B=Ti(r);if(B||(r[Ii]=B=new Yn(r)),c=B.add(o,c,l,S,E),c.proxy)return c;if(l=Wh(),c.proxy=l,l.src=r,l.listener=c,r.addEventListener)qh||(I=S),I===void 0&&(I=!1),r.addEventListener(o.toString(),l,I);else if(r.attachEvent)r.attachEvent(ta(o.toString()),l);else if(r.addListener&&r.removeListener)r.addListener(l);else throw Error("addEventListener and attachEvent are unavailable.");return c}function Wh(){function r(c){return o.call(r.src,r.listener,c)}let o=Gh;return r}function Zo(r,o,c,l,I){if(Array.isArray(o)){for(var E=0;E<o.length;E++)Zo(r,o[E],c,l,I);return null}return c=Ai(c),r&&r[Zt]?r.L(o,c,y(l)?!!l.capture:!!l,I):Xo(r,o,c,!0,l,I)}function ea(r,o,c,l,I){if(Array.isArray(o))for(var E=0;E<o.length;E++)ea(r,o[E],c,l,I);else l=y(l)?!!l.capture:!!l,c=Ai(c),r&&r[Zt]?(r=r.i,o=String(o).toString(),o in r.g&&(E=r.g[o],c=vi(E,c,l,I),-1<c&&(Qn(E[c]),Array.prototype.splice.call(E,c,1),E.length==0&&(delete r.g[o],r.h--)))):r&&(r=Ti(r))&&(o=r.g[o.toString()],r=-1,o&&(r=vi(o,c,l,I)),(c=-1<r?o[r]:null)&&Ei(c))}function Ei(r){if(typeof r!="number"&&r&&!r.da){var o=r.src;if(o&&o[Zt])yi(o.i,r);else{var c=r.type,l=r.proxy;o.removeEventListener?o.removeEventListener(c,l,r.capture):o.detachEvent?o.detachEvent(ta(c),l):o.addListener&&o.removeListener&&o.removeListener(l),(c=Ti(o))?(yi(c,r),c.h==0&&(c.src=null,o[Ii]=null)):Qn(r)}}}function ta(r){return r in wi?wi[r]:wi[r]="on"+r}function Gh(r,o){if(r.da)r=!0;else{o=new Xt(o,this);var c=r.listener,l=r.ha||r.src;r.fa&&Ei(r),r=c.call(l,o)}return r}function Ti(r){return r=r[Ii],r instanceof Yn?r:null}var bi="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ai(r){return typeof r=="function"?r:(r[bi]||(r[bi]=function(o){return r.handleEvent(o)}),r[bi])}function X(){_e.call(this),this.i=new Yn(this),this.M=this,this.F=null}R(X,_e),X.prototype[Zt]=!0,X.prototype.removeEventListener=function(r,o,c,l){ea(this,r,o,c,l)};function re(r,o){var c,l=r.F;if(l)for(c=[];l;l=l.F)c.push(l);if(r=r.M,l=o.type||o,typeof o=="string")o=new J(o,r);else if(o instanceof J)o.target=o.target||r;else{var I=o;o=new J(l,r),g(o,I)}if(I=!0,c)for(var E=c.length-1;0<=E;E--){var S=o.g=c[E];I=Jn(S,l,!0,o)&&I}if(S=o.g=r,I=Jn(S,l,!0,o)&&I,I=Jn(S,l,!1,o)&&I,c)for(E=0;E<c.length;E++)S=o.g=c[E],I=Jn(S,l,!1,o)&&I}X.prototype.N=function(){if(X.aa.N.call(this),this.i){var r=this.i,o;for(o in r.g){for(var c=r.g[o],l=0;l<c.length;l++)Qn(c[l]);delete r.g[o],r.h--}}this.F=null},X.prototype.K=function(r,o,c,l){return this.i.add(String(r),o,!1,c,l)},X.prototype.L=function(r,o,c,l){return this.i.add(String(r),o,!0,c,l)};function Jn(r,o,c,l){if(o=r.i.g[String(o)],!o)return!0;o=o.concat();for(var I=!0,E=0;E<o.length;++E){var S=o[E];if(S&&!S.da&&S.capture==c){var B=S.listener,H=S.ha||S.src;S.fa&&yi(r.i,S),I=B.call(H,l)!==!1&&I}}return I&&!l.defaultPrevented}function na(r,o,c){if(typeof r=="function")c&&(r=T(r,c));else if(r&&typeof r.handleEvent=="function")r=T(r.handleEvent,r);else throw Error("Invalid listener argument");return 2147483647<Number(o)?-1:h.setTimeout(r,o||0)}function ra(r){r.g=na(()=>{r.g=null,r.i&&(r.i=!1,ra(r))},r.l);let o=r.h;r.h=null,r.m.apply(null,o)}class Hh extends _e{constructor(o,c){super(),this.m=o,this.l=c,this.h=null,this.i=!1,this.g=null}j(o){this.h=arguments,this.g?this.i=!0:ra(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function en(r){_e.call(this),this.h=r,this.g={}}R(en,_e);var ia=[];function sa(r){Y(r.g,function(o,c){this.g.hasOwnProperty(c)&&Ei(o)},r),r.g={}}en.prototype.N=function(){en.aa.N.call(this),sa(this)},en.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Si=h.JSON.stringify,Kh=h.JSON.parse,Qh=class{stringify(r){return h.JSON.stringify(r,void 0)}parse(r){return h.JSON.parse(r,void 0)}};function Ri(){}Ri.prototype.h=null;function oa(r){return r.h||(r.h=r.i())}function aa(){}var tn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Pi(){J.call(this,"d")}R(Pi,J);function Ci(){J.call(this,"c")}R(Ci,J);var ut={},ca=null;function Xn(){return ca=ca||new X}ut.La="serverreachability";function ua(r){J.call(this,ut.La,r)}R(ua,J);function nn(r){let o=Xn();re(o,new ua(o))}ut.STAT_EVENT="statevent";function la(r,o){J.call(this,ut.STAT_EVENT,r),this.stat=o}R(la,J);function ie(r){let o=Xn();re(o,new la(o,r))}ut.Ma="timingevent";function ha(r,o){J.call(this,ut.Ma,r),this.size=o}R(ha,J);function rn(r,o){if(typeof r!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){r()},o)}function sn(){this.g=!0}sn.prototype.xa=function(){this.g=!1};function Yh(r,o,c,l,I,E){r.info(function(){if(r.g)if(E)for(var S="",B=E.split("&"),H=0;H<B.length;H++){var M=B[H].split("=");if(1<M.length){var Z=M[0];M=M[1];var ee=Z.split("_");S=2<=ee.length&&ee[1]=="type"?S+(Z+"="+M+"&"):S+(Z+"=redacted&")}}else S=null;else S=E;return"XMLHTTP REQ ("+l+") [attempt "+I+"]: "+o+`
`+c+`
`+S})}function Jh(r,o,c,l,I,E,S){r.info(function(){return"XMLHTTP RESP ("+l+") [ attempt "+I+"]: "+o+`
`+c+`
`+E+" "+S})}function kt(r,o,c,l){r.info(function(){return"XMLHTTP TEXT ("+o+"): "+Zh(r,c)+(l?" "+l:"")})}function Xh(r,o){r.info(function(){return"TIMEOUT: "+o})}sn.prototype.info=function(){};function Zh(r,o){if(!r.g)return o;if(!o)return null;try{var c=JSON.parse(o);if(c){for(r=0;r<c.length;r++)if(Array.isArray(c[r])){var l=c[r];if(!(2>l.length)){var I=l[1];if(Array.isArray(I)&&!(1>I.length)){var E=I[0];if(E!="noop"&&E!="stop"&&E!="close")for(var S=1;S<I.length;S++)I[S]=""}}}}return Si(c)}catch{return o}}var Zn={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},da={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ki;function er(){}R(er,Ri),er.prototype.g=function(){return new XMLHttpRequest},er.prototype.i=function(){return{}},ki=new er;function Ke(r,o,c,l){this.j=r,this.i=o,this.l=c,this.R=l||1,this.U=new en(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new fa}function fa(){this.i=null,this.g="",this.h=!1}var pa={},Di={};function Ni(r,o,c){r.L=1,r.v=ir(Le(o)),r.m=c,r.P=!0,ma(r,null)}function ma(r,o){r.F=Date.now(),tr(r),r.A=Le(r.v);var c=r.A,l=r.R;Array.isArray(l)||(l=[String(l)]),Ca(c.i,"t",l),r.C=0,c=r.j.J,r.h=new fa,r.g=Ha(r.j,c?o:null,!r.m),0<r.O&&(r.M=new Hh(T(r.Y,r,r.g),r.O)),o=r.U,c=r.g,l=r.ca;var I="readystatechange";Array.isArray(I)||(I&&(ia[0]=I.toString()),I=ia);for(var E=0;E<I.length;E++){var S=Jo(c,I[E],l||o.handleEvent,!1,o.h||o);if(!S)break;o.g[S.key]=S}o=r.H?f(r.H):{},r.m?(r.u||(r.u="POST"),o["Content-Type"]="application/x-www-form-urlencoded",r.g.ea(r.A,r.u,r.m,o)):(r.u="GET",r.g.ea(r.A,r.u,null,o)),nn(),Yh(r.i,r.u,r.A,r.l,r.R,r.m)}Ke.prototype.ca=function(r){r=r.target;let o=this.M;o&&Me(r)==3?o.j():this.Y(r)},Ke.prototype.Y=function(r){try{if(r==this.g)e:{let ee=Me(this.g);var o=this.g.Ba();let Ot=this.g.Z();if(!(3>ee)&&(ee!=3||this.g&&(this.h.h||this.g.oa()||La(this.g)))){this.J||ee!=4||o==7||(o==8||0>=Ot?nn(3):nn(2)),Oi(this);var c=this.g.Z();this.X=c;t:if(ga(this)){var l=La(this.g);r="";var I=l.length,E=Me(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){lt(this),on(this);var S="";break t}this.h.i=new h.TextDecoder}for(o=0;o<I;o++)this.h.h=!0,r+=this.h.i.decode(l[o],{stream:!(E&&o==I-1)});l.length=0,this.h.g+=r,this.C=0,S=this.h.g}else S=this.g.oa();if(this.o=c==200,Jh(this.i,this.u,this.A,this.l,this.R,ee,c),this.o){if(this.T&&!this.K){t:{if(this.g){var B,H=this.g;if((B=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!U(B)){var M=B;break t}}M=null}if(c=M)kt(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,xi(this,c);else{this.o=!1,this.s=3,ie(12),lt(this),on(this);break e}}if(this.P){c=!0;let ye;for(;!this.J&&this.C<S.length;)if(ye=ed(this,S),ye==Di){ee==4&&(this.s=4,ie(14),c=!1),kt(this.i,this.l,null,"[Incomplete Response]");break}else if(ye==pa){this.s=4,ie(15),kt(this.i,this.l,S,"[Invalid Chunk]"),c=!1;break}else kt(this.i,this.l,ye,null),xi(this,ye);if(ga(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ee!=4||S.length!=0||this.h.h||(this.s=1,ie(16),c=!1),this.o=this.o&&c,!c)kt(this.i,this.l,S,"[Invalid Chunked Response]"),lt(this),on(this);else if(0<S.length&&!this.W){this.W=!0;var Z=this.j;Z.g==this&&Z.ba&&!Z.M&&(Z.j.info("Great, no buffering proxy detected. Bytes received: "+S.length),Bi(Z),Z.M=!0,ie(11))}}else kt(this.i,this.l,S,null),xi(this,S);ee==4&&lt(this),this.o&&!this.J&&(ee==4?ja(this.j,this):(this.o=!1,tr(this)))}else _d(this.g),c==400&&0<S.indexOf("Unknown SID")?(this.s=3,ie(12)):(this.s=0,ie(13)),lt(this),on(this)}}}catch{}};function ga(r){return r.g?r.u=="GET"&&r.L!=2&&r.j.Ca:!1}function ed(r,o){var c=r.C,l=o.indexOf(`
`,c);return l==-1?Di:(c=Number(o.substring(c,l)),isNaN(c)?pa:(l+=1,l+c>o.length?Di:(o=o.slice(l,l+c),r.C=l+c,o)))}Ke.prototype.cancel=function(){this.J=!0,lt(this)};function tr(r){r.S=Date.now()+r.I,_a(r,r.I)}function _a(r,o){if(r.B!=null)throw Error("WatchDog timer not null");r.B=rn(T(r.ba,r),o)}function Oi(r){r.B&&(h.clearTimeout(r.B),r.B=null)}Ke.prototype.ba=function(){this.B=null;let r=Date.now();0<=r-this.S?(Xh(this.i,this.A),this.L!=2&&(nn(),ie(17)),lt(this),this.s=2,on(this)):_a(this,this.S-r)};function on(r){r.j.G==0||r.J||ja(r.j,r)}function lt(r){Oi(r);var o=r.M;o&&typeof o.ma=="function"&&o.ma(),r.M=null,sa(r.U),r.g&&(o=r.g,r.g=null,o.abort(),o.ma())}function xi(r,o){try{var c=r.j;if(c.G!=0&&(c.g==r||Vi(c.h,r))){if(!r.K&&Vi(c.h,r)&&c.G==3){try{var l=c.Da.g.parse(o)}catch{l=null}if(Array.isArray(l)&&l.length==3){var I=l;if(I[0]==0){e:if(!c.u){if(c.g)if(c.g.F+3e3<r.F)ur(c),ar(c);else break e;Ui(c),ie(18)}}else c.za=I[1],0<c.za-c.T&&37500>I[2]&&c.F&&c.v==0&&!c.C&&(c.C=rn(T(c.Za,c),6e3));if(1>=Ia(c.h)&&c.ca){try{c.ca()}catch{}c.ca=void 0}}else dt(c,11)}else if((r.K||c.g==r)&&ur(c),!U(o))for(I=c.Da.g.parse(o),o=0;o<I.length;o++){let M=I[o];if(c.T=M[0],M=M[1],c.G==2)if(M[0]=="c"){c.K=M[1],c.ia=M[2];let Z=M[3];Z!=null&&(c.la=Z,c.j.info("VER="+c.la));let ee=M[4];ee!=null&&(c.Aa=ee,c.j.info("SVER="+c.Aa));let Ot=M[5];Ot!=null&&typeof Ot=="number"&&0<Ot&&(l=1.5*Ot,c.L=l,c.j.info("backChannelRequestTimeoutMs_="+l)),l=c;let ye=r.g;if(ye){let hr=ye.g?ye.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(hr){var E=l.h;E.g||hr.indexOf("spdy")==-1&&hr.indexOf("quic")==-1&&hr.indexOf("h2")==-1||(E.j=E.l,E.g=new Set,E.h&&(Li(E,E.h),E.h=null))}if(l.D){let qi=ye.g?ye.g.getResponseHeader("X-HTTP-Session-Id"):null;qi&&(l.ya=qi,q(l.I,l.D,qi))}}c.G=3,c.l&&c.l.ua(),c.ba&&(c.R=Date.now()-r.F,c.j.info("Handshake RTT: "+c.R+"ms")),l=c;var S=r;if(l.qa=Ga(l,l.J?l.ia:null,l.W),S.K){wa(l.h,S);var B=S,H=l.L;H&&(B.I=H),B.B&&(Oi(B),tr(B)),l.g=S}else qa(l);0<c.i.length&&cr(c)}else M[0]!="stop"&&M[0]!="close"||dt(c,7);else c.G==3&&(M[0]=="stop"||M[0]=="close"?M[0]=="stop"?dt(c,7):Fi(c):M[0]!="noop"&&c.l&&c.l.ta(M),c.v=0)}}nn(4)}catch{}}var td=class{constructor(r,o){this.g=r,this.map=o}};function ya(r){this.l=r||10,h.PerformanceNavigationTiming?(r=h.performance.getEntriesByType("navigation"),r=0<r.length&&(r[0].nextHopProtocol=="hq"||r[0].nextHopProtocol=="h2")):r=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=r?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function va(r){return r.h?!0:r.g?r.g.size>=r.j:!1}function Ia(r){return r.h?1:r.g?r.g.size:0}function Vi(r,o){return r.h?r.h==o:r.g?r.g.has(o):!1}function Li(r,o){r.g?r.g.add(o):r.h=o}function wa(r,o){r.h&&r.h==o?r.h=null:r.g&&r.g.has(o)&&r.g.delete(o)}ya.prototype.cancel=function(){if(this.i=Ea(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let r of this.g.values())r.cancel();this.g.clear()}};function Ea(r){if(r.h!=null)return r.i.concat(r.h.D);if(r.g!=null&&r.g.size!==0){let o=r.i;for(let c of r.g.values())o=o.concat(c.D);return o}return k(r.i)}function nd(r){if(r.V&&typeof r.V=="function")return r.V();if(typeof Map<"u"&&r instanceof Map||typeof Set<"u"&&r instanceof Set)return Array.from(r.values());if(typeof r=="string")return r.split("");if(d(r)){for(var o=[],c=r.length,l=0;l<c;l++)o.push(r[l]);return o}o=[],c=0;for(l in r)o[c++]=r[l];return o}function rd(r){if(r.na&&typeof r.na=="function")return r.na();if(!r.V||typeof r.V!="function"){if(typeof Map<"u"&&r instanceof Map)return Array.from(r.keys());if(!(typeof Set<"u"&&r instanceof Set)){if(d(r)||typeof r=="string"){var o=[];r=r.length;for(var c=0;c<r;c++)o.push(c);return o}o=[],c=0;for(let l in r)o[c++]=l;return o}}}function Ta(r,o){if(r.forEach&&typeof r.forEach=="function")r.forEach(o,void 0);else if(d(r)||typeof r=="string")Array.prototype.forEach.call(r,o,void 0);else for(var c=rd(r),l=nd(r),I=l.length,E=0;E<I;E++)o.call(void 0,l[E],c&&c[E],r)}var ba=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function id(r,o){if(r){r=r.split("&");for(var c=0;c<r.length;c++){var l=r[c].indexOf("="),I=null;if(0<=l){var E=r[c].substring(0,l);I=r[c].substring(l+1)}else E=r[c];o(E,I?decodeURIComponent(I.replace(/\+/g," ")):"")}}}function ht(r){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,r instanceof ht){this.h=r.h,nr(this,r.j),this.o=r.o,this.g=r.g,rr(this,r.s),this.l=r.l;var o=r.i,c=new un;c.i=o.i,o.g&&(c.g=new Map(o.g),c.h=o.h),Aa(this,c),this.m=r.m}else r&&(o=String(r).match(ba))?(this.h=!1,nr(this,o[1]||"",!0),this.o=an(o[2]||""),this.g=an(o[3]||"",!0),rr(this,o[4]),this.l=an(o[5]||"",!0),Aa(this,o[6]||"",!0),this.m=an(o[7]||"")):(this.h=!1,this.i=new un(null,this.h))}ht.prototype.toString=function(){var r=[],o=this.j;o&&r.push(cn(o,Sa,!0),":");var c=this.g;return(c||o=="file")&&(r.push("//"),(o=this.o)&&r.push(cn(o,Sa,!0),"@"),r.push(encodeURIComponent(String(c)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c=this.s,c!=null&&r.push(":",String(c))),(c=this.l)&&(this.g&&c.charAt(0)!="/"&&r.push("/"),r.push(cn(c,c.charAt(0)=="/"?ad:od,!0))),(c=this.i.toString())&&r.push("?",c),(c=this.m)&&r.push("#",cn(c,ud)),r.join("")};function Le(r){return new ht(r)}function nr(r,o,c){r.j=c?an(o,!0):o,r.j&&(r.j=r.j.replace(/:$/,""))}function rr(r,o){if(o){if(o=Number(o),isNaN(o)||0>o)throw Error("Bad port number "+o);r.s=o}else r.s=null}function Aa(r,o,c){o instanceof un?(r.i=o,ld(r.i,r.h)):(c||(o=cn(o,cd)),r.i=new un(o,r.h))}function q(r,o,c){r.i.set(o,c)}function ir(r){return q(r,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),r}function an(r,o){return r?o?decodeURI(r.replace(/%25/g,"%2525")):decodeURIComponent(r):""}function cn(r,o,c){return typeof r=="string"?(r=encodeURI(r).replace(o,sd),c&&(r=r.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),r):null}function sd(r){return r=r.charCodeAt(0),"%"+(r>>4&15).toString(16)+(r&15).toString(16)}var Sa=/[#\/\?@]/g,od=/[#\?:]/g,ad=/[#\?]/g,cd=/[#\?@]/g,ud=/#/g;function un(r,o){this.h=this.g=null,this.i=r||null,this.j=!!o}function Qe(r){r.g||(r.g=new Map,r.h=0,r.i&&id(r.i,function(o,c){r.add(decodeURIComponent(o.replace(/\+/g," ")),c)}))}n=un.prototype,n.add=function(r,o){Qe(this),this.i=null,r=Dt(this,r);var c=this.g.get(r);return c||this.g.set(r,c=[]),c.push(o),this.h+=1,this};function Ra(r,o){Qe(r),o=Dt(r,o),r.g.has(o)&&(r.i=null,r.h-=r.g.get(o).length,r.g.delete(o))}function Pa(r,o){return Qe(r),o=Dt(r,o),r.g.has(o)}n.forEach=function(r,o){Qe(this),this.g.forEach(function(c,l){c.forEach(function(I){r.call(o,I,l,this)},this)},this)},n.na=function(){Qe(this);let r=Array.from(this.g.values()),o=Array.from(this.g.keys()),c=[];for(let l=0;l<o.length;l++){let I=r[l];for(let E=0;E<I.length;E++)c.push(o[l])}return c},n.V=function(r){Qe(this);let o=[];if(typeof r=="string")Pa(this,r)&&(o=o.concat(this.g.get(Dt(this,r))));else{r=Array.from(this.g.values());for(let c=0;c<r.length;c++)o=o.concat(r[c])}return o},n.set=function(r,o){return Qe(this),this.i=null,r=Dt(this,r),Pa(this,r)&&(this.h-=this.g.get(r).length),this.g.set(r,[o]),this.h+=1,this},n.get=function(r,o){return r?(r=this.V(r),0<r.length?String(r[0]):o):o};function Ca(r,o,c){Ra(r,o),0<c.length&&(r.i=null,r.g.set(Dt(r,o),k(c)),r.h+=c.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let r=[],o=Array.from(this.g.keys());for(var c=0;c<o.length;c++){var l=o[c];let E=encodeURIComponent(String(l)),S=this.V(l);for(l=0;l<S.length;l++){var I=E;S[l]!==""&&(I+="="+encodeURIComponent(String(S[l]))),r.push(I)}}return this.i=r.join("&")};function Dt(r,o){return o=String(o),r.j&&(o=o.toLowerCase()),o}function ld(r,o){o&&!r.j&&(Qe(r),r.i=null,r.g.forEach(function(c,l){var I=l.toLowerCase();l!=I&&(Ra(this,l),Ca(this,I,c))},r)),r.j=o}function hd(r,o){let c=new sn;if(h.Image){let l=new Image;l.onload=P(Ye,c,"TestLoadImage: loaded",!0,o,l),l.onerror=P(Ye,c,"TestLoadImage: error",!1,o,l),l.onabort=P(Ye,c,"TestLoadImage: abort",!1,o,l),l.ontimeout=P(Ye,c,"TestLoadImage: timeout",!1,o,l),h.setTimeout(function(){l.ontimeout&&l.ontimeout()},1e4),l.src=r}else o(!1)}function dd(r,o){let c=new sn,l=new AbortController,I=setTimeout(()=>{l.abort(),Ye(c,"TestPingServer: timeout",!1,o)},1e4);fetch(r,{signal:l.signal}).then(E=>{clearTimeout(I),E.ok?Ye(c,"TestPingServer: ok",!0,o):Ye(c,"TestPingServer: server error",!1,o)}).catch(()=>{clearTimeout(I),Ye(c,"TestPingServer: error",!1,o)})}function Ye(r,o,c,l,I){try{I&&(I.onload=null,I.onerror=null,I.onabort=null,I.ontimeout=null),l(c)}catch{}}function fd(){this.g=new Qh}function pd(r,o,c){let l=c||"";try{Ta(r,function(I,E){let S=I;y(I)&&(S=Si(I)),o.push(l+E+"="+encodeURIComponent(S))})}catch(I){throw o.push(l+"type="+encodeURIComponent("_badmap")),I}}function ln(r){this.l=r.Ub||null,this.j=r.eb||!1}R(ln,Ri),ln.prototype.g=function(){return new sr(this.l,this.j)},ln.prototype.i=(function(r){return function(){return r}})({});function sr(r,o){X.call(this),this.D=r,this.o=o,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}R(sr,X),n=sr.prototype,n.open=function(r,o){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=r,this.A=o,this.readyState=1,dn(this)},n.send=function(r){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let o={headers:this.u,method:this.B,credentials:this.m,cache:void 0};r&&(o.body=r),(this.D||h).fetch(new Request(this.A,o)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,hn(this)),this.readyState=0},n.Sa=function(r){if(this.g&&(this.l=r,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=r.headers,this.readyState=2,dn(this)),this.g&&(this.readyState=3,dn(this),this.g)))if(this.responseType==="arraybuffer")r.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in r){if(this.j=r.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ka(this)}else r.text().then(this.Ra.bind(this),this.ga.bind(this))};function ka(r){r.j.read().then(r.Pa.bind(r)).catch(r.ga.bind(r))}n.Pa=function(r){if(this.g){if(this.o&&r.value)this.response.push(r.value);else if(!this.o){var o=r.value?r.value:new Uint8Array(0);(o=this.v.decode(o,{stream:!r.done}))&&(this.response=this.responseText+=o)}r.done?hn(this):dn(this),this.readyState==3&&ka(this)}},n.Ra=function(r){this.g&&(this.response=this.responseText=r,hn(this))},n.Qa=function(r){this.g&&(this.response=r,hn(this))},n.ga=function(){this.g&&hn(this)};function hn(r){r.readyState=4,r.l=null,r.j=null,r.v=null,dn(r)}n.setRequestHeader=function(r,o){this.u.append(r,o)},n.getResponseHeader=function(r){return this.h&&this.h.get(r.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let r=[],o=this.h.entries();for(var c=o.next();!c.done;)c=c.value,r.push(c[0]+": "+c[1]),c=o.next();return r.join(`\r
`)};function dn(r){r.onreadystatechange&&r.onreadystatechange.call(r)}Object.defineProperty(sr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(r){this.m=r?"include":"same-origin"}});function Da(r){let o="";return Y(r,function(c,l){o+=l,o+=":",o+=c,o+=`\r
`}),o}function Mi(r,o,c){e:{for(l in c){var l=!1;break e}l=!0}l||(c=Da(c),typeof r=="string"?c!=null&&encodeURIComponent(String(c)):q(r,o,c))}function z(r){X.call(this),this.headers=new Map,this.o=r||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}R(z,X);var md=/^https?$/i,gd=["POST","PUT"];n=z.prototype,n.Ha=function(r){this.J=r},n.ea=function(r,o,c,l){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+r);o=o?o.toUpperCase():"GET",this.D=r,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ki.g(),this.v=this.o?oa(this.o):oa(ki),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(o,String(r),!0),this.B=!1}catch(E){Na(this,E);return}if(r=c||"",c=new Map(this.headers),l)if(Object.getPrototypeOf(l)===Object.prototype)for(var I in l)c.set(I,l[I]);else if(typeof l.keys=="function"&&typeof l.get=="function")for(let E of l.keys())c.set(E,l.get(E));else throw Error("Unknown input type for opt_headers: "+String(l));l=Array.from(c.keys()).find(E=>E.toLowerCase()=="content-type"),I=h.FormData&&r instanceof h.FormData,!(0<=Array.prototype.indexOf.call(gd,o,void 0))||l||I||c.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[E,S]of c)this.g.setRequestHeader(E,S);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Va(this),this.u=!0,this.g.send(r),this.u=!1}catch(E){Na(this,E)}};function Na(r,o){r.h=!1,r.g&&(r.j=!0,r.g.abort(),r.j=!1),r.l=o,r.m=5,Oa(r),or(r)}function Oa(r){r.A||(r.A=!0,re(r,"complete"),re(r,"error"))}n.abort=function(r){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=r||7,re(this,"complete"),re(this,"abort"),or(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),or(this,!0)),z.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?xa(this):this.bb())},n.bb=function(){xa(this)};function xa(r){if(r.h&&typeof u<"u"&&(!r.v[1]||Me(r)!=4||r.Z()!=2)){if(r.u&&Me(r)==4)na(r.Ea,0,r);else if(re(r,"readystatechange"),Me(r)==4){r.h=!1;try{let S=r.Z();e:switch(S){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var o=!0;break e;default:o=!1}var c;if(!(c=o)){var l;if(l=S===0){var I=String(r.D).match(ba)[1]||null;!I&&h.self&&h.self.location&&(I=h.self.location.protocol.slice(0,-1)),l=!md.test(I?I.toLowerCase():"")}c=l}if(c)re(r,"complete"),re(r,"success");else{r.m=6;try{var E=2<Me(r)?r.g.statusText:""}catch{E=""}r.l=E+" ["+r.Z()+"]",Oa(r)}}finally{or(r)}}}}function or(r,o){if(r.g){Va(r);let c=r.g,l=r.v[0]?()=>{}:null;r.g=null,r.v=null,o||re(r,"ready");try{c.onreadystatechange=l}catch{}}}function Va(r){r.I&&(h.clearTimeout(r.I),r.I=null)}n.isActive=function(){return!!this.g};function Me(r){return r.g?r.g.readyState:0}n.Z=function(){try{return 2<Me(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(r){if(this.g){var o=this.g.responseText;return r&&o.indexOf(r)==0&&(o=o.substring(r.length)),Kh(o)}};function La(r){try{if(!r.g)return null;if("response"in r.g)return r.g.response;switch(r.H){case"":case"text":return r.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in r.g)return r.g.mozResponseArrayBuffer}return null}catch{return null}}function _d(r){let o={};r=(r.g&&2<=Me(r)&&r.g.getAllResponseHeaders()||"").split(`\r
`);for(let l=0;l<r.length;l++){if(U(r[l]))continue;var c=_(r[l]);let I=c[0];if(c=c[1],typeof c!="string")continue;c=c.trim();let E=o[I]||[];o[I]=E,E.push(c)}v(o,function(l){return l.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function fn(r,o,c){return c&&c.internalChannelParams&&c.internalChannelParams[r]||o}function Ma(r){this.Aa=0,this.i=[],this.j=new sn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=fn("failFast",!1,r),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=fn("baseRetryDelayMs",5e3,r),this.cb=fn("retryDelaySeedMs",1e4,r),this.Wa=fn("forwardChannelMaxRetries",2,r),this.wa=fn("forwardChannelRequestTimeoutMs",2e4,r),this.pa=r&&r.xmlHttpFactory||void 0,this.Xa=r&&r.Tb||void 0,this.Ca=r&&r.useFetchStreams||!1,this.L=void 0,this.J=r&&r.supportsCrossDomainXhr||!1,this.K="",this.h=new ya(r&&r.concurrentRequestLimit),this.Da=new fd,this.P=r&&r.fastHandshake||!1,this.O=r&&r.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=r&&r.Rb||!1,r&&r.xa&&this.j.xa(),r&&r.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&r&&r.detectBufferingProxy||!1,this.ja=void 0,r&&r.longPollingTimeout&&0<r.longPollingTimeout&&(this.ja=r.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Ma.prototype,n.la=8,n.G=1,n.connect=function(r,o,c,l){ie(0),this.W=r,this.H=o||{},c&&l!==void 0&&(this.H.OSID=c,this.H.OAID=l),this.F=this.X,this.I=Ga(this,null,this.W),cr(this)};function Fi(r){if(Fa(r),r.G==3){var o=r.U++,c=Le(r.I);if(q(c,"SID",r.K),q(c,"RID",o),q(c,"TYPE","terminate"),pn(r,c),o=new Ke(r,r.j,o),o.L=2,o.v=ir(Le(c)),c=!1,h.navigator&&h.navigator.sendBeacon)try{c=h.navigator.sendBeacon(o.v.toString(),"")}catch{}!c&&h.Image&&(new Image().src=o.v,c=!0),c||(o.g=Ha(o.j,null),o.g.ea(o.v)),o.F=Date.now(),tr(o)}Wa(r)}function ar(r){r.g&&(Bi(r),r.g.cancel(),r.g=null)}function Fa(r){ar(r),r.u&&(h.clearTimeout(r.u),r.u=null),ur(r),r.h.cancel(),r.s&&(typeof r.s=="number"&&h.clearTimeout(r.s),r.s=null)}function cr(r){if(!va(r.h)&&!r.s){r.s=!0;var o=r.Ga;He||Ct(),he||(He(),he=!0),Ve.add(o,r),r.B=0}}function yd(r,o){return Ia(r.h)>=r.h.j-(r.s?1:0)?!1:r.s?(r.i=o.D.concat(r.i),!0):r.G==1||r.G==2||r.B>=(r.Va?0:r.Wa)?!1:(r.s=rn(T(r.Ga,r,o),za(r,r.B)),r.B++,!0)}n.Ga=function(r){if(this.s)if(this.s=null,this.G==1){if(!r){this.U=Math.floor(1e5*Math.random()),r=this.U++;let I=new Ke(this,this.j,r),E=this.o;if(this.S&&(E?(E=f(E),g(E,this.S)):E=this.S),this.m!==null||this.O||(I.H=E,E=null),this.P)e:{for(var o=0,c=0;c<this.i.length;c++){t:{var l=this.i[c];if("__data__"in l.map&&(l=l.map.__data__,typeof l=="string")){l=l.length;break t}l=void 0}if(l===void 0)break;if(o+=l,4096<o){o=c;break e}if(o===4096||c===this.i.length-1){o=c+1;break e}}o=1e3}else o=1e3;o=Ba(this,I,o),c=Le(this.I),q(c,"RID",r),q(c,"CVER",22),this.D&&q(c,"X-HTTP-Session-Id",this.D),pn(this,c),E&&(this.O?o="headers="+encodeURIComponent(String(Da(E)))+"&"+o:this.m&&Mi(c,this.m,E)),Li(this.h,I),this.Ua&&q(c,"TYPE","init"),this.P?(q(c,"$req",o),q(c,"SID","null"),I.T=!0,Ni(I,c,null)):Ni(I,c,o),this.G=2}}else this.G==3&&(r?Ua(this,r):this.i.length==0||va(this.h)||Ua(this))};function Ua(r,o){var c;o?c=o.l:c=r.U++;let l=Le(r.I);q(l,"SID",r.K),q(l,"RID",c),q(l,"AID",r.T),pn(r,l),r.m&&r.o&&Mi(l,r.m,r.o),c=new Ke(r,r.j,c,r.B+1),r.m===null&&(c.H=r.o),o&&(r.i=o.D.concat(r.i)),o=Ba(r,c,1e3),c.I=Math.round(.5*r.wa)+Math.round(.5*r.wa*Math.random()),Li(r.h,c),Ni(c,l,o)}function pn(r,o){r.H&&Y(r.H,function(c,l){q(o,l,c)}),r.l&&Ta({},function(c,l){q(o,l,c)})}function Ba(r,o,c){c=Math.min(r.i.length,c);var l=r.l?T(r.l.Na,r.l,r):null;e:{var I=r.i;let E=-1;for(;;){let S=["count="+c];E==-1?0<c?(E=I[0].g,S.push("ofs="+E)):E=0:S.push("ofs="+E);let B=!0;for(let H=0;H<c;H++){let M=I[H].g,Z=I[H].map;if(M-=E,0>M)E=Math.max(0,I[H].g-100),B=!1;else try{pd(Z,S,"req"+M+"_")}catch{l&&l(Z)}}if(B){l=S.join("&");break e}}}return r=r.i.splice(0,c),o.D=r,l}function qa(r){if(!r.g&&!r.u){r.Y=1;var o=r.Fa;He||Ct(),he||(He(),he=!0),Ve.add(o,r),r.v=0}}function Ui(r){return r.g||r.u||3<=r.v?!1:(r.Y++,r.u=rn(T(r.Fa,r),za(r,r.v)),r.v++,!0)}n.Fa=function(){if(this.u=null,$a(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var r=2*this.R;this.j.info("BP detection timer enabled: "+r),this.A=rn(T(this.ab,this),r)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ie(10),ar(this),$a(this))};function Bi(r){r.A!=null&&(h.clearTimeout(r.A),r.A=null)}function $a(r){r.g=new Ke(r,r.j,"rpc",r.Y),r.m===null&&(r.g.H=r.o),r.g.O=0;var o=Le(r.qa);q(o,"RID","rpc"),q(o,"SID",r.K),q(o,"AID",r.T),q(o,"CI",r.F?"0":"1"),!r.F&&r.ja&&q(o,"TO",r.ja),q(o,"TYPE","xmlhttp"),pn(r,o),r.m&&r.o&&Mi(o,r.m,r.o),r.L&&(r.g.I=r.L);var c=r.g;r=r.ia,c.L=1,c.v=ir(Le(o)),c.m=null,c.P=!0,ma(c,r)}n.Za=function(){this.C!=null&&(this.C=null,ar(this),Ui(this),ie(19))};function ur(r){r.C!=null&&(h.clearTimeout(r.C),r.C=null)}function ja(r,o){var c=null;if(r.g==o){ur(r),Bi(r),r.g=null;var l=2}else if(Vi(r.h,o))c=o.D,wa(r.h,o),l=1;else return;if(r.G!=0){if(o.o)if(l==1){c=o.m?o.m.length:0,o=Date.now()-o.F;var I=r.B;l=Xn(),re(l,new ha(l,c)),cr(r)}else qa(r);else if(I=o.s,I==3||I==0&&0<o.X||!(l==1&&yd(r,o)||l==2&&Ui(r)))switch(c&&0<c.length&&(o=r.h,o.i=o.i.concat(c)),I){case 1:dt(r,5);break;case 4:dt(r,10);break;case 3:dt(r,6);break;default:dt(r,2)}}}function za(r,o){let c=r.Ta+Math.floor(Math.random()*r.cb);return r.isActive()||(c*=2),c*o}function dt(r,o){if(r.j.info("Error code "+o),o==2){var c=T(r.fb,r),l=r.Xa;let I=!l;l=new ht(l||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||nr(l,"https"),ir(l),I?hd(l.toString(),c):dd(l.toString(),c)}else ie(2);r.G=0,r.l&&r.l.sa(o),Wa(r),Fa(r)}n.fb=function(r){r?(this.j.info("Successfully pinged google.com"),ie(2)):(this.j.info("Failed to ping google.com"),ie(1))};function Wa(r){if(r.G=0,r.ka=[],r.l){let o=Ea(r.h);(o.length!=0||r.i.length!=0)&&(C(r.ka,o),C(r.ka,r.i),r.h.i.length=0,k(r.i),r.i.length=0),r.l.ra()}}function Ga(r,o,c){var l=c instanceof ht?Le(c):new ht(c);if(l.g!="")o&&(l.g=o+"."+l.g),rr(l,l.s);else{var I=h.location;l=I.protocol,o=o?o+"."+I.hostname:I.hostname,I=+I.port;var E=new ht(null);l&&nr(E,l),o&&(E.g=o),I&&rr(E,I),c&&(E.l=c),l=E}return c=r.D,o=r.ya,c&&o&&q(l,c,o),q(l,"VER",r.la),pn(r,l),l}function Ha(r,o,c){if(o&&!r.J)throw Error("Can't create secondary domain capable XhrIo object.");return o=r.Ca&&!r.pa?new z(new ln({eb:c})):new z(r.pa),o.Ha(r.J),o}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ka(){}n=Ka.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function lr(){}lr.prototype.g=function(r,o){return new ue(r,o)};function ue(r,o){X.call(this),this.g=new Ma(o),this.l=r,this.h=o&&o.messageUrlParams||null,r=o&&o.messageHeaders||null,o&&o.clientProtocolHeaderRequired&&(r?r["X-Client-Protocol"]="webchannel":r={"X-Client-Protocol":"webchannel"}),this.g.o=r,r=o&&o.initMessageHeaders||null,o&&o.messageContentType&&(r?r["X-WebChannel-Content-Type"]=o.messageContentType:r={"X-WebChannel-Content-Type":o.messageContentType}),o&&o.va&&(r?r["X-WebChannel-Client-Profile"]=o.va:r={"X-WebChannel-Client-Profile":o.va}),this.g.S=r,(r=o&&o.Sb)&&!U(r)&&(this.g.m=r),this.v=o&&o.supportsCrossDomainXhr||!1,this.u=o&&o.sendRawJson||!1,(o=o&&o.httpSessionIdParam)&&!U(o)&&(this.g.D=o,r=this.h,r!==null&&o in r&&(r=this.h,o in r&&delete r[o])),this.j=new Nt(this)}R(ue,X),ue.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ue.prototype.close=function(){Fi(this.g)},ue.prototype.o=function(r){var o=this.g;if(typeof r=="string"){var c={};c.__data__=r,r=c}else this.u&&(c={},c.__data__=Si(r),r=c);o.i.push(new td(o.Ya++,r)),o.G==3&&cr(o)},ue.prototype.N=function(){this.g.l=null,delete this.j,Fi(this.g),delete this.g,ue.aa.N.call(this)};function Qa(r){Pi.call(this),r.__headers__&&(this.headers=r.__headers__,this.statusCode=r.__status__,delete r.__headers__,delete r.__status__);var o=r.__sm__;if(o){e:{for(let c in o){r=c;break e}r=void 0}(this.i=r)&&(r=this.i,o=o!==null&&r in o?o[r]:void 0),this.data=o}else this.data=r}R(Qa,Pi);function Ya(){Ci.call(this),this.status=1}R(Ya,Ci);function Nt(r){this.g=r}R(Nt,Ka),Nt.prototype.ua=function(){re(this.g,"a")},Nt.prototype.ta=function(r){re(this.g,new Qa(r))},Nt.prototype.sa=function(r){re(this.g,new Ya)},Nt.prototype.ra=function(){re(this.g,"b")},lr.prototype.createWebChannel=lr.prototype.g,ue.prototype.send=ue.prototype.o,ue.prototype.open=ue.prototype.m,ue.prototype.close=ue.prototype.close,bl=je.createWebChannelTransport=function(){return new lr},Tl=je.getStatEventTarget=function(){return Xn()},El=je.Event=ut,wl=je.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Zn.NO_ERROR=0,Zn.TIMEOUT=8,Zn.HTTP_ERROR=6,Il=je.ErrorCode=Zn,da.COMPLETE="complete",vl=je.EventType=da,aa.EventType=tn,tn.OPEN="a",tn.CLOSE="b",tn.ERROR="c",tn.MESSAGE="d",X.prototype.listen=X.prototype.K,yl=je.WebChannel=aa,jg=je.FetchXmlHttpFactory=ln,z.prototype.listenOnce=z.prototype.L,z.prototype.getLastError=z.prototype.Ka,z.prototype.getLastErrorCode=z.prototype.Ba,z.prototype.getStatus=z.prototype.Z,z.prototype.getResponseJson=z.prototype.Oa,z.prototype.getResponseText=z.prototype.oa,z.prototype.send=z.prototype.ea,z.prototype.setWithCredentials=z.prototype.Ha,_l=je.XhrIo=z}).apply(typeof Gr<"u"?Gr:typeof self<"u"?self:typeof window<"u"?window:{});var Al="@firebase/firestore",Sl="4.8.0";var Q=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Q.UNAUTHENTICATED=new Q(null),Q.GOOGLE_CREDENTIALS=new Q("google-credentials-uid"),Q.FIRST_PARTY=new Q("first-party-uid"),Q.MOCK_USER=new Q("mock-user");var Fn="11.10.0";var Ht=new Re("@firebase/firestore");function Ee(n,...e){if(Ht.logLevel<=F.DEBUG){let t=e.map(So);Ht.debug(`Firestore (${Fn}): ${n}`,...t)}}function Ul(n,...e){if(Ht.logLevel<=F.ERROR){let t=e.map(So);Ht.error(`Firestore (${Fn}): ${n}`,...t)}}function zg(n,...e){if(Ht.logLevel<=F.WARN){let t=e.map(So);Ht.warn(`Firestore (${Fn}): ${n}`,...t)}}function So(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function ce(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,Bl(n,i,t)}function Bl(n,e,t){let i=`FIRESTORE (${Fn}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Ul(i),new Error(i)}function At(n,e,t,i){let s="Unexpected state";typeof t=="string"?s=t:i=t,n||Bl(e,s,i)}var L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},x=class extends le{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var St=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Hr=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},oo=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Q.UNAUTHENTICATED))}shutdown(){}},ao=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},co=class{constructor(e){this.t=e,this.currentUser=Q.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){At(this.o===void 0,42304);let i=this.i,s=d=>this.i!==i?(i=this.i,t(d)):Promise.resolve(),a=new St;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new St,e.enqueueRetryable(()=>s(this.currentUser))};let u=()=>{let d=a;e.enqueueRetryable(async()=>{await d.promise,await s(this.currentUser)})},h=d=>{Ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit(d=>h(d)),setTimeout(()=>{if(!this.auth){let d=this.t.getImmediate({optional:!0});d?h(d):(Ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new St)}},0),u()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(Ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(At(typeof i.accessToken=="string",31837,{l:i}),new Hr(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return At(e===null||typeof e=="string",2055,{h:e}),new Q(e)}},uo=class{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Q.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},lo=class{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new uo(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Q.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Kr=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},ho=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,pe(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){At(this.o===void 0,3512);let i=a=>{a.error!=null&&Ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);let u=a.token!==this.m;return this.m=a.token,Ee("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>i(a))};let s=a=>{Ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){let a=this.V.getImmediate({optional:!0});a?s(a):Ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Kr(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(At(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Kr(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Wg(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}function Gg(){return new TextEncoder}var fo=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),i="";for(;i.length<20;){let s=Wg(40);for(let a=0;a<s.length;++a)i.length<20&&s[a]<t&&(i+=e.charAt(s[a]%62))}return i}};function me(n,e){return n<e?-1:n>e?1:0}function Hg(n,e){let t=0;for(;t<n.length&&t<e.length;){let i=n.codePointAt(t),s=e.codePointAt(t);if(i!==s){if(i<128&&s<128)return me(i,s);{let a=Gg(),u=Kg(a.encode(Rl(n,t)),a.encode(Rl(e,t)));return u!==0?u:me(i,s)}}t+=i>65535?2:1}return me(n.length,e.length)}function Rl(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function Kg(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return me(n[t],e[t]);return me(n.length,e.length)}var Pl="__name__",Qr=class n{constructor(e,t,i){t===void 0?t=0:t>e.length&&ce(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&ce(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let i=Math.min(e.length,t.length);for(let s=0;s<i;s++){let a=n.compareSegments(e.get(s),t.get(s));if(a!==0)return a}return me(e.length,t.length)}static compareSegments(e,t){let i=n.isNumericId(e),s=n.isNumericId(t);return i&&!s?-1:!i&&s?1:i&&s?n.extractNumericId(e).compare(n.extractNumericId(t)):Hg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Wr.fromString(e.substring(4,e.length-2))}},ze=class n extends Qr{construct(e,t,i){return new n(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let i of e){if(i.indexOf("//")>=0)throw new x(L.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(s=>s.length>0))}return new n(t)}static emptyPath(){return new n([])}},Qg=/^[_a-zA-Z][_a-zA-Z0-9]*$/,po=class n extends Qr{construct(e,t,i){return new n(e,t,i)}static isValidIdentifier(e){return Qg.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Pl}static keyField(){return new n([Pl])}static fromServerFormat(e){let t=[],i="",s=0,a=()=>{if(i.length===0)throw new x(L.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""},u=!1;for(;s<e.length;){let h=e[s];if(h==="\\"){if(s+1===e.length)throw new x(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new x(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=d,s+=2}else h==="`"?(u=!u,s++):h!=="."||u?(i+=h,s++):(a(),s++)}if(a(),u)throw new x(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var We=class n{constructor(e){this.path=e}static fromPath(e){return new n(ze.fromString(e))}static fromName(e){return new n(ze.fromString(e).popFirst(5))}static empty(){return new n(ze.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ze.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ze.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new ze(e.slice()))}};function Yg(n,e,t,i){if(e===!0&&i===!0)throw new x(L.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Jg(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Xg(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ce(12329,{type:typeof n})}function Zg(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new x(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Xg(n);throw new x(L.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function G(n,e){let t={typeString:n};return e&&(t.value=e),t}function Un(n,e){if(!Jg(n))throw new x(L.INVALID_ARGUMENT,"JSON must be an object");let t;for(let i in e)if(e[i]){let s=e[i].typeString,a="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}let u=n[i];if(s&&typeof u!==s){t=`JSON field '${i}' must be a ${s}.`;break}if(a!==void 0&&u!==a.value){t=`Expected '${i}' field to equal '${a.value}'`;break}}if(t)throw new x(L.INVALID_ARGUMENT,t);return!0}var Cl=-62135596800,kl=1e6,Nn=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*kl);return new n(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new x(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new x(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Cl)throw new x(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new x(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/kl}_compareTo(e){return this.seconds===e.seconds?me(this.nanoseconds,e.nanoseconds):me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Un(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-Cl;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Nn._jsonSchemaVersion="firestore/timestamp/1.0",Nn._jsonSchema={type:G("string",Nn._jsonSchemaVersion),seconds:G("number"),nanoseconds:G("number")};var mo=class{constructor(e,t,i,s){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=s}};mo.UNKNOWN_ID=-1;function e_(n){return n.name==="IndexedDbTransactionError"}function t_(n){return n===0&&1/n==-1/0}var n_="remoteDocuments",ql="owner";var $l="mutationQueues";var jl="mutations";var zl="documentMutations",r_="remoteDocumentsV14";var Wl="remoteDocumentGlobal";var Gl="targets";var Hl="targetDocuments";var Kl="targetGlobal",Ql="collectionParents";var Yl="clientMetadata";var Jl="bundles";var Xl="namedQueries";var i_="indexConfiguration";var s_="indexState";var o_="indexEntries";var Zl="documentOverlays";var a_="globals";var c_=[$l,jl,zl,n_,Gl,ql,Kl,Hl,Yl,Wl,Ql,Jl,Xl],ow=[...c_,Zl],u_=[$l,jl,zl,r_,Gl,ql,Kl,Hl,Yl,Wl,Ql,Jl,Xl,Zl],l_=u_,h_=[...l_,i_,s_,o_];var aw=[...h_,a_];var Kt=class n{constructor(e,t){this.comparator=e,this.root=t||De.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,De.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,De.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){let s=this.comparator(e,i.key);if(s===0)return t+i.left.size;s<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){let e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new jt(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new jt(this.root,e,this.comparator,!1)}getReverseIterator(){return new jt(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new jt(this.root,e,this.comparator,!0)}},jt=class{constructor(e,t,i,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?i(e.key,t):1,t&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},De=class n{constructor(e,t,i,s,a){this.key=e,this.value=t,this.color=i??n.RED,this.left=s??n.EMPTY,this.right=a??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,s,a){return new n(e??this.key,t??this.value,i??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let s=this,a=i(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,t,i),null):a===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return n.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ce(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ce(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw ce(27949);return e+(this.isRed()?0:1)}};De.EMPTY=null,De.RED=!0,De.BLACK=!1;De.EMPTY=new class{constructor(){this.size=0}get key(){throw ce(57766)}get value(){throw ce(16141)}get color(){throw ce(16727)}get left(){throw ce(29726)}get right(){throw ce(36894)}copy(e,t,i,s,a){return this}insert(e,t,i){return new De(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Yr=class n{constructor(e){this.comparator=e,this.data=new Kt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Jr(this.data.getIterator())}getIteratorFrom(e){return new Jr(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){let s=t.getNext().key,a=i.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Jr=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var go=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var at=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new go("Invalid base64 string: "+a):a}})(e);return new n(t)}static fromUint8Array(e){let t=(function(s){let a="";for(let u=0;u<s.length;++u)a+=String.fromCharCode(s[u]);return a})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let i=new Uint8Array(t.length);for(let s=0;s<t.length;s++)i[s]=t.charCodeAt(s);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};at.EMPTY_BYTE_STRING=new at("");var d_=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function f_(n){if(At(!!n,39018),typeof n=="string"){let e=0,t=d_.exec(n);if(At(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}let i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:On(n.seconds),nanos:On(n.nanos)}}function On(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function p_(n){return typeof n=="string"?at.fromBase64String(n):at.fromUint8Array(n)}var _o="(default)",yo=class n{constructor(e,t){this.projectId=e,this.database=t||_o}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===_o}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var eh="__type__",m_="__max__";var th="__vector__",nh="value";function g_(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[eh])===null||t===void 0?void 0:t.stringValue)===th}function __(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===m_}var uw={mapValue:{fields:{[eh]:{stringValue:th},[nh]:{arrayValue:{}}}}};var vo=class{constructor(e,t=null,i=[],s=[],a=null,u="F",h=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=s,this.limit=a,this.limitType=u,this.startAt=h,this.endAt=d,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function y_(n){return new vo(n)}var lw=new Kt(We.comparator);var hw=new Kt(We.comparator);var dw=new Kt(We.comparator),fw=new Yr(We.comparator);var pw=new Yr(me);var Dl,V;(V=Dl||(Dl={}))[V.OK=0]="OK",V[V.CANCELLED=1]="CANCELLED",V[V.UNKNOWN=2]="UNKNOWN",V[V.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",V[V.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",V[V.NOT_FOUND=5]="NOT_FOUND",V[V.ALREADY_EXISTS=6]="ALREADY_EXISTS",V[V.PERMISSION_DENIED=7]="PERMISSION_DENIED",V[V.UNAUTHENTICATED=16]="UNAUTHENTICATED",V[V.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",V[V.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",V[V.ABORTED=10]="ABORTED",V[V.OUT_OF_RANGE=11]="OUT_OF_RANGE",V[V.UNIMPLEMENTED=12]="UNIMPLEMENTED",V[V.INTERNAL=13]="INTERNAL",V[V.UNAVAILABLE=14]="UNAVAILABLE",V[V.DATA_LOSS=15]="DATA_LOSS";var mw=new Wr([4294967295,4294967295],0);var Xr=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(On(e.integerValue));else if("doubleValue"in e){let i=On(e.doubleValue);isNaN(i)?this.Ct(t,13):(this.Ct(t,15),t_(i)?t.Ft(0):t.Ft(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Ct(t,20),typeof i=="string"&&(i=f_(i)),t.Mt(`${i.seconds||""}`),t.Ft(i.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(p_(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let i=e.geoPointValue;this.Ct(t,45),t.Ft(i.latitude||0),t.Ft(i.longitude||0)}else"mapValue"in e?__(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):g_(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):ce(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let i=e.fields||{};this.Ct(t,55);for(let s of Object.keys(i))this.xt(s,t),this.Dt(i[s],t)}Lt(e,t){var i,s;let a=e.fields||{};this.Ct(t,53);let u=nh,h=((s=(i=a[u].arrayValue)===null||i===void 0?void 0:i.values)===null||s===void 0?void 0:s.length)||0;this.Ct(t,15),t.Ft(On(h)),this.xt(u,t),this.Dt(a[u],t)}qt(e,t){let i=e.values||[];this.Ct(t,50);for(let s of i)this.Dt(s,t)}Bt(e,t){this.Ct(t,37),We.fromName(e).path.forEach(i=>{this.Ct(t,60),this.$t(i,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};Xr.Ut=new Xr;var gw=new Uint8Array(0);var rh=41943040,ke=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}};ke.DEFAULT_COLLECTION_PERCENTILE=10,ke.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ke.DEFAULT=new ke(rh,ke.DEFAULT_COLLECTION_PERCENTILE,ke.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ke.DISABLED=new ke(-1,0,0);var v_=1048576;function so(){return typeof document<"u"?document:null}var Io=class{constructor(e,t,i=1e3,s=1.5,a=6e4){this.Fi=e,this.timerId=t,this.d_=i,this.E_=s,this.A_=a,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),s=Math.max(0,t-i);s>0&&Ee("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var wo=class n{constructor(e,t,i,s,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=s,this.removalCallback=a,this.deferred=new St,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,s,a){let u=Date.now()+i,h=new n(e,t,u,s,a);return h.start(i),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new x(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};var Nl,Ol;(Ol=Nl||(Nl={})).Fa="default",Ol.Cache="cache";function I_(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var xl=new Map;var ih="firestore.googleapis.com",Vl=!0,Zr=class{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new x(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ih,this.ssl=Vl}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Vl;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=rh;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<v_)throw new x(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Yg("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=I_((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new x(L.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new x(L.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new x(L.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,s){return i.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},ei=class{constructor(e,t,i,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Zr({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new x(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new x(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Zr(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new oo;switch(i.type){case"firstParty":return new lo(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new x(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let i=xl.get(t);i&&(Ee("ComponentProvider","Removing Datastore"),xl.delete(t),i.terminate())})(this),Promise.resolve()}};function sh(n,e,t,i={}){var s;n=Zg(n,ei);let a=mt(e),u=n._getSettings(),h=Object.assign(Object.assign({},u),{emulatorOptions:n._getEmulatorOptions()}),d=`${e}:${t}`;a&&(Ir(`https://${d}`),wr("Firestore",!0)),u.host!==ih&&u.host!==d&&zg("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let y=Object.assign(Object.assign({},u),{host:d,ssl:a,emulatorOptions:i});if(!Se(y,h)&&(n._setSettings(y),i.mockUserToken)){let b,A;if(typeof i.mockUserToken=="string")b=i.mockUserToken,A=Q.MOCK_USER;else{b=qc(i.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);let T=i.mockUserToken.sub||i.mockUserToken.user_id;if(!T)throw new x(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");A=new Q(T)}n._authCredentials=new ao(new Hr(b,A))}}var Eo=class n{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Rt=class n{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new To(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Un(t,n._jsonSchema))return new n(e,i||null,new We(ze.fromString(t.referencePath)))}};Rt._jsonSchemaVersion="firestore/documentReference/1.0",Rt._jsonSchema={type:G("string",Rt._jsonSchemaVersion),referencePath:G("string")};var To=class n extends Eo{constructor(e,t,i){super(e,t,y_(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Rt(this.firestore,null,new We(e))}withConverter(e){return new n(this.firestore,e,this._path)}};var Ll="AsyncQueue",ti=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Io(this,"async_queue_retry"),this.oc=()=>{let i=so();i&&Ee(Ll,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;let t=so();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=so();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new St;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!e_(e))throw e;Ee(Ll,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(i=>{throw this.tc=i,this.nc=!1,Ul("INTERNAL UNHANDLED ERROR: ",Ml(i)),i}).then(i=>(this.nc=!1,i))));return this._c=t,t}enqueueAfterDelay(e,t,i){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let s=wo.createAndSchedule(this,e,t,i,a=>this.lc(a));return this.ec.push(s),s}ac(){this.tc&&ce(47125,{hc:Ml(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function Ml(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}var bo=class extends ei{constructor(e,t,i,s){super(e,t,i,s),this.type="firestore",this._queue=new ti,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new ti(e),this._firestoreClient=void 0,await e}}};function oh(n,e){let t=typeof n=="object"?n:_t(),i=typeof n=="string"?n:e||_o,s=Ft(t,"firestore").getImmediate({identifier:i});if(!s._initialized){let a=Bc("firestore");a&&sh(s,...a)}return s}var xn=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(at.fromBase64String(e))}catch(t){throw new x(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(at.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Un(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};xn._jsonSchemaVersion="firestore/bytes/1.0",xn._jsonSchema={type:G("string",xn._jsonSchemaVersion),bytes:G("string")};var ni=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new x(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new po(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Vn=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new x(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new x(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return me(this._lat,e._lat)||me(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Un(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Vn._jsonSchemaVersion="firestore/geoPoint/1.0",Vn._jsonSchema={type:G("string",Vn._jsonSchemaVersion),latitude:G("number"),longitude:G("number")};var Ln=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(i,s){if(i.length!==s.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==s[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Un(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new x(L.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Ln._jsonSchemaVersion="firestore/vectorValue/1.0",Ln._jsonSchema={type:G("string",Ln._jsonSchemaVersion),vectorValues:G("object")};var w_=new RegExp("[~\\*/\\[\\]]");function E_(n,e,t){if(e.search(w_)>=0)throw Fl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ni(...e.split("."))._internalPath}catch{throw Fl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Fl(n,e,t,i,s){let a=i&&!i.isEmpty(),u=s!==void 0,h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let d="";return(a||u)&&(d+=" (found",a&&(d+=` in field ${i}`),u&&(d+=` in document ${s}`),d+=")"),new x(L.INVALID_ARGUMENT,h+n+d)}var ri=class{constructor(e,t,i,s,a){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Rt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Ao(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(ah("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Ao=class extends ri{data(){return super.data()}};function ah(n,e){return typeof e=="string"?E_(n,e):e instanceof ni?e._internalPath:e._delegate._internalPath}var zt=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Wt=class n extends ri{constructor(e,t,i,s,a,u){super(e,t,i,s,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Gt(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let i=this._document.data.field(ah("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new x(L.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Wt._jsonSchemaVersion="firestore/documentSnapshot/1.0",Wt._jsonSchema={type:G("string",Wt._jsonSchemaVersion),bundleSource:G("string","DocumentSnapshot"),bundleName:G("string"),bundle:G("string")};var Gt=class extends Wt{data(e={}){return super.data(e)}},Mn=class n{constructor(e,t,i,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new zt(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new Gt(this._firestore,this._userDataWriter,i.key,i,new zt(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new x(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,a){if(s._snapshot.oldDocs.isEmpty()){let u=0;return s._snapshot.docChanges.map(h=>{let d=new Gt(s._firestore,s._userDataWriter,h.doc.key,h.doc,new zt(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);return h.doc,{type:"added",doc:d,oldIndex:-1,newIndex:u++}})}{let u=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(h=>a||h.type!==3).map(h=>{let d=new Gt(s._firestore,s._userDataWriter,h.doc.key,h.doc,new zt(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter),y=-1,b=-1;return h.type!==0&&(y=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),h.type!==1&&(u=u.add(h.doc),b=u.indexOf(h.doc.key)),{type:T_(h.type),doc:d,oldIndex:y,newIndex:b}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new x(L.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=fo.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],i=[],s=[];return this.docs.forEach(a=>{a._document!==null&&(t.push(a._document),i.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function T_(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ce(61501,{type:n})}}Mn._jsonSchemaVersion="firestore/querySnapshot/1.0",Mn._jsonSchema={type:G("string",Mn._jsonSchemaVersion),bundleSource:G("string","QuerySnapshot"),bundleName:G("string"),bundle:G("string")};(function(e,t=!0){(function(s){Fn=s})(Ze),Ie(new se("firestore",(i,{instanceIdentifier:s,options:a})=>{let u=i.getProvider("app").getImmediate(),h=new bo(new co(i.getProvider("auth-internal")),new ho(u,i.getProvider("app-check-internal")),(function(y,b){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new x(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yo(y.options.projectId,b)})(u,s),u);return a=Object.assign({useFetchStreams:t},a),h._setSettings(a),h},"PUBLIC").setMultipleInstances(!0)),W(Al,Sl,e),W(Al,Sl,"esm2017")})();var Bn=class{constructor(e){return e}},ch="firestore",Ro=class{constructor(){return Bt(ch)}};var Po=new Vt("angularfire2.firestore-instances");function b_(n,e){let t=wn(ch,n,e);return t&&new Bn(t)}function A_(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new Bn(i)}}var S_={provide:Ro,deps:[[new fe,Po]]},R_={provide:Bn,useFactory:b_,deps:[[new fe,Po],Be]};function uh(n,...e){return W("angularfire",et.full,"fst"),Lt([R_,S_,{provide:Po,useFactory:A_(n),multi:!0,deps:[Ae,Mt,tt,It,[new fe,Dn],[new fe,qt],...e]}])}var lh=vt(oh,!0);var P_=ft.firebase,hh={providers:[{provide:sc,useClass:gr},oc(),mc(),wc(Vc,Ec({anchorScrolling:"enabled",scrollPositionRestoration:"enabled"})),yc(vc()),du(()=>fu(P_)),uh(()=>lh()),dl(()=>fl()),xc(Oc())]};var ii=class n{phoneNumber=ft.contact.whatsappNumber;defaultMessage="Hola, necesito informaci\xF3n";get encodedMessage(){return encodeURIComponent(this.defaultMessage)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=fr({type:n,selectors:[["app-whatsapp-button"]],inputs:{phoneNumber:"phoneNumber",defaultMessage:"defaultMessage"},decls:6,vars:1,consts:[[1,"whatsapp-btn-container"],["target","_blank","rel","noopener noreferrer","aria-label","Contactar por WhatsApp",1,"whatsapp-btn",3,"href"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24"],["d","M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"],[1,"tooltip"]],template:function(t,i){t&1&&(pr(0,"div",0)(1,"a",1),rc(),pr(2,"svg",2),dc(3,"path",3),Gi()(),ic(),pr(4,"span",4),pc(5,"\xA1Escr\xEDbenos!"),Gi()()),t&2&&(lc(),fc("href","https://wa.me/"+i.phoneNumber+"?text="+i.encodedMessage,uc))},styles:['.whatsapp-btn-container[_ngcontent-%COMP%]{position:fixed;bottom:30px;right:30px;z-index:99999;backface-visibility:hidden;transform:translateZ(0);font-family:sans-serif}.whatsapp-btn[_ngcontent-%COMP%]{width:60px;height:60px;background-color:#25d366;border-radius:50%;display:flex;align-items:center;justify-content:center;text-decoration:none;position:relative;transition:all .3s ease;box-shadow:0 4px 14px #00000026;z-index:2}.whatsapp-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:35px;height:35px;fill:#fff;position:relative;z-index:3}.whatsapp-btn[_ngcontent-%COMP%]:hover{background-color:#128c7e;transform:scale(1.05);box-shadow:0 8px 25px #128c7e80}.tooltip[_ngcontent-%COMP%]{visibility:hidden;opacity:0;width:160px;background-color:#075e54;color:#fff;text-align:center;border-radius:8px;padding:8px 10px;position:absolute;bottom:100%;right:0;margin-bottom:15px;font-size:14px;line-height:1.4;box-shadow:0 4px 12px #00000026;transform:translateY(10px);transition:all .3s ease;pointer-events:none}.tooltip[_ngcontent-%COMP%]:after{content:"";position:absolute;top:100%;right:25px;border-width:8px;border-style:solid;border-color:#075e54 transparent transparent transparent}.whatsapp-btn-container[_ngcontent-%COMP%]:hover   .tooltip[_ngcontent-%COMP%]{visibility:visible;opacity:1;transform:translateY(0)}']})};var si=class n{constructor(){}identify(e,t={}){Je.identify(e,t)}capture(e,t={}){Je.capture(e,t)}reset(){Je.reset()}static \u0275fac=function(t){return new(t||n)};static \u0275prov=xt({token:n,factory:n.\u0275fac,providedIn:"root"})};var oi=class n{analytics=ae(si);logger=ae(mr);seoService=ae(bc);ngOnInit(){this.logger.debug("Sending test event to PostHog..."),Je.capture("app_initialized",{timestamp:new Date().toISOString(),message:"Angular app successfully initialized"}),this.logger.debug("Test event sent to PostHog")}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=fr({type:n,selectors:[["app-root"]],decls:2,vars:0,template:function(t,i){t&1&&hc(0,"router-outlet")(1,"app-whatsapp-button")},dependencies:[Ic,ii],encapsulation:2})};var xo=class{#e;#t=new Set;constructor(e){this.#e=e}get current(){return this.#e}set current(e){this.#e!=e&&(this.#e=e,this.#t.forEach(t=>t(e)))}on(e){return this.#t.add(e),()=>this.#t.delete(e)}},wh=n=>new xo(n),Vo=Symbol.for("atomico.hooks");globalThis[Vo]=globalThis[Vo]||{};var Qt=globalThis[Vo],k_=Symbol.for("Atomico.suspense"),Eh=Symbol.for("Atomico.effect"),D_=Symbol.for("Atomico.layoutEffect"),Th=Symbol.for("Atomico.insertionEffect"),Jt=(n,e,t)=>{let{i,hooks:s}=Qt.c,a=s[i]=s[i]||{};return a.value=n(a.value),a.effect=e,a.tag=t,Qt.c.i++,s[i].value},bh=n=>Jt((e=wh(n))=>e),pi=()=>Jt((n=wh(Qt.c.host))=>n),Ah=()=>Qt.c.update,N_=(n,e,t=0)=>{let i={},s=!1,a=()=>s,u=(h,d)=>{for(let y in i){let b=i[y];b.effect&&b.tag===h&&(b.value=b.effect(b.value,d))}};return{load:h=>{Qt.c={host:e,hooks:i,update:n,i:0,id:t};let d;try{s=!1,d=h()}catch(y){if(y!==k_)throw y;s=!0}finally{Qt.c=null}return d},cleanEffects:h=>(u(Th,h),()=>(u(D_,h),()=>{u(Eh,h)})),isSuspense:a}},Wn=Symbol.for;function Sh(n,e){let t=n.length;if(t!==e.length)return!1;for(let i=0;i<t;i++){let s=n[i],a=e[i];if(s!==a)return!1}return!0}var Ne=n=>typeof n=="function",qn=n=>typeof n=="object",{isArray:O_}=Array,Lo=(n,e)=>(e?n instanceof HTMLStyleElement:!0)&&"hydrate"in(n?.dataset||{});function Rh(n,e){let t,i=s=>{let{length:a}=s;for(let u=0;u<a;u++){let h=s[u];if(h&&Array.isArray(h))i(h);else{let d=typeof h;if(h==null||d==="function"||d==="boolean")continue;d==="string"||d==="number"?(t==null&&(t=""),t+=h):(t!=null&&(e(t),t=null),e(h))}}};i(n),t!=null&&e(t)}var Ph=(n,e,t)=>(n.addEventListener(e,t),()=>n.removeEventListener(e,t)),ci=class{constructor(e,t,i){this.message=t,this.target=e,this.value=i}},ui=class extends ci{},Mo=class extends ci{},li="Custom",x_=null,V_={true:1,"":1,1:1};function L_(n,e,t,i,s){let{type:a,reflect:u,event:h,value:d,attr:y=M_(e)}=t?.name!=li&&qn(t)&&t!=x_?t:{type:t},b=a?.name===li&&a.map,A=d!=null?a==Function||!Ne(d)?()=>d:d:null;Object.defineProperty(n,e,{configurable:!0,set(T){let P=this[e];A&&a!=Boolean&&T==null&&(T=A());let{error:R,value:k}=(b?B_:q_)(a,T);if(R&&k!=null)throw new ui(this,`The value defined for prop '${e}' must be of type '${a.name}'`,k);P!=k&&(this._props[e]=k??void 0,this.update(),h&&Ch(this,h),this.updated.then(()=>{u&&(this._ignoreAttr=y,F_(this,a,y,this[e]),this._ignoreAttr=null)}))},get(){return this._props[e]}}),A&&(s[e]=A()),i[y]={prop:e,type:a}}var Ch=(n,s)=>{var a=s,{type:e,base:t=CustomEvent}=a,i=Ja(a,["type","base"]);return n.dispatchEvent(new t(e,i))},M_=n=>n.replace(/([A-Z])/g,"-$1").toLowerCase(),F_=(n,e,t,i)=>i==null||e==Boolean&&!i?n.removeAttribute(t):n.setAttribute(t,e?.name===li&&e?.serialize?e?.serialize(i):qn(i)?JSON.stringify(i):e==Boolean?"":i),U_=(n,e)=>n==Boolean?!!V_[e]:n==Number?Number(e):n==String?e:n==Array||n==Object?JSON.parse(e):n.name==li?e:new n(e),B_=({map:n},e)=>{try{return{value:n(e),error:!1}}catch{return{value:e,error:!0}}},q_=(n,e)=>n==null||e==null?{value:e,error:!1}:n!=String&&e===""?{value:void 0,error:!1}:n==Object||n==Array||n==Symbol?{value:e,error:{}.toString.call(e)!==`[object ${n.name}]`}:e instanceof n?{value:e,error:n==Number&&Number.isNaN(e.valueOf())}:n==String||n==Number||n==Boolean?{value:e,error:n==Number?typeof e!="number"?!0:Number.isNaN(e):n==String?typeof e!="string":typeof e!="boolean"}:{value:e,error:!0},$_=0,j_=n=>(n?.dataset||{})?.hydrate||""||"c"+$_++,Pt=(n,e=HTMLElement)=>{let t={},i={},s="prototype"in e&&e.prototype instanceof Element,a=s?e:"base"in e?e.base:HTMLElement,{props:u,styles:h}=s?n:e;class d extends a{constructor(){super(),this._setup(),this._render=()=>n(j({},this._props));for(let b in i)this[b]=i[b]}static get styles(){return[super.styles,h]}async _setup(){if(this._props)return;this._props={};let b,A;this.mounted=new Promise(C=>this.mount=()=>{C(),b!=this.parentNode&&(A!=b?this.unmounted.then(this.update):this.update()),b=this.parentNode}),this.unmounted=new Promise(C=>this.unmount=()=>{C(),(b!=this.parentNode||!this.isConnected)&&(T.cleanEffects(!0)()(),A=this.parentNode,b=null)}),this.symbolId=this.symbolId||Symbol(),this.symbolIdParent=Symbol();let T=N_(()=>this.update(),this,j_(this)),P,R=!0,k=Lo(this);this.update=()=>(P||(P=!0,this.updated=(this.updated||this.mounted).then(()=>{try{let C=T.load(this._render),N=T.cleanEffects();return C&&C.render(this,this.symbolId,k),P=!1,R&&!T.isSuspense()&&(R=!1,!k&&z_(this)),N()}finally{P=!1}}).then(C=>{C&&C()})),this.updated),this.update()}connectedCallback(){this.mount(),super.connectedCallback&&super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback(),this.unmount()}attributeChangedCallback(b,A,T){if(t[b]){if(b===this._ignoreAttr||A===T)return;let{prop:P,type:R}=t[b];try{this[P]=U_(R,T)}catch{throw new Mo(this,`The value defined as attr '${b}' cannot be parsed by type '${R.name}'`,T)}}else super.attributeChangedCallback(b,A,T)}static get props(){return j(j({},super.props),u)}static get observedAttributes(){let b=super.observedAttributes||[];for(let A in u)L_(this.prototype,A,u[A],t,i);return Object.keys(t).concat(b)}}return d};function z_(n){let{styles:e}=n.constructor,{shadowRoot:t}=n;if(t&&e.length){let i=[];Rh(e,s=>{s&&(s instanceof Element?t.appendChild(s.cloneNode(!0)):i.push(s))}),i.length&&(t.adoptedStyleSheets=i)}}var kh=n=>(e,t)=>{Jt(([i,s]=[])=>((s||!s)&&(s&&Sh(s,t)?i=i||!0:(Ne(i)&&i(),i=null)),[i,t]),([i,s],a)=>a?(Ne(i)&&i(),[]):[i||e(),s],n)},jn=kh(Eh),W_=kh(Th),hi=class extends Array{constructor(e,t){let i=!0,s=a=>{try{t(a,this,i)}finally{i=!1}};super(void 0,s,t),s(e)}},Bo=n=>{let e=Ah();return Jt((t=new hi(n,(i,s,a)=>{i=Ne(i)?i(s[0]):i,i!==s[0]&&(s[0]=i,a||e())}))=>t)},Te=(n,e)=>{let[t]=Jt(([i,s,a=0]=[])=>((!s||s&&!Sh(s,e))&&(i=n()),[i,e,a]));return t},qo=n=>{let{current:e}=pi();if(!(n in e))throw new ui(e,`For useProp("${n}"), the prop does not exist on the host.`,n);return Jt((t=new hi(e[n],(i,s)=>{i=Ne(i)?i(e[n]):i,e[n]=i}))=>(t[0]=e[n],t))},Oe=(n,e={})=>{let t=pi();return t[n]||(t[n]=(i=e.detail)=>Ch(t.current,de(j({type:n},e),{detail:i}))),t[n]},Fo=Wn("atomico/options");globalThis[Fo]=globalThis[Fo]||{sheet:!!document.adoptedStyleSheets};var mi=globalThis[Fo],G_=new Promise(n=>{mi.ssr||(document.readyState==="loading"?Ph(document,"DOMContentLoaded",n):n())}),H_={checked:1,value:1,selected:1},K_={list:1,type:1,size:1,form:1,width:1,height:1,src:1,href:1,slot:1},Q_={shadowDom:1,staticNode:1,cloneNode:1,children:1,key:1},ai={},Uo=[],zn=class extends Text{},Y_=Wn("atomico/id"),$n=Wn("atomico/type"),Co=Wn("atomico/ref"),Dh=Wn("atomico/vnode"),Nh=()=>{};function J_(n,e,t){return xh(this,n,e,t)}var Oh=(n,e,...t)=>{let i=e||ai,{children:s}=i;if(s=s??(t.length?t:Uo),n===Nh)return s;let a=n?n instanceof Node?1:n.prototype instanceof HTMLElement&&2:0;if(a===!1&&n instanceof Function)return n(s!=Uo?j({children:s},i):i);let u=mi.render||J_;return{[$n]:Dh,type:n,props:i,children:s,key:i.key,shadow:i.shadowDom,static:i.staticNode,raw:a,is:i.is,clone:i.cloneNode,render:u}};function xh(n,e,t=Y_,i,s){let a;if(e&&e[t]&&e[t].vnode==n||n[$n]!=Dh)return e;(n||!e)&&(s=s||n.type=="svg",a=n.type!="host"&&(n.raw==1?(e&&n.clone?e[Co]:e)!=n.type:n.raw==2?!(e instanceof n.type):e?e[Co]||e.localName!=n.type:!e),a&&n.type!=null&&(n.raw==1&&n.clone?(i=!0,e=n.type.cloneNode(!0),e[Co]=n.type):e=n.raw==1?n.type:n.raw==2?new n.type:s?document.createElementNS("http://www.w3.org/2000/svg",n.type):document.createElement(n.type,n.is?{is:n.is}:void 0)));let u=e[t]?e[t]:ai,{vnode:h=ai,cycle:d=0}=u,{fragment:y,handlers:b}=u,{children:A=Uo,props:T=ai}=h;if(b=a?{}:b||{},n.static&&!a)return e;if(n.shadow&&!e.shadowRoot&&e.attachShadow(j({mode:"open"},n.shadow)),n.props!=T&&ey(e,T,n.props,b,s),n.children!==A){let P=n.shadow?e.shadowRoot:e;y=Z_(n.children,y,P,t,!d&&i,s&&n.type=="foreignObject"?!1:s)}return e[t]={vnode:n,handlers:b,fragment:y,cycle:d+1},e}function X_(n,e){let t=new zn(""),i=new zn(""),s;if(n[e?"prepend":"append"](t),e){let{lastElementChild:a}=n;for(;a;){let{previousElementSibling:u}=a;if(Lo(a,!0)&&!Lo(u,!0)){s=a;break}a=u}}return s?s.before(i):n.append(i),{markStart:t,markEnd:i}}function Z_(n,e,t,i,s,a){n=n==null?null:O_(n)?n:[n];let u=e||X_(t,s),{markStart:h,markEnd:d,keyes:y}=u,b,A=y&&new Set,T=h;if(n&&Rh(n,P=>{if(typeof P=="object"&&!P[$n])return;let R=P[$n]&&P.key,k=y&&R!=null&&y.get(R);T!=d&&T===k?A.delete(T):T=T==d?d:T.nextSibling;let C=y?k:T,N=C;if(P[$n])N=xh(P,C,i,s,a);else{let U=P+"";!(N instanceof Text)||N instanceof zn?N=new Text(U):N.data!=U&&(N.data=U)}N!=T&&(y&&A.delete(N),!C||y?(t.insertBefore(N,T),y&&T!=d&&A.add(T)):C==d?t.insertBefore(N,d):(t.replaceChild(N,C),T=N)),R!=null&&(b=b||new Map,b.set(R,N))}),T=T==d?d:T.nextSibling,e&&T!=d)for(;T!=d;){let P=T;T=T.nextSibling,P.remove()}return A&&A.forEach(P=>P.remove()),u.keyes=b,u}function ey(n,e,t,i,s){for(let a in e)!(a in t)&&dh(n,a,e[a],null,s,i);for(let a in t)dh(n,a,e[a],t[a],s,i)}function dh(n,e,t,i,s,a){if(e=e=="class"&&!s?"className":e,t=t??null,i=i??null,e in n&&H_[e]&&(t=n[e]),!(i===t||Q_[e]||e[0]=="_"))if(n.localName==="slot"&&e==="assignNode"&&"assign"in n)n.assign(i);else if(e[0]=="o"&&e[1]=="n"&&(Ne(i)||Ne(t)))ty(n,e.slice(2),i,a);else if(e=="ref")i&&(Ne(i)?i(n):i.current=n);else if(e=="style"){let{style:u}=n;t=t||"",i=i||"";let h=qn(t),d=qn(i);if(h)for(let y in t)if(d)!(y in i)&&fh(u,y,null);else break;if(d)for(let y in i){let b=i[y];h&&t[y]===b||fh(u,y,b)}else u.cssText=i}else{let u=e[0]=="$"?e.slice(1):e;u===e&&(!s&&!K_[e]&&e in n||Ne(i)||Ne(t))?n[e]=i??"":i==null?n.removeAttribute(u):n.setAttribute(u,qn(i)?JSON.stringify(i):i)}}function ty(n,e,t,i){if(i.handleEvent||(i.handleEvent=s=>i[s.type].call(n,s)),t){if(!i[e]){let s=t.capture||t.once||t.passive?Object.assign({},t):null;n.addEventListener(e,i,s)}i[e]=t}else i[e]&&(n.removeEventListener(e,i),delete i[e])}function fh(n,e,t){let i="setProperty";t==null&&(i="removeProperty",t=null),~e.indexOf("-")?n[i](e,t):n[e]=t}var ny=Oh("host",{style:"display: contents"}),Vh="value",ry=(n,e)=>{let t=pi(),i=bh();W_(()=>Ph(t.current,"ConnectContext",s=>{s.composedPath().at(0)!==s.currentTarget&&n===s.detail.id&&(s.stopPropagation(),s.detail.connect(i))}),[n]),i.current=e},$o=n=>{let e=Oe("ConnectContext",{bubbles:!0,composed:!0}),[t,i]=Bo(()=>{if(mi.ssr)return;let a;return e({id:n,connect(u){a=u}}),a}),s=Ah();return jn(()=>{G_.then(()=>e({id:n,connect:i}))},[n]),jn(()=>{if(t)return t.on(s)},[t]),t?.current||n[Vh]},Lh=n=>{let e=Pt(({value:t})=>(ry(e,t),ny),{props:{value:{type:Object,value:()=>n}}});return e[Vh]=n,e};Lh({dispatch(n,e){}});var ph={};function gi(n,...e){let t=(n.raw||n).reduce((i,s,a)=>i+s+(e[a]||""),"");return ph[t]=ph[t]||iy(t)}function iy(n){if(mi.sheet){let e=new CSSStyleSheet;return e.replaceSync(n),e}else{let e=document.createElement("style");return e.textContent=n,e}}var O=(n,e,t)=>(e==null?e={key:t}:e.key=t,Oh(n,e)),Ge=O,jo=gi`*,*:before,*:after{box-sizing:border-box}button{padding:0;touch-action:manipulation;cursor:pointer;user-select:none}`,zo=gi`.vh{position:absolute;transform:scale(0)}`;function Wo(){let n=new Date;return new te(n.getFullYear(),n.getMonth()+1,n.getDate())}var sy=864e5;function oy(n){let e=ge(n);e.setDate(e.getUTCDate()+3-(e.getUTCDay()+6)%7);let t=new Date(e.getUTCFullYear(),0,4);return 1+Math.round(((e.getTime()-t.getTime())/sy-3+(t.getUTCDay()+6)%7)/7)}function Go(n,e=0){let t=ge(n),i=t.getUTCDay(),s=(i<e?7:0)+i-e;return t.setUTCDate(t.getUTCDate()-s),te.from(t)}function Mh(n,e=0){return Go(n,e).add({days:6})}function Fh(n){return te.from(new Date(Date.UTC(n.year,n.month,0)))}function _i(n,e,t){return e&&te.compare(n,e)<0?e:t&&te.compare(n,t)>0?t:n}var ay={days:1};function cy(n,e=0){let t=Go(n.toPlainDate(),e),i=Mh(Fh(n),e),s=[];for(;te.compare(t,i)<0;){let a=[];for(let u=0;u<7;u++)a.push(t),t=t.add(ay);s.push(a)}return s}function ge(n){return new Date(Date.UTC(n.year,n.month-1,n.day??1))}var uy=/^(\d{4})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[0-1])$/,ko=(n,e)=>n.toString().padStart(e,"0"),te=class n{constructor(e,t,i){this.year=e,this.month=t,this.day=i}add(e){let t=ge(this);if("days"in e)return t.setUTCDate(this.day+e.days),n.from(t);let{year:i,month:s}=this;"months"in e?(s=this.month+e.months,t.setUTCMonth(s-1)):(i=this.year+e.years,t.setUTCFullYear(i));let a=n.from(ge({year:i,month:s,day:1}));return _i(n.from(t),a,Fh(a))}toString(){return`${ko(this.year,4)}-${ko(this.month,2)}-${ko(this.day,2)}`}toPlainYearMonth(){return new di(this.year,this.month)}equals(e){return n.compare(this,e)===0}static compare(e,t){return e.year<t.year?-1:e.year>t.year?1:e.month<t.month?-1:e.month>t.month?1:e.day<t.day?-1:e.day>t.day?1:0}static from(e){if(typeof e=="string"){let t=e.match(uy);if(!t)throw new TypeError(e);let[,i,s,a]=t;return new n(parseInt(i,10),parseInt(s,10),parseInt(a,10))}return new n(e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate())}},di=class n{constructor(e,t){this.year=e,this.month=t}add(e){let t=ge(this),i=(e.months??0)+(e.years??0)*12;return t.setUTCMonth(t.getUTCMonth()+i),new n(t.getUTCFullYear(),t.getUTCMonth()+1)}equals(e){return this.year===e.year&&this.month===e.month}toPlainDate(){return new te(this.year,this.month,1)}};function fi(n,e){if(e)try{return n.from(e)}catch{}}function ct(n){let[e,t]=qo(n);return[Te(()=>fi(te,e),[e]),i=>t(i?.toString())]}function ly(n){let[e="",t]=qo(n);return[Te(()=>{let[i,s]=e.split("/"),a=fi(te,i),u=fi(te,s);return a&&u?[a,u]:[]},[e]),i=>t(`${i[0]}/${i[1]}`)]}function hy(n){let[e="",t]=qo(n);return[Te(()=>{let i=[];for(let s of e.trim().split(/\s+/)){let a=fi(te,s);a&&i.push(a)}return i},[e]),i=>t(i.join(" "))]}function Yt(n,e){return Te(()=>new Intl.DateTimeFormat(e,j({timeZone:"UTC"},n)),[e,n])}function mh(n,e,t){let i=Yt(n,t);return Te(()=>{let s=[],a=new Date;for(var u=0;u<7;u++){let h=(a.getUTCDay()-e+7)%7;s[h]=i.format(a),a.setUTCDate(a.getUTCDate()+1)}return s},[e,i])}var gh=(n,e,t)=>_i(n,e,t)===n,_h=n=>n.target.matches(":dir(ltr)"),dy={month:"long",day:"numeric"},fy={month:"long"},py={weekday:"long"},Do={bubbles:!0};function my({props:n,context:e}){let{offset:t}=n,{firstDayOfWeek:i,isDateDisallowed:s,min:a,max:u,today:h,page:d,locale:y,focusedDate:b,formatWeekday:A}=e,T=h??Wo(),P=mh(py,i,y),R=Te(()=>({weekday:A}),[A]),k=mh(R,i,y),C=Yt(dy,y),N=Yt(fy,y),U=Te(()=>d.start.add({months:t}),[d,t]),$=Te(()=>cy(U,i),[U,i]),ne=Oe("focusday",Do),xe=Oe("selectday",Do),Y=Oe("hoverday",Do);function v(g){ne(_i(g,a,u))}function f(g){let _;switch(g.key){case"ArrowRight":_=b.add({days:_h(g)?1:-1});break;case"ArrowLeft":_=b.add({days:_h(g)?-1:1});break;case"ArrowDown":_=b.add({days:7});break;case"ArrowUp":_=b.add({days:-7});break;case"PageUp":_=b.add(g.shiftKey?{years:-1}:{months:-1});break;case"PageDown":_=b.add(g.shiftKey?{years:1}:{months:1});break;case"Home":_=Go(b,i);break;case"End":_=Mh(b,i);break;default:return}v(_),g.preventDefault()}function m(g){let _=U.equals(g);if(!e.showOutsideDays&&!_)return;let w=g.equals(b),p=g.equals(T),oe=ge(g),be=s?.(oe),Hn=!gh(g,a,u),He="",he;if(e.type==="range"){let[Ve,Ct]=e.value,Kn=Ve?.equals(g),_e=Ct?.equals(g);he=Ve&&Ct&&gh(g,Ve,Ct),He=`${Kn?"range-start":""} ${_e?"range-end":""} ${he&&!Kn&&!_e?"range-inner":""}`}else e.type==="multi"?he=e.value.some(Ve=>Ve.equals(g)):he=e.value?.equals(g);return{part:`${`button day day-${oe.getDay()} ${_?he?"selected":"":"outside"} ${be?"disallowed":""} ${p?"today":""} ${e.getDayParts?.(oe)??""}`} ${He}`,tabindex:_&&w?0:-1,disabled:Hn,"aria-disabled":be?"true":void 0,"aria-pressed":_&&he,"aria-current":p?"date":void 0,"aria-label":C.format(oe),onkeydown:f,onclick(){be||xe(g),v(g)},onmouseover(){!be&&!Hn&&Y(g)}}}return{weeks:$,yearMonth:U,daysLong:P,daysVisible:k,formatter:N,getDayProps:m}}var No=Wo(),Gn=Lh({type:"date",firstDayOfWeek:1,focusedDate:No,page:{start:No.toPlainYearMonth(),end:No.toPlainYearMonth()}});customElements.define("calendar-ctx",Gn);var gy=(n,e)=>(e+n)%7,_y=Pt(n=>{let e=$o(Gn),t=bh(),i=my({props:n,context:e});function s(){t.current.querySelector("button[tabindex='0']")?.focus()}return Ge("host",{shadowDom:!0,focus:s,children:[O("div",{id:"h",part:"heading",children:i.formatter.format(ge(i.yearMonth))}),Ge("table",{ref:t,"aria-labelledby":"h",part:"table",children:[Ge("colgroup",{children:[e.showWeekNumbers&&O("col",{part:"col-weeknumber"}),O("col",{part:"col-1"}),O("col",{part:"col-2"}),O("col",{part:"col-3"}),O("col",{part:"col-4"}),O("col",{part:"col-5"}),O("col",{part:"col-6"}),O("col",{part:"col-7"})]}),O("thead",{children:Ge("tr",{part:"tr head",children:[e.showWeekNumbers&&O("th",{part:"th weeknumber",children:O("slot",{name:"weeknumber",children:O("span",{"aria-label":"Week",children:"#"})})}),i.daysLong.map((a,u)=>Ge("th",{part:`th day day-${gy(e.firstDayOfWeek,u)}`,scope:"col",children:[O("span",{class:"vh",children:a}),O("span",{"aria-hidden":"true",children:i.daysVisible[u]})]}))]})}),O("tbody",{children:i.weeks.map((a,u)=>Ge("tr",{part:"tr week",children:[e.showWeekNumbers&&O("th",{class:"num",part:"th weeknumber",scope:"row",children:oy(a[0])}),a.map((h,d)=>{let y=i.getDayProps(h);return O("td",{part:"td",children:y&&O("button",de(j({class:"num"},y),{children:h.day}))},d)})]},u))})]})]})},{props:{offset:{type:Number,value:0}},styles:[jo,zo,gi`:host{--color-accent: black;--color-text-on-accent: white;display:flex;flex-direction:column;gap:.25rem;text-align:center;inline-size:fit-content}table{border-collapse:collapse;font-size:.875rem}th{inline-size:2.25rem;block-size:2.25rem}td{padding-inline:0}.num{font-variant-numeric:tabular-nums}button{color:inherit;font-size:inherit;background:transparent;border:0;block-size:2.25rem;inline-size:2.25rem}button:hover:where(:not(:disabled,[aria-disabled])){background:#0000000d}button:is([aria-pressed=true],:focus-visible){background:var(--color-accent);color:var(--color-text-on-accent)}button:focus-visible{outline:1px solid var(--color-text-on-accent);outline-offset:-2px}button:disabled,:host::part(outside),:host::part(disallowed){cursor:default;opacity:.5}`]});customElements.define("calendar-month",_y);function yh(n){return O("button",{part:`button ${n.name} ${n.onclick?"":"disabled"}`,onclick:n.onclick,"aria-disabled":n.onclick?null:"true",children:O("slot",{name:n.name,children:n.children})})}function Ho(n){let e=ge(n.page.start),t=ge(n.page.end);return O(Gn,{value:n,onselectday:n.onSelect,onfocusday:n.onFocus,onhoverday:n.onHover,children:Ge("div",{role:"group","aria-labelledby":"h",part:"container",children:[O("div",{id:"h",class:"vh","aria-live":"polite","aria-atomic":"true",children:n.formatVerbose.formatRange(e,t)}),Ge("div",{part:"header",children:[O(yh,{name:"previous",onclick:n.previous,children:"Previous"}),O("slot",{part:"heading",name:"heading",children:O("div",{"aria-hidden":"true",children:n.format.formatRange(e,t)})}),O(yh,{name:"next",onclick:n.next,children:"Next"})]}),O("slot",{part:"months"})]})})}var Ko={value:{type:String,value:""},min:{type:String,value:""},max:{type:String,value:""},today:{type:String,value:""},isDateDisallowed:{type:Function,value:n=>!1},formatWeekday:{type:String,value:()=>"narrow"},getDayParts:{type:Function,value:n=>""},firstDayOfWeek:{type:Number,value:()=>1},showOutsideDays:{type:Boolean,value:!1},locale:{type:String,value:()=>{}},months:{type:Number,value:1},focusedDate:{type:String,value:()=>{}},pageBy:{type:String,value:()=>"months"},showWeekNumbers:{type:Boolean,value:!1}},Qo=[jo,zo,gi`:host{display:block;inline-size:fit-content}:host::part(container){display:flex;flex-direction:column;gap:1em}:host::part(header){display:flex;align-items:center;justify-content:space-between}:host::part(heading){font-weight:700;font-size:1.25em}:host::part(button){display:flex;align-items:center;justify-content:center}:host::part(button disabled){cursor:default;opacity:.5}`],yy={year:"numeric"},vy={year:"numeric",month:"long"};function Oo(n,e){return(e.year-n.year)*12+e.month-n.month}var vh=(n,e)=>(n=e===12?new di(n.year,1):n,{start:n,end:n.add({months:e-1})});function Iy({pageBy:n,focusedDate:e,months:t,max:i,min:s,goto:a}){let u=n==="single"?1:t,[h,d]=Bo(()=>vh(e.toPlainYearMonth(),t)),y=A=>d(vh(h.start.add({months:A}),t)),b=A=>{let T=Oo(h.start,A.toPlainYearMonth());return T>=0&&T<t};return jn(()=>{if(b(e))return;let A=Oo(e.toPlainYearMonth(),h.start);a(e.add({months:A}))},[h.start]),jn(()=>{if(b(e))return;let A=Oo(h.start,e.toPlainYearMonth());y(A===-1?-u:A===t?u:Math.floor(A/t)*t)},[e,u,t]),{page:h,previous:!s||!b(s)?()=>y(-u):void 0,next:!i||!b(i)?()=>y(u):void 0}}function Yo({months:n,pageBy:e,locale:t,focusedDate:i,setFocusedDate:s}){let[a]=ct("min"),[u]=ct("max"),[h]=ct("today"),d=Oe("focusday"),y=Oe("change"),b=Te(()=>_i(i??h??Wo(),a,u),[i,h,a,u]);function A(N){s(N),d(ge(N))}let{next:T,previous:P,page:R}=Iy({pageBy:e,focusedDate:b,months:n,min:a,max:u,goto:A}),k=pi();function C(N){let U=N?.target??"day";U==="day"?k.current.querySelectorAll("calendar-month").forEach($=>$.focus(N)):k.current.shadowRoot.querySelector(`[part~='${U}']`).focus(N)}return{format:Yt(yy,t),formatVerbose:Yt(vy,t),page:R,focusedDate:b,dispatch:y,onFocus(N){N.stopPropagation(),A(N.detail),setTimeout(C)},min:a,max:u,today:h,next:T,previous:P,focus:C}}var wy=Pt(n=>{let[e,t]=ct("value"),[i=e,s]=ct("focusedDate"),a=Yo(de(j({},n),{focusedDate:i,setFocusedDate:s}));function u(h){t(h.detail),a.dispatch()}return O("host",{shadowDom:!0,focus:a.focus,children:O(Ho,de(j(j({},n),a),{type:"date",value:e,onSelect:u}))})},{props:Ko,styles:Qo});customElements.define("calendar-date",wy);function Uh(n){return Ge(Nh,{children:[O("label",{part:"label",for:"s",children:O("slot",{name:"label",children:n.label})}),O("select",{id:"s",part:"select",onchange:n.onChange,children:n.options.map(e=>O("option",j({part:"option"},e)))})]})}var Bh=[jo,zo];function Ey(n,e){return Array.from({length:n},(t,i)=>e(i))}function Ty(n){let{min:e,max:t,focusedDate:i}=$o(Gn),s=Oe("focusday",{bubbles:!0}),a=i.toPlainYearMonth(),u=a.year,h=Math.floor(n.maxYears/2),d=u-h,y=u+(n.maxYears-h-1),b=Math.max(d,e?.year??-1/0),A=Math.min(y,t?.year??1/0),T=Ey(A-b+1,R=>{let k=b+R;return{label:`${k}`,value:`${k}`,selected:k===a.year}});function P(R){let k=parseInt(R.currentTarget.value)-a.year;s(i.add({years:k}))}return{options:T,onChange:P}}var by=Pt(n=>{let e=Ty(n);return O("host",{shadowDom:!0,children:O(Uh,j({label:"Year"},e))})},{props:{maxYears:{type:Number,value:20}},styles:Bh});customElements.define("calendar-select-year",by);function Ay(n){let{min:e,max:t,focusedDate:i,locale:s}=$o(Gn),a=Oe("focusday",{bubbles:!0}),u=Te(()=>({month:n.formatMonth}),[n.formatMonth]),h=Yt(u,s),d=Te(()=>{let T=[],P=new Date;for(var R=0;R<12;R++){let k=(P.getUTCMonth()+12)%12;T[k]=h.format(P),P.setUTCMonth(P.getUTCMonth()+1)}return T},[h]),y=i.toPlainYearMonth(),b=d.map((T,P)=>{let R=P+1,k=y.add({months:R-y.month}).toPlainDate(),C=e!=null&&te.compare(k,e)<0||t!=null&&te.compare(k,t)>0;return{label:T,value:`${R}`,disabled:C,selected:R===y.month}});function A(T){let P=parseInt(T.currentTarget.value)-y.month;a(i.add({months:P}))}return{options:b,onChange:A}}var Sy=Pt(n=>{let e=Ay(n);return O("host",{shadowDom:!0,children:O(Uh,j({label:"Month"},e))})},{props:{formatMonth:{type:String,value:()=>"long"}},styles:Bh});customElements.define("calendar-select-month",Sy);var Ih=(n,e)=>te.compare(n,e)<0?[n,e]:[e,n],Ry=Pt(n=>{let[e,t]=ly("value"),[i=e[0],s]=ct("focusedDate"),a=Yo(de(j({},n),{focusedDate:i,setFocusedDate:s})),u=Oe("rangestart"),h=Oe("rangeend"),[d,y]=ct("tentative"),[b,A]=Bo();jn(()=>A(void 0),[d]);function T(C){a.onFocus(C),P(C)}function P(C){C.stopPropagation(),d&&A(C.detail)}function R(C){let N=C.detail;C.stopPropagation(),d?(t(Ih(d,N)),y(void 0),h(ge(N)),a.dispatch()):(y(N),u(ge(N)))}let k=d?Ih(d,b??d):e;return O("host",{shadowDom:!0,focus:a.focus,children:O(Ho,de(j(j({},n),a),{type:"range",value:k,onFocus:T,onHover:P,onSelect:R}))})},{props:de(j({},Ko),{tentative:{type:String,value:""}}),styles:Qo});customElements.define("calendar-range",Ry);var Py=Pt(n=>{let[e,t]=hy("value"),[i=e[0],s]=ct("focusedDate"),a=Yo(de(j({},n),{focusedDate:i,setFocusedDate:s}));function u(h){let d=[...e],y=e.findIndex(b=>b.equals(h.detail));y<0?d.push(h.detail):d.splice(y,1),t(d),a.dispatch()}return O("host",{shadowDom:!0,focus:a.focus,children:O(Ho,de(j(j({},n),a),{type:"multi",value:e,onSelect:u}))})},{props:Ko,styles:Qo});customElements.define("calendar-multi",Py);Je.init(ft.posthogKey,{api_host:ft.posthogHost,person_profiles:"identified_only",defaults:"2025-05-24"});gc(oi,hh).catch(n=>console.error(n));
