import{l as D}from"./chunk-GBGIQ7VE.js";import"./chunk-IP3FEPB3.js";import"./chunk-SFLZ64DJ.js";import"./chunk-FEKWCP2W.js";import{o as N}from"./chunk-YNFFGNY6.js";import{o as I,q as k}from"./chunk-Q44XB7TV.js";import{$ as v,Ab as t,Bb as i,Cb as l,Gb as h,Kb as E,Mb as m,Tb as C,Ua as s,Vb as n,W as p,Wb as c,Xb as w,aa as u,gb as f,hc as y,lc as A,ma as d,mc as P,tb as g,ub as x,xb as S,yb as _,zb as b}from"./chunk-DX2LKEMG.js";import"./chunk-C6Q5SG76.js";var L=a=>["/admin/services",a],O=(a,r)=>r.id;function V(a,r){a&1&&(t(0,"tr")(1,"td",8),n(2,"Cargando..."),i()())}function $(a,r){a&1&&(t(0,"tr")(1,"td",8),n(2,"No hay servicios registrados."),i()())}function j(a,r){if(a&1){let e=h();t(0,"tr")(1,"td",9),n(2),i(),t(3,"td",10),n(4),i(),t(5,"td"),n(6),A(7,"currency"),i(),t(8,"td"),n(9),i(),t(10,"td")(11,"div",11),n(12),i()(),t(13,"td")(14,"div",12)(15,"a",13),l(16,"i",14),i(),t(17,"button",15),E("click",function(){let T=v(e).$implicit,M=m(2);return u(M.deleteService(T.id))}),l(18,"i",16),i()()()()}if(a&2){let e=r.$implicit;s(2),c(e.name),s(2),c(e.description||"Sin descripci\xF3n"),s(2),c(P(7,10,e.price)),s(3),c(e.duration_minutes?e.duration_minutes+" min":"N/A"),s(2),C("badge-success",e.is_active)("badge-error",!e.is_active),s(),w(" ",e.is_active?"Activo":"Inactivo"," "),s(3),b("routerLink",y(12,L,e.id))}}function q(a,r){if(a&1&&S(0,j,19,14,"tr",null,O),a&2){let e=m();_(e.services())}}var F=class a{auth=p(D);services=d([]);loading=d(!0);async ngOnInit(){await this.loadServices()}async loadServices(){this.loading.set(!0);let r=this.auth.getSupabaseClient(),{data:e,error:o}=await r.from("services").select("*").order("created_at",{ascending:!1});e&&this.services.set(e),this.loading.set(!1)}async deleteService(r){if(!confirm("\xBFEst\xE1s seguro de eliminar este servicio?"))return;let e=this.auth.getSupabaseClient(),{error:o}=await e.from("services").delete().eq("id",r);o?alert("Error al eliminar el servicio"):await this.loadServices()}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=f({type:a,selectors:[["app-admin-services-page"]],decls:27,vars:1,consts:[[1,"flex","justify-between","items-center","mb-6"],[1,"text-2xl","font-bold","text-green-600"],["routerLink","/admin/services/new",1,"btn","btn-primary"],[1,"fas","fa-plus","mr-2"],[1,"bg-base-100","rounded-lg","shadow","overflow-hidden","text-base-content"],[1,"overflow-x-auto"],[1,"table","w-full"],[1,"text-base-content"],["colspan","6",1,"text-center","py-4"],[1,"font-bold"],[1,"max-w-xs","truncate"],[1,"badge"],[1,"flex","gap-2"],[1,"btn","btn-sm","btn-ghost",3,"routerLink"],[1,"fas","fa-edit"],[1,"btn","btn-sm","btn-ghost","text-error",3,"click"],[1,"fas","fa-trash"]],template:function(e,o){e&1&&(t(0,"div",0)(1,"h1",1),n(2,"Servicios"),i(),t(3,"a",2),l(4,"i",3),n(5," Nuevo Servicio "),i()(),t(6,"div",4)(7,"div",5)(8,"table",6)(9,"thead")(10,"tr",7)(11,"th"),n(12,"Nombre"),i(),t(13,"th"),n(14,"Descripci\xF3n"),i(),t(15,"th"),n(16,"Precio"),i(),t(17,"th"),n(18,"Duraci\xF3n"),i(),t(19,"th"),n(20,"Estado"),i(),t(21,"th"),n(22,"Acciones"),i()()(),t(23,"tbody"),g(24,V,3,0,"tr")(25,$,3,0,"tr")(26,q,2,0),i()()()()),e&2&&(s(24),x(o.loading()?24:o.services().length===0?25:26))},dependencies:[k,N,I],encapsulation:2})};export{F as AdminServicesPage};
