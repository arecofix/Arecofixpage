import{a as m}from"./chunk-MQUL3GSM.js";import{a as d}from"./chunk-SY4JJUGQ.js";import{a as s}from"./chunk-HVYNZZQK.js";import{C as f,R as i,W as o,l as c,ma as n,oa as v}from"./chunk-NLTFPZ75.js";var p=class t{logger=o(s);repository=o(m);constructor(){}getData(r={}){return this.repository.findWithFilters(r).pipe(f(e=>(this.logger.error("ProductService query error",e),c({first:1,prev:void 0,next:void 0,last:1,pages:1,items:0,data:[]}))))}static \u0275fac=function(e){return new(e||t)};static \u0275prov=i({token:t,factory:t.\u0275fac,providedIn:"root"})};var g=class t{logger=o(s);toastService=o(d);favorites=n([]);constructor(){let r=localStorage.getItem("favorites");if(r)try{this.favorites.set(JSON.parse(r))}catch(e){console.error("Error parsing favorites",e),this.favorites.set([])}v(()=>{localStorage.setItem("favorites",JSON.stringify(this.favorites()))})}toggleFavorite(r){this.isFavorite(r.id)?this.removeFavorite(r.id):this.addFavorite(r)}addFavorite(r){this.favorites.update(e=>e.some(a=>a.id===r.id)?e:[...e,r]),this.logger.debug("Product added to favorites",{productName:r.name}),this.toastService.show("Agregado a favoritos","success")}removeFavorite(r){this.favorites.update(e=>e.filter(a=>a.id!==r)),this.logger.debug("Product removed from favorites",{productId:r}),this.toastService.show("Eliminado de favoritos","info")}isFavorite(r){return this.favorites().some(e=>e.id===r)}static \u0275fac=function(e){return new(e||t)};static \u0275prov=i({token:t,factory:t.\u0275fac,providedIn:"root"})};export{p as a,g as b};
