import{a as M}from"./chunk-XUGVF5KJ.js";import{a as j,d as D}from"./chunk-A4BZPZBO.js";import{b as I,c as k}from"./chunk-KW5XLJRX.js";import"./chunk-6X4SCXZ6.js";import"./chunk-LAXSCOZR.js";import{Ca as S,Cb as o,Da as _,Db as p,Eb as b,Ha as s,S as P,Ta as C,Tb as y,Vb as w,X as m,bb as g,cb as v,ec as E,hb as h,ib as t,jb as a,kb as r,tc as T,ub as d}from"./chunk-7J724YZS.js";import{a as f,b as u}from"./chunk-VOSPIT4N.js";var x=class n{auth=m(M);supabase=this.auth.getSupabaseClient();async getPostBySlug(i){let{data:e,error:l}=await this.supabase.from("posts").select("*").eq("slug",i).single();if(l){if(console.error("PostService Error:",l),l.code==="PGRST116")return null;throw l}return u(f({},e),{image:e.image})}async getRecentPosts(i=5){let{data:e,error:l}=await this.supabase.from("posts").select("*").order("created_at",{ascending:!1}).limit(i);if(l)throw l;return(e||[]).map(c=>u(f({},c),{image:c.featured_image||c.image||c.image_url}))}static \u0275fac=function(e){return new(e||n)};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})};function F(n,i){n&1&&(t(0,"div",1),r(1,"div",3),a())}function R(n,i){if(n&1&&(t(0,"div",2)(1,"div",4),r(2,"i",5),a(),t(3,"h2",6),o(4,"No pudimos cargar la entrada"),a(),t(5,"p",7),o(6),a(),t(7,"a",8),o(8," Volver al Inicio "),a()()),n&2){let e=d();s(6),p(e.error)}}function z(n,i){if(n&1&&(t(0,"div",9),r(1,"div",23)(2,"img",24),t(3,"div",25)(4,"div",26)(5,"a",27),r(6,"i",28),o(7," Volver "),a(),t(8,"h1",29),o(9),a(),t(10,"div",30)(11,"span",31),o(12,"Blog"),a(),r(13,"i",32),t(14,"time"),o(15),y(16,"date"),a()()()()()),n&2){let e=d(2);s(2),h("src",e.post.image,_)("alt",e.post.title),s(7),b(" ",e.post.title," "),s(6),p(w(16,4,e.post.created_at,"longDate"))}}function A(n,i){if(n&1&&(t(0,"div",10)(1,"div",26)(2,"a",33),r(3,"i",28),o(4," Volver al Inicio "),a(),t(5,"h1",34),o(6),a(),t(7,"div",35),r(8,"i",32),t(9,"time"),o(10),y(11,"date"),a()()()()),n&2){let e=d(2);s(6),b(" ",e.post.title," "),s(4),p(w(11,2,e.post.created_at,"longDate"))}}function H(n,i){if(n&1&&(t(0,"article"),g(1,z,17,7,"div",9)(2,A,12,5,"div",10),t(3,"div",11),r(4,"div",12),t(5,"div",13)(6,"div",14)(7,"div",15),o(8," Compartir esta entrada: "),a(),t(9,"div",16)(10,"button",17),r(11,"i",18),a(),t(12,"button",19),r(13,"i",20),a(),t(14,"button",21),r(15,"i",22),a()()()()()()),n&2){let e=d();s(),v(e.post.image?1:2),s(3),h("innerHTML",e.post.content,S)}}var L=class n{route=m(j);postService=m(x);cdr=m(E);titleService=m(k);metaService=m(I);post=null;loading=!0;error=null;async ngOnInit(){this.route.paramMap.subscribe(async i=>{let e=i.get("slug");e&&await this.loadPost(e)})}async loadPost(i){try{this.loading=!0,this.error=null,this.post=await this.postService.getPostBySlug(i),this.post?this.updateMetaTags(this.post):this.error="Entrada no encontrada"}catch{this.error="Error al cargar la entrada"}finally{this.loading=!1,this.cdr.markForCheck()}}updateMetaTags(i){this.titleService.setTitle(`${i.title} | Arecofix`),i.meta_description&&this.metaService.updateTag({name:"description",content:i.meta_description}),i.meta_title&&this.metaService.updateTag({name:"title",content:i.meta_title})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=C({type:n,selectors:[["app-post-page"]],decls:4,vars:1,consts:[[1,"min-h-screen","bg-white"],[1,"flex","justify-center","items-center","h-screen"],[1,"flex","flex-col","items-center","justify-center","h-[60vh]","text-center","px-4"],[1,"animate-spin","rounded-full","h-12","w-12","border-t-2","border-b-2","border-indigo-600"],[1,"bg-red-50","p-4","rounded-full","mb-4"],[1,"fas","fa-exclamation-triangle","text-red-500","text-2xl"],[1,"text-2xl","font-bold","text-gray-900","mb-2"],[1,"text-gray-500","mb-6"],["routerLink","/",1,"px-6","py-3","bg-indigo-600","hover:bg-indigo-700","text-white","font-medium","rounded-full","transition-colors"],[1,"relative","h-[40vh]","md:h-[50vh]","w-full","overflow-hidden"],[1,"bg-gray-900","py-20","md:py-32"],[1,"container","mx-auto","px-4","max-w-3xl","py-12","md:py-20"],[1,"prose","prose-lg","md:prose-xl","prose-indigo","mx-auto","text-gray-700","leading-relaxed",3,"innerHTML"],[1,"mt-16","pt-8","border-t","border-gray-200"],[1,"flex","flex-col","md:flex-row","justify-between","items-center","gap-6"],[1,"text-gray-500","font-medium"],[1,"flex","gap-4"],[1,"w-10","h-10","rounded-full","bg-[#25D366]","text-white","flex","items-center","justify-center","hover:opacity-90","transition-opacity"],[1,"fab","fa-whatsapp","text-xl"],[1,"w-10","h-10","rounded-full","bg-[#1877F2]","text-white","flex","items-center","justify-center","hover:opacity-90","transition-opacity"],[1,"fab","fa-facebook-f"],[1,"w-10","h-10","rounded-full","bg-[#1DA1F2]","text-white","flex","items-center","justify-center","hover:opacity-90","transition-opacity"],[1,"fab","fa-twitter"],[1,"absolute","inset-0","bg-black/40","z-10"],[1,"w-full","h-full","object-cover",3,"src","alt"],[1,"absolute","inset-0","z-20","flex","items-end","pb-12","md:pb-20"],[1,"container","mx-auto","px-4","max-w-4xl"],["routerLink","/",1,"inline-flex","items-center","text-white/80","hover:text-white","mb-6","transition-colors","text-sm","font-medium","backdrop-blur-sm","bg-black/20","px-3","py-1","rounded-full"],[1,"fas","fa-arrow-left","mr-2"],[1,"text-3xl","md:text-5xl","lg:text-6xl","font-bold","text-white","leading-tight","drop-shadow-lg","mb-4"],[1,"flex","items-center","text-white/90","text-sm","md:text-base","font-medium"],[1,"bg-indigo-600","px-3","py-1","rounded-full","text-xs","uppercase","tracking-wider","mr-4"],[1,"far","fa-calendar-alt","mr-2"],["routerLink","/",1,"inline-flex","items-center","text-white/80","hover:text-white","mb-8","transition-colors","text-sm","font-medium"],[1,"text-3xl","md:text-5xl","lg:text-6xl","font-bold","text-white","leading-tight","mb-6"],[1,"flex","items-center","text-gray-400","text-sm","md:text-base"]],template:function(e,l){e&1&&(t(0,"div",0),g(1,F,2,0,"div",1)(2,R,9,1,"div",2)(3,H,16,2,"article"),a()),e&2&&(s(),v(l.loading?1:l.error?2:l.post?3:-1))},dependencies:[D,T],encapsulation:2,changeDetection:0})};export{L as PostPage};
