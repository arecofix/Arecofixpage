import{a as F}from"./chunk-CL243RJL.js";import"./chunk-ZT4MGTUK.js";import{d as T}from"./chunk-VKJMBSB6.js";import"./chunk-7QORBSNT.js";import"./chunk-QGSRP5SS.js";import{l as A,m as k}from"./chunk-KW2FFXRI.js";import{$ as _,Aa as b,Bb as r,Cb as m,Da as s,Db as u,Pb as w,Qa as h,Sb as x,Tb as f,V as v,_ as C,ab as d,bb as c,eb as E,fb as S,gb as p,hb as t,ib as i,jb as o,nb as y,rb as I,tb as g,zb as P}from"./chunk-VQO264VU.js";import"./chunk-VOSPIT4N.js";var L=a=>["/admin/courses",a],O=(a,n)=>n.id;function j(a,n){if(a&1&&(t(0,"span",13),r(1),x(2,"currency"),i()),a&2){let e=g().$implicit;s(),u(" Oferta: ",f(2,1,e.sale_price)," ")}}function q(a,n){if(a&1){let e=y();t(0,"tr")(1,"td")(2,"div",8)(3,"div",9),o(4,"img",10),i()()(),t(5,"td")(6,"div",11),r(7),i(),t(8,"div",12),r(9),i()(),t(10,"td"),r(11),x(12,"currency"),o(13,"br"),d(14,j,3,3,"span",13),i(),t(15,"td"),r(16),i(),t(17,"td")(18,"div",14),r(19),i()(),t(20,"td")(21,"div",15)(22,"a",16),o(23,"i",17),i(),t(24,"button",18),I("click",function(){let $=C(e).$implicit,D=g();return _(D.deleteCourse($))}),o(25,"i",19),i()()()()}if(a&2){let e=n.$implicit;s(4),p("src",e.image_url,b)("alt",e.title),s(3),m(e.title),s(2),m(e.slug),s(2),u(" ",f(12,13,e.price)," "),s(3),c(e.sale_price?14:-1),s(2),m(e.level),s(2),P("badge-success",e.is_active)("badge-ghost",!e.is_active),s(),u(" ",e.is_active?"Activo":"Inactivo"," "),s(3),p("routerLink",w(15,L,e.id))}}function M(a,n){a&1&&(t(0,"tr")(1,"td",20),r(2," No hay cursos registrados. "),i()())}function V(a,n){a&1&&(t(0,"div",7),o(1,"span",21),i())}var N=class a{coursesService=v(F);courses=[];loading=!0;ngOnInit(){this.loadCourses()}loadCourses(){this.loading=!0,this.coursesService.getCourses().subscribe({next:n=>{this.courses=n.data||[],this.loading=!1},error:n=>{console.error("Error loading courses",n),this.loading=!1}})}async deleteCourse(n){confirm(`\xBFEst\xE1s seguro de eliminar el curso "${n.title}"?`)&&this.coursesService.deleteCourse(n.id).subscribe({next:()=>{this.courses=this.courses.filter(e=>e.id!==n.id)},error:e=>alert("Error al eliminar el curso: "+e.message)})}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=h({type:a,selectors:[["app-admin-courses-page"]],decls:27,vars:2,consts:[[1,"flex","justify-between","items-center","mb-6"],[1,"text-2xl","font-bold","text-gray-800"],["routerLink","/admin/courses/new",1,"btn","btn-primary"],[1,"fas","fa-plus","mr-2"],[1,"overflow-x-auto","bg-white","rounded-lg","shadow","text-gray-800"],[1,"table","w-full"],[1,"text-gray-800"],[1,"flex","justify-center","py-8"],[1,"avatar"],[1,"mask","mask-squircle","w-12","h-12"],[3,"src","alt"],[1,"font-bold"],[1,"text-sm","opacity-50"],[1,"text-xs","text-green-600"],[1,"badge"],[1,"flex","gap-2"],[1,"btn","btn-sm","btn-square","btn-ghost","text-blue-600",3,"routerLink"],[1,"fas","fa-edit"],[1,"btn","btn-sm","btn-square","btn-ghost","text-red-600",3,"click"],[1,"fas","fa-trash"],["colspan","6",1,"text-center","py-8","text-gray-500"],[1,"loading","loading-spinner","loading-lg"]],template:function(e,l){e&1&&(t(0,"div",0)(1,"h2",1),r(2,"Administrar Cursos"),i(),t(3,"a",2),o(4,"i",3),r(5," Nuevo Curso "),i()(),t(6,"div",4)(7,"table",5)(8,"thead")(9,"tr",6)(10,"th"),r(11,"Imagen"),i(),t(12,"th"),r(13,"T\xEDtulo"),i(),t(14,"th"),r(15,"Precio"),i(),t(16,"th"),r(17,"Nivel"),i(),t(18,"th"),r(19,"Estado"),i(),t(20,"th"),r(21,"Acciones"),i()()(),t(22,"tbody"),E(23,q,26,17,"tr",null,O),d(25,M,3,0,"tr"),i()()(),d(26,V,2,0,"div",7)),e&2&&(s(23),S(l.courses),s(2),c(l.courses.length===0&&!l.loading?25:-1),s(),c(l.loading?26:-1))},dependencies:[k,T,A],encapsulation:2})};export{N as AdminCoursesPage};
