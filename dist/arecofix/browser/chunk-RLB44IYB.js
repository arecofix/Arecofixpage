import{a as I}from"./chunk-VIGZEFLJ.js";import{a as F}from"./chunk-5Z3GVHAK.js";import"./chunk-YSO73UTU.js";import"./chunk-V2I26IUK.js";import{d as T,i as k}from"./chunk-AICXNJUB.js";import"./chunk-BASCMOWO.js";import"./chunk-AUYAPYBZ.js";import{n as P}from"./chunk-QSLR4FGB.js";import"./chunk-LAXSCOZR.js";import{Fa as x,Fb as S,Hb as r,Ia as o,Ib as u,Jb as w,Rb as B,Vb as A,Wa as v,X as l,aa as _,ba as b,gb as g,hb as p,kb as h,lb as y,mb as f,na as m,nb as n,ob as a,pb as d,tb as C,xb as E,zb as s}from"./chunk-UMWLAP3G.js";import"./chunk-VOSPIT4N.js";var D=e=>["/admin/brands",e],R=(e,i)=>i.id;function j(e,i){e&1&&(n(0,"tr")(1,"td",8),r(2,"Cargando..."),a()())}function $(e,i){e&1&&(n(0,"tr")(1,"td",8),r(2,"No hay marcas registradas."),a()())}function z(e,i){if(e&1&&d(0,"img",9),e&2){let t=s().$implicit;f("alt",B(t.name))("src",t.logo_url,x)}}function O(e,i){e&1&&(n(0,"div",10),d(1,"i",16),a())}function V(e,i){if(e&1){let t=C();n(0,"tr")(1,"td"),g(2,z,1,3,"img",9)(3,O,2,0,"div",10),a(),n(4,"td")(5,"div",11),r(6),a(),n(7,"div",12),r(8),a()(),n(9,"td")(10,"button",13),E("click",function(){let M=_(t).$implicit,L=s(2);return b(L.toggleStatus(M))}),r(11),a()(),n(12,"td")(13,"a",14),d(14,"i",15),a()()()}if(e&2){let t=i.$implicit;o(2),p(t.logo_url?2:3),o(4),u(t.name),o(2),u(t.slug),o(2),S("badge-success",t.is_active)("badge-error",!t.is_active),o(),w(" ",t.is_active?"Activo":"Inactivo"," "),o(2),f("routerLink",A(9,D,t.id))}}function U(e,i){if(e&1&&h(0,V,15,11,"tr",null,R),e&2){let t=s();y(t.brands())}}var N=class e{brandRepo=l(F);logger=l(k);notification=l(I);brands=m([],{});loading=m(!0,{});async ngOnInit(){await this.loadBrands()}async loadBrands(){this.loading.set(!0);try{let i=await this.brandRepo.findAll({column:"name",ascending:!0});this.brands.set(i)}catch(i){this.logger.error("Failed to load brands",i),this.notification.showError("Error al cargar las marcas")}finally{this.loading.set(!1)}}async toggleStatus(i){try{await this.brandRepo.toggleStatus(i.id,i.is_active),await this.loadBrands(),this.notification.showSuccess("Estado actualizado correctamente")}catch(t){this.logger.error("Failed to toggle brand status",t),this.notification.showError("Error al actualizar el estado")}}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=v({type:e,selectors:[["app-admin-brands-page"]],decls:23,vars:1,consts:[[1,"flex","justify-between","items-center","mb-6"],[1,"text-2xl","font-bold","text-gray-800"],["routerLink","/admin/brands/new",1,"btn","btn-primary"],[1,"fas","fa-plus","mr-2"],[1,"bg-white","rounded-lg","shadow","overflow-hidden","text-gray-800"],[1,"overflow-x-auto"],[1,"table","w-full"],[1,"text-gray-800"],["colspan","4",1,"text-center","py-4"],[1,"w-10","h-10","object-contain",3,"src","alt"],[1,"w-10","h-10","bg-gray-100","rounded","flex","items-center","justify-center","text-gray-400"],[1,"font-bold"],[1,"text-sm","opacity-50"],[1,"badge",3,"click"],[1,"btn","btn-sm","btn-ghost",3,"routerLink"],[1,"fas","fa-edit"],[1,"fas","fa-image"]],template:function(t,c){t&1&&(n(0,"div",0)(1,"h1",1),r(2,"Marcas"),a(),n(3,"a",2),d(4,"i",3),r(5," Nueva Marca "),a()(),n(6,"div",4)(7,"div",5)(8,"table",6)(9,"thead")(10,"tr",7)(11,"th"),r(12,"Logo"),a(),n(13,"th"),r(14,"Nombre"),a(),n(15,"th"),r(16,"Estado"),a(),n(17,"th"),r(18,"Acciones"),a()()(),n(19,"tbody"),g(20,j,3,0,"tr")(21,$,3,0,"tr")(22,U,2,0),a()()()()),t&2&&(o(20),p(c.loading()?20:c.brands().length===0?21:22))},dependencies:[P,T],encapsulation:2})};export{N as AdminBrandsPage};
