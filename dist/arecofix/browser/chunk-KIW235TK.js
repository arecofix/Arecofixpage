import{f as s}from"./chunk-YSO73UTU.js";import{a as m}from"./chunk-XUGVF5KJ.js";import{i as g}from"./chunk-A4BZPZBO.js";import{S as l,X as c}from"./chunk-7J724YZS.js";var i=class{constructor(e,r){this.supabase=e;this.logger=r}async findAll(e){try{let r=this.supabase.from(this.tableName).select("*");e&&(r=r.order(e.column,{ascending:e.ascending??!0}));let{data:t,error:a}=await r;if(a)throw new s(a.message,a);return t||[]}catch(r){throw this.logger.error(`Error fetching all ${this.tableName}`,r),r}}async findById(e){try{let{data:r,error:t}=await this.supabase.from(this.tableName).select("*").eq("id",e).single();if(t){if(t.code==="PGRST116")return null;throw new s(t.message,t)}return r}catch(r){throw this.logger.error(`Error fetching ${this.tableName} by ID`,r),r}}async create(e){try{let{data:r,error:t}=await this.supabase.from(this.tableName).insert(e).select().single();if(t)throw new s(t.message,t);return r}catch(r){throw this.logger.error(`Error creating ${this.tableName}`,r),r}}async update(e,r){try{let{data:t,error:a}=await this.supabase.from(this.tableName).update(r).eq("id",e).select().single();if(a)throw new s(a.message,a);return t}catch(t){throw this.logger.error(`Error updating ${this.tableName}`,t),t}}async delete(e){try{let{error:r}=await this.supabase.from(this.tableName).delete().eq("id",e);if(r)throw new s(r.message,r)}catch(r){throw this.logger.error(`Error deleting ${this.tableName}`,r),r}}async toggleStatus(e,r){try{let{data:t,error:a}=await this.supabase.from(this.tableName).update({is_active:!r}).eq("id",e).select().single();if(a)throw new s(a.message,a);return t}catch(t){throw this.logger.error(`Error toggling ${this.tableName} status`,t),t}}async findWhere(e,r,t){try{let a=this.supabase.from(this.tableName).select("*").eq(e,r);t&&(a=a.order(t.column,{ascending:t.ascending??!0}));let{data:u,error:n}=await a;if(n)throw new s(n.message,n);return u||[]}catch(a){throw this.logger.error(`Error fetching ${this.tableName} with filter`,a),a}}async count(){try{let{count:e,error:r}=await this.supabase.from(this.tableName).select("*",{count:"exact",head:!0});if(r)throw new s(r.message,r);return e||0}catch(e){throw this.logger.error(`Error counting ${this.tableName}`,e),e}}};var h=class o extends i{tableName="brands";constructor(){let e=c(m),r=c(g);super(e.getSupabaseClient(),r)}static \u0275fac=function(r){return new(r||o)};static \u0275prov=l({token:o,factory:o.\u0275fac,providedIn:"root"})};export{h as a};
