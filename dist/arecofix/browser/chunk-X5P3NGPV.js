import{a as h}from"./chunk-JYOT3LNB.js";import{a as f}from"./chunk-F5WBDNED.js";import{C as u,R as c,V as m,W as b,k as p,l as o,r as n}from"./chunk-G4WDTWI7.js";var _=class l{constructor(r){this.authService=r;this.supabase=this.authService.getSupabaseClient()}supabase;logger=b(f);processResponse(r,t,e){let s=t||r.length,i=e._per_page>0?e._per_page:s,a=Math.max(1,Math.ceil(s/(i||1)));return{first:1,prev:e._page>1?e._page-1:null,next:e._page<a?e._page+1:null,last:a,pages:a,items:s,data:r}}getData(r){let{_page:t=1,_per_page:e=10}=r,s=(t-1)*e,i=s+e-1;return p(this.supabase.from("categories").select("*",{count:"exact"}).eq("is_active",!0).range(s,i)).pipe(n(({data:a,count:v,error:g})=>{if(g)throw g;return this.processResponse(a||[],v,{_page:t,_per_page:e})}),u(a=>(this.logger.error("Supabase Error:",a),o({first:1,prev:null,next:null,last:1,pages:1,items:0,data:[]}))))}getFeaturedData(){return p(this.supabase.from("categories").select("*",{count:"exact"}).eq("is_active",!0).order("name").limit(100)).pipe(n(({data:e,count:s,error:i})=>{if(i)throw i;return this.processResponse(e||[],s,{_page:1,_per_page:100})}),u(e=>(this.logger.error("Supabase Error:",e),o({first:1,prev:null,next:null,last:1,pages:1,items:0,data:[]}))))}getDataBySlug(r){return p(this.supabase.from("categories").select("*").eq("slug",r).limit(1)).pipe(n(({data:t,error:e})=>{if(e)throw e;return this.processResponse(t||[],t?.length||0,{_page:1,_per_page:1})}),u(t=>(this.logger.error("Supabase Error:",t),o({first:1,prev:null,next:null,last:1,pages:1,items:0,data:[]}))))}getById(r){return!r||r==="null"?o(null):p(this.supabase.from("categories").select("*").eq("id",r).single()).pipe(n(({data:t,error:e})=>{if(e)throw e;return t}),u(t=>(this.logger.error("Supabase Error:",t),o(null))))}static \u0275fac=function(t){return new(t||l)(m(h))};static \u0275prov=c({token:l,factory:l.\u0275fac,providedIn:"root"})};export{_ as a};
