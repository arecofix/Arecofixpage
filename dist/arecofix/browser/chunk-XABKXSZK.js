import{a as A,b as T,d as N,e as x,f as L,g as D,h as B,p as I,r as j}from"./chunk-ENL3VNME.js";import{a as F}from"./chunk-4FNFMYN4.js";import{a as E,c as P,d as W}from"./chunk-4WX2KV2B.js";import"./chunk-QBWIJBVM.js";import"./chunk-BCXBSHNT.js";import{o as w}from"./chunk-YHPCNF66.js";import{Fa as r,Fb as o,Gb as v,Hb as C,Jb as l,Kb as d,Lb as m,Ta as _,W as f,eb as h,fb as y,kb as b,lb as t,ma as g,mb as n,nb as c,vb as S,xb as M}from"./chunk-YBYZLFPG.js";import"./chunk-VOSPIT4N.js";function R(u,p){if(u&1&&(t(0,"div",6),c(1,"i",25),t(2,"span"),o(3),n()()),u&2){let a=M();r(3),v(a.error())}}function q(u,p){u&1&&c(0,"span",24)}var k=class u{route=f(E);router=f(P);auth=f(F);id=null;form=g({name:"",type:"",rubro:"",address:"",cuil:"",email:"",phone:"",is_active:!0},{});loading=g(!0,{});saving=g(!1,{});error=g(null,{});async ngOnInit(){if(this.id=this.route.snapshot.paramMap.get("id"),this.id){let p=this.auth.getSupabaseClient(),{data:a,error:e}=await p.from("suppliers").select("*").eq("id",this.id).single();a&&this.form.set({name:a.name,type:a.type||"",rubro:a.rubro||"",address:a.address||"",cuil:a.tax_id||"",email:a.email||"",phone:a.phone||"",is_active:a.is_active})}this.loading.set(!1)}async save(){this.saving.set(!0),this.error.set(null);let p=this.auth.getSupabaseClient(),a={name:this.form().name,type:this.form().type,rubro:this.form().rubro,address:this.form().address,tax_id:this.form().cuil,email:this.form().email,phone:this.form().phone,is_active:this.form().is_active};try{if(this.id){let{error:e}=await p.from("suppliers").update(a).eq("id",this.id);if(e)throw e}else{let{error:e}=await p.from("suppliers").insert(a);if(e)throw e}this.router.navigate(["/admin/suppliers"])}catch(e){this.error.set(e.message)}finally{this.saving.set(!1)}}static \u0275fac=function(a){return new(a||u)};static \u0275cmp=_({type:u,selectors:[["app-admin-supplier-form-page"]],decls:50,vars:12,consts:[[1,"max-w-2xl","mx-auto"],[1,"flex","items-center","gap-4","mb-6"],["routerLink","/admin/suppliers",1,"btn","btn-circle","btn-ghost"],[1,"fas","fa-arrow-left"],[1,"text-2xl","font-bold","text-gray-800"],[1,"bg-white","rounded-lg","shadow","p-6"],[1,"alert","alert-error","mb-4"],[1,"space-y-4",3,"ngSubmit"],[1,"form-control"],[1,"label"],["type","text","name","name","required","",1,"input","input-bordered",3,"ngModelChange","ngModel"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["type","text","name","type","placeholder","Ej: Mayorista, Fabricante",1,"input","input-bordered",3,"ngModelChange","ngModel"],["type","text","name","rubro","placeholder","Ej: Electr\xF3nica",1,"input","input-bordered",3,"ngModelChange","ngModel"],["type","text","name","cuil",1,"input","input-bordered",3,"ngModelChange","ngModel"],["type","text","name","phone",1,"input","input-bordered",3,"ngModelChange","ngModel"],["type","email","name","email",1,"input","input-bordered",3,"ngModelChange","ngModel"],["type","text","name","address",1,"input","input-bordered",3,"ngModelChange","ngModel"],[1,"label","cursor-pointer","justify-start","gap-4"],[1,"label-text"],["type","checkbox","name","is_active",1,"toggle","toggle-primary",3,"ngModelChange","ngModel"],[1,"flex","justify-end","gap-4","mt-6"],["routerLink","/admin/suppliers",1,"btn","btn-ghost"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"loading","loading-spinner"],[1,"fas","fa-exclamation-circle"]],template:function(a,e){a&1&&(t(0,"div",0)(1,"div",1)(2,"a",2),c(3,"i",3),n(),t(4,"h1",4),o(5),n()(),t(6,"div",5),h(7,R,4,1,"div",6),t(8,"form",7),S("ngSubmit",function(){return e.save()}),t(9,"div",8)(10,"label",9),o(11,"Nombre"),n(),t(12,"input",10),m("ngModelChange",function(i){return d(e.form().name,i)||(e.form().name=i),i}),n()(),t(13,"div",11)(14,"div",8)(15,"label",9),o(16,"Tipo"),n(),t(17,"input",12),m("ngModelChange",function(i){return d(e.form().type,i)||(e.form().type=i),i}),n()(),t(18,"div",8)(19,"label",9),o(20,"Rubro"),n(),t(21,"input",13),m("ngModelChange",function(i){return d(e.form().rubro,i)||(e.form().rubro=i),i}),n()()(),t(22,"div",11)(23,"div",8)(24,"label",9),o(25,"CUIL/CUIT"),n(),t(26,"input",14),m("ngModelChange",function(i){return d(e.form().cuil,i)||(e.form().cuil=i),i}),n()(),t(27,"div",8)(28,"label",9),o(29,"Tel\xE9fono"),n(),t(30,"input",15),m("ngModelChange",function(i){return d(e.form().phone,i)||(e.form().phone=i),i}),n()()(),t(31,"div",8)(32,"label",9),o(33,"Email"),n(),t(34,"input",16),m("ngModelChange",function(i){return d(e.form().email,i)||(e.form().email=i),i}),n()(),t(35,"div",8)(36,"label",9),o(37,"Direcci\xF3n"),n(),t(38,"input",17),m("ngModelChange",function(i){return d(e.form().address,i)||(e.form().address=i),i}),n()(),t(39,"div",8)(40,"label",18)(41,"span",19),o(42,"Activo"),n(),t(43,"input",20),m("ngModelChange",function(i){return d(e.form().is_active,i)||(e.form().is_active=i),i}),n()()(),t(44,"div",21)(45,"a",22),o(46,"Cancelar"),n(),t(47,"button",23),h(48,q,1,0,"span",24),o(49," Guardar "),n()()()()()),a&2&&(r(5),C("",e.id?"Editar":"Nuevo"," Proveedor"),r(2),y(e.error()?7:-1),r(5),l("ngModel",e.form().name),r(5),l("ngModel",e.form().type),r(4),l("ngModel",e.form().rubro),r(5),l("ngModel",e.form().cuil),r(4),l("ngModel",e.form().phone),r(4),l("ngModel",e.form().email),r(4),l("ngModel",e.form().address),r(5),l("ngModel",e.form().is_active),r(4),b("disabled",e.saving()),r(),y(e.saving()?48:-1))},dependencies:[w,j,B,T,A,N,x,I,D,L,W],encapsulation:2})};export{k as AdminSupplierFormPage};
