import{a}from"./chunk-F4YL3ILH.js";import{A as T,n,u as v,v as S,x as y,y as f}from"./chunk-PNC5ZYCG.js";import{A as o,Ba as g,R as d,W as r,ea as h,r as l,t as m,xa as u}from"./chunk-YEQHDEKA.js";var b="SEO_DATA",D=class s{titleService=r(S);metaService=r(v);router=r(T);activatedRoute=r(f);document=r(h);platformId=r(u);transferState=r(g);constructor(){this.init()}init(){if(!n(this.platformId)){let t=this.transferState.get(b,null);t&&this.setPageData(t)}this.router.events.pipe(o(t=>t instanceof y),l(()=>this.rootRoute(this.activatedRoute)),o(t=>t.outlet==="primary"),m(t=>t.data)).subscribe(t=>{if(t.seo){let e=t.seo;this.setPageData(e),n(this.platformId)&&this.transferState.set(b,e)}})}rootRoute(t){for(;t.firstChild;)t=t.firstChild;return t}resetData(){this.metaService.removeTag('property="product:price:amount"'),this.metaService.removeTag('property="product:price:currency"'),this.metaService.removeTag('property="article:published_time"'),this.metaService.removeTag('property="article:author"'),this.metaService.updateTag({property:"og:type",content:"website"})}setPageData(t){let{title:e,description:i,imageUrl:w,type:A="website",keywords:c}=t;this.resetData();let p=e.includes("|")||e.includes("Arecofix")?e:`${e} | Arecofix`;this.titleService.setTitle(p),this.metaService.updateTag({name:"description",content:i}),c&&this.metaService.updateTag({name:"keywords",content:c}),this.setSocialMediaTags({title:p,description:i,image:w||`${a.baseUrl}/assets/img/brands/logo/logo-normal1.PNG`,url:this.router.url,type:A}),this.setCanonicalUrl(this.router.url)}setSocialMediaTags(t){this.metaService.updateTag({property:"og:title",content:t.title}),this.metaService.updateTag({property:"og:description",content:t.description}),this.metaService.updateTag({property:"og:type",content:t.type}),this.metaService.updateTag({property:"og:url",content:t.url.startsWith("http")?t.url:`${a.baseUrl}${t.url}`});let e=t.image.startsWith("http")?t.image:`${a.baseUrl}${t.image.startsWith("/")?"":"/"}${t.image}`;this.metaService.updateTag({property:"og:image",content:e}),e.startsWith("https")&&this.metaService.updateTag({property:"og:image:secure_url",content:e}),this.metaService.updateTag({name:"twitter:card",content:"summary_large_image"}),this.metaService.updateTag({name:"twitter:title",content:t.title}),this.metaService.updateTag({name:"twitter:description",content:t.description}),this.metaService.updateTag({name:"twitter:image",content:e})}setCanonicalUrl(t){let e=this.document.querySelector('link[rel="canonical"]');e||(e=this.document.createElement("link"),e.setAttribute("rel","canonical"),this.document.head.appendChild(e));let i=t.startsWith("http")?t:`${a.baseUrl}${t}`;e.setAttribute("href",i)}setJsonLd(t){let e="json-ld-schema",i=this.document.getElementById(e);i||(i=this.document.createElement("script"),i.id=e,i.type="application/ld+json",this.document.head.appendChild(i)),i.text=JSON.stringify(t)}static \u0275fac=function(e){return new(e||s)};static \u0275prov=d({token:s,factory:s.\u0275fac,providedIn:"root"})};export{D as a};
