import{a as me}from"./chunk-ZUE723DQ.js";import{b as xe}from"./chunk-T55MUM3D.js";import{a as ge}from"./chunk-YLKVEOM5.js";import{a as _e}from"./chunk-3QMW2KPR.js";import{c as D}from"./chunk-Y2XXPECX.js";import"./chunk-FNOMVEKC.js";import{a as te}from"./chunk-OHIERJWS.js";import"./chunk-EWVJVUFG.js";import{a as be}from"./chunk-WW24ATXE.js";import{a as ye}from"./chunk-PUIWKWMZ.js";import{a as ie}from"./chunk-LSCGJNP2.js";import"./chunk-MQUL3GSM.js";import"./chunk-SY4JJUGQ.js";import{b as re,d as ne,e as ae,f as oe,g as le,h as ce,i as de,m as se,n as ue,s as pe}from"./chunk-T33GMKOB.js";import"./chunk-HVYNZZQK.js";import"./chunk-M7RWEG4P.js";import{A as Z,E as ee,j as K,l as W,x as X,z as Y}from"./chunk-T7HZBI4H.js";import{$ as b,Ab as a,Bb as s,E as O,G as L,Hb as C,L as V,Lb as p,N as A,Nb as u,Oa as $,Ta as c,Tb as U,Vb as o,W as y,Wb as v,Xb as S,aa as f,d as N,fb as z,gc as G,hc as J,l as Q,lc as B,ma as x,mc as T,r as q,s as j,sb as g,tb as _,vb as H,vc as I,wb as P,xb as w,yb as m,zb as r}from"./chunk-NLTFPZ75.js";import{c as F}from"./chunk-7CGTOI24.js";var Ce=()=>[1,2,3,4,5,6],he=t=>["/productos/categoria",t],fe=(t,i)=>i.id;function Pe(t,i){if(t&1&&(o(0," Mostrando "),r(1,"span",52),o(2),a(),o(3," resultados ")),t&2){let e,n=u();c(2),v((e=n.productsRs.value())==null?null:e.items)}}function we(t,i){t&1&&o(0," Cargando cat\xE1logo... ")}function Se(t,i){t&1&&s(0,"div",53)}function ke(t,i){t&1&&(r(0,"div",30),P(1,Se,1,0,"div",53,H),a()),t&2&&(c(),w(G(0,Ce)))}function Ee(t,i){if(t&1&&s(0,"is-error",31),t&2){let e,n=u();m("message",((e=n.productsRs.error())==null?null:e.message)||"Error al cargar categor\xEDa")}}function Me(t,i){if(t&1){let e=C();r(0,"div",54),s(1,"i",55),r(2,"h3",56),o(3,"Sin resultados en esta categor\xEDa"),a(),r(4,"button",57),p("click",function(){b(e);let l=u(2);return l.onSearch(""),l.minPriceInput.set(null),l.maxPriceInput.set(null),f(l.applyPriceFilter())}),o(5," Ver todos los productos "),a()()}}function Ve(t,i){if(t&1){let e=C();r(0,"product-card",61),p("quickView",function(l){b(e);let d=u(3);return f(d.openQuickView(l))}),a()}if(t&2){let e=i.$implicit,n=i.$index;m("product",e)("isPriority",n<2)}}function Be(t,i){if(t&1&&(r(0,"div",60),s(1,"pagination",62),a()),t&2){let e=u(3);c(),m("pages",e.paginationData().pages)("currentPage",e.paginationService.currentPage())}}function Te(t,i){if(t&1&&(r(0,"div",58),P(1,Ve,1,2,"product-card",59,fe),a(),g(3,Be,2,2,"div",60)),t&2){let e=u(2);c(),w(e.productsRs.value().data),c(2),_(e.paginationData()?3:-1)}}function Ie(t,i){if(t&1&&g(0,Me,6,0,"div",54)(1,Te,4,1),t&2){let e,n=u();_(((e=n.productsRs.value())==null?null:e.items)===0?0:1)}}function De(t,i){if(t&1&&(r(0,"li")(1,"a",63),o(2),a()()),t&2){let e,n=i.$implicit,l=u(2);c(),U("active",((e=l.currentCategory())==null?null:e.id)===n.id),m("routerLink",J(4,he,n.slug)),c(),S(" ",n.name," ")}}function Re(t,i){if(t&1&&P(0,De,3,6,"li",null,fe),t&2){let e=u();w(e.categoriesListRs.value().data)}}function Fe(t,i){t&1&&(r(0,"span",71),o(1,"Sin Stock"),a())}function Ne(t,i){if(t&1&&(r(0,"span",77),o(1),B(2,"currency"),a()),t&2){let e=u();c(),v(T(2,1,e.regular_price))}}function Qe(t,i){if(t&1){let e=C();r(0,"div",66)(1,"div",69),s(2,"img",70),g(3,Fe,2,0,"span",71),a(),r(4,"div",72)(5,"div",73)(6,"h3",74),o(7),a(),r(8,"div",75)(9,"span",76),o(10),B(11,"currency"),a(),g(12,Ne,3,3,"span",77),a(),r(13,"p",78),o(14),a()(),r(15,"button",79),p("click",function(){let l=b(e),d=u(2);return f(d.addToCart(l))}),s(16,"i",80),o(17," Agregar al Carrito "),a()()()}if(t&2){let e=i;c(2),m("src",e.image_url||"assets/img/no-image.png",$)("alt",e.name),c(),_((e.stock??0)<=0?3:-1),c(4),v(e.name),c(3),v(T(11,7,e.price)),c(2),_(e.regular_price&&e.regular_price>e.price?12:-1),c(2),v(e.description||"Sin descripci\xF3n disponible.")}}function qe(t,i){if(t&1){let e=C();r(0,"div",51)(1,"div",64)(2,"button",65),p("click",function(){b(e);let l=u();return f(l.closeQuickView())}),o(3,"\u2715"),a(),g(4,Qe,18,9,"div",66),a(),r(5,"form",67)(6,"button",68),p("click",function(){b(e);let l=u();return f(l.closeQuickView())}),o(7,"close"),a()()()}if(t&2){let e,n=u();c(4),_((e=n.quickViewProduct())?4:-1,e)}}var R=class t{route=y(X);router=y(Y);categoryService=y(te);productService=y(ye);paginationService=y(ge);cartService=y(ie);currentCategory=x(null);minPriceInput=x(null);maxPriceInput=x(null);categoriesListRs=D({stream:()=>this.categoryService.getFeaturedData()});breadcrumbItems=I(()=>{let i=this.currentCategory(),e=[{label:"Inicio",url:"/"},{label:"Productos",url:"/productos"}];return i?e.push({label:i.name}):e.push({label:"Categor\xEDa"}),e});searchQuery=x("");searchSubject=new N;constructor(){this.searchSubject.pipe(O(400),L()).subscribe(i=>{this.updateQueryParams({q:i||null,_page:1})})}updateQueryParams(i){this.router.navigate([],{relativeTo:this.route,queryParams:i,queryParamsHandling:"merge"})}onSearch(i){this.searchQuery.set(i),this.searchSubject.next(i)}productsRs=D({stream:()=>j([this.route.params.pipe(q(({categorySlug:i})=>i)),this.route.queryParams]).pipe(V(([i,e])=>this.categoryService.getDataBySlug(i).pipe(A(n=>{this.currentCategory.set(n.data?.[0]||null)}),V(n=>{let l=n.data?.[0]?.id;if(!l)return Q({first:1,prev:null,next:null,last:1,pages:1,items:0,data:[]});let d=+e._page||1,h=e._sort,ve=e._order,k=e.min_price?+e.min_price:void 0,E=e.max_price?+e.max_price:void 0,M=e.q||void 0;return this.searchQuery()!==(M||"")&&this.searchQuery.set(M||""),this.minPriceInput()===null&&k&&this.minPriceInput.set(k),this.maxPriceInput()===null&&E&&this.maxPriceInput.set(E),this.productService.getData({category_id:l,_page:d,_sort:h,_order:ve,min_price:k,max_price:E,q:M})}))))});paginationData=I(()=>{let i=this.productsRs.value();if(!i)return null;let l=i,{data:e}=l;return F(l,["data"])});isMobileFiltersOpen=x(!1);isQuickViewOpen=x(!1);quickViewProduct=x(null);toggleMobileFilters(){this.isMobileFiltersOpen.update(i=>!i)}openQuickView(i){this.quickViewProduct.set(i),this.isQuickViewOpen.set(!0)}closeQuickView(){this.isQuickViewOpen.set(!1),this.quickViewProduct.set(null)}addToCart(i){this.cartService.addToCart(i),this.closeQuickView()}applyPriceFilter(){this.router.navigate([],{relativeTo:this.route,queryParams:{min_price:this.minPriceInput(),max_price:this.maxPriceInput(),_page:1},queryParamsHandling:"merge"}),this.isMobileFiltersOpen.set(!1)}setSort(i,e="asc"){this.router.navigate([],{relativeTo:this.route,queryParams:{_sort:i,_order:e,_page:1},queryParamsHandling:"merge"})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=z({type:t,selectors:[["products-by-category-page"]],decls:80,vars:12,consts:[[1,"drawer","lg:drawer-open"],["id","cat-filters-drawer","type","checkbox",1,"drawer-toggle"],[1,"drawer-content","flex","flex-col","min-h-screen","bg-gray-50","dark:bg-gray-900","transition-colors","duration-300"],[1,"relative","bg-gray-900","text-white","overflow-hidden","isolate"],[1,"absolute","inset-0","bg-linear-to-br","from-indigo-900","via-blue-950","to-slate-900","opacity-90","pointer-events-none"],[1,"absolute","-bottom-32","-left-32","w-96","h-96","bg-indigo-600","rounded-full","mix-blend-overlay","filter","blur-3xl","opacity-20","pointer-events-none"],[1,"absolute","top-0","right-0","w-64","h-64","bg-teal-500","rounded-full","mix-blend-overlay","filter","blur-3xl","opacity-10","pointer-events-none"],[1,"relative","container","mx-auto","px-4","py-8","lg:py-12","text-center"],[1,"flex","justify-center","mb-6"],["classes","justify-center !text-indigo-200","activeClasses","!text-white",3,"items"],[1,"text-4xl","md:text-5xl","font-black","mb-6","tracking-tight","animate-fade-in-up"],[1,"text-lg","md:text-xl","text-gray-300","max-w-2xl","mx-auto","mb-8","font-light"],[1,"flex-1","container","mx-auto","px-4","py-12"],[1,"flex","flex-col","sm:flex-row","justify-between","items-center","mb-8","pb-4","border-b","border-gray-200","dark:border-gray-800","gap-4"],[1,"w-full","sm:w-auto","flex","flex-col","sm:flex-row","items-start","sm:items-center","gap-4"],[1,"text-gray-600","dark:text-gray-400","font-medium","text-sm"],["for","cat-filters-drawer",1,"btn","btn-sm","btn-outline","rounded-full","w-full","sm:w-auto","lg:hidden"],[1,"fas","fa-sliders-h","mr-2"],[1,"flex","items-center","gap-3"],[1,"relative","hidden","md:block"],[1,"fas","fa-search","absolute","left-3","top-1/2","-translate-y-1/2","text-gray-400"],["type","text",1,"input","input-bordered","input-sm","rounded-full","pl-9","w-64","focus:ring-2","focus:ring-indigo-500","bg-white","dark:bg-gray-800",3,"input","defaultValue","placeholder"],[1,"select","select-bordered","select-sm","rounded-full","bg-white","dark:bg-gray-800","border-gray-300","dark:border-gray-700","min-w-[150px]",3,"change"],["value","created_at|desc"],["value","price|asc"],["value","price|desc"],[1,"md:hidden","mb-6"],[1,"relative"],["type","text","placeholder","Buscar en esta categor\xEDa...",1,"input","input-bordered","w-full","rounded-2xl","pl-10",3,"input","defaultValue"],[1,"min-h-[400px]"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","xl:grid-cols-3","gap-6"],[3,"message"],[1,"drawer-side","z-40"],["for","cat-filters-drawer","aria-label","close sidebar",1,"drawer-overlay","backdrop-blur-sm"],[1,"menu","p-6","w-80","min-h-full","bg-white","dark:bg-gray-800","text-base-content","border-r","border-gray-200","dark:border-gray-700"],[1,"flex","justify-between","items-center","mb-8"],[1,"text-xl","font-bold","text-gray-900","dark:text-white"],["for","cat-filters-drawer",1,"btn","btn-sm","btn-circle","btn-ghost","cursor-pointer"],[1,"space-y-8"],[1,"font-bold","text-gray-900","dark:text-white","mb-4","flex","items-center","gap-2"],[1,"fas","fa-tag","text-indigo-500"],[1,"flex","flex-col","gap-3"],[1,"form-control","w-full"],[1,"label","text-xs","text-gray-500"],[1,"absolute","left-3","top-3","text-gray-400"],["type","number","placeholder","0",1,"input","input-bordered","w-full","pl-8","rounded-xl",3,"ngModelChange","ngModel"],["type","number","placeholder","Max",1,"input","input-bordered","w-full","pl-8","rounded-xl",3,"ngModelChange","ngModel"],[1,"btn","btn-primary","w-full","mt-2","rounded-xl",3,"click"],[1,"fas","fa-layer-group","text-indigo-500"],[1,"max-h-60","overflow-y-auto","custom-scrollbar"],[1,"space-y-1"],[1,"modal","modal-open","z-50","animate-fade-in"],[1,"text-gray-900","dark:text-white","font-bold"],[1,"animate-pulse","bg-gray-200","dark:bg-gray-800","rounded-3xl","h-[400px]","w-full"],[1,"text-center","py-20","bg-white","dark:bg-gray-800","rounded-3xl","shadow-sm","border","border-gray-100","dark:border-gray-700"],[1,"fas","fa-search","text-4xl","text-gray-300","mb-4"],[1,"font-bold","text-lg","text-gray-900","dark:text-white"],[1,"btn","btn-link","text-indigo-600",3,"click"],[1,"grid","grid-cols-2","sm:grid-cols-2","lg:grid-cols-3","xl:grid-cols-3","gap-2","sm:gap-6"],[3,"product","isPriority"],[1,"mt-12","flex","justify-center"],[3,"quickView","product","isPriority"],[3,"pages","currentPage"],[1,"block","py-2","px-3","rounded-lg","hover:bg-gray-100","dark:hover:bg-gray-700","transition","text-sm",3,"routerLink"],[1,"modal-box","relative","max-w-4xl","bg-white","dark:bg-gray-800","rounded-3xl","p-0","overflow-hidden","shadow-2xl"],[1,"btn","btn-sm","btn-circle","btn-ghost","absolute","right-4","top-4","z-10","bg-white/50","backdrop-blur-md",3,"click"],[1,"flex","flex-col","md:flex-row","h-full"],["method","dialog",1,"modal-backdrop","bg-black/50","backdrop-blur-sm"],[3,"click"],[1,"w-full","md:w-1/2","bg-gray-50","dark:bg-gray-700/30","p-8","flex","items-center","justify-center","relative"],[1,"max-h-[300px]","object-contain","drop-shadow-xl",3,"src","alt"],[1,"absolute","top-8","left-8","badge","badge-error","text-white","font-bold","p-3"],[1,"w-full","md:w-1/2","p-8","flex","flex-col"],[1,"mb-auto"],[1,"font-black","text-2xl","md:text-3xl","mb-2","text-gray-900","dark:text-white","leading-tight"],[1,"flex","items-baseline","gap-3","mb-6"],[1,"text-4xl","font-bold","text-indigo-600","dark:text-indigo-400"],[1,"text-lg","text-gray-400","line-through"],[1,"text-gray-600","dark:text-gray-300","mb-6","leading-relaxed"],[1,"btn","btn-primary","btn-lg","w-full","rounded-2xl","shadow-xl","shadow-indigo-600/30","gap-3",3,"click"],[1,"fas","fa-shopping-cart"]],template:function(e,n){if(e&1&&(r(0,"div",0),s(1,"input",1),r(2,"div",2)(3,"header",3),s(4,"div",4)(5,"div",5)(6,"div",6),r(7,"div",7)(8,"div",8),s(9,"app-breadcrumbs",9),a(),r(10,"h1",10),o(11),a(),r(12,"p",11),o(13),a()()(),r(14,"div",12)(15,"div",13)(16,"div",14)(17,"div",15),g(18,Pe,4,1)(19,we,1,0),a(),r(20,"label",16),s(21,"i",17),o(22," Filtros "),a()(),r(23,"div",18)(24,"div",19),s(25,"i",20),r(26,"input",21),p("input",function(d){return n.onSearch(d.target.value)}),a()(),r(27,"select",22),p("change",function(d){return n.setSort(d.target.value.split("|")[0],d.target.value.split("|")[1])}),r(28,"option",23),o(29,"M\xE1s Recientes"),a(),r(30,"option",24),o(31,"Precio: Menor a Mayor"),a(),r(32,"option",25),o(33,"Precio: Mayor a Menor"),a()()()(),r(34,"div",26)(35,"div",27),s(36,"i",20),r(37,"input",28),p("input",function(d){return n.onSearch(d.target.value)}),a()()(),r(38,"main",29),g(39,ke,3,1,"div",30)(40,Ee,1,1,"is-error",31)(41,Ie,2,1),a()()(),r(42,"div",32),s(43,"label",33),r(44,"aside",34)(45,"div",35)(46,"h3",36),o(47,"Filtros"),a(),r(48,"label",37),o(49,"\u2715"),a()(),r(50,"div",38)(51,"div")(52,"h4",39),s(53,"i",40),o(54," Precio "),a(),r(55,"div",41)(56,"div",42)(57,"label",43),o(58,"M\xEDnimo"),a(),r(59,"div",27)(60,"span",44),o(61,"$"),a(),r(62,"input",45),p("ngModelChange",function(d){return n.minPriceInput.set(d)}),a()()(),r(63,"div",42)(64,"label",43),o(65,"M\xE1ximo"),a(),r(66,"div",27)(67,"span",44),o(68,"$"),a(),r(69,"input",46),p("ngModelChange",function(d){return n.maxPriceInput.set(d)}),a()()(),r(70,"button",47),p("click",function(){return n.applyPriceFilter()}),o(71," Aplicar "),a()()(),r(72,"div")(73,"h4",39),s(74,"i",48),o(75," Otras Secciones "),a(),r(76,"div",49)(77,"ul",50),g(78,Re,2,0),a()()()()()()(),g(79,qe,8,1,"div",51)),e&2){let l,d,h;c(9),m("items",n.breadcrumbItems()),c(2),S(" ",((l=n.currentCategory())==null?null:l.name)||"Explorando Categor\xEDa"," "),c(2),S(" ",((d=n.currentCategory())==null?null:d.description)||"Encontr\xE1 los mejores productos de esta secci\xF3n con calidad garantizada."," "),c(5),_(n.productsRs.value()?18:19),c(8),m("defaultValue",n.searchQuery())("placeholder","Buscar en "+(((h=n.currentCategory())==null?null:h.name)||"esta secci\xF3n")+"..."),c(11),m("defaultValue",n.searchQuery()),c(2),_(n.productsRs.isLoading()?39:n.productsRs.error()?40:n.productsRs.value()?41:-1),c(23),m("ngModel",n.minPriceInput()),c(7),m("ngModel",n.maxPriceInput()),c(9),_(n.categoriesListRs.value()?78:-1),c(),_(n.isQuickViewOpen()?79:-1)}},dependencies:[W,xe,be,_e,ee,Z,pe,ce,se,ue,re,de,ne,ae,le,oe,me,K],encapsulation:2,changeDetection:0})},ct=R;export{R as ProductsByCategoryPage,ct as default};
