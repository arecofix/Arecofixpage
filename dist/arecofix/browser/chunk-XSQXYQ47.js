import{a as I}from"./chunk-MSD3KBTG.js";import"./chunk-HWKWYSDO.js";import{h as P}from"./chunk-YWFIYZRP.js";import"./chunk-HLAW74BB.js";import"./chunk-T7AXESXA.js";import{r as A}from"./chunk-I5WECENP.js";import{Ab as C,Bb as v,Cb as i,Db as a,Eb as c,Kb as h,Ob as S,Qb as m,Wa as r,Wb as y,Y as g,Yb as o,Zb as d,_b as E,ba as p,ca as u,ib as f,kc as w,oa as l,vb as b,wb as x,zb as _}from"./chunk-4GKTJ7DD.js";import"./chunk-VOSPIT4N.js";var N=t=>["/admin/categories",t],M=(t,n)=>n.id;function F(t,n){t&1&&(i(0,"tr")(1,"td",8),o(2,"Cargando..."),a()())}function L(t,n){t&1&&(i(0,"tr")(1,"td",8),o(2,"No hay categor\xEDas registradas."),a()())}function O(t,n){if(t&1){let e=h();i(0,"tr",9)(1,"td")(2,"div",10),o(3),a(),i(4,"div",11),o(5),a()(),i(6,"td")(7,"span",12),o(8),a()(),i(9,"td")(10,"button",13),S("click",function(){let D=p(e).$implicit,T=m(2);return u(T.toggleStatus(D))}),o(11),a()(),i(12,"td")(13,"a",14),c(14,"i",15),a()()()}if(t&2){let e=n.$implicit;r(3),d(e.name),r(2),d(e.slug),r(3),d(e.type),r(2),y("badge-success",e.is_active)("badge-error",!e.is_active),r(),E(" ",e.is_active?"Activo":"Inactivo"," "),r(2),v("routerLink",w(9,N,e.id))}}function V(t,n){if(t&1&&_(0,O,15,11,"tr",9,M),t&2){let e=m();C(e.categories())}}var k=class t{auth=g(I);categories=l([]);loading=l(!0);async ngOnInit(){await this.loadCategories()}async loadCategories(){this.loading.set(!0);let n=this.auth.getSupabaseClient(),{data:e,error:s}=await n.from("categories").select("*").order("created_at",{ascending:!1});e&&this.categories.set(e),this.loading.set(!1)}async toggleStatus(n){let e=this.auth.getSupabaseClient(),{error:s}=await e.from("categories").update({is_active:!n.is_active}).eq("id",n.id);s||await this.loadCategories()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=f({type:t,selectors:[["app-admin-categories-page"]],decls:23,vars:1,consts:[[1,"flex","justify-between","items-center","mb-6"],[1,"text-2xl","font-bold","text-green-600"],["routerLink","/admin/categories/new",1,"btn","btn-primary"],[1,"fas","fa-plus","mr-2"],[1,"bg-base-100","rounded-lg","shadow","overflow-hidden","text-base-content"],[1,"overflow-x-auto"],[1,"table","w-full"],[1,"text-base-content","font-bold"],["colspan","4",1,"text-center","py-4","text-base-content/70"],[1,"hover:bg-base-200/50"],[1,"font-bold"],[1,"text-sm","opacity-50"],[1,"badge","badge-ghost"],[1,"badge",3,"click"],[1,"btn","btn-sm","btn-ghost","hover:bg-base-300",3,"routerLink"],[1,"fas","fa-edit"]],template:function(e,s){e&1&&(i(0,"div",0)(1,"h1",1),o(2,"Categor\xEDas"),a(),i(3,"a",2),c(4,"i",3),o(5," Nueva Categor\xEDa "),a()(),i(6,"div",4)(7,"div",5)(8,"table",6)(9,"thead")(10,"tr",7)(11,"th"),o(12,"Nombre"),a(),i(13,"th"),o(14,"Tipo"),a(),i(15,"th"),o(16,"Estado"),a(),i(17,"th"),o(18,"Acciones"),a()()(),i(19,"tbody"),b(20,F,3,0,"tr")(21,L,3,0,"tr")(22,V,2,0),a()()()()),e&2&&(r(20),x(s.loading()?20:s.categories().length===0?21:22))},dependencies:[A,P],encapsulation:2})};export{k as AdminCategoriesPage};
