import{a as w}from"./chunk-BEDAP6MF.js";import"./chunk-FLAEXP3O.js";import"./chunk-T7ROU62R.js";import{A as P,g as C,l as A}from"./chunk-T7HZBI4H.js";import{Ab as i,Bb as r,Nb as E,Oa as f,Ta as l,Vb as n,W as c,Wb as m,Yb as b,fb as g,hc as _,lc as h,ma as s,mc as S,sb as u,tb as x,wb as v,xb as y,yb as p,zb as t}from"./chunk-NLTFPZ75.js";import"./chunk-7CGTOI24.js";var k=a=>["/admin/employees",a],N=(a,o)=>o.id;function T(a,o){a&1&&(t(0,"tr")(1,"td",8),n(2,"Cargando..."),i()())}function D(a,o){a&1&&(t(0,"tr")(1,"td",8),n(2,"No hay empleados registrados."),i()())}function M(a,o){if(a&1&&(t(0,"tr")(1,"td")(2,"div",9)(3,"div",10)(4,"div",11),r(5,"img",12),i()(),t(6,"div")(7,"div",13),n(8),i(),t(9,"div",14),n(10),i()()()(),t(11,"td")(12,"div",15),n(13),h(14,"uppercase"),i(),t(15,"div",16),n(16),i()(),t(17,"td")(18,"div",17),n(19),i()(),t(20,"td")(21,"span",18),n(22,"Activo"),i()(),t(23,"td")(24,"a",19),r(25,"i",20),i()()()),a&2){let e=o.$implicit;l(5),p("src",e.avatar_url||"https://ui-avatars.com/api/?name="+e.first_name+"+"+e.last_name,f),l(3),b("",e.first_name," ",e.last_name),l(2),m(e.email),l(3),m(S(14,8,e.role)),l(3),m(e.job_title||"Sin cargo definido"),l(3),m(e.phone||"N/A"),l(5),p("routerLink",_(10,k,e.id))}}function L(a,o){if(a&1&&v(0,M,26,12,"tr",null,N),a&2){let e=E();y(e.employees())}}var I=class a{auth=c(w);employees=s([]);loading=s(!0);async ngOnInit(){await this.loadEmployees()}async loadEmployees(){this.loading.set(!0);let o=this.auth.getSupabaseClient(),{data:e,error:d}=await o.from("profiles").select("*").in("role",["admin","staff"]).order("created_at",{ascending:!1});e&&this.employees.set(e),this.loading.set(!1)}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=g({type:a,selectors:[["app-admin-employees-page"]],decls:25,vars:1,consts:[[1,"flex","justify-between","items-center","mb-6"],[1,"text-2xl","font-bold","text-green-600"],["routerLink","/admin/employees/new",1,"btn","btn-primary"],[1,"fas","fa-plus","mr-2"],[1,"bg-base-100","rounded-lg","shadow","overflow-hidden","text-base-content"],[1,"overflow-x-auto"],[1,"table","w-full"],[1,"text-base-content"],["colspan","5",1,"text-center","py-4"],[1,"flex","items-center","gap-3"],[1,"avatar"],[1,"mask","mask-squircle","w-12","h-12"],["alt","Avatar",3,"src"],[1,"font-bold"],[1,"text-sm","opacity-50"],[1,"badge","badge-primary","badge-outline"],[1,"text-xs","mt-1"],[1,"text-sm"],[1,"badge","badge-success"],[1,"btn","btn-sm","btn-ghost",3,"routerLink"],[1,"fas","fa-edit"]],template:function(e,d){e&1&&(t(0,"div",0)(1,"h1",1),n(2,"Empleados"),i(),t(3,"a",2),r(4,"i",3),n(5," Nuevo Empleado "),i()(),t(6,"div",4)(7,"div",5)(8,"table",6)(9,"thead")(10,"tr",7)(11,"th"),n(12,"Empleado"),i(),t(13,"th"),n(14,"Cargo / Rol"),i(),t(15,"th"),n(16,"Contacto"),i(),t(17,"th"),n(18,"Estado"),i(),t(19,"th"),n(20,"Acciones"),i()()(),t(21,"tbody"),u(22,T,3,0,"tr")(23,D,3,0,"tr")(24,L,2,0),i()()()()),e&2&&(l(22),x(d.loading()?22:d.employees().length===0?23:24))},dependencies:[A,P,C],encapsulation:2})};export{I as AdminEmployeesPage};
