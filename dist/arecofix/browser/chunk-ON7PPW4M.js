import{a as k}from"./chunk-FDEIW4RV.js";import"./chunk-KXBHGC7O.js";import{e as T}from"./chunk-SJUHAIWY.js";import"./chunk-2IHNZNBZ.js";import{o as P}from"./chunk-NGBKTTVY.js";import{$ as f,Ca as x,Db as w,Fa as o,Fb as r,Gb as u,Hb as E,Pb as A,Ta as v,Tb as B,W as _,aa as b,eb as c,fb as p,ib as h,jb as C,kb as g,lb as n,ma as m,mb as i,nb as l,rb as y,vb as S,xb as s}from"./chunk-CVZCBU36.js";import"./chunk-VOSPIT4N.js";var F=t=>["/admin/brands",t],D=(t,a)=>a.id;function L(t,a){t&1&&(n(0,"tr")(1,"td",7),r(2,"Cargando..."),i()())}function j(t,a){t&1&&(n(0,"tr")(1,"td",7),r(2,"No hay marcas registradas."),i()())}function $(t,a){if(t&1&&l(0,"img",8),t&2){let e=s().$implicit;g("alt",A(e.name))("src",e.logo_url,x)}}function O(t,a){t&1&&(n(0,"div",9),l(1,"i",15),i())}function V(t,a){if(t&1){let e=y();n(0,"tr")(1,"td"),c(2,$,1,3,"img",8)(3,O,2,0,"div",9),i(),n(4,"td")(5,"div",10),r(6),i(),n(7,"div",11),r(8),i()(),n(9,"td")(10,"button",12),S("click",function(){let M=f(e).$implicit,N=s(2);return b(N.toggleStatus(M))}),r(11),i()(),n(12,"td")(13,"a",13),l(14,"i",14),i()()()}if(t&2){let e=a.$implicit;o(2),p(e.logo_url?2:3),o(4),u(e.name),o(2),u(e.slug),o(2),w("badge-success",e.is_active)("badge-error",!e.is_active),o(),E(" ",e.is_active?"Activo":"Inactivo"," "),o(2),g("routerLink",B(9,F,e.id))}}function q(t,a){if(t&1&&h(0,V,15,11,"tr",null,D),t&2){let e=s();C(e.brands())}}var I=class t{auth=_(k);brands=m([]);loading=m(!0);async ngOnInit(){await this.loadBrands()}async loadBrands(){this.loading.set(!0);let a=this.auth.getSupabaseClient(),{data:e,error:d}=await a.from("brands").select("*").order("name");e&&this.brands.set(e),this.loading.set(!1)}async toggleStatus(a){let e=this.auth.getSupabaseClient(),{error:d}=await e.from("brands").update({is_active:!a.is_active}).eq("id",a.id);d||await this.loadBrands()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=v({type:t,selectors:[["app-admin-brands-page"]],decls:23,vars:1,consts:[[1,"flex","justify-between","items-center","mb-6"],[1,"text-2xl","font-bold","text-gray-800"],["routerLink","/admin/brands/new",1,"btn","btn-primary"],[1,"fas","fa-plus","mr-2"],[1,"bg-white","rounded-lg","shadow","overflow-hidden"],[1,"overflow-x-auto"],[1,"table","w-full"],["colspan","4",1,"text-center","py-4"],[1,"w-10","h-10","object-contain",3,"src","alt"],[1,"w-10","h-10","bg-gray-100","rounded","flex","items-center","justify-center","text-gray-400"],[1,"font-bold"],[1,"text-sm","opacity-50"],[1,"badge",3,"click"],[1,"btn","btn-sm","btn-ghost",3,"routerLink"],[1,"fas","fa-edit"],[1,"fas","fa-image"]],template:function(e,d){e&1&&(n(0,"div",0)(1,"h1",1),r(2,"Marcas"),i(),n(3,"a",2),l(4,"i",3),r(5," Nueva Marca "),i()(),n(6,"div",4)(7,"div",5)(8,"table",6)(9,"thead")(10,"tr")(11,"th"),r(12,"Logo"),i(),n(13,"th"),r(14,"Nombre"),i(),n(15,"th"),r(16,"Estado"),i(),n(17,"th"),r(18,"Acciones"),i()()(),n(19,"tbody"),c(20,L,3,0,"tr")(21,j,3,0,"tr")(22,q,2,0),i()()()()),e&2&&(o(20),p(d.loading()?20:d.brands().length===0?21:22))},dependencies:[P,T],encapsulation:2})};export{I as AdminBrandsPage};
