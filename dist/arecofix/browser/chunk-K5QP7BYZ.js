import{a as m}from"./chunk-L5YRWAZF.js";import{a as _}from"./chunk-4FNFMYN4.js";import{d as I,j as x}from"./chunk-4WX2KV2B.js";import"./chunk-QBWIJBVM.js";import"./chunk-BCXBSHNT.js";import{n as E,o as y}from"./chunk-YHPCNF66.js";import{Fa as d,Fb as i,Gb as o,Ta as b,W as v,Wb as S,Xb as h,eb as u,fb as p,lb as e,ma as r,mb as t,nb as a,xb as f}from"./chunk-YBYZLFPG.js";import"./chunk-VOSPIT4N.js";function N(s,l){s&1&&(e(0,"div",2),a(1,"span",3),t())}function T(s,l){if(s&1&&(a(0,"div",38),e(1,"div",39)(2,"div",40)(3,"span",41),a(4,"i",42),e(5,"span"),i(6,"Sesi\xF3n Actual"),t()(),e(7,"span",43),i(8),t()(),e(9,"div",40)(10,"span",41),a(11,"i",44),e(12,"span"),i(13,"Usuario"),t()(),e(14,"span",45),i(15),t()(),e(16,"a",46),a(17,"i",47),i(18," Ver Dashboard Completo "),t()()),s&2){let n=f(2);d(8),o(n.analyticsStats().sessionId?"Activa":"N/A"),d(7),o(n.analyticsStats().distinctId||"An\xF3nimo")}}function k(s,l){s&1&&(e(0,"div",37),a(1,"i",48),e(2,"span"),i(3,"PostHog no est\xE1 inicializado correctamente"),t()())}function M(s,l){if(s&1&&(e(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7),a(4,"i",8),t(),e(5,"div",9),i(6,"Usuarios"),t(),e(7,"div",10),i(8),t(),e(9,"div",11),i(10,"Registrados"),t()()(),e(11,"div",5)(12,"div",6)(13,"div",12),a(14,"i",13),t(),e(15,"div",9),i(16,"Productos"),t(),e(17,"div",14),i(18),t(),e(19,"div",11),i(20,"En cat\xE1logo"),t()()(),e(21,"div",5)(22,"div",6)(23,"div",15),a(24,"i",16),t(),e(25,"div",9),i(26,"Ventas"),t(),e(27,"div",17),i(28),t(),e(29,"div",11),i(30,"Total realizadas"),t()()(),e(31,"div",5)(32,"div",6)(33,"div",18),a(34,"i",19),t(),e(35,"div",9),i(36,"Ingresos"),t(),e(37,"div",20),i(38),S(39,"currency"),t(),e(40,"div",11),i(41,"Total facturado"),t()()()(),e(42,"div",21)(43,"div",22)(44,"div",23)(45,"h2",24),i(46,"Acciones R\xE1pidas"),t(),e(47,"div",25)(48,"a",26),a(49,"i",27),i(50," Nuevo Producto "),t(),e(51,"a",28),a(52,"i",29),i(53," Nueva Venta "),t(),e(54,"a",30),a(55,"i",31),i(56," Gestionar Usuarios "),t(),e(57,"a",32),a(58,"i",33),i(59," Taller "),t()()()(),e(60,"div",22)(61,"div",23)(62,"h2",24),i(63,"Analytics & Sistema"),t(),e(64,"div",34)(65,"div",35)(66,"span"),i(67,"Base de Datos"),t(),e(68,"span",36),i(69,"Conectado"),t()(),e(70,"div",35)(71,"span"),i(72,"Analytics (PostHog)"),t(),e(73,"span",36),i(74),t()(),u(75,T,19,2)(76,k,4,0,"div",37),t()()()()),s&2){let n=f();d(8),o(n.stats().users),d(10),o(n.stats().products),d(10),o(n.stats().sales),d(10),o(h(39,6,n.stats().revenue)),d(36),o(n.posthogStatus()),d(),p(n.analyticsStats().enabled?75:76)}}var C=class s{auth=v(_);stats=r({users:0,products:0,sales:0,revenue:0},{});analyticsStats=r({enabled:!1,sessionId:"",distinctId:""},{});loading=r(!0,{});async ngOnInit(){await this.loadStats(),this.loadAnalyticsInfo()}async loadStats(){this.loading.set(!0);let l=this.auth.getSupabaseClient();try{let{count:n}=await l.from("profiles").select("*",{count:"exact",head:!0}),{count:c}=await l.from("products").select("*",{count:"exact",head:!0}),{data:g}=await l.from("sales").select("total_amount"),A=g?.length||0,D=g?.reduce((w,P)=>w+(P.total_amount||0),0)||0;this.stats.set({users:n||0,products:c||0,sales:A,revenue:D})}catch(n){console.error("Error loading dashboard stats:",n)}finally{this.loading.set(!1)}}loadAnalyticsInfo(){try{x.posthogKey&&x.posthogKey!==""&&m?this.analyticsStats.set({enabled:!0,sessionId:m.get_session_id()||"",distinctId:m.get_distinct_id()||"An\xF3nimo"}):this.analyticsStats.set({enabled:!1,sessionId:"",distinctId:""})}catch(l){console.error("Error loading analytics info:",l),this.analyticsStats.set({enabled:!1,sessionId:"",distinctId:""})}}posthogStatus(){return this.analyticsStats().enabled?"Activo":"Inactivo"}static \u0275fac=function(n){return new(n||s)};static \u0275cmp=b({type:s,selectors:[["app-admin-dashboard-page"]],decls:5,vars:1,consts:[[1,"p-6"],[1,"text-2xl","font-bold","mb-6","text-gray-800"],[1,"flex","justify-center","py-12"],[1,"loading","loading-spinner","loading-lg"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-6","mb-8"],[1,"stats","shadow","bg-white"],[1,"stat"],[1,"stat-figure","text-primary"],[1,"fas","fa-users","text-3xl"],[1,"stat-title"],[1,"stat-value","text-primary"],[1,"stat-desc"],[1,"stat-figure","text-secondary"],[1,"fas","fa-box","text-3xl"],[1,"stat-value","text-secondary"],[1,"stat-figure","text-accent"],[1,"fas","fa-shopping-cart","text-3xl"],[1,"stat-value","text-accent"],[1,"stat-figure","text-success"],[1,"fas","fa-dollar-sign","text-3xl"],[1,"stat-value","text-success"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-6"],[1,"card","bg-white","shadow"],[1,"card-body"],[1,"card-title","mb-4"],[1,"grid","grid-cols-2","gap-4"],["routerLink","/admin/products/new",1,"btn","btn-outline","btn-primary"],[1,"fas","fa-plus","mr-2"],["routerLink","/admin/sales",1,"btn","btn-outline","btn-accent"],[1,"fas","fa-cash-register","mr-2"],["routerLink","/admin/users",1,"btn","btn-outline"],[1,"fas","fa-user-plus","mr-2"],["routerLink","/admin/repairs",1,"btn","btn-outline","btn-secondary"],[1,"fas","fa-tools","mr-2"],[1,"space-y-4"],[1,"flex","justify-between","items-center"],[1,"badge","badge-success"],[1,"alert","alert-warning","text-xs","mt-4"],[1,"divider","my-2"],[1,"space-y-3"],[1,"flex","justify-between","items-center","text-sm"],[1,"flex","items-center","gap-2"],[1,"fas","fa-eye","text-info"],[1,"font-semibold"],[1,"fas","fa-user","text-primary"],[1,"font-semibold","text-xs"],["href","https://us.posthog.com/project/253677/dashboard/791256","target","_blank",1,"btn","btn-sm","btn-outline","btn-info","w-full","mt-2"],[1,"fas","fa-chart-line","mr-2"],[1,"fas","fa-exclamation-triangle"]],template:function(n,c){n&1&&(e(0,"div",0)(1,"h1",1),i(2,"Panel de Control"),t(),u(3,N,2,0,"div",2)(4,M,77,8),t()),n&2&&(d(3),p(c.loading()?3:4))},dependencies:[y,I,E],encapsulation:2})};export{C as AdminDashboardPage};
